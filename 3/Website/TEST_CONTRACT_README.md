# 智能合约测试页面使用说明

## 概述
TestContractView.vue 是一个用于测试 RWA (Real World Assets) 智能合约部署和交互功能的测试页面。该页面模拟了 `interact.js` 和 `rwa_deploy.js` 脚本的功能。

## 功能特性

### 1. 合约部署测试
- **KYCRegistry**: KYC 注册表合约
- **LPT (Loan Principal Token)**: 贷款本金代币
- **LIT (Loan Interest Token)**: 贷款利息代币  
- **LoanIssuer**: 贷款发行者合约

### 2. 合约交互测试
- 创建贷款
- 铸造利息代币
- 用户赎回
- 结清贷款
- 余额查询

### 3. 实时状态监控
- 部署进度日志
- 交互测试日志
- 错误处理和成功提示
- 合约地址管理

## 访问方式

### 方法一：通过导航菜单
1. 启动开发服务器：`npm run dev`
2. 在浏览器中访问：`http://localhost:5173`
3. 点击顶部导航栏中的 "Test" 按钮

### 方法二：直接访问
在浏览器中直接访问：`http://localhost:5173/test-contract`

## 使用步骤

### 1. 连接钱包
- 点击 "连接钱包" 按钮
- 确保 MetaMask 已安装并解锁
- 选择要使用的账户

### 2. 部署合约
- 点击 "部署所有合约" 按钮
- 观察部署进度日志
- 部署完成后，合约地址会自动填充到交互测试区域

### 3. 测试合约交互
- 确保合约地址已正确填充
- 点击 "执行交互测试" 按钮
- 观察交互测试的详细日志

### 4. 查询余额
- 点击 "查询余额" 按钮
- 查看当前账户的代币余额

## 技术实现

### 前端组件
- **TestContractView.vue**: 主测试页面组件
- **contractTestService.js**: 模拟后端API服务
- 集成 `useWallet` composable 进行钱包管理

### 模拟功能
- 合约部署模拟
- 智能合约交互模拟
- 余额查询模拟
- 交易哈希生成模拟

### 响应式设计
- 支持桌面和移动设备
- 实时状态更新
- 错误处理和用户反馈

## 文件结构
```
Website/src/
├── views/core/
│   └── TestContractView.vue          # 测试页面组件
├── services/
│   └── contractTestService.js        # 测试服务
├── components/
│   └── AppHeader.vue                 # 导航组件（已添加测试链接）
└── router/
    └── index.ts                      # 路由配置
```

## 注意事项

1. **模拟环境**: 当前实现为模拟环境，不会进行真实的区块链交易
2. **钱包连接**: 需要 MetaMask 或其他 Web3 钱包
3. **网络支持**: 支持 Sepolia 测试网
4. **数据持久化**: 合约地址会保存在本地存储中

## 开发说明

### 添加真实后端集成
要连接真实的后端服务，需要：

1. 修改 `contractTestService.js` 中的 API 调用
2. 实现真实的合约部署和交互逻辑
3. 添加错误处理和重试机制
4. 集成真实的区块链网络

### 自定义测试场景
可以在 `contractTestService.js` 中添加更多测试场景：

```javascript
// 添加新的测试方法
async customTestScenario(params) {
  // 实现自定义测试逻辑
}
```

## 故障排除

### 常见问题
1. **钱包连接失败**: 检查 MetaMask 是否已安装和解锁
2. **页面加载错误**: 检查控制台错误信息
3. **合约地址无效**: 确保地址格式正确（0x开头，42个字符）

### 调试模式
在浏览器开发者工具中查看：
- 控制台日志
- 网络请求
- Vue 组件状态

## 更新日志

- **v1.0.0**: 初始版本，包含基本的合约部署和交互测试功能
- 支持模拟的 RWA 合约测试
- 集成钱包连接功能
- 响应式用户界面
