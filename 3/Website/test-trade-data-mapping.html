<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeProjectView æ•°æ®æ˜ å°„æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        .btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover { background-color: #0056b3; }
        .btn-success { background-color: #28a745; }
        .btn-success:hover { background-color: #1e7e34; }
        .data-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .data-panel {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
        }
        .field-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        .field-item:last-child {
            border-bottom: none;
        }
        .field-name {
            font-weight: bold;
            color: #333;
        }
        .field-value {
            color: #666;
            font-family: monospace;
        }
        .match { background-color: #d4edda; }
        .mismatch { background-color: #f8d7da; }
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ TradeProjectView æ•°æ®æ˜ å°„æ›´æ–°æµ‹è¯•</h1>
        
        <div class="test-section info">
            <h3>ğŸ“‹ æ›´æ–°æ¦‚è¿°</h3>
            <p><strong>ç›®æ ‡:</strong> æŒ‰ç…§ProjectsViewé¡µé¢çš„æ–¹å¼æ›´æ–°TradeProjectViewä¸­çš„é¡¹ç›®ä¿¡æ¯å¡ç‰‡ä¿¡æ¯æŠ“å–</p>
            <p><strong>ä¸»è¦æ”¹è¿›:</strong></p>
            <ul>
                <li>âœ… ç»Ÿä¸€æ•°æ®æ˜ å°„é€»è¾‘ï¼Œä¸ProjectsViewä¿æŒä¸€è‡´</li>
                <li>âœ… æ”¹è¿›å­—æ®µæ˜ å°„ï¼Œæ”¯æŒå¤šç§æ•°æ®æº</li>
                <li>âœ… ä¼˜åŒ–metricså¯¹è±¡åˆ›å»º</li>
                <li>âœ… å¢å¼ºé”™è¯¯å¤„ç†å’Œè°ƒè¯•æ—¥å¿—</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>ğŸ”„ æ•°æ®æ˜ å°„å¯¹æ¯”</h3>
            <div class="data-comparison">
                <div class="data-panel">
                    <h4>æ›´æ–°å‰ (åŸå§‹APIæ•°æ®)</h4>
                    <div class="field-item">
                        <span class="field-name">code</span>
                        <span class="field-value">rawData.code</span>
                    </div>
                    <div class="field-item">
                        <span class="field-name">name</span>
                        <span class="field-value">rawData.name</span>
                    </div>
                    <div class="field-item">
                        <span class="field-name">targetYield</span>
                        <span class="field-value">rawData.target_yield</span>
                    </div>
                    <div class="field-item">
                        <span class="field-name">loanAmount</span>
                        <span class="field-value">rawData.loan_amount</span>
                    </div>
                    <div class="field-item">
                        <span class="field-name">loanTerm</span>
                        <span class="field-value">rawData.loan_term</span>
                    </div>
                </div>
                
                <div class="data-panel">
                    <h4>æ›´æ–°å (æ˜ å°„åçš„æ•°æ®)</h4>
                    <div class="field-item match">
                        <span class="field-name">code</span>
                        <span class="field-value">rawData.code</span>
                    </div>
                    <div class="field-item match">
                        <span class="field-name">name</span>
                        <span class="field-value">rawData.name</span>
                    </div>
                    <div class="field-item match">
                        <span class="field-name">targetYield</span>
                        <span class="field-value">rawData.interestRate</span>
                    </div>
                    <div class="field-item match">
                        <span class="field-name">loanAmount</span>
                        <span class="field-value">AUD$format(rawData.loanAmount)</span>
                    </div>
                    <div class="field-item match">
                        <span class="field-name">loanTerm</span>
                        <span class="field-value">rawData.loanTermMonths + " months"</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š æ–°å¢å­—æ®µæ˜ å°„</h3>
            <div class="code-block">
// è®¤è´­ä¿¡æ¯
totalOffering: rawData.total_offering_token ? `AUD$${rawData.total_offering_token.toLocaleString()}` : 'AUD$0',
subscribed: rawData.subscribe_token ? `AUD$${rawData.subscribe_token.toLocaleString()}` : 'AUD$0',

// åŸå§‹æ•°å€¼ç”¨äºè®¡ç®—
totalOfferingRaw: rawData.total_offering_token || 0,
subscribedRaw: rawData.subscribe_token || 0,

// ç‰©ä¸šä¿¡æ¯
propertyLocation: rawData.propertyLocation,
propertyState: rawData.propertyState,
propertyType: rawData.propertyType,
propertyValue: rawData.propertyValue,

// è´·æ¬¾ä¿¡æ¯
loanType: rawData.loanType,
loanProduct: rawData.loanProduct,
loanAmount: rawData.loanAmount ? `AUD$${rawData.loanAmount.toLocaleString()}` : 'AUD$0',
loanTermMonths: rawData.loanTermMonths,
loanTerm: `${rawData.loanTermMonths || 12} months`,

// æ”¶ç›Šç‡ä¿¡æ¯
targetYield: rawData.interestRate,
interestRate: rawData.interestRate,
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ¯ Metricså¯¹è±¡åˆ›å»º</h3>
            <div class="code-block">
// åˆ›å»ºmetricså¯¹è±¡ï¼ˆä¸ProjectsViewä¿æŒä¸€è‡´ï¼‰
metrics: {
  currentElaraPrice: this.calculateTokenPrice(rawData),
  collateralPropertyValue: rawData.propertyValue || 'TBA',
  rentalIncome: this.calculateRentalIncome(rawData),
  targetLoanYield: `${rawData.interestRate || 6.0}% p.a.`
}
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ” æ”¹è¿›çš„è·å–æ–¹æ³•</h3>
            <div class="code-block">
// è·å–é¡¹ç›®ç›®æ ‡æ”¶ç›Šç‡ - æ”¯æŒå¤šç§æ•°æ®æº
getProjectTargetYield() {
  // ä¼˜å…ˆä» targetYield å­—æ®µè·å–
  if (this.projectData.targetYield) {
    return parseFloat(this.projectData.targetYield)
  }
  
  // ä» interestRate å­—æ®µè·å–
  if (this.projectData.interestRate) {
    return parseFloat(this.projectData.interestRate)
  }
  
  // ä» metrics.targetLoanYield è§£æ
  if (this.projectData.metrics?.targetLoanYield) {
    const match = this.projectData.metrics.targetLoanYield.match(/(\d+\.?\d*)/)
    return match ? parseFloat(match[1]) : null
  }
  
  return null
}

// è·å–é¡¹ç›®è´·æ¬¾æœŸé™ - æ”¯æŒæœˆæ•°å’Œå¤©æ•°è½¬æ¢
getProjectLoanTerm() {
  // ä¼˜å…ˆä» loanTermMonths å­—æ®µè·å–ï¼ˆæœˆæ•°ï¼‰
  if (this.projectData.loanTermMonths) {
    return this.projectData.loanTermMonths * 30.44 // è½¬æ¢ä¸ºå¤©æ•°
  }
  
  // ä» loanTerm å­—æ®µè·å–ï¼ˆå¤©æ•°ï¼‰
  if (this.projectData.loanTerm) {
    return parseFloat(this.projectData.loanTerm)
  }
  
  return null
}
            </div>
        </div>

        <div class="test-section success">
            <h3>âœ… ä¿®å¤çš„é—®é¢˜</h3>
            <ul>
                <li><strong>æ•°æ®ä¸€è‡´æ€§:</strong> ä¸ProjectsViewä½¿ç”¨ç›¸åŒçš„æ•°æ®æ˜ å°„é€»è¾‘</li>
                <li><strong>å­—æ®µæ˜ å°„:</strong> æ­£ç¡®æ˜ å°„APIå­—æ®µåˆ°å‰ç«¯æ˜¾ç¤ºå­—æ®µ</li>
                <li><strong>è®¡ç®—é€»è¾‘:</strong> ç»Ÿä¸€ä»£å¸ä»·æ ¼å’Œç§Ÿé‡‘æ”¶å…¥è®¡ç®—</li>
                <li><strong>é”™è¯¯å¤„ç†:</strong> å¢å¼ºè°ƒè¯•æ—¥å¿—å’Œé”™è¯¯æç¤º</li>
                <li><strong>æ•°æ®éªŒè¯:</strong> æ”¯æŒå¤šç§æ•°æ®æºå’Œæ ¼å¼</li>
            </ul>
        </div>

        <div class="test-section warning">
            <h3>ğŸš€ æµ‹è¯•æ­¥éª¤</h3>
            <ol>
                <li>è®¿é—®TradeProjectViewé¡µé¢ï¼ˆå¦‚ï¼š<code>/trade/RWA001</code>ï¼‰</li>
                <li>æ£€æŸ¥é¡¹ç›®ä¿¡æ¯å¡ç‰‡æ˜¯å¦æ­£ç¡®æ˜¾ç¤º</li>
                <li>éªŒè¯metricsæ•°æ®æ˜¯å¦æ­£ç¡®è®¡ç®—</li>
                <li>æµ‹è¯•è®¤è´­æ‘˜è¦ä¸­çš„æ”¶ç›Šç‡å’ŒæœŸé™æ˜¾ç¤º</li>
                <li>æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„è°ƒè¯•æ—¥å¿—</li>
            </ol>
        </div>

        <div class="test-section">
            <h3>ğŸ”— æµ‹è¯•é“¾æ¥</h3>
            <p>ç‚¹å‡»ä»¥ä¸‹é“¾æ¥æµ‹è¯•æ›´æ–°åçš„TradeProjectViewï¼š</p>
            <a href="/trade/RWA001" class="btn btn-success" target="_blank">æµ‹è¯• RWA001</a>
            <a href="/trade/RWA007" class="btn btn-success" target="_blank">æµ‹è¯• RWA007</a>
            <a href="/trade/TEST" class="btn btn-success" target="_blank">æµ‹è¯• TEST</a>
        </div>

        <div class="test-section info">
            <h3>ğŸ“ è°ƒè¯•ä¿¡æ¯</h3>
            <p>åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°ä¸­ï¼Œæ‚¨åº”è¯¥èƒ½çœ‹åˆ°ä»¥ä¸‹è°ƒè¯•ä¿¡æ¯ï¼š</p>
            <ul>
                <li><code>ğŸ”„ TradeProjectView: ä»æ•°æ®åº“åŠ è½½é¡¹ç›®æ•°æ®...</code></li>
                <li><code>âœ… TradeProjectView: é¡¹ç›®æ•°æ®æ˜ å°„æˆåŠŸ:</code></li>
                <li><code>è·å–ç›®æ ‡æ”¶ç›Šç‡ï¼ŒprojectData:</code></li>
                <li><code>è·å–è´·æ¬¾æœŸé™ï¼ŒprojectData:</code></li>
                <li><code>ğŸ” TradeProjectView: é‡‘é¢è¾“å…¥éªŒè¯ç»“æœ:</code></li>
            </ul>
        </div>
    </div>
</body>
</html>
