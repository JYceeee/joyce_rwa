import{_ as v,c,o as u,a as t,n as h,t as n,b as g,F as R,r as f,d as i,u as A}from"./index-MO2QwcWx.js";const _={name:"ContractAddressTestView",setup(){const{connected:s,fullAddress:e}=A();return{connected:s,fullAddress:e}},data(){return{loading:!1,results:[],contractServiceReady:!1,currentContractAddress:null,currentWalletAddress:null,monitoringInterval:null}},computed:{walletConnected(){return this.connected.value&&this.fullAddress.value},walletAddress(){return this.fullAddress.value},addressesMatch(){return this.currentContractAddress&&this.currentWalletAddress&&this.currentContractAddress.toLowerCase()===this.currentWalletAddress.toLowerCase()}},async mounted(){await this.initializeContractService(),this.startMonitoring()},beforeUnmount(){this.stopMonitoring()},methods:{async initializeContractService(){try{await i.initialize(),this.contractServiceReady=!0,this.addResult("success","ContractServiceåˆå§‹åŒ–æˆåŠŸ","æ™ºèƒ½åˆçº¦æœåŠ¡å·²æˆåŠŸåˆå§‹åŒ–")}catch(s){this.addResult("error","ContractServiceåˆå§‹åŒ–å¤±è´¥",s.message)}},async testGetUserAddress(){this.loading=!0;try{this.addResult("info","å¼€å§‹æµ‹è¯•èŽ·å–ç”¨æˆ·åœ°å€","æ­£åœ¨è°ƒç”¨contractService.getUserAddress()");const s=await i.getUserAddress();s?(this.addResult("success","åœ°å€èŽ·å–æˆåŠŸ",`èŽ·å–åˆ°åœ°å€: ${s}`,{address:s,shortAddress:this.formatAddress(s),method:"contractService.getUserAddress()"}),this.currentContractAddress=s):this.addResult("error","åœ°å€èŽ·å–å¤±è´¥","contractService.getUserAddress()è¿”å›žnull")}catch(s){this.addResult("error","åœ°å€èŽ·å–å¼‚å¸¸",s.message)}finally{this.loading=!1}},async testValidateAddress(){this.loading=!0;try{this.addResult("info","å¼€å§‹æµ‹è¯•åœ°å€éªŒè¯","æ­£åœ¨è°ƒç”¨contractService.validateUserAddress()");const s=await i.validateUserAddress();this.addResult(s.success?"success":"error",s.success?"åœ°å€éªŒè¯æˆåŠŸ":"åœ°å€éªŒè¯å¤±è´¥",s.success?`éªŒè¯é€šè¿‡: ${s.address}`:s.error,s),s.success&&(this.currentContractAddress=s.address)}catch(s){this.addResult("error","åœ°å€éªŒè¯å¼‚å¸¸",s.message)}finally{this.loading=!1}},async testMultipleMethods(){this.loading=!0;try{this.addResult("info","å¼€å§‹å¤šæ–¹æ³•æµ‹è¯•","æµ‹è¯•ä¸åŒçš„åœ°å€èŽ·å–æ–¹å¼");const s=await i.getUserAddress();this.addResult(s?"success":"error","æ–¹æ³•1: contractService.getUserAddress()",s?`æˆåŠŸ: ${s}`:"å¤±è´¥",{address:s});const e=await i.validateUserAddress();this.addResult(e.success?"success":"error","æ–¹æ³•2: contractService.validateUserAddress()",e.success?`æˆåŠŸ: ${e.address}`:`å¤±è´¥: ${e.error}`,e);const o=this.walletAddress;this.addResult(o?"success":"error","æ–¹æ³•3: useWallet.fullAddress",o?`æˆåŠŸ: ${o}`:"å¤±è´¥",{address:o,connected:this.walletConnected});try{const a=await window.ethereum.request({method:"eth_accounts"}),d=a&&a.length>0?a[0]:null;this.addResult(d?"success":"error","æ–¹æ³•4: window.ethereum.eth_accounts",d?`æˆåŠŸ: ${d}`:"å¤±è´¥",{address:d,accounts:a})}catch(a){this.addResult("error","æ–¹æ³•4: window.ethereum.eth_accounts",a.message)}}catch(s){this.addResult("error","å¤šæ–¹æ³•æµ‹è¯•å¼‚å¸¸",s.message)}finally{this.loading=!1}},async testTradingMethods(){this.loading=!0;try{this.addResult("info","å¼€å§‹äº¤æ˜“æ–¹æ³•æµ‹è¯•","æµ‹è¯•æ™ºèƒ½åˆçº¦äº¤æ˜“æ–¹æ³•ä¸­çš„åœ°å€èŽ·å–"),this.addResult("info","æµ‹è¯•buyTokensæ–¹æ³•","æµ‹è¯•è´­ä¹°ä»£å¸æ–¹æ³•ä¸­çš„åœ°å€èŽ·å–");try{const s=await i.buyTokens(1);this.addResult(s.success?"success":"error","buyTokensæ–¹æ³•æµ‹è¯•",s.success?`æˆåŠŸèŽ·å–åœ°å€: ${s.userAddress}`:`å¤±è´¥: ${s.error}`,s)}catch(s){this.addResult("error","buyTokensæ–¹æ³•å¼‚å¸¸",s.message)}this.addResult("info","æµ‹è¯•sellTokensæ–¹æ³•","æµ‹è¯•å‡ºå”®ä»£å¸æ–¹æ³•ä¸­çš„åœ°å€èŽ·å–");try{const s=await i.sellTokens(1);this.addResult(s.success?"success":"error","sellTokensæ–¹æ³•æµ‹è¯•",s.success?`æˆåŠŸèŽ·å–åœ°å€: ${s.userAddress}`:`å¤±è´¥: ${s.error}`,s)}catch(s){this.addResult("error","sellTokensæ–¹æ³•å¼‚å¸¸",s.message)}this.addResult("info","æµ‹è¯•getUserTokenBalanceæ–¹æ³•","æµ‹è¯•èŽ·å–ç”¨æˆ·ä»£å¸ä½™é¢æ–¹æ³•ä¸­çš„åœ°å€èŽ·å–");try{const s=await i.getUserTokenBalance();this.addResult("success","getUserTokenBalanceæ–¹æ³•æµ‹è¯•",`æˆåŠŸèŽ·å–ä½™é¢: ${s}`,{balance:s,method:"getUserTokenBalance"})}catch(s){this.addResult("error","getUserTokenBalanceæ–¹æ³•å¼‚å¸¸",s.message)}}catch(s){this.addResult("error","äº¤æ˜“æ–¹æ³•æµ‹è¯•å¼‚å¸¸",s.message)}finally{this.loading=!1}},refreshMonitoring(){this.currentWalletAddress=this.walletAddress,this.addResult("info","ç›‘æŽ§æ•°æ®åˆ·æ–°","å®žæ—¶ç›‘æŽ§æ•°æ®å·²æ›´æ–°")},startMonitoring(){this.monitoringInterval=setInterval(()=>{this.currentWalletAddress=this.walletAddress},2e3)},stopMonitoring(){this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null)},addResult(s,e,o,a=null){this.results.unshift({type:s,title:e,message:o,data:a,timestamp:Date.now()}),this.results.length>20&&(this.results=this.results.slice(0,20))},clearResults(){this.results=[]},getResultIcon(s){return{success:"âœ…",error:"âŒ",warning:"âš ï¸",info:"â„¹ï¸"}[s]||"ðŸ“"},formatTime(s){return new Date(s).toLocaleTimeString()},formatAddress(s){return s?`${s.slice(0,6)}...${s.slice(-4)}`:""}}},b={class:"container"},y={class:"test-page"},w={class:"test-section"},C={class:"status-grid"},k={class:"status-item"},T={class:"status-item"},S={class:"address"},M={class:"status-item"},U={class:"test-section"},p={class:"test-buttons"},W=["disabled"],I=["disabled"],B=["disabled"],V=["disabled"],E={class:"test-section"},z={class:"results-container"},L={key:0,class:"no-results"},x={class:"result-header"},D={class:"result-icon"},G={class:"result-title"},N={class:"result-time"},F={class:"result-content"},q={class:"result-message"},J={key:0,class:"result-data"},O={class:"test-section"},j={class:"monitor-grid"},H={class:"monitor-item"},K={class:"address"},P={class:"monitor-item"},Q={class:"address"},X={class:"monitor-item"};function Y(s,e,o,a,d,r){return u(),c("div",b,[t("div",y,[e[16]||(e[16]=t("h1",null,"æ™ºèƒ½åˆçº¦åœ°å€éªŒè¯æµ‹è¯•",-1)),e[17]||(e[17]=t("p",null,"æµ‹è¯•æ™ºèƒ½åˆçº¦æœåŠ¡èŽ·å–å’ŒéªŒè¯ç”¨æˆ·é’±åŒ…åœ°å€çš„åŠŸèƒ½",-1)),t("div",w,[e[9]||(e[9]=t("h2",null,"é’±åŒ…è¿žæŽ¥çŠ¶æ€",-1)),t("div",C,[t("div",k,[e[6]||(e[6]=t("label",null,"useWalletè¿žæŽ¥çŠ¶æ€:",-1)),t("span",{class:h(r.walletConnected?"success":"error")},n(r.walletConnected?"å·²è¿žæŽ¥":"æœªè¿žæŽ¥"),3)]),t("div",T,[e[7]||(e[7]=t("label",null,"useWalletåœ°å€:",-1)),t("span",S,n(r.walletAddress||"æ— "),1)]),t("div",M,[e[8]||(e[8]=t("label",null,"ContractServiceçŠ¶æ€:",-1)),t("span",{class:h(d.contractServiceReady?"success":"error")},n(d.contractServiceReady?"å·²åˆå§‹åŒ–":"æœªåˆå§‹åŒ–"),3)])])]),t("div",U,[e[10]||(e[10]=t("h2",null,"åœ°å€èŽ·å–æµ‹è¯•",-1)),t("div",p,[t("button",{onClick:e[0]||(e[0]=(...l)=>r.testGetUserAddress&&r.testGetUserAddress(...l)),disabled:d.loading,class:"test-btn"},n(d.loading?"æµ‹è¯•ä¸­...":"æµ‹è¯•èŽ·å–ç”¨æˆ·åœ°å€"),9,W),t("button",{onClick:e[1]||(e[1]=(...l)=>r.testValidateAddress&&r.testValidateAddress(...l)),disabled:d.loading,class:"test-btn"}," æµ‹è¯•åœ°å€éªŒè¯ ",8,I),t("button",{onClick:e[2]||(e[2]=(...l)=>r.testMultipleMethods&&r.testMultipleMethods(...l)),disabled:d.loading,class:"test-btn"}," æµ‹è¯•å¤šç§èŽ·å–æ–¹å¼ ",8,B),t("button",{onClick:e[3]||(e[3]=(...l)=>r.testTradingMethods&&r.testTradingMethods(...l)),disabled:d.loading,class:"test-btn"}," æµ‹è¯•äº¤æ˜“æ–¹æ³•åœ°å€èŽ·å– ",8,V),t("button",{onClick:e[4]||(e[4]=(...l)=>r.clearResults&&r.clearResults(...l)),class:"test-btn secondary"}," æ¸…é™¤ç»“æžœ ")])]),t("div",E,[e[11]||(e[11]=t("h2",null,"æµ‹è¯•ç»“æžœ",-1)),t("div",z,[d.results.length===0?(u(),c("div",L," æš‚æ— æµ‹è¯•ç»“æžœï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯• ")):g("",!0),(u(!0),c(R,null,f(d.results,(l,m)=>(u(),c("div",{key:m,class:"result-item"},[t("div",x,[t("span",D,n(r.getResultIcon(l.type)),1),t("span",G,n(l.title),1),t("span",N,n(r.formatTime(l.timestamp)),1)]),t("div",F,[t("div",q,n(l.message),1),l.data?(u(),c("div",J,[t("pre",null,n(JSON.stringify(l.data,null,2)),1)])):g("",!0)])]))),128))])]),t("div",O,[e[15]||(e[15]=t("h2",null,"å®žæ—¶åœ°å€ç›‘æŽ§",-1)),t("div",j,[t("div",H,[e[12]||(e[12]=t("label",null,"ContractServiceåœ°å€:",-1)),t("span",K,n(d.currentContractAddress||"æ— "),1)]),t("div",P,[e[13]||(e[13]=t("label",null,"useWalletåœ°å€:",-1)),t("span",Q,n(d.currentWalletAddress||"æ— "),1)]),t("div",X,[e[14]||(e[14]=t("label",null,"åœ°å€ä¸€è‡´æ€§:",-1)),t("span",{class:h(r.addressesMatch?"success":"warning")},n(r.addressesMatch?"ä¸€è‡´":"ä¸ä¸€è‡´"),3)])]),t("button",{onClick:e[5]||(e[5]=(...l)=>r.refreshMonitoring&&r.refreshMonitoring(...l)),class:"test-btn small"}," åˆ·æ–°ç›‘æŽ§ ")])])])}const $=v(_,[["render",Y],["__scopeId","data-v-6ee82fc4"]]);export{$ as default};
