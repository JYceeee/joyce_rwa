(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xc(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const rt={},Vr=[],en=()=>{},Gf=()=>!1,Ea=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Rc=t=>t.startsWith("onUpdate:"),jt=Object.assign,Dc=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Gg=Object.prototype.hasOwnProperty,qe=(t,e)=>Gg.call(t,e),Ee=Array.isArray,jr=t=>ao(t)==="[object Map]",li=t=>ao(t)==="[object Set]",Pu=t=>ao(t)==="[object Date]",Te=t=>typeof t=="function",Pt=t=>typeof t=="string",sn=t=>typeof t=="symbol",it=t=>t!==null&&typeof t=="object",Kf=t=>(it(t)||Te(t))&&Te(t.then)&&Te(t.catch),Yf=Object.prototype.toString,ao=t=>Yf.call(t),Kg=t=>ao(t).slice(8,-1),zf=t=>ao(t)==="[object Object]",Nc=t=>Pt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ci=xc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_a=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},Yg=/-\w/g,Ds=_a(t=>t.replace(Yg,e=>e.slice(1).toUpperCase())),zg=/\B([A-Z])/g,Pr=_a(t=>t.replace(zg,"-$1").toLowerCase()),Pa=_a(t=>t.charAt(0).toUpperCase()+t.slice(1)),rl=_a(t=>t?`on${Pa(t)}`:""),$n=(t,e)=>!Object.is(t,e),Mo=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Qf=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},Ko=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Qg=t=>{const e=Pt(t)?Number(t):NaN;return isNaN(e)?t:e};let Su;const Sa=()=>Su||(Su=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rt(t){if(Ee(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=Pt(n)?Xg(n):Rt(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(Pt(t)||it(t))return t}const Jg=/;(?![^(]*\))/g,qg=/:([^]+)/,Zg=/\/\*[^]*?\*\//g;function Xg(t){const e={};return t.replace(Zg,"").split(Jg).forEach(s=>{if(s){const n=s.split(qg);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function we(t){let e="";if(Pt(t))e=t;else if(Ee(t))for(let s=0;s<t.length;s++){const n=we(t[s]);n&&(e+=n+" ")}else if(it(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const e0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",t0=xc(e0);function Jf(t){return!!t||t===""}function s0(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=lo(t[n],e[n]);return s}function lo(t,e){if(t===e)return!0;let s=Pu(t),n=Pu(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=sn(t),n=sn(e),s||n)return t===e;if(s=Ee(t),n=Ee(e),s||n)return s&&n?s0(t,e):!1;if(s=it(t),n=it(e),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!lo(t[o],e[o]))return!1}}return String(t)===String(e)}function Lc(t,e){return t.findIndex(s=>lo(s,e))}const qf=t=>!!(t&&t.__v_isRef===!0),m=t=>Pt(t)?t:t==null?"":Ee(t)||it(t)&&(t.toString===Yf||!Te(t.toString))?qf(t)?m(t.value):JSON.stringify(t,Zf,2):String(t),Zf=(t,e)=>qf(e)?Zf(t,e.value):jr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[il(n,i)+" =>"]=r,s),{})}:li(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>il(s))}:sn(e)?il(e):it(e)&&!Ee(e)&&!zf(e)?String(e):e,il=(t,e="")=>{var s;return sn(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ds;class n0{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ds,!e&&ds&&(this.index=(ds.scopes||(ds.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=ds;try{return ds=this,e()}finally{ds=s}}}on(){++this._on===1&&(this.prevScope=ds,ds=this)}off(){this._on>0&&--this._on===0&&(ds=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function r0(){return ds}let at;const ol=new WeakSet;class Xf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ds&&ds.active&&ds.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ol.has(this)&&(ol.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||th(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ku(this),sh(this);const e=at,s=$s;at=this,$s=!0;try{return this.fn()}finally{nh(this),at=e,$s=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Bc(e);this.deps=this.depsTail=void 0,ku(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ol.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vl(this)&&this.run()}get dirty(){return Vl(this)}}let eh=0,Ti,Ii;function th(t,e=!1){if(t.flags|=8,e){t.next=Ii,Ii=t;return}t.next=Ti,Ti=t}function Oc(){eh++}function Uc(){if(--eh>0)return;if(Ii){let e=Ii;for(Ii=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Ti;){let e=Ti;for(Ti=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function sh(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function nh(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),Bc(n),i0(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function Vl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(rh(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function rh(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ji)||(t.globalVersion=ji,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Vl(t))))return;t.flags|=2;const e=t.dep,s=at,n=$s;at=t,$s=!0;try{sh(t);const r=t.fn(t._value);(e.version===0||$n(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{at=s,$s=n,nh(t),t.flags&=-3}}function Bc(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)Bc(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function i0(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let $s=!0;const ih=[];function En(){ih.push($s),$s=!1}function _n(){const t=ih.pop();$s=t===void 0?!0:t}function ku(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=at;at=void 0;try{e()}finally{at=s}}}let ji=0;class o0{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!at||!$s||at===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==at)s=this.activeLink=new o0(at,this),at.deps?(s.prevDep=at.depsTail,at.depsTail.nextDep=s,at.depsTail=s):at.deps=at.depsTail=s,oh(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=at.depsTail,s.nextDep=void 0,at.depsTail.nextDep=s,at.depsTail=s,at.deps===s&&(at.deps=n)}return s}trigger(e){this.version++,ji++,this.notify(e)}notify(e){Oc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Uc()}}}function oh(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)oh(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const jl=new WeakMap,yr=Symbol(""),$l=Symbol(""),$i=Symbol("");function Yt(t,e,s){if($s&&at){let n=jl.get(t);n||jl.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new Mc),r.map=n,r.key=s),r.track()}}function hn(t,e,s,n,r,i){const o=jl.get(t);if(!o){ji++;return}const l=c=>{c&&c.trigger()};if(Oc(),e==="clear")o.forEach(l);else{const c=Ee(t),u=c&&Nc(s);if(c&&s==="length"){const d=Number(n);o.forEach((f,h)=>{(h==="length"||h===$i||!sn(h)&&h>=d)&&l(f)})}else switch((s!==void 0||o.has(void 0))&&l(o.get(s)),u&&l(o.get($i)),e){case"add":c?u&&l(o.get("length")):(l(o.get(yr)),jr(t)&&l(o.get($l)));break;case"delete":c||(l(o.get(yr)),jr(t)&&l(o.get($l)));break;case"set":jr(t)&&l(o.get(yr));break}}Uc()}function xr(t){const e=ze(t);return e===t?e:(Yt(e,"iterate",$i),Rs(t)?e:e.map(Ht))}function ka(t){return Yt(t=ze(t),"iterate",$i),t}const a0={__proto__:null,[Symbol.iterator](){return al(this,Symbol.iterator,Ht)},concat(...t){return xr(this).concat(...t.map(e=>Ee(e)?xr(e):e))},entries(){return al(this,"entries",t=>(t[1]=Ht(t[1]),t))},every(t,e){return rn(this,"every",t,e,void 0,arguments)},filter(t,e){return rn(this,"filter",t,e,s=>s.map(Ht),arguments)},find(t,e){return rn(this,"find",t,e,Ht,arguments)},findIndex(t,e){return rn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return rn(this,"findLast",t,e,Ht,arguments)},findLastIndex(t,e){return rn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return rn(this,"forEach",t,e,void 0,arguments)},includes(...t){return ll(this,"includes",t)},indexOf(...t){return ll(this,"indexOf",t)},join(t){return xr(this).join(t)},lastIndexOf(...t){return ll(this,"lastIndexOf",t)},map(t,e){return rn(this,"map",t,e,void 0,arguments)},pop(){return gi(this,"pop")},push(...t){return gi(this,"push",t)},reduce(t,...e){return Cu(this,"reduce",t,e)},reduceRight(t,...e){return Cu(this,"reduceRight",t,e)},shift(){return gi(this,"shift")},some(t,e){return rn(this,"some",t,e,void 0,arguments)},splice(...t){return gi(this,"splice",t)},toReversed(){return xr(this).toReversed()},toSorted(t){return xr(this).toSorted(t)},toSpliced(...t){return xr(this).toSpliced(...t)},unshift(...t){return gi(this,"unshift",t)},values(){return al(this,"values",Ht)}};function al(t,e,s){const n=ka(t),r=n[e]();return n!==t&&!Rs(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=s(i.value)),i}),r}const l0=Array.prototype;function rn(t,e,s,n,r,i){const o=ka(t),l=o!==t&&!Rs(t),c=o[e];if(c!==l0[e]){const f=c.apply(t,i);return l?Ht(f):f}let u=s;o!==t&&(l?u=function(f,h){return s.call(this,Ht(f),h,t)}:s.length>2&&(u=function(f,h){return s.call(this,f,h,t)}));const d=c.call(o,u,n);return l&&r?r(d):d}function Cu(t,e,s,n){const r=ka(t);let i=s;return r!==t&&(Rs(t)?s.length>3&&(i=function(o,l,c){return s.call(this,o,l,c,t)}):i=function(o,l,c){return s.call(this,o,Ht(l),c,t)}),r[e](i,...n)}function ll(t,e,s){const n=ze(t);Yt(n,"iterate",$i);const r=n[e](...s);return(r===-1||r===!1)&&jc(s[0])?(s[0]=ze(s[0]),n[e](...s)):r}function gi(t,e,s=[]){En(),Oc();const n=ze(t)[e].apply(t,s);return Uc(),_n(),n}const c0=xc("__proto__,__v_isRef,__isVue"),ah=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(sn));function u0(t){sn(t)||(t=String(t));const e=ze(this);return Yt(e,"has",t),e.hasOwnProperty(t)}class lh{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?w0:fh:i?dh:uh).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Ee(e);if(!r){let c;if(o&&(c=a0[s]))return c;if(s==="hasOwnProperty")return u0}const l=Reflect.get(e,s,Qt(e)?e:n);return(sn(s)?ah.has(s):c0(s))||(r||Yt(e,"get",s),i)?l:Qt(l)?o&&Nc(s)?l:l.value:it(l)?r?ph(l):co(l):l}}class ch extends lh{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];if(!this._isShallow){const c=Wn(i);if(!Rs(n)&&!Wn(n)&&(i=ze(i),n=ze(n)),!Ee(e)&&Qt(i)&&!Qt(n))return c||(i.value=n),!0}const o=Ee(e)&&Nc(s)?Number(s)<e.length:qe(e,s),l=Reflect.set(e,s,n,Qt(e)?e:r);return e===ze(r)&&(o?$n(n,i)&&hn(e,"set",s,n):hn(e,"add",s,n)),l}deleteProperty(e,s){const n=qe(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&hn(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!sn(s)||!ah.has(s))&&Yt(e,"has",s),n}ownKeys(e){return Yt(e,"iterate",Ee(e)?"length":yr),Reflect.ownKeys(e)}}class d0 extends lh{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const f0=new ch,h0=new d0,p0=new ch(!0);const Hl=t=>t,Po=t=>Reflect.getPrototypeOf(t);function m0(t,e,s){return function(...n){const r=this.__v_raw,i=ze(r),o=jr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...n),d=s?Hl:e?Yo:Ht;return!e&&Yt(i,"iterate",c?$l:yr),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:l?[d(f[0]),d(f[1])]:d(f),done:h}},[Symbol.iterator](){return this}}}}function So(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function g0(t,e){const s={get(r){const i=this.__v_raw,o=ze(i),l=ze(r);t||($n(r,l)&&Yt(o,"get",r),Yt(o,"get",l));const{has:c}=Po(o),u=e?Hl:t?Yo:Ht;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Yt(ze(r),"iterate",yr),r.size},has(r){const i=this.__v_raw,o=ze(i),l=ze(r);return t||($n(r,l)&&Yt(o,"has",r),Yt(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=ze(l),u=e?Hl:t?Yo:Ht;return!t&&Yt(c,"iterate",yr),l.forEach((d,f)=>r.call(i,u(d),u(f),o))}};return jt(s,t?{add:So("add"),set:So("set"),delete:So("delete"),clear:So("clear")}:{add(r){!e&&!Rs(r)&&!Wn(r)&&(r=ze(r));const i=ze(this);return Po(i).has.call(i,r)||(i.add(r),hn(i,"add",r,r)),this},set(r,i){!e&&!Rs(i)&&!Wn(i)&&(i=ze(i));const o=ze(this),{has:l,get:c}=Po(o);let u=l.call(o,r);u||(r=ze(r),u=l.call(o,r));const d=c.call(o,r);return o.set(r,i),u?$n(i,d)&&hn(o,"set",r,i):hn(o,"add",r,i),this},delete(r){const i=ze(this),{has:o,get:l}=Po(i);let c=o.call(i,r);c||(r=ze(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&hn(i,"delete",r,void 0),u},clear(){const r=ze(this),i=r.size!==0,o=r.clear();return i&&hn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=m0(r,t,e)}),s}function Fc(t,e){const s=g0(t,e);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(qe(s,r)&&r in n?s:n,r,i)}const y0={get:Fc(!1,!1)},v0={get:Fc(!1,!0)},b0={get:Fc(!0,!1)};const uh=new WeakMap,dh=new WeakMap,fh=new WeakMap,w0=new WeakMap;function A0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function E0(t){return t.__v_skip||!Object.isExtensible(t)?0:A0(Kg(t))}function co(t){return Wn(t)?t:Vc(t,!1,f0,y0,uh)}function hh(t){return Vc(t,!1,p0,v0,dh)}function ph(t){return Vc(t,!0,h0,b0,fh)}function Vc(t,e,s,n,r){if(!it(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=E0(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?n:s);return r.set(t,l),l}function $r(t){return Wn(t)?$r(t.__v_raw):!!(t&&t.__v_isReactive)}function Wn(t){return!!(t&&t.__v_isReadonly)}function Rs(t){return!!(t&&t.__v_isShallow)}function jc(t){return t?!!t.__v_raw:!1}function ze(t){const e=t&&t.__v_raw;return e?ze(e):t}function _0(t){return!qe(t,"__v_skip")&&Object.isExtensible(t)&&Qf(t,"__v_skip",!0),t}const Ht=t=>it(t)?co(t):t,Yo=t=>it(t)?ph(t):t;function Qt(t){return t?t.__v_isRef===!0:!1}function fe(t){return mh(t,!1)}function P0(t){return mh(t,!0)}function mh(t,e){return Qt(t)?t:new S0(t,e)}class S0{constructor(e,s){this.dep=new Mc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:ze(e),this._value=s?e:Ht(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||Rs(e)||Wn(e);e=n?e:ze(e),$n(e,s)&&(this._rawValue=e,this._value=n?e:Ht(e),this.dep.trigger())}}function Ke(t){return Qt(t)?t.value:t}const k0={get:(t,e,s)=>e==="__v_raw"?t:Ke(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return Qt(r)&&!Qt(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function gh(t){return $r(t)?t:new Proxy(t,k0)}class C0{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Mc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ji-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&at!==this)return th(this,!0),!0}get value(){const e=this.dep.track();return rh(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function T0(t,e,s=!1){let n,r;return Te(t)?n=t:(n=t.get,r=t.set),new C0(n,r,s)}const ko={},zo=new WeakMap;let ir;function I0(t,e=!1,s=ir){if(s){let n=zo.get(s);n||zo.set(s,n=[]),n.push(t)}}function x0(t,e,s=rt){const{immediate:n,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=s,u=R=>r?R:Rs(R)||r===!1||r===0?pn(R,1):pn(R);let d,f,h,p,P=!1,w=!1;if(Qt(t)?(f=()=>t.value,P=Rs(t)):$r(t)?(f=()=>u(t),P=!0):Ee(t)?(w=!0,P=t.some(R=>$r(R)||Rs(R)),f=()=>t.map(R=>{if(Qt(R))return R.value;if($r(R))return u(R);if(Te(R))return c?c(R,2):R()})):Te(t)?e?f=c?()=>c(t,2):t:f=()=>{if(h){En();try{h()}finally{_n()}}const R=ir;ir=d;try{return c?c(t,3,[p]):t(p)}finally{ir=R}}:f=en,e&&r){const R=f,G=r===!0?1/0:r;f=()=>pn(R(),G)}const k=r0(),T=()=>{d.stop(),k&&k.active&&Dc(k.effects,d)};if(i&&e){const R=e;e=(...G)=>{R(...G),T()}}let N=w?new Array(t.length).fill(ko):ko;const L=R=>{if(!(!(d.flags&1)||!d.dirty&&!R))if(e){const G=d.run();if(r||P||(w?G.some((W,j)=>$n(W,N[j])):$n(G,N))){h&&h();const W=ir;ir=d;try{const j=[G,N===ko?void 0:w&&N[0]===ko?[]:N,p];N=G,c?c(e,3,j):e(...j)}finally{ir=W}}}else d.run()};return l&&l(L),d=new Xf(f),d.scheduler=o?()=>o(L,!1):L,p=R=>I0(R,!1,d),h=d.onStop=()=>{const R=zo.get(d);if(R){if(c)c(R,4);else for(const G of R)G();zo.delete(d)}},e?n?L(!0):N=d.run():o?o(L.bind(null,!0),!0):d.run(),T.pause=d.pause.bind(d),T.resume=d.resume.bind(d),T.stop=T,T}function pn(t,e=1/0,s){if(e<=0||!it(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,Qt(t))pn(t.value,e,s);else if(Ee(t))for(let n=0;n<t.length;n++)pn(t[n],e,s);else if(li(t)||jr(t))t.forEach(n=>{pn(n,e,s)});else if(zf(t)){for(const n in t)pn(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&pn(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function uo(t,e,s,n){try{return n?t(...n):t()}catch(r){Ca(r,e,s)}}function Hs(t,e,s,n){if(Te(t)){const r=uo(t,e,s,n);return r&&Kf(r)&&r.catch(i=>{Ca(i,e,s)}),r}if(Ee(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Hs(t[i],e,s,n));return r}}function Ca(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||rt;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const d=l.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](t,c,u)===!1)return}l=l.parent}if(i){En(),uo(i,null,10,[t,c,u]),_n();return}}R0(t,s,r,n,o)}function R0(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const ts=[];let Qs=-1;const Hr=[];let Bn=null,Lr=0;const yh=Promise.resolve();let Qo=null;function Hi(t){const e=Qo||yh;return t?e.then(this?t.bind(this):t):e}function D0(t){let e=Qs+1,s=ts.length;for(;e<s;){const n=e+s>>>1,r=ts[n],i=Wi(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function $c(t){if(!(t.flags&1)){const e=Wi(t),s=ts[ts.length-1];!s||!(t.flags&2)&&e>=Wi(s)?ts.push(t):ts.splice(D0(e),0,t),t.flags|=1,vh()}}function vh(){Qo||(Qo=yh.then(wh))}function N0(t){Ee(t)?Hr.push(...t):Bn&&t.id===-1?Bn.splice(Lr+1,0,t):t.flags&1||(Hr.push(t),t.flags|=1),vh()}function Tu(t,e,s=Qs+1){for(;s<ts.length;s++){const n=ts[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;ts.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function bh(t){if(Hr.length){const e=[...new Set(Hr)].sort((s,n)=>Wi(s)-Wi(n));if(Hr.length=0,Bn){Bn.push(...e);return}for(Bn=e,Lr=0;Lr<Bn.length;Lr++){const s=Bn[Lr];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Bn=null,Lr=0}}const Wi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function wh(t){try{for(Qs=0;Qs<ts.length;Qs++){const e=ts[Qs];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),uo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Qs<ts.length;Qs++){const e=ts[Qs];e&&(e.flags&=-2)}Qs=-1,ts.length=0,bh(),Qo=null,(ts.length||Hr.length)&&wh()}}let Es=null,Ah=null;function Jo(t){const e=Es;return Es=t,Ah=t&&t.type.__scopeId||null,e}function ot(t,e=Es,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&Xo(-1);const i=Jo(e);let o;try{o=t(...r)}finally{Jo(i),n._d&&Xo(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Se(t,e){if(Es===null)return t;const s=Na(Es),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=rt]=e[r];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&pn(o),n.push({dir:i,instance:s,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function Xn(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[n];c&&(En(),Hs(c,s,8,[t.el,l,t,e]),_n())}}const L0=Symbol("_vte"),Eh=t=>t.__isTeleport,un=Symbol("_leaveCb"),Co=Symbol("_enterCb");function O0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ci(()=>{t.isMounted=!0}),xa(()=>{t.isUnmounting=!0}),t}const Cs=[Function,Array],_h={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Cs,onEnter:Cs,onAfterEnter:Cs,onEnterCancelled:Cs,onBeforeLeave:Cs,onLeave:Cs,onAfterLeave:Cs,onLeaveCancelled:Cs,onBeforeAppear:Cs,onAppear:Cs,onAfterAppear:Cs,onAppearCancelled:Cs},Ph=t=>{const e=t.subTree;return e.component?Ph(e.component):e},U0={name:"BaseTransition",props:_h,setup(t,{slots:e}){const s=Zh(),n=O0();return()=>{const r=e.default&&Ch(e.default(),!0);if(!r||!r.length)return;const i=Sh(r),o=ze(t),{mode:l}=o;if(n.isLeaving)return cl(i);const c=Iu(i);if(!c)return cl(i);let u=Wl(c,o,n,s,f=>u=f);c.type!==ns&&Gi(c,u);let d=s.subTree&&Iu(s.subTree);if(d&&d.type!==ns&&!ar(d,c)&&Ph(s).type!==ns){let f=Wl(d,o,n,s);if(Gi(d,f),l==="out-in"&&c.type!==ns)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete f.afterLeave,d=void 0},cl(i);l==="in-out"&&c.type!==ns?f.delayLeave=(h,p,P)=>{const w=kh(n,d);w[String(d.key)]=d,h[un]=()=>{p(),h[un]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{P(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function Sh(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==ns){e=s;break}}return e}const B0=U0;function kh(t,e){const{leavingVNodes:s}=t;let n=s.get(e.type);return n||(n=Object.create(null),s.set(e.type,n)),n}function Wl(t,e,s,n,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:h,onLeave:p,onAfterLeave:P,onLeaveCancelled:w,onBeforeAppear:k,onAppear:T,onAfterAppear:N,onAppearCancelled:L}=e,R=String(t.key),G=kh(s,t),W=(J,re)=>{J&&Hs(J,n,9,re)},j=(J,re)=>{const ce=re[1];W(J,re),Ee(J)?J.every(H=>H.length<=1)&&ce():J.length<=1&&ce()},Q={mode:o,persisted:l,beforeEnter(J){let re=c;if(!s.isMounted)if(i)re=k||c;else return;J[un]&&J[un](!0);const ce=G[R];ce&&ar(t,ce)&&ce.el[un]&&ce.el[un](),W(re,[J])},enter(J){let re=u,ce=d,H=f;if(!s.isMounted)if(i)re=T||u,ce=N||d,H=L||f;else return;let be=!1;const Ce=J[Co]=Y=>{be||(be=!0,Y?W(H,[J]):W(ce,[J]),Q.delayedLeave&&Q.delayedLeave(),J[Co]=void 0)};re?j(re,[J,Ce]):Ce()},leave(J,re){const ce=String(t.key);if(J[Co]&&J[Co](!0),s.isUnmounting)return re();W(h,[J]);let H=!1;const be=J[un]=Ce=>{H||(H=!0,re(),Ce?W(w,[J]):W(P,[J]),J[un]=void 0,G[ce]===t&&delete G[ce])};G[ce]=t,p?j(p,[J,be]):be()},clone(J){const re=Wl(J,e,s,n,r);return r&&r(re),re}};return Q}function cl(t){if(Ta(t))return t=Gn(t),t.children=null,t}function Iu(t){if(!Ta(t))return Eh(t.type)&&t.children?Sh(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&Te(s.default))return s.default()}}function Gi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Gi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ch(t,e=!1,s){let n=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const l=s==null?o.key:String(s)+String(o.key!=null?o.key:i);o.type===ye?(o.patchFlag&128&&r++,n=n.concat(Ch(o.children,e,l))):(e||o.type!==ns)&&n.push(l!=null?Gn(o,{key:l}):o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function Th(t,e){return Te(t)?jt({name:t.name},e,{setup:t}):t}function Ih(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const qo=new WeakMap;function xi(t,e,s,n,r=!1){if(Ee(t)){t.forEach((P,w)=>xi(P,e&&(Ee(e)?e[w]:e),s,n,r));return}if(Ri(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&xi(t,e,s,n.component.subTree);return}const i=n.shapeFlag&4?Na(n.component):n.el,o=r?null:i,{i:l,r:c}=t,u=e&&e.r,d=l.refs===rt?l.refs={}:l.refs,f=l.setupState,h=ze(f),p=f===rt?Gf:P=>qe(h,P);if(u!=null&&u!==c){if(xu(e),Pt(u))d[u]=null,p(u)&&(f[u]=null);else if(Qt(u)){u.value=null;const P=e;P.k&&(d[P.k]=null)}}if(Te(c))uo(c,l,12,[o,d]);else{const P=Pt(c),w=Qt(c);if(P||w){const k=()=>{if(t.f){const T=P?p(c)?f[c]:d[c]:c.value;if(r)Ee(T)&&Dc(T,i);else if(Ee(T))T.includes(i)||T.push(i);else if(P)d[c]=[i],p(c)&&(f[c]=d[c]);else{const N=[i];c.value=N,t.k&&(d[t.k]=N)}}else P?(d[c]=o,p(c)&&(f[c]=o)):w&&(c.value=o,t.k&&(d[t.k]=o))};if(o){const T=()=>{k(),qo.delete(t)};T.id=-1,qo.set(t,T),vs(T,s)}else xu(t),k()}}}function xu(t){const e=qo.get(t);e&&(e.flags|=8,qo.delete(t))}Sa().requestIdleCallback;Sa().cancelIdleCallback;const Ri=t=>!!t.type.__asyncLoader,Ta=t=>t.type.__isKeepAlive;function M0(t,e){xh(t,"a",e)}function F0(t,e){xh(t,"da",e)}function xh(t,e,s=zt){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Ia(e,n,s),s){let r=s.parent;for(;r&&r.parent;)Ta(r.parent.vnode)&&V0(n,e,s,r),r=r.parent}}function V0(t,e,s,n){const r=Ia(e,t,n,!0);Hc(()=>{Dc(n[e],r)},s)}function Ia(t,e,s=zt,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{En();const l=fo(s),c=Hs(e,s,t,o);return l(),_n(),c});return n?r.unshift(i):r.push(i),i}}const Cn=t=>(e,s=zt)=>{(!Yi||t==="sp")&&Ia(t,(...n)=>e(...n),s)},j0=Cn("bm"),ci=Cn("m"),$0=Cn("bu"),H0=Cn("u"),xa=Cn("bum"),Hc=Cn("um"),W0=Cn("sp"),G0=Cn("rtg"),K0=Cn("rtc");function Y0(t,e=zt){Ia("ec",t,e)}const Rh="components",z0="directives";function Di(t,e){return Dh(Rh,t,!0,e)||t}const Q0=Symbol.for("v-ndc");function J0(t){return Dh(z0,t)}function Dh(t,e,s=!0,n=!1){const r=Es||zt;if(r){const i=r.type;if(t===Rh){const l=By(i,!1);if(l&&(l===e||l===Ds(e)||l===Pa(Ds(e))))return i}const o=Ru(r[t]||i[t],e)||Ru(r.appContext[t],e);return!o&&n?i:o}}function Ru(t,e){return t&&(t[e]||t[Ds(e)]||t[Pa(Ds(e))])}function At(t,e,s,n){let r;const i=s,o=Ee(t);if(o||Pt(t)){const l=o&&$r(t);let c=!1,u=!1;l&&(c=!Rs(t),u=Wn(t),t=ka(t)),r=new Array(t.length);for(let d=0,f=t.length;d<f;d++)r[d]=e(c?u?Yo(Ht(t[d])):Ht(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(it(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const d=l[c];r[c]=e(t[d],d,c,i)}}else r=[];return r}const Gl=t=>t?Xh(t)?Na(t):Gl(t.parent):null,Ni=jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gl(t.parent),$root:t=>Gl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Lh(t),$forceUpdate:t=>t.f||(t.f=()=>{$c(t.update)}),$nextTick:t=>t.n||(t.n=Hi.bind(t.proxy)),$watch:t=>yy.bind(t)}),ul=(t,e)=>t!==rt&&!t.__isScriptSetup&&qe(t,e),q0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:o,type:l,appContext:c}=t;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(ul(n,e))return o[e]=1,n[e];if(r!==rt&&qe(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&qe(u,e))return o[e]=3,i[e];if(s!==rt&&qe(s,e))return o[e]=4,s[e];Kl&&(o[e]=0)}}const d=Ni[e];let f,h;if(d)return e==="$attrs"&&Yt(t.attrs,"get",""),d(t);if((f=l.__cssModules)&&(f=f[e]))return f;if(s!==rt&&qe(s,e))return o[e]=4,s[e];if(h=c.config.globalProperties,qe(h,e))return h[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return ul(r,e)?(r[e]=s,!0):n!==rt&&qe(n,e)?(n[e]=s,!0):qe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,propsOptions:i,type:o}},l){let c,u;return!!(s[l]||t!==rt&&l[0]!=="$"&&qe(t,l)||ul(e,l)||(c=i[0])&&qe(c,l)||qe(n,l)||qe(Ni,l)||qe(r.config.globalProperties,l)||(u=o.__cssModules)&&u[l])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:qe(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Du(t){return Ee(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Kl=!0;function Z0(t){const e=Lh(t),s=t.proxy,n=t.ctx;Kl=!1,e.beforeCreate&&Nu(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:d,beforeMount:f,mounted:h,beforeUpdate:p,updated:P,activated:w,deactivated:k,beforeDestroy:T,beforeUnmount:N,destroyed:L,unmounted:R,render:G,renderTracked:W,renderTriggered:j,errorCaptured:Q,serverPrefetch:J,expose:re,inheritAttrs:ce,components:H,directives:be,filters:Ce}=e;if(u&&X0(u,n,null),o)for(const ae in o){const me=o[ae];Te(me)&&(n[ae]=me.bind(s))}if(r){const ae=r.call(s,s);it(ae)&&(t.data=co(ae))}if(Kl=!0,i)for(const ae in i){const me=i[ae],Ie=Te(me)?me.bind(s,s):Te(me.get)?me.get.bind(s,s):en,We=!Te(me)&&Te(me.set)?me.set.bind(s):en,je=Ae({get:Ie,set:We});Object.defineProperty(n,ae,{enumerable:!0,configurable:!0,get:()=>je.value,set:$e=>je.value=$e})}if(l)for(const ae in l)Nh(l[ae],n,s,ae);if(c){const ae=Te(c)?c.call(s):c;Reflect.ownKeys(ae).forEach(me=>{Fo(me,ae[me])})}d&&Nu(d,t,"c");function ee(ae,me){Ee(me)?me.forEach(Ie=>ae(Ie.bind(s))):me&&ae(me.bind(s))}if(ee(j0,f),ee(ci,h),ee($0,p),ee(H0,P),ee(M0,w),ee(F0,k),ee(Y0,Q),ee(K0,W),ee(G0,j),ee(xa,N),ee(Hc,R),ee(W0,J),Ee(re))if(re.length){const ae=t.exposed||(t.exposed={});re.forEach(me=>{Object.defineProperty(ae,me,{get:()=>s[me],set:Ie=>s[me]=Ie,enumerable:!0})})}else t.exposed||(t.exposed={});G&&t.render===en&&(t.render=G),ce!=null&&(t.inheritAttrs=ce),H&&(t.components=H),be&&(t.directives=be),J&&Ih(t)}function X0(t,e,s=en){Ee(t)&&(t=Yl(t));for(const n in t){const r=t[n];let i;it(r)?"default"in r?i=tn(r.from||n,r.default,!0):i=tn(r.from||n):i=tn(r),Qt(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function Nu(t,e,s){Hs(Ee(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function Nh(t,e,s,n){let r=n.includes(".")?Yh(s,n):()=>s[n];if(Pt(t)){const i=e[t];Te(i)&&qs(r,i)}else if(Te(t))qs(r,t.bind(s));else if(it(t))if(Ee(t))t.forEach(i=>Nh(i,e,s,n));else{const i=Te(t.handler)?t.handler.bind(s):e[t.handler];Te(i)&&qs(r,i,t)}}function Lh(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!s&&!n?c=e:(c={},r.length&&r.forEach(u=>Zo(c,u,o,!0)),Zo(c,e,o)),it(e)&&i.set(e,c),c}function Zo(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&Zo(t,i,s,!0),r&&r.forEach(o=>Zo(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const l=ey[o]||s&&s[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const ey={data:Lu,props:Ou,emits:Ou,methods:Pi,computed:Pi,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:Pi,directives:Pi,watch:sy,provide:Lu,inject:ty};function Lu(t,e){return e?t?function(){return jt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function ty(t,e){return Pi(Yl(t),Yl(e))}function Yl(t){if(Ee(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Xt(t,e){return t?[...new Set([].concat(t,e))]:e}function Pi(t,e){return t?jt(Object.create(null),t,e):e}function Ou(t,e){return t?Ee(t)&&Ee(e)?[...new Set([...t,...e])]:jt(Object.create(null),Du(t),Du(e??{})):e}function sy(t,e){if(!t)return e;if(!e)return t;const s=jt(Object.create(null),t);for(const n in e)s[n]=Xt(t[n],e[n]);return s}function Oh(){return{app:null,config:{isNativeTag:Gf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ny=0;function ry(t,e){return function(n,r=null){Te(n)||(n=jt({},n)),r!=null&&!it(r)&&(r=null);const i=Oh(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:ny++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Fy,get config(){return i.config},set config(d){},use(d,...f){return o.has(d)||(d&&Te(d.install)?(o.add(d),d.install(u,...f)):Te(d)&&(o.add(d),d(u,...f))),u},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),u},component(d,f){return f?(i.components[d]=f,u):i.components[d]},directive(d,f){return f?(i.directives[d]=f,u):i.directives[d]},mount(d,f,h){if(!c){const p=u._ceVNode||Be(n,r);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),t(p,d,h),c=!0,u._container=d,d.__vue_app__=u,Na(p.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Hs(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(d,f){return i.provides[d]=f,u},runWithContext(d){const f=Wr;Wr=u;try{return d()}finally{Wr=f}}};return u}}let Wr=null;function Fo(t,e){if(zt){let s=zt.provides;const n=zt.parent&&zt.parent.provides;n===s&&(s=zt.provides=Object.create(n)),s[t]=e}}function tn(t,e,s=!1){const n=Zh();if(n||Wr){let r=Wr?Wr._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&Te(e)?e.call(n&&n.proxy):e}}const Uh={},Bh=()=>Object.create(Uh),Mh=t=>Object.getPrototypeOf(t)===Uh;function iy(t,e,s,n=!1){const r={},i=Bh();t.propsDefaults=Object.create(null),Fh(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);s?t.props=n?r:hh(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function oy(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=ze(r),[c]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let f=0;f<d.length;f++){let h=d[f];if(Ra(t.emitsOptions,h))continue;const p=e[h];if(c)if(qe(i,h))p!==i[h]&&(i[h]=p,u=!0);else{const P=Ds(h);r[P]=zl(c,l,P,p,t,!1)}else p!==i[h]&&(i[h]=p,u=!0)}}}else{Fh(t,e,r,i)&&(u=!0);let d;for(const f in l)(!e||!qe(e,f)&&((d=Pr(f))===f||!qe(e,d)))&&(c?s&&(s[f]!==void 0||s[d]!==void 0)&&(r[f]=zl(c,l,f,void 0,t,!0)):delete r[f]);if(i!==l)for(const f in i)(!e||!qe(e,f))&&(delete i[f],u=!0)}u&&hn(t.attrs,"set","")}function Fh(t,e,s,n){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(Ci(c))continue;const u=e[c];let d;r&&qe(r,d=Ds(c))?!i||!i.includes(d)?s[d]=u:(l||(l={}))[d]=u:Ra(t.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,o=!0)}if(i){const c=ze(s),u=l||rt;for(let d=0;d<i.length;d++){const f=i[d];s[f]=zl(r,c,f,u[f],t,!qe(u,f))}}return o}function zl(t,e,s,n,r,i){const o=t[s];if(o!=null){const l=qe(o,"default");if(l&&n===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Te(c)){const{propsDefaults:u}=r;if(s in u)n=u[s];else{const d=fo(r);n=u[s]=c.call(null,e),d()}}else n=c;r.ce&&r.ce._setProp(s,n)}o[0]&&(i&&!l?n=!1:o[1]&&(n===""||n===Pr(s))&&(n=!0))}return n}const ay=new WeakMap;function Vh(t,e,s=!1){const n=s?ay:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!Te(t)){const d=f=>{c=!0;const[h,p]=Vh(f,e,!0);jt(o,h),p&&l.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return it(t)&&n.set(t,Vr),Vr;if(Ee(i))for(let d=0;d<i.length;d++){const f=Ds(i[d]);Uu(f)&&(o[f]=rt)}else if(i)for(const d in i){const f=Ds(d);if(Uu(f)){const h=i[d],p=o[f]=Ee(h)||Te(h)?{type:h}:jt({},h),P=p.type;let w=!1,k=!0;if(Ee(P))for(let T=0;T<P.length;++T){const N=P[T],L=Te(N)&&N.name;if(L==="Boolean"){w=!0;break}else L==="String"&&(k=!1)}else w=Te(P)&&P.name==="Boolean";p[0]=w,p[1]=k,(w||qe(p,"default"))&&l.push(f)}}const u=[o,l];return it(t)&&n.set(t,u),u}function Uu(t){return t[0]!=="$"&&!Ci(t)}const Wc=t=>t==="_"||t==="_ctx"||t==="$stable",Gc=t=>Ee(t)?t.map(Js):[Js(t)],ly=(t,e,s)=>{if(e._n)return e;const n=ot((...r)=>Gc(e(...r)),s);return n._c=!1,n},jh=(t,e,s)=>{const n=t._ctx;for(const r in t){if(Wc(r))continue;const i=t[r];if(Te(i))e[r]=ly(r,i,n);else if(i!=null){const o=Gc(i);e[r]=()=>o}}},$h=(t,e)=>{const s=Gc(e);t.slots.default=()=>s},Hh=(t,e,s)=>{for(const n in e)(s||!Wc(n))&&(t[n]=e[n])},cy=(t,e,s)=>{const n=t.slots=Bh();if(t.vnode.shapeFlag&32){const r=e._;r?(Hh(n,e,s),s&&Qf(n,"_",r,!0)):jh(e,n)}else e&&$h(t,e)},uy=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,o=rt;if(n.shapeFlag&32){const l=e._;l?s&&l===1?i=!1:Hh(r,e,s):(i=!e.$stable,jh(e,r)),o=e}else e&&($h(t,e),o={default:1});if(i)for(const l in r)!Wc(l)&&o[l]==null&&delete r[l]},vs=Sy;function dy(t){return fy(t)}function fy(t,e){const s=Sa();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:h,setScopeId:p=en,insertStaticContent:P}=t,w=(v,_,I,U=null,F=null,B=null,se=void 0,X=null,z=!!_.dynamicChildren)=>{if(v===_)return;v&&!ar(v,_)&&(U=O(v),$e(v,F,B,!0),v=null),_.patchFlag===-2&&(z=!1,_.dynamicChildren=null);const{type:K,ref:ge,shapeFlag:ie}=_;switch(K){case Da:k(v,_,I,U);break;case ns:T(v,_,I,U);break;case Vo:v==null&&N(_,I,U,se);break;case ye:H(v,_,I,U,F,B,se,X,z);break;default:ie&1?G(v,_,I,U,F,B,se,X,z):ie&6?be(v,_,I,U,F,B,se,X,z):(ie&64||ie&128)&&K.process(v,_,I,U,F,B,se,X,z,le)}ge!=null&&F?xi(ge,v&&v.ref,B,_||v,!_):ge==null&&v&&v.ref!=null&&xi(v.ref,null,B,v,!0)},k=(v,_,I,U)=>{if(v==null)n(_.el=l(_.children),I,U);else{const F=_.el=v.el;_.children!==v.children&&u(F,_.children)}},T=(v,_,I,U)=>{v==null?n(_.el=c(_.children||""),I,U):_.el=v.el},N=(v,_,I,U)=>{[v.el,v.anchor]=P(v.children,_,I,U,v.el,v.anchor)},L=({el:v,anchor:_},I,U)=>{let F;for(;v&&v!==_;)F=h(v),n(v,I,U),v=F;n(_,I,U)},R=({el:v,anchor:_})=>{let I;for(;v&&v!==_;)I=h(v),r(v),v=I;r(_)},G=(v,_,I,U,F,B,se,X,z)=>{_.type==="svg"?se="svg":_.type==="math"&&(se="mathml"),v==null?W(_,I,U,F,B,se,X,z):J(v,_,F,B,se,X,z)},W=(v,_,I,U,F,B,se,X)=>{let z,K;const{props:ge,shapeFlag:ie,transition:ve,dirs:Pe}=v;if(z=v.el=o(v.type,B,ge&&ge.is,ge),ie&8?d(z,v.children):ie&16&&Q(v.children,z,null,U,F,dl(v,B),se,X),Pe&&Xn(v,null,U,"created"),j(z,v,v.scopeId,se,U),ge){for(const Ge in ge)Ge!=="value"&&!Ci(Ge)&&i(z,Ge,null,ge[Ge],B,U);"value"in ge&&i(z,"value",null,ge.value,B),(K=ge.onVnodeBeforeMount)&&Ys(K,U,v)}Pe&&Xn(v,null,U,"beforeMount");const Oe=hy(F,ve);Oe&&ve.beforeEnter(z),n(z,_,I),((K=ge&&ge.onVnodeMounted)||Oe||Pe)&&vs(()=>{K&&Ys(K,U,v),Oe&&ve.enter(z),Pe&&Xn(v,null,U,"mounted")},F)},j=(v,_,I,U,F)=>{if(I&&p(v,I),U)for(let B=0;B<U.length;B++)p(v,U[B]);if(F){let B=F.subTree;if(_===B||Qh(B.type)&&(B.ssContent===_||B.ssFallback===_)){const se=F.vnode;j(v,se,se.scopeId,se.slotScopeIds,F.parent)}}},Q=(v,_,I,U,F,B,se,X,z=0)=>{for(let K=z;K<v.length;K++){const ge=v[K]=X?Mn(v[K]):Js(v[K]);w(null,ge,_,I,U,F,B,se,X)}},J=(v,_,I,U,F,B,se)=>{const X=_.el=v.el;let{patchFlag:z,dynamicChildren:K,dirs:ge}=_;z|=v.patchFlag&16;const ie=v.props||rt,ve=_.props||rt;let Pe;if(I&&er(I,!1),(Pe=ve.onVnodeBeforeUpdate)&&Ys(Pe,I,_,v),ge&&Xn(_,v,I,"beforeUpdate"),I&&er(I,!0),(ie.innerHTML&&ve.innerHTML==null||ie.textContent&&ve.textContent==null)&&d(X,""),K?re(v.dynamicChildren,K,X,I,U,dl(_,F),B):se||me(v,_,X,null,I,U,dl(_,F),B,!1),z>0){if(z&16)ce(X,ie,ve,I,F);else if(z&2&&ie.class!==ve.class&&i(X,"class",null,ve.class,F),z&4&&i(X,"style",ie.style,ve.style,F),z&8){const Oe=_.dynamicProps;for(let Ge=0;Ge<Oe.length;Ge++){const Ue=Oe[Ge],It=ie[Ue],Lt=ve[Ue];(Lt!==It||Ue==="value")&&i(X,Ue,It,Lt,F,I)}}z&1&&v.children!==_.children&&d(X,_.children)}else!se&&K==null&&ce(X,ie,ve,I,F);((Pe=ve.onVnodeUpdated)||ge)&&vs(()=>{Pe&&Ys(Pe,I,_,v),ge&&Xn(_,v,I,"updated")},U)},re=(v,_,I,U,F,B,se)=>{for(let X=0;X<_.length;X++){const z=v[X],K=_[X],ge=z.el&&(z.type===ye||!ar(z,K)||z.shapeFlag&198)?f(z.el):I;w(z,K,ge,null,U,F,B,se,!0)}},ce=(v,_,I,U,F)=>{if(_!==I){if(_!==rt)for(const B in _)!Ci(B)&&!(B in I)&&i(v,B,_[B],null,F,U);for(const B in I){if(Ci(B))continue;const se=I[B],X=_[B];se!==X&&B!=="value"&&i(v,B,X,se,F,U)}"value"in I&&i(v,"value",_.value,I.value,F)}},H=(v,_,I,U,F,B,se,X,z)=>{const K=_.el=v?v.el:l(""),ge=_.anchor=v?v.anchor:l("");let{patchFlag:ie,dynamicChildren:ve,slotScopeIds:Pe}=_;Pe&&(X=X?X.concat(Pe):Pe),v==null?(n(K,I,U),n(ge,I,U),Q(_.children||[],I,ge,F,B,se,X,z)):ie>0&&ie&64&&ve&&v.dynamicChildren?(re(v.dynamicChildren,ve,I,F,B,se,X),(_.key!=null||F&&_===F.subTree)&&Wh(v,_,!0)):me(v,_,I,ge,F,B,se,X,z)},be=(v,_,I,U,F,B,se,X,z)=>{_.slotScopeIds=X,v==null?_.shapeFlag&512?F.ctx.activate(_,I,U,se,z):Ce(_,I,U,F,B,se,z):Y(v,_,z)},Ce=(v,_,I,U,F,B,se)=>{const X=v.component=Dy(v,U,F);if(Ta(v)&&(X.ctx.renderer=le),Ny(X,!1,se),X.asyncDep){if(F&&F.registerDep(X,ee,se),!v.el){const z=X.subTree=Be(ns);T(null,z,_,I),v.placeholder=z.el}}else ee(X,v,_,I,F,B,se)},Y=(v,_,I)=>{const U=_.component=v.component;if(_y(v,_,I))if(U.asyncDep&&!U.asyncResolved){ae(U,_,I);return}else U.next=_,U.update();else _.el=v.el,U.vnode=_},ee=(v,_,I,U,F,B,se)=>{const X=()=>{if(v.isMounted){let{next:ie,bu:ve,u:Pe,parent:Oe,vnode:Ge}=v;{const qt=Gh(v);if(qt){ie&&(ie.el=Ge.el,ae(v,ie,se)),qt.asyncDep.then(()=>{v.isUnmounted||X()});return}}let Ue=ie,It;er(v,!1),ie?(ie.el=Ge.el,ae(v,ie,se)):ie=Ge,ve&&Mo(ve),(It=ie.props&&ie.props.onVnodeBeforeUpdate)&&Ys(It,Oe,ie,Ge),er(v,!0);const Lt=Mu(v),ls=v.subTree;v.subTree=Lt,w(ls,Lt,f(ls.el),O(ls),v,F,B),ie.el=Lt.el,Ue===null&&Py(v,Lt.el),Pe&&vs(Pe,F),(It=ie.props&&ie.props.onVnodeUpdated)&&vs(()=>Ys(It,Oe,ie,Ge),F)}else{let ie;const{el:ve,props:Pe}=_,{bm:Oe,m:Ge,parent:Ue,root:It,type:Lt}=v,ls=Ri(_);er(v,!1),Oe&&Mo(Oe),!ls&&(ie=Pe&&Pe.onVnodeBeforeMount)&&Ys(ie,Ue,_),er(v,!0);{It.ce&&It.ce._def.shadowRoot!==!1&&It.ce._injectChildStyle(Lt);const qt=v.subTree=Mu(v);w(null,qt,I,U,v,F,B),_.el=qt.el}if(Ge&&vs(Ge,F),!ls&&(ie=Pe&&Pe.onVnodeMounted)){const qt=_;vs(()=>Ys(ie,Ue,qt),F)}(_.shapeFlag&256||Ue&&Ri(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&v.a&&vs(v.a,F),v.isMounted=!0,_=I=U=null}};v.scope.on();const z=v.effect=new Xf(X);v.scope.off();const K=v.update=z.run.bind(z),ge=v.job=z.runIfDirty.bind(z);ge.i=v,ge.id=v.uid,z.scheduler=()=>$c(ge),er(v,!0),K()},ae=(v,_,I)=>{_.component=v;const U=v.vnode.props;v.vnode=_,v.next=null,oy(v,_.props,U,I),uy(v,_.children,I),En(),Tu(v),_n()},me=(v,_,I,U,F,B,se,X,z=!1)=>{const K=v&&v.children,ge=v?v.shapeFlag:0,ie=_.children,{patchFlag:ve,shapeFlag:Pe}=_;if(ve>0){if(ve&128){We(K,ie,I,U,F,B,se,X,z);return}else if(ve&256){Ie(K,ie,I,U,F,B,se,X,z);return}}Pe&8?(ge&16&&st(K,F,B),ie!==K&&d(I,ie)):ge&16?Pe&16?We(K,ie,I,U,F,B,se,X,z):st(K,F,B,!0):(ge&8&&d(I,""),Pe&16&&Q(ie,I,U,F,B,se,X,z))},Ie=(v,_,I,U,F,B,se,X,z)=>{v=v||Vr,_=_||Vr;const K=v.length,ge=_.length,ie=Math.min(K,ge);let ve;for(ve=0;ve<ie;ve++){const Pe=_[ve]=z?Mn(_[ve]):Js(_[ve]);w(v[ve],Pe,I,null,F,B,se,X,z)}K>ge?st(v,F,B,!0,!1,ie):Q(_,I,U,F,B,se,X,z,ie)},We=(v,_,I,U,F,B,se,X,z)=>{let K=0;const ge=_.length;let ie=v.length-1,ve=ge-1;for(;K<=ie&&K<=ve;){const Pe=v[K],Oe=_[K]=z?Mn(_[K]):Js(_[K]);if(ar(Pe,Oe))w(Pe,Oe,I,null,F,B,se,X,z);else break;K++}for(;K<=ie&&K<=ve;){const Pe=v[ie],Oe=_[ve]=z?Mn(_[ve]):Js(_[ve]);if(ar(Pe,Oe))w(Pe,Oe,I,null,F,B,se,X,z);else break;ie--,ve--}if(K>ie){if(K<=ve){const Pe=ve+1,Oe=Pe<ge?_[Pe].el:U;for(;K<=ve;)w(null,_[K]=z?Mn(_[K]):Js(_[K]),I,Oe,F,B,se,X,z),K++}}else if(K>ve)for(;K<=ie;)$e(v[K],F,B,!0),K++;else{const Pe=K,Oe=K,Ge=new Map;for(K=Oe;K<=ve;K++){const Ot=_[K]=z?Mn(_[K]):Js(_[K]);Ot.key!=null&&Ge.set(Ot.key,K)}let Ue,It=0;const Lt=ve-Oe+1;let ls=!1,qt=0;const cs=new Array(Lt);for(K=0;K<Lt;K++)cs[K]=0;for(K=Pe;K<=ie;K++){const Ot=v[K];if(It>=Lt){$e(Ot,F,B,!0);continue}let us;if(Ot.key!=null)us=Ge.get(Ot.key);else for(Ue=Oe;Ue<=ve;Ue++)if(cs[Ue-Oe]===0&&ar(Ot,_[Ue])){us=Ue;break}us===void 0?$e(Ot,F,B,!0):(cs[us-Oe]=K+1,us>=qt?qt=us:ls=!0,w(Ot,_[us],I,null,F,B,se,X,z),It++)}const Jn=ls?py(cs):Vr;for(Ue=Jn.length-1,K=Lt-1;K>=0;K--){const Ot=Oe+K,us=_[Ot],Cr=_[Ot+1],ys=Ot+1<ge?Cr.el||Cr.placeholder:U;cs[K]===0?w(null,us,I,ys,F,B,se,X,z):ls&&(Ue<0||K!==Jn[Ue]?je(us,I,ys,2):Ue--)}}},je=(v,_,I,U,F=null)=>{const{el:B,type:se,transition:X,children:z,shapeFlag:K}=v;if(K&6){je(v.component.subTree,_,I,U);return}if(K&128){v.suspense.move(_,I,U);return}if(K&64){se.move(v,_,I,le);return}if(se===ye){n(B,_,I);for(let ie=0;ie<z.length;ie++)je(z[ie],_,I,U);n(v.anchor,_,I);return}if(se===Vo){L(v,_,I);return}if(U!==2&&K&1&&X)if(U===0)X.beforeEnter(B),n(B,_,I),vs(()=>X.enter(B),F);else{const{leave:ie,delayLeave:ve,afterLeave:Pe}=X,Oe=()=>{v.ctx.isUnmounted?r(B):n(B,_,I)},Ge=()=>{B._isLeaving&&B[un](!0),ie(B,()=>{Oe(),Pe&&Pe()})};ve?ve(B,Oe,Ge):Ge()}else n(B,_,I)},$e=(v,_,I,U=!1,F=!1)=>{const{type:B,props:se,ref:X,children:z,dynamicChildren:K,shapeFlag:ge,patchFlag:ie,dirs:ve,cacheIndex:Pe}=v;if(ie===-2&&(F=!1),X!=null&&(En(),xi(X,null,I,v,!0),_n()),Pe!=null&&(_.renderCache[Pe]=void 0),ge&256){_.ctx.deactivate(v);return}const Oe=ge&1&&ve,Ge=!Ri(v);let Ue;if(Ge&&(Ue=se&&se.onVnodeBeforeUnmount)&&Ys(Ue,_,v),ge&6)wt(v.component,I,U);else{if(ge&128){v.suspense.unmount(I,U);return}Oe&&Xn(v,null,_,"beforeUnmount"),ge&64?v.type.remove(v,_,I,le,U):K&&!K.hasOnce&&(B!==ye||ie>0&&ie&64)?st(K,_,I,!1,!0):(B===ye&&ie&384||!F&&ge&16)&&st(z,_,I),U&&St(v)}(Ge&&(Ue=se&&se.onVnodeUnmounted)||Oe)&&vs(()=>{Ue&&Ys(Ue,_,v),Oe&&Xn(v,null,_,"unmounted")},I)},St=v=>{const{type:_,el:I,anchor:U,transition:F}=v;if(_===ye){Xe(I,U);return}if(_===Vo){R(v);return}const B=()=>{r(I),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(v.shapeFlag&1&&F&&!F.persisted){const{leave:se,delayLeave:X}=F,z=()=>se(I,B);X?X(v.el,B,z):z()}else B()},Xe=(v,_)=>{let I;for(;v!==_;)I=h(v),r(v),v=I;r(_)},wt=(v,_,I)=>{const{bum:U,scope:F,job:B,subTree:se,um:X,m:z,a:K}=v;Bu(z),Bu(K),U&&Mo(U),F.stop(),B&&(B.flags|=8,$e(se,v,_,I)),X&&vs(X,_),vs(()=>{v.isUnmounted=!0},_)},st=(v,_,I,U=!1,F=!1,B=0)=>{for(let se=B;se<v.length;se++)$e(v[se],_,I,U,F)},O=v=>{if(v.shapeFlag&6)return O(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const _=h(v.anchor||v.el),I=_&&_[L0];return I?h(I):_};let te=!1;const Z=(v,_,I)=>{v==null?_._vnode&&$e(_._vnode,null,null,!0):w(_._vnode||null,v,_,null,null,null,I),_._vnode=v,te||(te=!0,Tu(),bh(),te=!1)},le={p:w,um:$e,m:je,r:St,mt:Ce,mc:Q,pc:me,pbc:re,n:O,o:t};return{render:Z,hydrate:void 0,createApp:ry(Z)}}function dl({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function er({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function hy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Wh(t,e,s=!1){const n=t.children,r=e.children;if(Ee(n)&&Ee(r))for(let i=0;i<n.length;i++){const o=n[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=Mn(r[i]),l.el=o.el),!s&&l.patchFlag!==-2&&Wh(o,l)),l.type===Da&&l.patchFlag!==-1&&(l.el=o.el),l.type===ns&&!l.el&&(l.el=o.el)}}function py(t){const e=t.slice(),s=[0];let n,r,i,o,l;const c=t.length;for(n=0;n<c;n++){const u=t[n];if(u!==0){if(r=s[s.length-1],t[r]<u){e[n]=r,s.push(n);continue}for(i=0,o=s.length-1;i<o;)l=i+o>>1,t[s[l]]<u?i=l+1:o=l;u<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function Gh(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Gh(e)}function Bu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const my=Symbol.for("v-scx"),gy=()=>tn(my);function qs(t,e,s){return Kh(t,e,s)}function Kh(t,e,s=rt){const{immediate:n,deep:r,flush:i,once:o}=s,l=jt({},s),c=e&&n||!e&&i!=="post";let u;if(Yi){if(i==="sync"){const p=gy();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!c){const p=()=>{};return p.stop=en,p.resume=en,p.pause=en,p}}const d=zt;l.call=(p,P,w)=>Hs(p,d,P,w);let f=!1;i==="post"?l.scheduler=p=>{vs(p,d&&d.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(p,P)=>{P?p():$c(p)}),l.augmentJob=p=>{e&&(p.flags|=4),f&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const h=x0(t,e,l);return Yi&&(u?u.push(h):c&&h()),h}function yy(t,e,s){const n=this.proxy,r=Pt(t)?t.includes(".")?Yh(n,t):()=>n[t]:t.bind(n,n);let i;Te(e)?i=e:(i=e.handler,s=e);const o=fo(this),l=Kh(r,i.bind(n),s);return o(),l}function Yh(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const vy=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ds(e)}Modifiers`]||t[`${Pr(e)}Modifiers`];function by(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||rt;let r=s;const i=e.startsWith("update:"),o=i&&vy(n,e.slice(7));o&&(o.trim&&(r=s.map(d=>Pt(d)?d.trim():d)),o.number&&(r=s.map(Ko)));let l,c=n[l=rl(e)]||n[l=rl(Ds(e))];!c&&i&&(c=n[l=rl(Pr(e))]),c&&Hs(c,t,6,r);const u=n[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Hs(u,t,6,r)}}const wy=new WeakMap;function zh(t,e,s=!1){const n=s?wy:e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Te(t)){const c=u=>{const d=zh(u,e,!0);d&&(l=!0,jt(o,d))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(it(t)&&n.set(t,null),null):(Ee(i)?i.forEach(c=>o[c]=null):jt(o,i),it(t)&&n.set(t,o),o)}function Ra(t,e){return!t||!Ea(e)?!1:(e=e.slice(2).replace(/Once$/,""),qe(t,e[0].toLowerCase()+e.slice(1))||qe(t,Pr(e))||qe(t,e))}function Mu(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:d,props:f,data:h,setupState:p,ctx:P,inheritAttrs:w}=t,k=Jo(t);let T,N;try{if(s.shapeFlag&4){const R=r||n,G=R;T=Js(u.call(G,R,d,f,p,h,P)),N=l}else{const R=e;T=Js(R.length>1?R(f,{attrs:l,slots:o,emit:c}):R(f,null)),N=e.props?l:Ay(l)}}catch(R){Li.length=0,Ca(R,t,1),T=Be(ns)}let L=T;if(N&&w!==!1){const R=Object.keys(N),{shapeFlag:G}=L;R.length&&G&7&&(i&&R.some(Rc)&&(N=Ey(N,i)),L=Gn(L,N,!1,!0))}return s.dirs&&(L=Gn(L,null,!1,!0),L.dirs=L.dirs?L.dirs.concat(s.dirs):s.dirs),s.transition&&Gi(L,s.transition),T=L,Jo(k),T}const Ay=t=>{let e;for(const s in t)(s==="class"||s==="style"||Ea(s))&&((e||(e={}))[s]=t[s]);return e},Ey=(t,e)=>{const s={};for(const n in t)(!Rc(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function _y(t,e,s){const{props:n,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?Fu(n,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const h=d[f];if(o[h]!==n[h]&&!Ra(u,h))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:n===o?!1:n?o?Fu(n,o,u):!0:!!o;return!1}function Fu(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!Ra(s,i))return!0}return!1}function Py({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const Qh=t=>t.__isSuspense;function Sy(t,e){e&&e.pendingBranch?Ee(t)?e.effects.push(...t):e.effects.push(t):N0(t)}const ye=Symbol.for("v-fgt"),Da=Symbol.for("v-txt"),ns=Symbol.for("v-cmt"),Vo=Symbol.for("v-stc"),Li=[];let _s=null;function g(t=!1){Li.push(_s=t?null:[])}function ky(){Li.pop(),_s=Li[Li.length-1]||null}let Ki=1;function Xo(t,e=!1){Ki+=t,t<0&&_s&&e&&(_s.hasOnce=!0)}function Jh(t){return t.dynamicChildren=Ki>0?_s||Vr:null,ky(),Ki>0&&_s&&_s.push(t),t}function y(t,e,s,n,r,i){return Jh(a(t,e,s,n,r,i,!0))}function ea(t,e,s,n,r){return Jh(Be(t,e,s,n,r,!0))}function ta(t){return t?t.__v_isVNode===!0:!1}function ar(t,e){return t.type===e.type&&t.key===e.key}const qh=({key:t})=>t??null,jo=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Pt(t)||Qt(t)||Te(t)?{i:Es,r:t,k:e,f:!!s}:t:null);function a(t,e=null,s=null,n=0,r=null,i=t===ye?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&qh(e),ref:e&&jo(e),scopeId:Ah,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Es};return l?(Kc(c,s),i&128&&t.normalize(c)):s&&(c.shapeFlag|=Pt(s)?8:16),Ki>0&&!o&&_s&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&_s.push(c),c}const Be=Cy;function Cy(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===Q0)&&(t=ns),ta(t)){const l=Gn(t,e,!0);return s&&Kc(l,s),Ki>0&&!i&&_s&&(l.shapeFlag&6?_s[_s.indexOf(t)]=l:_s.push(l)),l.patchFlag=-2,l}if(My(t)&&(t=t.__vccOpts),e){e=Ty(e);let{class:l,style:c}=e;l&&!Pt(l)&&(e.class=we(l)),it(c)&&(jc(c)&&!Ee(c)&&(c=jt({},c)),e.style=Rt(c))}const o=Pt(t)?1:Qh(t)?128:Eh(t)?64:it(t)?4:Te(t)?2:0;return a(t,e,s,n,r,o,i,!0)}function Ty(t){return t?jc(t)||Mh(t)?jt({},t):t:null}function Gn(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?Iy(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&qh(u),ref:e&&e.ref?s&&i?Ee(i)?i.concat(jo(e)):[i,jo(e)]:jo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ye?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Gn(t.ssContent),ssFallback:t.ssFallback&&Gn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&n&&Gi(d,c.clone(d)),d}function ne(t=" ",e=0){return Be(Da,null,t,e)}function Dt(t,e){const s=Be(Vo,null,t);return s.staticCount=e,s}function V(t="",e=!1){return e?(g(),ea(ns,null,t)):Be(ns,null,t)}function Js(t){return t==null||typeof t=="boolean"?Be(ns):Ee(t)?Be(ye,null,t.slice()):ta(t)?Mn(t):Be(Da,null,String(t))}function Mn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Gn(t)}function Kc(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(Ee(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Kc(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!Mh(e)?e._ctx=Es:r===3&&Es&&(Es.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Es},s=32):(e=String(e),n&64?(s=16,e=[ne(e)]):s=8);t.children=e,t.shapeFlag|=s}function Iy(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=we([e.class,n.class]));else if(r==="style")e.style=Rt([e.style,n.style]);else if(Ea(r)){const i=e[r],o=n[r];o&&i!==o&&!(Ee(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=n[r])}return e}function Ys(t,e,s,n=null){Hs(t,e,7,[s,n])}const xy=Oh();let Ry=0;function Dy(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||xy,i={uid:Ry++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new n0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vh(n,r),emitsOptions:zh(n,r),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:n.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=by.bind(null,i),t.ce&&t.ce(i),i}let zt=null;const Zh=()=>zt||Es;let sa,Ql;{const t=Sa(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};sa=e("__VUE_INSTANCE_SETTERS__",s=>zt=s),Ql=e("__VUE_SSR_SETTERS__",s=>Yi=s)}const fo=t=>{const e=zt;return sa(t),t.scope.on(),()=>{t.scope.off(),sa(e)}},Vu=()=>{zt&&zt.scope.off(),sa(null)};function Xh(t){return t.vnode.shapeFlag&4}let Yi=!1;function Ny(t,e=!1,s=!1){e&&Ql(e);const{props:n,children:r}=t.vnode,i=Xh(t);iy(t,n,i,e),cy(t,r,s||e);const o=i?Ly(t,e):void 0;return e&&Ql(!1),o}function Ly(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,q0);const{setup:n}=s;if(n){En();const r=t.setupContext=n.length>1?Uy(t):null,i=fo(t),o=uo(n,t,0,[t.props,r]),l=Kf(o);if(_n(),i(),(l||t.sp)&&!Ri(t)&&Ih(t),l){if(o.then(Vu,Vu),e)return o.then(c=>{ju(t,c)}).catch(c=>{Ca(c,t,0)});t.asyncDep=o}else ju(t,o)}else ep(t)}function ju(t,e,s){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:it(e)&&(t.setupState=gh(e)),ep(t)}function ep(t,e,s){const n=t.type;t.render||(t.render=n.render||en);{const r=fo(t);En();try{Z0(t)}finally{_n(),r()}}}const Oy={get(t,e){return Yt(t,"get",""),t[e]}};function Uy(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Oy),slots:t.slots,emit:t.emit,expose:e}}function Na(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(gh(_0(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Ni)return Ni[s](t)},has(e,s){return s in e||s in Ni}})):t.proxy}function By(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function My(t){return Te(t)&&"__vccOpts"in t}const Ae=(t,e)=>T0(t,e,Yi);function Yc(t,e,s){const n=(i,o,l)=>{Xo(-1);try{return Be(i,o,l)}finally{Xo(1)}},r=arguments.length;return r===2?it(e)&&!Ee(e)?ta(e)?n(t,null,[e]):n(t,e):n(t,null,e):(r>3?s=Array.prototype.slice.call(arguments,2):r===3&&ta(s)&&(s=[s]),n(t,e,s))}const Fy="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jl;const $u=typeof window<"u"&&window.trustedTypes;if($u)try{Jl=$u.createPolicy("vue",{createHTML:t=>t})}catch{}const tp=Jl?t=>Jl.createHTML(t):t=>t,Vy="http://www.w3.org/2000/svg",jy="http://www.w3.org/1998/Math/MathML",ln=typeof document<"u"?document:null,Hu=ln&&ln.createElement("template"),$y={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?ln.createElementNS(Vy,t):e==="mathml"?ln.createElementNS(jy,t):s?ln.createElement(t,{is:s}):ln.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>ln.createTextNode(t),createComment:t=>ln.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ln.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const o=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{Hu.innerHTML=tp(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const l=Hu.content;if(n==="svg"||n==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},xn="transition",yi="animation",zi=Symbol("_vtc"),sp={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Hy=jt({},_h,sp),Wy=t=>(t.displayName="Transition",t.props=Hy,t),Gy=Wy((t,{slots:e})=>Yc(B0,Ky(t),e)),tr=(t,e=[])=>{Ee(t)?t.forEach(s=>s(...e)):t&&t(...e)},Wu=t=>t?Ee(t)?t.some(e=>e.length>1):t.length>1:!1;function Ky(t){const e={};for(const H in t)H in sp||(e[H]=t[H]);if(t.css===!1)return e;const{name:s="v",type:n,duration:r,enterFromClass:i=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:d=l,leaveFromClass:f=`${s}-leave-from`,leaveActiveClass:h=`${s}-leave-active`,leaveToClass:p=`${s}-leave-to`}=t,P=Yy(r),w=P&&P[0],k=P&&P[1],{onBeforeEnter:T,onEnter:N,onEnterCancelled:L,onLeave:R,onLeaveCancelled:G,onBeforeAppear:W=T,onAppear:j=N,onAppearCancelled:Q=L}=e,J=(H,be,Ce,Y)=>{H._enterCancelled=Y,sr(H,be?d:l),sr(H,be?u:o),Ce&&Ce()},re=(H,be)=>{H._isLeaving=!1,sr(H,f),sr(H,p),sr(H,h),be&&be()},ce=H=>(be,Ce)=>{const Y=H?j:N,ee=()=>J(be,H,Ce);tr(Y,[be,ee]),Gu(()=>{sr(be,H?c:i),on(be,H?d:l),Wu(Y)||Ku(be,n,w,ee)})};return jt(e,{onBeforeEnter(H){tr(T,[H]),on(H,i),on(H,o)},onBeforeAppear(H){tr(W,[H]),on(H,c),on(H,u)},onEnter:ce(!1),onAppear:ce(!0),onLeave(H,be){H._isLeaving=!0;const Ce=()=>re(H,be);on(H,f),H._enterCancelled?(on(H,h),Qu()):(Qu(),on(H,h)),Gu(()=>{H._isLeaving&&(sr(H,f),on(H,p),Wu(R)||Ku(H,n,k,Ce))}),tr(R,[H,Ce])},onEnterCancelled(H){J(H,!1,void 0,!0),tr(L,[H])},onAppearCancelled(H){J(H,!0,void 0,!0),tr(Q,[H])},onLeaveCancelled(H){re(H),tr(G,[H])}})}function Yy(t){if(t==null)return null;if(it(t))return[fl(t.enter),fl(t.leave)];{const e=fl(t);return[e,e]}}function fl(t){return Qg(t)}function on(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[zi]||(t[zi]=new Set)).add(e)}function sr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const s=t[zi];s&&(s.delete(e),s.size||(t[zi]=void 0))}function Gu(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let zy=0;function Ku(t,e,s,n){const r=t._endId=++zy,i=()=>{r===t._endId&&n()};if(s!=null)return setTimeout(i,s);const{type:o,timeout:l,propCount:c}=Qy(t,e);if(!o)return n();const u=o+"end";let d=0;const f=()=>{t.removeEventListener(u,h),i()},h=p=>{p.target===t&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},l+1),t.addEventListener(u,h)}function Qy(t,e){const s=window.getComputedStyle(t),n=P=>(s[P]||"").split(", "),r=n(`${xn}Delay`),i=n(`${xn}Duration`),o=Yu(r,i),l=n(`${yi}Delay`),c=n(`${yi}Duration`),u=Yu(l,c);let d=null,f=0,h=0;e===xn?o>0&&(d=xn,f=o,h=i.length):e===yi?u>0&&(d=yi,f=u,h=c.length):(f=Math.max(o,u),d=f>0?o>u?xn:yi:null,h=d?d===xn?i.length:c.length:0);const p=d===xn&&/\b(?:transform|all)(?:,|$)/.test(n(`${xn}Property`).toString());return{type:d,timeout:f,propCount:h,hasTransform:p}}function Yu(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,n)=>zu(s)+zu(t[n])))}function zu(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Qu(){return document.body.offsetHeight}function Jy(t,e,s){const n=t[zi];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const na=Symbol("_vod"),np=Symbol("_vsh"),qy={name:"show",beforeMount(t,{value:e},{transition:s}){t[na]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):vi(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),vi(t,!0),n.enter(t)):n.leave(t,()=>{vi(t,!1)}):vi(t,e))},beforeUnmount(t,{value:e}){vi(t,e)}};function vi(t,e){t.style.display=e?t[na]:"none",t[np]=!e}const Zy=Symbol(""),Xy=/(?:^|;)\s*display\s*:/;function ev(t,e,s){const n=t.style,r=Pt(s);let i=!1;if(s&&!r){if(e)if(Pt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();s[l]==null&&$o(n,l,"")}else for(const o in e)s[o]==null&&$o(n,o,"");for(const o in s)o==="display"&&(i=!0),$o(n,o,s[o])}else if(r){if(e!==s){const o=n[Zy];o&&(s+=";"+o),n.cssText=s,i=Xy.test(s)}}else e&&t.removeAttribute("style");na in t&&(t[na]=i?n.display:"",t[np]&&(n.display="none"))}const Ju=/\s*!important$/;function $o(t,e,s){if(Ee(s))s.forEach(n=>$o(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=tv(t,e);Ju.test(s)?t.setProperty(Pr(n),s.replace(Ju,""),"important"):t[n]=s}}const qu=["Webkit","Moz","ms"],hl={};function tv(t,e){const s=hl[e];if(s)return s;let n=Ds(e);if(n!=="filter"&&n in t)return hl[e]=n;n=Pa(n);for(let r=0;r<qu.length;r++){const i=qu[r]+n;if(i in t)return hl[e]=i}return e}const Zu="http://www.w3.org/1999/xlink";function Xu(t,e,s,n,r,i=t0(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Zu,e.slice(6,e.length)):t.setAttributeNS(Zu,e,s):s==null||i&&!Jf(s)?t.removeAttribute(e):t.setAttribute(e,i?"":sn(s)?String(s):s)}function ed(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?tp(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=s==null?t.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in t))&&(t.value=c),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const l=typeof t[e];l==="boolean"?s=Jf(s):s==null&&l==="string"?(s="",o=!0):l==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(r||e)}function Vn(t,e,s,n){t.addEventListener(e,s,n)}function sv(t,e,s,n){t.removeEventListener(e,s,n)}const td=Symbol("_vei");function nv(t,e,s,n,r=null){const i=t[td]||(t[td]={}),o=i[e];if(n&&o)o.value=n;else{const[l,c]=rv(e);if(n){const u=i[e]=av(n,r);Vn(t,l,u,c)}else o&&(sv(t,l,o,c),i[e]=void 0)}}const sd=/(?:Once|Passive|Capture)$/;function rv(t){let e;if(sd.test(t)){e={};let n;for(;n=t.match(sd);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pr(t.slice(2)),e]}let pl=0;const iv=Promise.resolve(),ov=()=>pl||(iv.then(()=>pl=0),pl=Date.now());function av(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Hs(lv(n,s.value),e,5,[n])};return s.value=t,s.attached=ov(),s}function lv(t,e){if(Ee(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const nd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,cv=(t,e,s,n,r,i)=>{const o=r==="svg";e==="class"?Jy(t,n,o):e==="style"?ev(t,s,n):Ea(e)?Rc(e)||nv(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):uv(t,e,n,o))?(ed(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Xu(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Pt(n))?ed(t,Ds(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Xu(t,e,n,o))};function uv(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&nd(e)&&Te(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return nd(e)&&Pt(s)?!1:e in t}const Jr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ee(e)?s=>Mo(e,s):e};function dv(t){t.target.composing=!0}function rd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bn=Symbol("_assign"),Ze={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[bn]=Jr(r);const i=n||r.props&&r.props.type==="number";Vn(t,e?"change":"input",o=>{if(o.target.composing)return;let l=t.value;s&&(l=l.trim()),i&&(l=Ko(l)),t[bn](l)}),s&&Vn(t,"change",()=>{t.value=t.value.trim()}),e||(Vn(t,"compositionstart",dv),Vn(t,"compositionend",rd),Vn(t,"change",rd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},o){if(t[bn]=Jr(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Ko(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===c)||(t.value=c))}},ql={deep:!0,created(t,e,s){t[bn]=Jr(s),Vn(t,"change",()=>{const n=t._modelValue,r=Qi(t),i=t.checked,o=t[bn];if(Ee(n)){const l=Lc(n,r),c=l!==-1;if(i&&!c)o(n.concat(r));else if(!i&&c){const u=[...n];u.splice(l,1),o(u)}}else if(li(n)){const l=new Set(n);i?l.add(r):l.delete(r),o(l)}else o(rp(t,i))})},mounted:id,beforeUpdate(t,e,s){t[bn]=Jr(s),id(t,e,s)}};function id(t,{value:e,oldValue:s},n){t._modelValue=e;let r;if(Ee(e))r=Lc(e,n.props.value)>-1;else if(li(e))r=e.has(n.props.value);else{if(e===s)return;r=lo(e,rp(t,!0))}t.checked!==r&&(t.checked=r)}const ps={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const r=li(e);Vn(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?Ko(Qi(o)):Qi(o));t[bn](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Hi(()=>{t._assigning=!1})}),t[bn]=Jr(n)},mounted(t,{value:e}){od(t,e)},beforeUpdate(t,e,s){t[bn]=Jr(s)},updated(t,{value:e}){t._assigning||od(t,e)}};function od(t,e){const s=t.multiple,n=Ee(e);if(!(s&&!n&&!li(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=Qi(o);if(s)if(n){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=Lc(e,l)>-1}else o.selected=e.has(l);else if(lo(Qi(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Qi(t){return"_value"in t?t._value:t.value}function rp(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const fv=["ctrl","shift","alt","meta"],hv={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>fv.some(s=>t[`${s}Key`]&&!e.includes(s))},ue=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=((r,...i)=>{for(let o=0;o<e.length;o++){const l=hv[e[o]];if(l&&l(r,e))return}return t(r,...i)}))},pv=jt({patchProp:cv},$y);let ad;function mv(){return ad||(ad=dy(pv))}const gv=((...t)=>{const e=mv().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=vv(n);if(!r)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=s(r,!1,yv(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function yv(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function vv(t){return Pt(t)?document.querySelector(t):t}const ip="auth-changed";function bv(){localStorage.removeItem("token"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("remember_email"),window.dispatchEvent(new Event(ip))}function Zl(){return localStorage.getItem("isLoggedIn")==="true"}const ld=ip,wv="6.15.0";function Av(t,e,s){const n=e.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const r=new Error(`invalid value for type ${e}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${s}`,r.value=t,r}async function es(t){const e=Object.keys(t);return(await Promise.all(e.map(n=>Promise.resolve(t[n])))).reduce((n,r,i)=>(n[e[i]]=r,n),{})}function _e(t,e,s){for(let n in e){let r=e[n];const i=s?s[n]:null;i&&Av(r,i,n),Object.defineProperty(t,n,{enumerable:!0,value:r,writable:!1})}}function Br(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(s=>Br(s,e)).join(", ")+" ]";if(t instanceof Uint8Array){const s="0123456789abcdef";let n="0x";for(let r=0;r<t.length;r++)n+=s[t[r]>>4],n+=s[t[r]&15];return n}if(typeof t=="object"&&typeof t.toJSON=="function")return Br(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const s=Object.keys(t);return s.sort(),"{ "+s.map(n=>`${Br(n,e)}: ${Br(t[n],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Kt(t,e){return t&&t.code===e}function zc(t){return Kt(t,"CALL_EXCEPTION")}function ft(t,e,s){let n=t;{const i=[];if(s){if("message"in s||"code"in s||"name"in s)throw new Error(`value will overwrite populated values: ${Br(s)}`);for(const o in s){if(o==="shortMessage")continue;const l=s[o];i.push(o+"="+Br(l))}}i.push(`code=${e}`),i.push(`version=${wv}`),i.length&&(t+=" ("+i.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(t);break;default:r=new Error(t)}return _e(r,{code:e}),s&&Object.assign(r,s),r.shortMessage==null&&_e(r,{shortMessage:n}),r}function $(t,e,s,n){if(!t)throw ft(e,s,n)}function S(t,e,s,n){$(t,e,"INVALID_ARGUMENT",{argument:s,value:n})}function op(t,e,s){s==null&&(s=""),s&&(s=": "+s),$(t>=e,"missing argument"+s,"MISSING_ARGUMENT",{count:t,expectedCount:e}),$(t<=e,"too many arguments"+s,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function ho(t,e,s){if(s==null&&(s=""),t!==e){let n=s,r="new";s&&(n+=".",r+=" "+s),$(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function ap(t,e,s){if(t instanceof Uint8Array)return s?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((t.length-2)/2);let r=2;for(let i=0;i<n.length;i++)n[i]=parseInt(t.substring(r,r+2),16),r+=2;return n}S(!1,"invalid BytesLike value",e||"value",t)}function Le(t,e){return ap(t,e,!1)}function rs(t,e){return ap(t,e,!0)}function ct(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function Qc(t){return ct(t,!0)||t instanceof Uint8Array}const cd="0123456789abcdef";function oe(t){const e=Le(t);let s="0x";for(let n=0;n<e.length;n++){const r=e[n];s+=cd[(r&240)>>4]+cd[r&15]}return s}function bt(t){return"0x"+t.map(e=>oe(e).substring(2)).join("")}function Gr(t){return ct(t,!0)?(t.length-2)/2:Le(t).length}function mt(t,e,s){const n=Le(t);return s!=null&&s>n.length&&$(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:s}),oe(n.slice(e??0,s??n.length))}function lp(t,e,s){const n=Le(t);$(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const r=new Uint8Array(e);return r.fill(0),s?r.set(n,e-n.length):r.set(n,0),oe(r)}function Pn(t,e){return lp(t,e,!0)}function Ev(t,e){return lp(t,e,!1)}const La=BigInt(0),js=BigInt(1),Mr=9007199254740991;function ra(t,e){const s=Oa(t,"value"),n=BigInt(De(e,"width"));if($(s>>n===La,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),s>>n-js){const r=(js<<n)-js;return-((~s&r)+js)}return s}function cp(t,e){let s=he(t,"value");const n=BigInt(De(e,"width")),r=js<<n-js;if(s<La){s=-s,$(s<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(js<<n)-js;return(~s&i)+js}else $(s<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return s}function dr(t,e){const s=Oa(t,"value"),n=BigInt(De(e,"bits"));return s&(js<<n)-js}function he(t,e){switch(typeof t){case"bigint":return t;case"number":return S(Number.isInteger(t),"underflow",e||"value",t),S(t>=-Mr&&t<=Mr,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(s){S(!1,`invalid BigNumberish string: ${s.message}`,e||"value",t)}}S(!1,"invalid BigNumberish value",e||"value",t)}function Oa(t,e){const s=he(t,e);return $(s>=La,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),s}const ud="0123456789abcdef";function Ua(t){if(t instanceof Uint8Array){let e="0x0";for(const s of t)e+=ud[s>>4],e+=ud[s&15];return BigInt(e)}return he(t)}function De(t,e){switch(typeof t){case"bigint":return S(t>=-Mr&&t<=Mr,"overflow",e||"value",t),Number(t);case"number":return S(Number.isInteger(t),"underflow",e||"value",t),S(t>=-Mr&&t<=Mr,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return De(BigInt(t),e)}catch(s){S(!1,`invalid numeric string: ${s.message}`,e||"value",t)}}S(!1,"invalid numeric value",e||"value",t)}function _v(t){return De(Ua(t))}function Kn(t,e){let n=Oa(t,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const r=De(e,"width");for($(r*2>=n.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});n.length<r*2;)n="0"+n}return"0x"+n}function Nt(t){const e=Oa(t,"value");if(e===La)return new Uint8Array([]);let s=e.toString(16);s.length%2&&(s="0"+s);const n=new Uint8Array(s.length/2);for(let r=0;r<n.length;r++){const i=r*2;n[r]=parseInt(s.substring(i,i+2),16)}return n}function Fs(t){let e=oe(Qc(t)?t:Nt(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const dd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const fd=BigInt(58);function Pv(t){const e=Le(t);let s=Ua(e),n="";for(;s;)n=dd[Number(s%fd)]+n,s/=fd;for(let r=0;r<e.length&&!e[r];r++)n=dd[0]+n;return n}function Sv(t){t=atob(t);const e=new Uint8Array(t.length);for(let s=0;s<t.length;s++)e[s]=t.charCodeAt(s);return Le(e)}function kv(t){const e=Le(t);let s="";for(let n=0;n<e.length;n++)s+=String.fromCharCode(e[n]);return btoa(s)}class up{filter;emitter;#e;constructor(e,s,n){this.#e=s,_e(this,{emitter:e,filter:n})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function Cv(t,e,s,n,r){S(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",s)}function dp(t,e,s,n,r){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<s.length&&s[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?s.length-e-1:0}function Tv(t,e,s,n,r){return t==="OVERLONG"?(S(typeof r=="number","invalid bad code point for replacement","badCodepoint",r),n.push(r),0):(n.push(65533),dp(t,e,s))}const Iv=Object.freeze({error:Cv,ignore:dp,replace:Tv});function xv(t,e){e==null&&(e=Iv.error);const s=Le(t,"bytes"),n=[];let r=0;for(;r<s.length;){const i=s[r++];if(i>>7===0){n.push(i);continue}let o=null,l=null;if((i&224)===192)o=1,l=127;else if((i&240)===224)o=2,l=2047;else if((i&248)===240)o=3,l=65535;else{(i&192)===128?r+=e("UNEXPECTED_CONTINUE",r-1,s,n):r+=e("BAD_PREFIX",r-1,s,n);continue}if(r-1+o>=s.length){r+=e("OVERRUN",r-1,s,n);continue}let c=i&(1<<8-o-1)-1;for(let u=0;u<o;u++){let d=s[r];if((d&192)!=128){r+=e("MISSING_CONTINUE",r,s,n),c=null;break}c=c<<6|d&63,r++}if(c!==null){if(c>1114111){r+=e("OUT_OF_RANGE",r-1-o,s,n,c);continue}if(c>=55296&&c<=57343){r+=e("UTF16_SURROGATE",r-1-o,s,n,c);continue}if(c<=l){r+=e("OVERLONG",r-1-o,s,n,c);continue}n.push(c)}}return n}function wn(t,e){S(typeof t=="string","invalid string value","str",t);let s=[];for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(r<128)s.push(r);else if(r<2048)s.push(r>>6|192),s.push(r&63|128);else if((r&64512)==55296){n++;const i=t.charCodeAt(n);S(n<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((r&1023)<<10)+(i&1023);s.push(o>>18|240),s.push(o>>12&63|128),s.push(o>>6&63|128),s.push(o&63|128)}else s.push(r>>12|224),s.push(r>>6&63|128),s.push(r&63|128)}return new Uint8Array(s)}function Rv(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ia(t,e){return Rv(xv(t,e))}function fp(t){async function e(s,n){$(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const r=s.url.split(":")[0].toLowerCase();$(r==="http"||r==="https",`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),$(r==="https"||!s.credentials||s.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,l=setTimeout(()=>{i=ft("request timeout","TIMEOUT"),o.abort()},s.timeout);n&&n.addListener(()=>{i=ft("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:s.method,headers:new Headers(Array.from(s)),body:s.body||void 0,signal:o.signal});let u;try{u=await fetch(s.url,c)}catch(p){throw clearTimeout(l),i||p}clearTimeout(l);const d={};u.headers.forEach((p,P)=>{d[P.toLowerCase()]=p});const f=await u.arrayBuffer(),h=f==null?null:new Uint8Array(f);return{statusCode:u.status,statusMessage:u.statusText,headers:d,body:h}}return e}const Dv=12,Nv=250;let hd=fp();const Lv=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Ov=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let ml=!1;async function hp(t,e){try{const s=t.match(Lv);if(!s)throw new Error("invalid data");return new Hn(200,"OK",{"content-type":s[1]||"text/plain"},s[2]?Sv(s[3]):Bv(s[3]))}catch{return new Hn(599,"BAD REQUEST (invalid data: URI)",{},null,new Sn(t))}}function pp(t){async function e(s,n){try{const r=s.match(Ov);if(!r)throw new Error("invalid link");return new Sn(`${t}${r[2]}`)}catch{return new Hn(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Sn(s))}}return e}const To={data:hp,ipfs:pp("https://gateway.ipfs.io/ipfs/")},mp=new WeakMap;class Uv{#e;#t;constructor(e){this.#e=[],this.#t=!1,mp.set(e,()=>{if(!this.#t){this.#t=!0;for(const s of this.#e)setTimeout(()=>{s()},0);this.#e=[]}})}addListener(e){$(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){$(!this.cancelled,"cancelled","CANCELLED",{})}}function Io(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class Sn{#e;#t;#s;#n;#r;#o;#i;#a;#d;#c;#p;#m;#l;#u;#f;get url(){return this.#o}set url(e){this.#o=String(e)}get body(){return this.#i==null?null:new Uint8Array(this.#i)}set body(e){if(e==null)this.#i=void 0,this.#a=void 0;else if(typeof e=="string")this.#i=wn(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#i=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#i=wn(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#i!=null}get method(){return this.#n?this.#n:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#n=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#s);return this.#d&&(e.authorization=`Basic ${kv(wn(this.#d))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,s){this.#s[String(e).toLowerCase()]=String(s)}clearHeaders(){this.#s={}}[Symbol.iterator](){const e=this.headers,s=Object.keys(e);let n=0;return{next:()=>{if(n<s.length){const r=s[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#d||null}setCredentials(e,s){S(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#d=`${e}:${s}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#r}set timeout(e){S(e>=0,"timeout must be non-zero","timeout",e),this.#r=e}get preflightFunc(){return this.#c||null}set preflightFunc(e){this.#c=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#m||null}set retryFunc(e){this.#m=e}get getUrlFunc(){return this.#f||hd}set getUrlFunc(e){this.#f=e}constructor(e){this.#o=String(e),this.#e=!1,this.#t=!0,this.#s={},this.#n="",this.#r=3e5,this.#u={slotInterval:Nv,maxAttempts:Dv},this.#f=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i?oe(this.#i):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}async#h(e,s,n,r,i){if(e>=this.#u.maxAttempts)return i.makeServerError("exceeded maximum retry limit");$(pd()<=s,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),n>0&&await Mv(n);let o=this.clone();const l=(o.url.split(":")[0]||"").toLowerCase();if(l in To){const d=await To[l](o.url,Io(r.#l));if(d instanceof Hn){let f=d;if(this.processFunc){Io(r.#l);try{f=await this.processFunc(o,f)}catch(h){(h.throttle==null||typeof h.stall!="number")&&f.makeServerError("error in post-processing function",h).assertOk()}}return f}o=d}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,Io(r.#l));let u=new Hn(c.statusCode,c.statusMessage,c.headers,c.body,r);if(u.statusCode===301||u.statusCode===302){try{const d=u.headers.location||"";return o.redirect(d).#h(e+1,s,0,r,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,u,e))){const d=u.headers["retry-after"];let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof d=="string"&&d.match(/^[1-9][0-9]*$/)&&(f=parseInt(d)),o.clone().#h(e+1,s,f,r,u)}if(this.processFunc){Io(r.#l);try{u=await this.processFunc(o,u)}catch(d){(d.throttle==null||typeof d.stall!="number")&&u.makeServerError("error in post-processing function",d).assertOk();let f=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return d.stall>=0&&(f=d.stall),o.clone().#h(e+1,s,f,r,u)}}return u}send(){return $(this.#l==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#l=new Uv(this),this.#h(0,pd()+this.timeout,0,this,new Hn(0,"",{},null,this))}cancel(){$(this.#l!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=mp.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const s=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();$(this.method==="GET"&&(s!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const r=new Sn(e);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,r.#s=Object.assign({},this.#s),this.#i&&(r.#i=new Uint8Array(this.#i)),r.#a=this.#a,r}clone(){const e=new Sn(this.url);return e.#n=this.#n,this.#i&&(e.#i=this.#i),e.#a=this.#a,e.#s=Object.assign({},this.#s),e.#d=this.#d,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#c=this.#c,e.#p=this.#p,e.#m=this.#m,e.#u=Object.assign({},this.#u),e.#f=this.#f,e}static lockConfig(){ml=!0}static getGateway(e){return To[e.toLowerCase()]||null}static registerGateway(e,s){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(ml)throw new Error("gateways locked");To[e]=s}static registerGetUrl(e){if(ml)throw new Error("gateways locked");hd=e}static createGetUrlFunc(e){return fp(e)}static createDataGateway(){return hp}static createIpfsGatewayFunc(e){return pp(e)}}class Hn{#e;#t;#s;#n;#r;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#n?oe(this.#n):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#s)}get body(){return this.#n==null?null:new Uint8Array(this.#n)}get bodyText(){try{return this.#n==null?"":ia(this.#n)}catch{$(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{$(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,s=Object.keys(e);let n=0;return{next:()=>{if(n<s.length){const r=s[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,s,n,r,i){this.#e=e,this.#t=s,this.#s=Object.keys(n).reduce((o,l)=>(o[l.toLowerCase()]=String(n[l]),o),{}),this.#n=r==null?null:new Uint8Array(r),this.#r=i||null,this.#o={message:""}}makeServerError(e,s){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const r=new Hn(599,n,this.headers,this.body,this.#r||void 0);return r.#o={message:e,error:s},r}throwThrottleError(e,s){s==null?s=-1:S(Number.isInteger(s)&&s>=0,"invalid stall timeout","stall",s);const n=new Error(e||"throttling requests");throw _e(n,{stall:s,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#n!=null}get request(){return this.#r}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:s}=this.#o;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let r=null;try{this.#n&&(r=ia(this.#n))}catch{}$(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:s,info:{requestUrl:n,responseBody:r,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function pd(){return new Date().getTime()}function Bv(t){return wn(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,s)=>String.fromCharCode(parseInt(s,16))))}function Mv(t){return new Promise(e=>setTimeout(e,t))}const Fv=BigInt(-1),Os=BigInt(0),Fr=BigInt(1),Vv=BigInt(5),Rr={};let Kr="0000";for(;Kr.length<80;)Kr+=Kr;function nr(t){let e=Kr;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function bi(t,e,s){const n=BigInt(e.width);if(e.signed){const r=Fr<<n-Fr;$(s==null||t>=-r&&t<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:t}),t>Os?t=ra(dr(t,n),n):t=-ra(dr(-t,n),n)}else{const r=Fr<<n;$(s==null||t>=0&&t<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:t}),t=(t%r+r)%r&r-Fr}return t}function gl(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,s=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);S(i,"invalid fixed format","format",t),e=i[1]!=="u",s=parseInt(i[2]),n=parseInt(i[3])}}else if(t){const i=t,o=(l,c,u)=>i[l]==null?u:(S(typeof i[l]===c,"invalid fixed format ("+l+" not "+c+")","format."+l,i[l]),i[l]);e=o("signed","boolean",e),s=o("width","number",s),n=o("decimals","number",n)}S(s%8===0,"invalid FixedNumber width (not byte aligned)","format.width",s),S(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const r=(e?"":"u")+"fixed"+String(s)+"x"+String(n);return{signed:e,width:s,decimals:n,name:r}}function jv(t,e){let s="";t<Os&&(s="-",t*=Fv);let n=t.toString();if(e===0)return s+n;for(;n.length<=e;)n=Kr+n;const r=n.length-e;for(n=n.substring(0,r)+"."+n.substring(r);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return s+n}class dn{format;#e;#t;#s;_value;constructor(e,s,n){ho(e,Rr,"FixedNumber"),this.#t=s,this.#e=n;const r=jv(s,n.decimals);_e(this,{format:n.name,_value:r}),this.#s=nr(n.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#n(e){S(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#r(e,s){return e=bi(e,this.#e,s),new dn(Rr,e,this.#e)}#o(e,s){return this.#n(e),this.#r(this.#t+e.#t,s)}addUnsafe(e){return this.#o(e)}add(e){return this.#o(e,"add")}#i(e,s){return this.#n(e),this.#r(this.#t-e.#t,s)}subUnsafe(e){return this.#i(e)}sub(e){return this.#i(e,"sub")}#a(e,s){return this.#n(e),this.#r(this.#t*e.#t/this.#s,s)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#n(e);const s=this.#t*e.#t;return $(s%this.#s===Os,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#r(s/this.#s,"mulSignal")}#d(e,s){return $(e.#t!==Os,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(e),this.#r(this.#t*this.#s/e.#t,s)}divUnsafe(e){return this.#d(e)}div(e){return this.#d(e,"div")}divSignal(e){$(e.#t!==Os,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(e);const s=this.#t*this.#s;return $(s%e.#t===Os,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#r(s/e.#t,"divSignal")}cmp(e){let s=this.value,n=e.value;const r=this.decimals-e.decimals;return r>0?n*=nr(r):r<0&&(s*=nr(-r)),s<n?-1:s>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<Os&&(e-=this.#s-Fr),e=this.#t/this.#s*this.#s,this.#r(e,"floor")}ceiling(){let e=this.#t;return this.#t>Os&&(e+=this.#s-Fr),e=this.#t/this.#s*this.#s,this.#r(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const s=this.decimals-e,n=Vv*nr(s-1);let r=this.value+n;const i=nr(s);return r=r/i*i,bi(r,this.#e,"round"),new dn(Rr,r,this.#e)}isZero(){return this.#t===Os}isNegative(){return this.#t<Os}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return dn.fromString(this.toString(),e)}static fromValue(e,s,n){const r=s==null?0:De(s),i=gl(n);let o=he(e,"value");const l=r-i.decimals;if(l>0){const c=nr(l);$(o%c===Os,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else l<0&&(o*=nr(-l));return bi(o,i,"fromValue"),new dn(Rr,o,i)}static fromString(e,s){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);S(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const r=gl(s);let i=n[2]||"0",o=n[3]||"";for(;o.length<r.decimals;)o+=Kr;$(o.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,r.decimals);const l=BigInt(n[1]+i+o);return bi(l,r,"fromString"),new dn(Rr,l,r)}static fromBytes(e,s){let n=Ua(Le(e,"value"));const r=gl(s);return r.signed&&(n=ra(n,r.width)),bi(n,r,"fromBytes"),new dn(Rr,n,r)}}function $v(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function md(t,e,s){let n=0;for(let r=0;r<s;r++)n=n*256+t[e+r];return n}function gd(t,e,s,n){const r=[];for(;s<e+1+n;){const i=gp(t,s);r.push(i.result),s+=i.consumed,$(s<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:r}}function gp(t,e){$(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const s=n=>{$(n<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:n})};if(t[e]>=248){const n=t[e]-247;s(e+1+n);const r=md(t,e+1,n);return s(e+1+n+r),gd(t,e,e+1+n,n+r)}else if(t[e]>=192){const n=t[e]-192;return s(e+1+n),gd(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;s(e+1+n);const r=md(t,e+1,n);s(e+1+n+r);const i=oe(t.slice(e+1+n,e+1+n+r));return{consumed:1+n+r,result:i}}else if(t[e]>=128){const n=t[e]-128;s(e+1+n);const r=oe(t.slice(e+1,e+1+n));return{consumed:1+n,result:r}}return{consumed:1,result:$v(t[e])}}function po(t){const e=Le(t,"data"),s=gp(e,0);return S(s.consumed===e.length,"unexpected junk after rlp payload","data",t),s.result}function yd(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function yp(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(i){n=n.concat(yp(i))}),n.length<=55)return n.unshift(192+n.length),n;const r=yd(n.length);return r.unshift(247+r.length),r.concat(n)}const e=Array.prototype.slice.call(Le(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const s=yd(e.length);return s.unshift(183+s.length),s.concat(e)}const vd="0123456789abcdef";function Yn(t){let e="0x";for(const s of yp(t))e+=vd[s>>4],e+=vd[s&15];return e}const Hv=["wei","kwei","mwei","gwei","szabo","finney","ether"];function oa(t,e){let s=18;if(typeof e=="string"){const n=Hv.indexOf(e);S(n>=0,"invalid unit","unit",e),s=3*n}else e!=null&&(s=De(e,"unit"));return dn.fromValue(t,s,{decimals:s,width:512}).toString()}function Wv(t,e){S(typeof t=="string","value must be a string","value",t);let s=18;return s=De(e,"unit"),dn.fromString(t,{decimals:s,width:512}).value}function Mt(t){return oa(t,18)}function Ji(t){return Wv(t,18)}const is=32,Xl=new Uint8Array(is),Gv=["then"],xo={},vp=new WeakMap;function lr(t){return vp.get(t)}function bd(t,e){vp.set(t,e)}function wi(t,e){const s=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw s.error=e,s}function ec(t,e,s){return t.indexOf(null)>=0?e.map((n,r)=>n instanceof yn?ec(lr(n),n,s):n):t.reduce((n,r,i)=>{let o=e.getValue(r);return r in n||(s&&o instanceof yn&&(o=ec(lr(o),o,s)),n[r]=o),n},{})}class yn extends Array{#e;constructor(...e){const s=e[0];let n=e[1],r=(e[2]||[]).slice(),i=!0;s!==xo&&(n=e,r=[],i=!1),super(n.length),n.forEach((c,u)=>{this[u]=c});const o=r.reduce((c,u)=>(typeof u=="string"&&c.set(u,(c.get(u)||0)+1),c),new Map);if(bd(this,Object.freeze(n.map((c,u)=>{const d=r[u];return d!=null&&o.get(d)===1?d:null}))),this.#e=[],this.#e==null&&this.#e,!i)return;Object.freeze(this);const l=new Proxy(this,{get:(c,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const h=De(u,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const p=c[h];return p instanceof Error&&wi(`index ${h}`,p),p}if(Gv.indexOf(u)>=0)return Reflect.get(c,u,d);const f=c[u];if(f instanceof Function)return function(...h){return f.apply(this===d?c:this,h)};if(!(u in c))return c.getValue.apply(this===d?c:this,[u])}return Reflect.get(c,u,d)}});return bd(l,lr(this)),l}toArray(e){const s=[];return this.forEach((n,r)=>{n instanceof Error&&wi(`index ${r}`,n),e&&n instanceof yn&&(n=n.toArray(e)),s.push(n)}),s}toObject(e){const s=lr(this);return s.reduce((n,r,i)=>($(r!=null,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),ec(s,this,e)),{})}slice(e,s){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),s==null&&(s=this.length),s<0&&(s+=this.length,s<0&&(s=0)),s>this.length&&(s=this.length);const n=lr(this),r=[],i=[];for(let o=e;o<s;o++)r.push(this[o]),i.push(n[o]);return new yn(xo,r,i)}filter(e,s){const n=lr(this),r=[],i=[];for(let o=0;o<this.length;o++){const l=this[o];l instanceof Error&&wi(`index ${o}`,l),e.call(s,l,o,this)&&(r.push(l),i.push(n[o]))}return new yn(xo,r,i)}map(e,s){const n=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&wi(`index ${r}`,i),n.push(e.call(s,i,r,this))}return n}getValue(e){const s=lr(this).indexOf(e);if(s===-1)return;const n=this[s];return n instanceof Error&&wi(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,s){return new yn(xo,e,s)}}function wd(t){let e=Nt(t);return $(e.length<=is,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:is,offset:e.length}),e.length!==is&&(e=rs(bt([Xl.slice(e.length%is),e]))),e}class Tn{name;type;localName;dynamic;constructor(e,s,n,r){_e(this,{name:e,type:s,localName:n,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,s){S(!1,e,this.localName,s)}}class tc{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return bt(this.#e)}get length(){return this.#t}#s(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#s(rs(e.data))}writeBytes(e){let s=rs(e);const n=s.length%is;return n&&(s=rs(bt([s,Xl.slice(n)]))),this.#s(s)}writeValue(e){return this.#s(wd(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(Xl),this.#t+=is,s=>{this.#e[e]=wd(s)}}}class Jc{allowLoose;#e;#t;#s;#n;#r;constructor(e,s,n){_e(this,{allowLoose:!!s}),this.#e=rs(e),this.#s=0,this.#n=null,this.#r=n??1024,this.#t=0}get data(){return oe(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#n)return this.#n.#o(e);this.#s+=e,$(this.#r<1||this.#s<=this.#r*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#r} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:rs(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#s,dataLength:this.dataLength}})}#i(e,s,n){let r=Math.ceil(s/is)*is;return this.#t+r>this.#e.length&&(this.allowLoose&&n&&this.#t+s<=this.#e.length?r=s:$(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:rs(this.#e),length:this.#e.length,offset:this.#t+r})),this.#e.slice(this.#t,this.#t+r)}subReader(e){const s=new Jc(this.#e.slice(this.#t+e),this.allowLoose,this.#r);return s.#n=this,s}readBytes(e,s){let n=this.#i(0,e,!!s);return this.#o(e),this.#t+=n.length,n.slice(0,e)}readValue(){return Ua(this.readBytes(is))}readIndex(){return _v(this.readBytes(is))}}function aa(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function qc(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Kv(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");aa(t.outputLen),aa(t.blockLen)}function qr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bp(t,e){qc(t);const s=e.outputLen;if(t.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const yl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wp=t=>t instanceof Uint8Array,Yv=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),vl=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),zs=(t,e)=>t<<32-e|t>>>e,zv=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!zv)throw new Error("Non little-endian hardware is not supported");function Qv(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ba(t){if(typeof t=="string"&&(t=Qv(t)),!wp(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Jv(...t){const e=new Uint8Array(t.reduce((n,r)=>n+r.length,0));let s=0;return t.forEach(n=>{if(!wp(n))throw new Error("Uint8Array expected");e.set(n,s),s+=n.length}),e}class Zc{clone(){return this._cloneInto()}}function Xc(t){const e=n=>t().update(Ba(n)).digest(),s=t();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>t(),e}function qv(t=32){if(yl&&typeof yl.getRandomValues=="function")return yl.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Ap extends Zc{constructor(e,s){super(),this.finished=!1,this.destroyed=!1,Kv(e);const n=Ba(s);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return qr(this),this.iHash.update(e),this}digestInto(e){qr(this),qc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:l}=this;return e=e,e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=l,e.oHash=s._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ep=(t,e,s)=>new Ap(t,e).update(s).digest();Ep.create=(t,e)=>new Ap(t,e);function Zv(t,e,s,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,s,n);const r=BigInt(32),i=BigInt(4294967295),o=Number(s>>r&i),l=Number(s&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,l,n)}class _p extends Zc{constructor(e,s,n,r){super(),this.blockLen=e,this.outputLen=s,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vl(this.buffer)}update(e){qr(this);const{view:s,buffer:n,blockLen:r}=this;e=Ba(e);const i=e.length;for(let o=0;o<i;){const l=Math.min(r-this.pos,i-o);if(l===r){const c=vl(e);for(;r<=i-o;o+=r)this.process(c,o);continue}n.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===r&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){qr(this),bp(e,this),this.finished=!0;const{buffer:s,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;s[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let f=o;f<r;f++)s[f]=0;Zv(n,r-8,BigInt(this.length*8),i),this.process(n,0);const l=vl(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)l.setUint32(4*f,d[f],i)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const n=e.slice(0,s);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:s,buffer:n,length:r,finished:i,destroyed:o,pos:l}=this;return e.length=r,e.pos=l,e.finished=i,e.destroyed=o,r%s&&e.buffer.set(n),e}}const Xv=(t,e,s)=>t&e^~t&s,eb=(t,e,s)=>t&e^t&s^e&s,tb=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dn=new Uint32Array(64);class sb extends _p{constructor(){super(64,32,8,!1),this.A=Rn[0]|0,this.B=Rn[1]|0,this.C=Rn[2]|0,this.D=Rn[3]|0,this.E=Rn[4]|0,this.F=Rn[5]|0,this.G=Rn[6]|0,this.H=Rn[7]|0}get(){const{A:e,B:s,C:n,D:r,E:i,F:o,G:l,H:c}=this;return[e,s,n,r,i,o,l,c]}set(e,s,n,r,i,o,l,c){this.A=e|0,this.B=s|0,this.C=n|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=l|0,this.H=c|0}process(e,s){for(let f=0;f<16;f++,s+=4)Dn[f]=e.getUint32(s,!1);for(let f=16;f<64;f++){const h=Dn[f-15],p=Dn[f-2],P=zs(h,7)^zs(h,18)^h>>>3,w=zs(p,17)^zs(p,19)^p>>>10;Dn[f]=w+Dn[f-7]+P+Dn[f-16]|0}let{A:n,B:r,C:i,D:o,E:l,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){const h=zs(l,6)^zs(l,11)^zs(l,25),p=d+h+Xv(l,c,u)+tb[f]+Dn[f]|0,w=(zs(n,2)^zs(n,13)^zs(n,22))+eb(n,r,i)|0;d=u,u=c,c=l,l=o+p|0,o=i,i=r,r=n,n=p+w|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,l=l+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,r,i,o,l,c,u,d)}roundClean(){Dn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Pp=Xc(()=>new sb),Ro=BigInt(2**32-1),sc=BigInt(32);function Sp(t,e=!1){return e?{h:Number(t&Ro),l:Number(t>>sc&Ro)}:{h:Number(t>>sc&Ro)|0,l:Number(t&Ro)|0}}function kp(t,e=!1){let s=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:i,l:o}=Sp(t[r],e);[s[r],n[r]]=[i,o]}return[s,n]}const nb=(t,e)=>BigInt(t>>>0)<<sc|BigInt(e>>>0),rb=(t,e,s)=>t>>>s,ib=(t,e,s)=>t<<32-s|e>>>s,ob=(t,e,s)=>t>>>s|e<<32-s,ab=(t,e,s)=>t<<32-s|e>>>s,lb=(t,e,s)=>t<<64-s|e>>>s-32,cb=(t,e,s)=>t>>>s-32|e<<64-s,ub=(t,e)=>e,db=(t,e)=>t,Cp=(t,e,s)=>t<<s|e>>>32-s,Tp=(t,e,s)=>e<<s|t>>>32-s,Ip=(t,e,s)=>e<<s-32|t>>>64-s,xp=(t,e,s)=>t<<s-32|e>>>64-s;function fb(t,e,s,n){const r=(e>>>0)+(n>>>0);return{h:t+s+(r/2**32|0)|0,l:r|0}}const hb=(t,e,s)=>(t>>>0)+(e>>>0)+(s>>>0),pb=(t,e,s,n)=>e+s+n+(t/2**32|0)|0,mb=(t,e,s,n)=>(t>>>0)+(e>>>0)+(s>>>0)+(n>>>0),gb=(t,e,s,n,r)=>e+s+n+r+(t/2**32|0)|0,yb=(t,e,s,n,r)=>(t>>>0)+(e>>>0)+(s>>>0)+(n>>>0)+(r>>>0),vb=(t,e,s,n,r,i)=>e+s+n+r+i+(t/2**32|0)|0,Ne={fromBig:Sp,split:kp,toBig:nb,shrSH:rb,shrSL:ib,rotrSH:ob,rotrSL:ab,rotrBH:lb,rotrBL:cb,rotr32H:ub,rotr32L:db,rotlSH:Cp,rotlSL:Tp,rotlBH:Ip,rotlBL:xp,add:fb,add3L:hb,add3H:pb,add4L:mb,add4H:gb,add5H:vb,add5L:yb},[bb,wb]=Ne.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Nn=new Uint32Array(80),Ln=new Uint32Array(80);class Ab extends _p{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:s,Bh:n,Bl:r,Ch:i,Cl:o,Dh:l,Dl:c,Eh:u,El:d,Fh:f,Fl:h,Gh:p,Gl:P,Hh:w,Hl:k}=this;return[e,s,n,r,i,o,l,c,u,d,f,h,p,P,w,k]}set(e,s,n,r,i,o,l,c,u,d,f,h,p,P,w,k){this.Ah=e|0,this.Al=s|0,this.Bh=n|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=f|0,this.Fl=h|0,this.Gh=p|0,this.Gl=P|0,this.Hh=w|0,this.Hl=k|0}process(e,s){for(let L=0;L<16;L++,s+=4)Nn[L]=e.getUint32(s),Ln[L]=e.getUint32(s+=4);for(let L=16;L<80;L++){const R=Nn[L-15]|0,G=Ln[L-15]|0,W=Ne.rotrSH(R,G,1)^Ne.rotrSH(R,G,8)^Ne.shrSH(R,G,7),j=Ne.rotrSL(R,G,1)^Ne.rotrSL(R,G,8)^Ne.shrSL(R,G,7),Q=Nn[L-2]|0,J=Ln[L-2]|0,re=Ne.rotrSH(Q,J,19)^Ne.rotrBH(Q,J,61)^Ne.shrSH(Q,J,6),ce=Ne.rotrSL(Q,J,19)^Ne.rotrBL(Q,J,61)^Ne.shrSL(Q,J,6),H=Ne.add4L(j,ce,Ln[L-7],Ln[L-16]),be=Ne.add4H(H,W,re,Nn[L-7],Nn[L-16]);Nn[L]=be|0,Ln[L]=H|0}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:l,Cl:c,Dh:u,Dl:d,Eh:f,El:h,Fh:p,Fl:P,Gh:w,Gl:k,Hh:T,Hl:N}=this;for(let L=0;L<80;L++){const R=Ne.rotrSH(f,h,14)^Ne.rotrSH(f,h,18)^Ne.rotrBH(f,h,41),G=Ne.rotrSL(f,h,14)^Ne.rotrSL(f,h,18)^Ne.rotrBL(f,h,41),W=f&p^~f&w,j=h&P^~h&k,Q=Ne.add5L(N,G,j,wb[L],Ln[L]),J=Ne.add5H(Q,T,R,W,bb[L],Nn[L]),re=Q|0,ce=Ne.rotrSH(n,r,28)^Ne.rotrBH(n,r,34)^Ne.rotrBH(n,r,39),H=Ne.rotrSL(n,r,28)^Ne.rotrBL(n,r,34)^Ne.rotrBL(n,r,39),be=n&i^n&l^i&l,Ce=r&o^r&c^o&c;T=w|0,N=k|0,w=p|0,k=P|0,p=f|0,P=h|0,{h:f,l:h}=Ne.add(u|0,d|0,J|0,re|0),u=l|0,d=c|0,l=i|0,c=o|0,i=n|0,o=r|0;const Y=Ne.add3L(re,H,Ce);n=Ne.add3H(Y,J,ce,be),r=Y|0}({h:n,l:r}=Ne.add(this.Ah|0,this.Al|0,n|0,r|0)),{h:i,l:o}=Ne.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:c}=Ne.add(this.Ch|0,this.Cl|0,l|0,c|0),{h:u,l:d}=Ne.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:f,l:h}=Ne.add(this.Eh|0,this.El|0,f|0,h|0),{h:p,l:P}=Ne.add(this.Fh|0,this.Fl|0,p|0,P|0),{h:w,l:k}=Ne.add(this.Gh|0,this.Gl|0,w|0,k|0),{h:T,l:N}=Ne.add(this.Hh|0,this.Hl|0,T|0,N|0),this.set(n,r,i,o,l,c,u,d,f,h,p,P,w,k,T,N)}roundClean(){Nn.fill(0),Ln.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Eb=Xc(()=>new Ab);function _b(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Ad=_b();Ad.crypto||Ad.msCrypto;function Pb(t){switch(t){case"sha256":return Pp.create();case"sha512":return Eb.create()}S(!1,"invalid hashing algorithm name","algorithm",t)}const[Rp,Dp,Np]=[[],[],[]],Sb=BigInt(0),Ai=BigInt(1),kb=BigInt(2),Cb=BigInt(7),Tb=BigInt(256),Ib=BigInt(113);for(let t=0,e=Ai,s=1,n=0;t<24;t++){[s,n]=[n,(2*s+3*n)%5],Rp.push(2*(5*n+s)),Dp.push((t+1)*(t+2)/2%64);let r=Sb;for(let i=0;i<7;i++)e=(e<<Ai^(e>>Cb)*Ib)%Tb,e&kb&&(r^=Ai<<(Ai<<BigInt(i))-Ai);Np.push(r)}const[xb,Rb]=kp(Np,!0),Ed=(t,e,s)=>s>32?Ip(t,e,s):Cp(t,e,s),_d=(t,e,s)=>s>32?xp(t,e,s):Tp(t,e,s);function Db(t,e=24){const s=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)s[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,c=(o+2)%10,u=s[c],d=s[c+1],f=Ed(u,d,1)^s[l],h=_d(u,d,1)^s[l+1];for(let p=0;p<50;p+=10)t[o+p]^=f,t[o+p+1]^=h}let r=t[2],i=t[3];for(let o=0;o<24;o++){const l=Dp[o],c=Ed(r,i,l),u=_d(r,i,l),d=Rp[o];r=t[d],i=t[d+1],t[d]=c,t[d+1]=u}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)s[l]=t[o+l];for(let l=0;l<10;l++)t[o+l]^=~s[(l+2)%10]&s[(l+4)%10]}t[0]^=xb[n],t[1]^=Rb[n]}s.fill(0)}class eu extends Zc{constructor(e,s,n,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=s,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,aa(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Yv(this.state)}keccak(){Db(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){qr(this);const{blockLen:s,state:n}=this;e=Ba(e);const r=e.length;for(let i=0;i<r;){const o=Math.min(s-this.pos,r-i);for(let l=0;l<o;l++)n[this.pos++]^=e[i++];this.pos===s&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:s,pos:n,blockLen:r}=this;e[n]^=s,(s&128)!==0&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){qr(this,!1),qc(e),this.finish();const s=this.state,{blockLen:n}=this;for(let r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-r);e.set(s.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return aa(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(bp(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:s,suffix:n,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new eu(s,n,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Nb=(t,e,s)=>Xc(()=>new eu(e,t,s)),Lb=Nb(1,136,256/8);let Lp=!1;const Op=function(t){return Lb(t)};let Up=Op;function vt(t){const e=Le(t,"data");return oe(Up(e))}vt._=Op;vt.lock=function(){Lp=!0};vt.register=function(t){if(Lp)throw new TypeError("keccak256 is locked");Up=t};Object.freeze(vt);const Bp=function(t){return Pb("sha256").update(t).digest()};let Mp=Bp,Fp=!1;function ui(t){const e=Le(t,"data");return oe(Mp(e))}ui._=Bp;ui.lock=function(){Fp=!0};ui.register=function(t){if(Fp)throw new Error("sha256 is locked");Mp=t};Object.freeze(ui);Object.freeze(ui);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vp=BigInt(0),Ma=BigInt(1),Ob=BigInt(2),Fa=t=>t instanceof Uint8Array,Ub=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zr(t){if(!Fa(t))throw new Error("Uint8Array expected");let e="";for(let s=0;s<t.length;s++)e+=Ub[t[s]];return e}function jp(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function tu(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Xr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(e/2);for(let n=0;n<s.length;n++){const r=n*2,i=t.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");s[n]=o}return s}function vr(t){return tu(Zr(t))}function su(t){if(!Fa(t))throw new Error("Uint8Array expected");return tu(Zr(Uint8Array.from(t).reverse()))}function ei(t,e){return Xr(t.toString(16).padStart(e*2,"0"))}function nu(t,e){return ei(t,e).reverse()}function Bb(t){return Xr(jp(t))}function Us(t,e,s){let n;if(typeof e=="string")try{n=Xr(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Fa(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const r=n.length;if(typeof s=="number"&&r!==s)throw new Error(`${t} expected ${s} bytes, got ${r}`);return n}function qi(...t){const e=new Uint8Array(t.reduce((n,r)=>n+r.length,0));let s=0;return t.forEach(n=>{if(!Fa(n))throw new Error("Uint8Array expected");e.set(n,s),s+=n.length}),e}function Mb(t,e){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}function Fb(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Vb(t){let e;for(e=0;t>Vp;t>>=Ma,e+=1);return e}function jb(t,e){return t>>BigInt(e)&Ma}const $b=(t,e,s)=>t|(s?Ma:Vp)<<BigInt(e),ru=t=>(Ob<<BigInt(t-1))-Ma,bl=t=>new Uint8Array(t),Pd=t=>Uint8Array.from(t);function $p(t,e,s){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof s!="function")throw new Error("hmacFn must be a function");let n=bl(t),r=bl(t),i=0;const o=()=>{n.fill(1),r.fill(0),i=0},l=(...f)=>s(r,n,...f),c=(f=bl())=>{r=l(Pd([0]),f),n=l(),f.length!==0&&(r=l(Pd([1]),f),n=l())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){n=l();const p=n.slice();h.push(p),f+=n.length}return qi(...h)};return(f,h)=>{o(),c(f);let p;for(;!(p=h(u()));)c();return o(),p}}const Hb={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function mo(t,e,s={}){const n=(r,i,o)=>{const l=Hb[i];if(typeof l!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[r];if(!(o&&c===void 0)&&!l(c,t))throw new Error(`Invalid param ${String(r)}=${c} (${typeof c}), expected ${i}`)};for(const[r,i]of Object.entries(e))n(r,i,!1);for(const[r,i]of Object.entries(s))n(r,i,!0);return t}const Wb=Object.freeze(Object.defineProperty({__proto__:null,bitGet:jb,bitLen:Vb,bitMask:ru,bitSet:$b,bytesToHex:Zr,bytesToNumberBE:vr,bytesToNumberLE:su,concatBytes:qi,createHmacDrbg:$p,ensureBytes:Us,equalBytes:Mb,hexToBytes:Xr,hexToNumber:tu,numberToBytesBE:ei,numberToBytesLE:nu,numberToHexUnpadded:jp,numberToVarBytesBE:Bb,utf8ToBytes:Fb,validateObject:mo},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vt=BigInt(0),_t=BigInt(1),cr=BigInt(2),Gb=BigInt(3),nc=BigInt(4),Sd=BigInt(5),kd=BigInt(8);BigInt(9);BigInt(16);function fs(t,e){const s=t%e;return s>=Vt?s:e+s}function Kb(t,e,s){if(s<=Vt||e<Vt)throw new Error("Expected power/modulo > 0");if(s===_t)return Vt;let n=_t;for(;e>Vt;)e&_t&&(n=n*t%s),t=t*t%s,e>>=_t;return n}function Ts(t,e,s){let n=t;for(;e-- >Vt;)n*=n,n%=s;return n}function rc(t,e){if(t===Vt||e<=Vt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let s=fs(t,e),n=e,r=Vt,i=_t;for(;s!==Vt;){const l=n/s,c=n%s,u=r-i*l;n=s,s=c,r=i,i=u}if(n!==_t)throw new Error("invert: does not exist");return fs(r,e)}function Yb(t){const e=(t-_t)/cr;let s,n,r;for(s=t-_t,n=0;s%cr===Vt;s/=cr,n++);for(r=cr;r<t&&Kb(r,e,t)!==t-_t;r++);if(n===1){const o=(t+_t)/nc;return function(c,u){const d=c.pow(u,o);if(!c.eql(c.sqr(d),u))throw new Error("Cannot find square root");return d}}const i=(s+_t)/cr;return function(l,c){if(l.pow(c,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let u=n,d=l.pow(l.mul(l.ONE,r),s),f=l.pow(c,i),h=l.pow(c,s);for(;!l.eql(h,l.ONE);){if(l.eql(h,l.ZERO))return l.ZERO;let p=1;for(let w=l.sqr(h);p<u&&!l.eql(w,l.ONE);p++)w=l.sqr(w);const P=l.pow(d,_t<<BigInt(u-p-1));d=l.sqr(P),f=l.mul(f,P),h=l.mul(h,d),u=p}return f}}function zb(t){if(t%nc===Gb){const e=(t+_t)/nc;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%kd===Sd){const e=(t-Sd)/kd;return function(n,r){const i=n.mul(r,cr),o=n.pow(i,e),l=n.mul(r,o),c=n.mul(n.mul(l,cr),o),u=n.mul(l,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),r))throw new Error("Cannot find square root");return u}}return Yb(t)}const Qb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Jb(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},s=Qb.reduce((n,r)=>(n[r]="function",n),e);return mo(t,s)}function qb(t,e,s){if(s<Vt)throw new Error("Expected power > 0");if(s===Vt)return t.ONE;if(s===_t)return e;let n=t.ONE,r=e;for(;s>Vt;)s&_t&&(n=t.mul(n,r)),r=t.sqr(r),s>>=_t;return n}function Zb(t,e){const s=new Array(e.length),n=e.reduce((i,o,l)=>t.is0(o)?i:(s[l]=i,t.mul(i,o)),t.ONE),r=t.inv(n);return e.reduceRight((i,o,l)=>t.is0(o)?i:(s[l]=t.mul(i,s[l]),t.mul(i,o)),r),s}function Hp(t,e){const s=e!==void 0?e:t.toString(2).length,n=Math.ceil(s/8);return{nBitLength:s,nByteLength:n}}function Xb(t,e,s=!1,n={}){if(t<=Vt)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:r,nByteLength:i}=Hp(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=zb(t),l=Object.freeze({ORDER:t,BITS:r,BYTES:i,MASK:ru(r),ZERO:Vt,ONE:_t,create:c=>fs(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Vt<=c&&c<t},is0:c=>c===Vt,isOdd:c=>(c&_t)===_t,neg:c=>fs(-c,t),eql:(c,u)=>c===u,sqr:c=>fs(c*c,t),add:(c,u)=>fs(c+u,t),sub:(c,u)=>fs(c-u,t),mul:(c,u)=>fs(c*u,t),pow:(c,u)=>qb(l,c,u),div:(c,u)=>fs(c*rc(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>rc(c,t),sqrt:n.sqrt||(c=>o(l,c)),invertBatch:c=>Zb(l,c),cmov:(c,u,d)=>d?u:c,toBytes:c=>s?nu(c,i):ei(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return s?su(c):vr(c)}});return Object.freeze(l)}function Wp(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Gp(t){const e=Wp(t);return e+Math.ceil(e/2)}function ew(t,e,s=!1){const n=t.length,r=Wp(e),i=Gp(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=s?vr(t):su(t),l=fs(o,e-_t)+_t;return s?nu(l,r):ei(l,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tw=BigInt(0),wl=BigInt(1);function sw(t,e){const s=(r,i)=>{const o=i.negate();return r?o:i},n=r=>{const i=Math.ceil(e/r)+1,o=2**(r-1);return{windows:i,windowSize:o}};return{constTimeNegate:s,unsafeLadder(r,i){let o=t.ZERO,l=r;for(;i>tw;)i&wl&&(o=o.add(l)),l=l.double(),i>>=wl;return o},precomputeWindow(r,i){const{windows:o,windowSize:l}=n(i),c=[];let u=r,d=u;for(let f=0;f<o;f++){d=u,c.push(d);for(let h=1;h<l;h++)d=d.add(u),c.push(d);u=d.double()}return c},wNAF(r,i,o){const{windows:l,windowSize:c}=n(r);let u=t.ZERO,d=t.BASE;const f=BigInt(2**r-1),h=2**r,p=BigInt(r);for(let P=0;P<l;P++){const w=P*c;let k=Number(o&f);o>>=p,k>c&&(k-=h,o+=wl);const T=w,N=w+Math.abs(k)-1,L=P%2!==0,R=k<0;k===0?d=d.add(s(L,i[T])):u=u.add(s(R,i[N]))}return{p:u,f:d}},wNAFCached(r,i,o,l){const c=r._WINDOW_SIZE||1;let u=i.get(r);return u||(u=this.precomputeWindow(r,c),c!==1&&i.set(r,l(u))),this.wNAF(c,u,o)}}}function Kp(t){return Jb(t.Fp),mo(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Hp(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nw(t){const e=Kp(t);mo(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:s,Fp:n,a:r}=e;if(s){if(!n.eql(r,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof s!="object"||typeof s.beta!="bigint"||typeof s.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:rw,hexToBytes:iw}=Wb,fr={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=fr;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const s=t[1],n=t.subarray(2,s+2);if(!s||n.length!==s)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:rw(n),l:t.subarray(s+2)}},toSig(t){const{Err:e}=fr,s=typeof t=="string"?iw(t):t;if(!(s instanceof Uint8Array))throw new Error("ui8a expected");let n=s.length;if(n<2||s[0]!=48)throw new e("Invalid signature tag");if(s[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:r,l:i}=fr._parseInt(s.subarray(2)),{d:o,l}=fr._parseInt(i);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r,s:o}},hexFromSig(t){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,s=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},n=e(s(t.s)),r=e(s(t.r)),i=n.length/2,o=r.length/2,l=s(i),c=s(o);return`30${s(o+i+4)}02${c}${r}02${l}${n}`}},mn=BigInt(0),Is=BigInt(1);BigInt(2);const Cd=BigInt(3);BigInt(4);function ow(t){const e=nw(t),{Fp:s}=e,n=e.toBytes||((P,w,k)=>{const T=w.toAffine();return qi(Uint8Array.from([4]),s.toBytes(T.x),s.toBytes(T.y))}),r=e.fromBytes||(P=>{const w=P.subarray(1),k=s.fromBytes(w.subarray(0,s.BYTES)),T=s.fromBytes(w.subarray(s.BYTES,2*s.BYTES));return{x:k,y:T}});function i(P){const{a:w,b:k}=e,T=s.sqr(P),N=s.mul(T,P);return s.add(s.add(N,s.mul(P,w)),k)}if(!s.eql(s.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(P){return typeof P=="bigint"&&mn<P&&P<e.n}function l(P){if(!o(P))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(P){const{allowedPrivateKeyLengths:w,nByteLength:k,wrapPrivateKey:T,n:N}=e;if(w&&typeof P!="bigint"){if(P instanceof Uint8Array&&(P=Zr(P)),typeof P!="string"||!w.includes(P.length))throw new Error("Invalid key");P=P.padStart(k*2,"0")}let L;try{L=typeof P=="bigint"?P:vr(Us("private key",P,k))}catch{throw new Error(`private key must be ${k} bytes, hex or bigint, not ${typeof P}`)}return T&&(L=fs(L,N)),l(L),L}const u=new Map;function d(P){if(!(P instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(w,k,T){if(this.px=w,this.py=k,this.pz=T,w==null||!s.isValid(w))throw new Error("x required");if(k==null||!s.isValid(k))throw new Error("y required");if(T==null||!s.isValid(T))throw new Error("z required")}static fromAffine(w){const{x:k,y:T}=w||{};if(!w||!s.isValid(k)||!s.isValid(T))throw new Error("invalid affine point");if(w instanceof f)throw new Error("projective point not allowed");const N=L=>s.eql(L,s.ZERO);return N(k)&&N(T)?f.ZERO:new f(k,T,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const k=s.invertBatch(w.map(T=>T.pz));return w.map((T,N)=>T.toAffine(k[N])).map(f.fromAffine)}static fromHex(w){const k=f.fromAffine(r(Us("pointHex",w)));return k.assertValidity(),k}static fromPrivateKey(w){return f.BASE.multiply(c(w))}_setWindowSize(w){this._WINDOW_SIZE=w,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!s.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:k}=this.toAffine();if(!s.isValid(w)||!s.isValid(k))throw new Error("bad point: x or y not FE");const T=s.sqr(k),N=i(w);if(!s.eql(T,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(s.isOdd)return!s.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){d(w);const{px:k,py:T,pz:N}=this,{px:L,py:R,pz:G}=w,W=s.eql(s.mul(k,G),s.mul(L,N)),j=s.eql(s.mul(T,G),s.mul(R,N));return W&&j}negate(){return new f(this.px,s.neg(this.py),this.pz)}double(){const{a:w,b:k}=e,T=s.mul(k,Cd),{px:N,py:L,pz:R}=this;let G=s.ZERO,W=s.ZERO,j=s.ZERO,Q=s.mul(N,N),J=s.mul(L,L),re=s.mul(R,R),ce=s.mul(N,L);return ce=s.add(ce,ce),j=s.mul(N,R),j=s.add(j,j),G=s.mul(w,j),W=s.mul(T,re),W=s.add(G,W),G=s.sub(J,W),W=s.add(J,W),W=s.mul(G,W),G=s.mul(ce,G),j=s.mul(T,j),re=s.mul(w,re),ce=s.sub(Q,re),ce=s.mul(w,ce),ce=s.add(ce,j),j=s.add(Q,Q),Q=s.add(j,Q),Q=s.add(Q,re),Q=s.mul(Q,ce),W=s.add(W,Q),re=s.mul(L,R),re=s.add(re,re),Q=s.mul(re,ce),G=s.sub(G,Q),j=s.mul(re,J),j=s.add(j,j),j=s.add(j,j),new f(G,W,j)}add(w){d(w);const{px:k,py:T,pz:N}=this,{px:L,py:R,pz:G}=w;let W=s.ZERO,j=s.ZERO,Q=s.ZERO;const J=e.a,re=s.mul(e.b,Cd);let ce=s.mul(k,L),H=s.mul(T,R),be=s.mul(N,G),Ce=s.add(k,T),Y=s.add(L,R);Ce=s.mul(Ce,Y),Y=s.add(ce,H),Ce=s.sub(Ce,Y),Y=s.add(k,N);let ee=s.add(L,G);return Y=s.mul(Y,ee),ee=s.add(ce,be),Y=s.sub(Y,ee),ee=s.add(T,N),W=s.add(R,G),ee=s.mul(ee,W),W=s.add(H,be),ee=s.sub(ee,W),Q=s.mul(J,Y),W=s.mul(re,be),Q=s.add(W,Q),W=s.sub(H,Q),Q=s.add(H,Q),j=s.mul(W,Q),H=s.add(ce,ce),H=s.add(H,ce),be=s.mul(J,be),Y=s.mul(re,Y),H=s.add(H,be),be=s.sub(ce,be),be=s.mul(J,be),Y=s.add(Y,be),ce=s.mul(H,Y),j=s.add(j,ce),ce=s.mul(ee,Y),W=s.mul(Ce,W),W=s.sub(W,ce),ce=s.mul(Ce,H),Q=s.mul(ee,Q),Q=s.add(Q,ce),new f(W,j,Q)}subtract(w){return this.add(w.negate())}is0(){return this.equals(f.ZERO)}wNAF(w){return p.wNAFCached(this,u,w,k=>{const T=s.invertBatch(k.map(N=>N.pz));return k.map((N,L)=>N.toAffine(T[L])).map(f.fromAffine)})}multiplyUnsafe(w){const k=f.ZERO;if(w===mn)return k;if(l(w),w===Is)return this;const{endo:T}=e;if(!T)return p.unsafeLadder(this,w);let{k1neg:N,k1:L,k2neg:R,k2:G}=T.splitScalar(w),W=k,j=k,Q=this;for(;L>mn||G>mn;)L&Is&&(W=W.add(Q)),G&Is&&(j=j.add(Q)),Q=Q.double(),L>>=Is,G>>=Is;return N&&(W=W.negate()),R&&(j=j.negate()),j=new f(s.mul(j.px,T.beta),j.py,j.pz),W.add(j)}multiply(w){l(w);let k=w,T,N;const{endo:L}=e;if(L){const{k1neg:R,k1:G,k2neg:W,k2:j}=L.splitScalar(k);let{p:Q,f:J}=this.wNAF(G),{p:re,f:ce}=this.wNAF(j);Q=p.constTimeNegate(R,Q),re=p.constTimeNegate(W,re),re=new f(s.mul(re.px,L.beta),re.py,re.pz),T=Q.add(re),N=J.add(ce)}else{const{p:R,f:G}=this.wNAF(k);T=R,N=G}return f.normalizeZ([T,N])[0]}multiplyAndAddUnsafe(w,k,T){const N=f.BASE,L=(G,W)=>W===mn||W===Is||!G.equals(N)?G.multiplyUnsafe(W):G.multiply(W),R=L(this,k).add(L(w,T));return R.is0()?void 0:R}toAffine(w){const{px:k,py:T,pz:N}=this,L=this.is0();w==null&&(w=L?s.ONE:s.inv(N));const R=s.mul(k,w),G=s.mul(T,w),W=s.mul(N,w);if(L)return{x:s.ZERO,y:s.ZERO};if(!s.eql(W,s.ONE))throw new Error("invZ was invalid");return{x:R,y:G}}isTorsionFree(){const{h:w,isTorsionFree:k}=e;if(w===Is)return!0;if(k)return k(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:k}=e;return w===Is?this:k?k(f,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return this.assertValidity(),n(f,this,w)}toHex(w=!0){return Zr(this.toRawBytes(w))}}f.BASE=new f(e.Gx,e.Gy,s.ONE),f.ZERO=new f(s.ZERO,s.ONE,s.ZERO);const h=e.nBitLength,p=sw(f,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function aw(t){const e=Kp(t);return mo(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function lw(t){const e=aw(t),{Fp:s,n}=e,r=s.BYTES+1,i=2*s.BYTES+1;function o(Y){return mn<Y&&Y<s.ORDER}function l(Y){return fs(Y,n)}function c(Y){return rc(Y,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:h}=ow({...e,toBytes(Y,ee,ae){const me=ee.toAffine(),Ie=s.toBytes(me.x),We=qi;return ae?We(Uint8Array.from([ee.hasEvenY()?2:3]),Ie):We(Uint8Array.from([4]),Ie,s.toBytes(me.y))},fromBytes(Y){const ee=Y.length,ae=Y[0],me=Y.subarray(1);if(ee===r&&(ae===2||ae===3)){const Ie=vr(me);if(!o(Ie))throw new Error("Point is not on curve");const We=f(Ie);let je=s.sqrt(We);const $e=(je&Is)===Is;return(ae&1)===1!==$e&&(je=s.neg(je)),{x:Ie,y:je}}else if(ee===i&&ae===4){const Ie=s.fromBytes(me.subarray(0,s.BYTES)),We=s.fromBytes(me.subarray(s.BYTES,2*s.BYTES));return{x:Ie,y:We}}else throw new Error(`Point of length ${ee} was invalid. Expected ${r} compressed bytes or ${i} uncompressed bytes`)}}),p=Y=>Zr(ei(Y,e.nByteLength));function P(Y){const ee=n>>Is;return Y>ee}function w(Y){return P(Y)?l(-Y):Y}const k=(Y,ee,ae)=>vr(Y.slice(ee,ae));class T{constructor(ee,ae,me){this.r=ee,this.s=ae,this.recovery=me,this.assertValidity()}static fromCompact(ee){const ae=e.nByteLength;return ee=Us("compactSignature",ee,ae*2),new T(k(ee,0,ae),k(ee,ae,2*ae))}static fromDER(ee){const{r:ae,s:me}=fr.toSig(Us("DER",ee));return new T(ae,me)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ee){return new T(this.r,this.s,ee)}recoverPublicKey(ee){const{r:ae,s:me,recovery:Ie}=this,We=j(Us("msgHash",ee));if(Ie==null||![0,1,2,3].includes(Ie))throw new Error("recovery id invalid");const je=Ie===2||Ie===3?ae+e.n:ae;if(je>=s.ORDER)throw new Error("recovery id 2 or 3 invalid");const $e=(Ie&1)===0?"02":"03",St=u.fromHex($e+p(je)),Xe=c(je),wt=l(-We*Xe),st=l(me*Xe),O=u.BASE.multiplyAndAddUnsafe(St,wt,st);if(!O)throw new Error("point at infinify");return O.assertValidity(),O}hasHighS(){return P(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return Xr(this.toDERHex())}toDERHex(){return fr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Xr(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const N={isValidPrivateKey(Y){try{return d(Y),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const Y=Gp(e.n);return ew(e.randomBytes(Y),e.n)},precompute(Y=8,ee=u.BASE){return ee._setWindowSize(Y),ee.multiply(BigInt(3)),ee}};function L(Y,ee=!0){return u.fromPrivateKey(Y).toRawBytes(ee)}function R(Y){const ee=Y instanceof Uint8Array,ae=typeof Y=="string",me=(ee||ae)&&Y.length;return ee?me===r||me===i:ae?me===2*r||me===2*i:Y instanceof u}function G(Y,ee,ae=!0){if(R(Y))throw new Error("first arg must be private key");if(!R(ee))throw new Error("second arg must be public key");return u.fromHex(ee).multiply(d(Y)).toRawBytes(ae)}const W=e.bits2int||function(Y){const ee=vr(Y),ae=Y.length*8-e.nBitLength;return ae>0?ee>>BigInt(ae):ee},j=e.bits2int_modN||function(Y){return l(W(Y))},Q=ru(e.nBitLength);function J(Y){if(typeof Y!="bigint")throw new Error("bigint expected");if(!(mn<=Y&&Y<Q))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ei(Y,e.nByteLength)}function re(Y,ee,ae=ce){if(["recovered","canonical"].some(Z=>Z in ae))throw new Error("sign() legacy options not supported");const{hash:me,randomBytes:Ie}=e;let{lowS:We,prehash:je,extraEntropy:$e}=ae;We==null&&(We=!0),Y=Us("msgHash",Y),je&&(Y=Us("prehashed msgHash",me(Y)));const St=j(Y),Xe=d(ee),wt=[J(Xe),J(St)];if($e!=null){const Z=$e===!0?Ie(s.BYTES):$e;wt.push(Us("extraEntropy",Z))}const st=qi(...wt),O=St;function te(Z){const le=W(Z);if(!h(le))return;const xe=c(le),v=u.BASE.multiply(le).toAffine(),_=l(v.x);if(_===mn)return;const I=l(xe*l(O+_*Xe));if(I===mn)return;let U=(v.x===_?0:2)|Number(v.y&Is),F=I;return We&&P(I)&&(F=w(I),U^=1),new T(_,F,U)}return{seed:st,k2sig:te}}const ce={lowS:e.lowS,prehash:!1},H={lowS:e.lowS,prehash:!1};function be(Y,ee,ae=ce){const{seed:me,k2sig:Ie}=re(Y,ee,ae),We=e;return $p(We.hash.outputLen,We.nByteLength,We.hmac)(me,Ie)}u.BASE._setWindowSize(8);function Ce(Y,ee,ae,me=H){const Ie=Y;if(ee=Us("msgHash",ee),ae=Us("publicKey",ae),"strict"in me)throw new Error("options.strict was renamed to lowS");const{lowS:We,prehash:je}=me;let $e,St;try{if(typeof Ie=="string"||Ie instanceof Uint8Array)try{$e=T.fromDER(Ie)}catch(v){if(!(v instanceof fr.Err))throw v;$e=T.fromCompact(Ie)}else if(typeof Ie=="object"&&typeof Ie.r=="bigint"&&typeof Ie.s=="bigint"){const{r:v,s:_}=Ie;$e=new T(v,_)}else throw new Error("PARSE");St=u.fromHex(ae)}catch(v){if(v.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(We&&$e.hasHighS())return!1;je&&(ee=e.hash(ee));const{r:Xe,s:wt}=$e,st=j(ee),O=c(wt),te=l(st*O),Z=l(Xe*O),le=u.BASE.multiplyAndAddUnsafe(St,te,Z)?.toAffine();return le?l(le.x)===Xe:!1}return{CURVE:e,getPublicKey:L,getSharedSecret:G,sign:be,verify:Ce,ProjectivePoint:u,Signature:T,utils:N}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function cw(t){return{hash:t,hmac:(e,...s)=>Ep(t,e,Jv(...s)),randomBytes:qv}}function uw(t,e){const s=n=>lw({...t,...cw(n)});return Object.freeze({...s(e),create:s})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yp=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Td=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),dw=BigInt(1),ic=BigInt(2),Id=(t,e)=>(t+e/ic)/e;function fw(t){const e=Yp,s=BigInt(3),n=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),l=BigInt(44),c=BigInt(88),u=t*t*t%e,d=u*u*t%e,f=Ts(d,s,e)*d%e,h=Ts(f,s,e)*d%e,p=Ts(h,ic,e)*u%e,P=Ts(p,r,e)*p%e,w=Ts(P,i,e)*P%e,k=Ts(w,l,e)*w%e,T=Ts(k,c,e)*k%e,N=Ts(T,l,e)*w%e,L=Ts(N,s,e)*d%e,R=Ts(L,o,e)*P%e,G=Ts(R,n,e)*u%e,W=Ts(G,ic,e);if(!oc.eql(oc.sqr(W),t))throw new Error("Cannot find square root");return W}const oc=Xb(Yp,void 0,void 0,{sqrt:fw}),Un=uw({a:BigInt(0),b:BigInt(7),Fp:oc,n:Td,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Td,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-dw*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=s,o=BigInt("0x100000000000000000000000000000000"),l=Id(i*t,e),c=Id(-n*t,e);let u=fs(t-l*s-c*r,e),d=fs(-l*n-c*i,e);const f=u>o,h=d>o;if(f&&(u=e-u),h&&(d=e-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:h,k2:d}}}},Pp);BigInt(0);Un.ProjectivePoint;const Zi="0x0000000000000000000000000000000000000000",xd="0x0000000000000000000000000000000000000000000000000000000000000000",Rd=BigInt(0),Dd=BigInt(1),Nd=BigInt(2),Ld=BigInt(27),Od=BigInt(28),Do=BigInt(35),Dr={};function Ud(t){return Pn(Nt(t),32)}class gt{#e;#t;#s;#n;get r(){return this.#e}set r(e){S(Gr(e)===32,"invalid r","value",e),this.#e=oe(e)}get s(){return S(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){S(Gr(e)===32,"invalid s","value",e),this.#t=oe(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#s}set v(e){const s=De(e,"value");S(s===27||s===28,"invalid v","v",e),this.#s=s}get networkV(){return this.#n}get legacyChainId(){const e=this.networkV;return e==null?null:gt.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Le(this.s);return this.yParity&&(e[0]|=128),oe(e)}get compactSerialized(){return bt([this.r,this.yParityAndS])}get serialized(){return bt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,s,n,r){ho(e,Dr,"Signature"),this.#e=s,this.#t=n,this.#s=r,this.#n=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new gt(Dr,this.r,this._s,this.v);return this.networkV&&(e.#n=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const s=he(e,"v");return s==Ld||s==Od?Rd:(S(s>=Do,"invalid EIP-155 v","v",e),(s-Do)/Nd)}static getChainIdV(e,s){return he(e)*Nd+BigInt(35+s-27)}static getNormalizedV(e){const s=he(e);return s===Rd||s===Ld?27:s===Dd||s===Od?28:(S(s>=Do,"invalid v","v",e),s&Dd?27:28)}static from(e){function s(u,d){S(u,d,"signature",e)}if(e==null)return new gt(Dr,xd,xd,27);if(typeof e=="string"){const u=Le(e,"signature");if(u.length===64){const d=oe(u.slice(0,32)),f=u.slice(32,64),h=f[0]&128?28:27;return f[0]&=127,new gt(Dr,d,oe(f),h)}if(u.length===65){const d=oe(u.slice(0,32)),f=oe(u.slice(32,64)),h=gt.getNormalizedV(u[64]);return new gt(Dr,d,f,h)}s(!1,"invalid raw signature length")}if(e instanceof gt)return e.clone();const n=e.r;s(n!=null,"missing r");const r=Ud(n),i=(function(u,d){if(u!=null)return Ud(u);if(d!=null){s(ct(d,32),"invalid yParityAndS");const f=Le(d);return f[0]&=127,oe(f)}s(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:l}=(function(u,d,f){if(u!=null){const h=he(u);return{networkV:h>=Do?h:void 0,v:gt.getNormalizedV(h)}}if(d!=null)return s(ct(d,32),"invalid yParityAndS"),{v:Le(d)[0]&128?28:27};if(f!=null){switch(De(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}s(!1,"invalid yParity")}s(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),c=new gt(Dr,r,i,l);return o&&(c.#n=o),s(e.yParity==null||De(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),s(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}}class gn{#e;constructor(e){S(Gr(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=oe(e)}get privateKey(){return this.#e}get publicKey(){return gn.computePublicKey(this.#e)}get compressedPublicKey(){return gn.computePublicKey(this.#e,!0)}sign(e){S(Gr(e)===32,"invalid digest length","digest",e);const s=Un.sign(rs(e),rs(this.#e),{lowS:!0});return gt.from({r:Kn(s.r,32),s:Kn(s.s,32),v:s.recovery?28:27})}computeSharedSecret(e){const s=gn.computePublicKey(e);return oe(Un.getSharedSecret(rs(this.#e),Le(s),!1))}static computePublicKey(e,s){let n=Le(e,"key");if(n.length===32){const i=Un.getPublicKey(n,!!s);return oe(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const r=Un.ProjectivePoint.fromHex(n);return oe(r.toRawBytes(s))}static recoverPublicKey(e,s){S(Gr(e)===32,"invalid digest length","digest",e);const n=gt.from(s);let r=Un.Signature.fromCompact(rs(bt([n.r,n.s])));r=r.addRecoveryBit(n.yParity);const i=r.recoverPublicKey(rs(e));return S(i!=null,"invalid signature for digest","signature",s),"0x"+i.toHex(!1)}static addPoints(e,s,n){const r=Un.ProjectivePoint.fromHex(gn.computePublicKey(e).substring(2)),i=Un.ProjectivePoint.fromHex(gn.computePublicKey(s).substring(2));return"0x"+r.add(i).toHex(!!n)}}const hw=BigInt(0),pw=BigInt(36);function Bd(t){t=t.toLowerCase();const e=t.substring(2).split(""),s=new Uint8Array(40);for(let r=0;r<40;r++)s[r]=e[r].charCodeAt(0);const n=Le(vt(s));for(let r=0;r<40;r+=2)n[r>>1]>>4>=8&&(e[r]=e[r].toUpperCase()),(n[r>>1]&15)>=8&&(e[r+1]=e[r+1].toUpperCase());return"0x"+e.join("")}const iu={};for(let t=0;t<10;t++)iu[String(t)]=String(t);for(let t=0;t<26;t++)iu[String.fromCharCode(65+t)]=String(10+t);const Md=15;function mw(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>iu[n]).join("");for(;e.length>=Md;){let n=e.substring(0,Md);e=parseInt(n,10)%97+e.substring(n.length)}let s=String(98-parseInt(e,10)%97);for(;s.length<2;)s="0"+s;return s}const gw=(function(){const t={};for(let e=0;e<36;e++){const s="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[s]=BigInt(e)}return t})();function yw(t){t=t.toLowerCase();let e=hw;for(let s=0;s<t.length;s++)e=e*pw+gw[t[s]];return e}function Qe(t){if(S(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Bd(t);return S(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){S(t.substring(2,4)===mw(t),"bad icap checksum","address",t);let e=yw(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Bd("0x"+e)}S(!1,"invalid address","address",t)}function vw(t){const e=Qe(t.from);let n=he(t.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,Qe(mt(vt(Yn([e,n])),12))}function zp(t){return t&&typeof t.getAddress=="function"}function la(t){try{return Qe(t),!0}catch{}return!1}async function Al(t,e){const s=await e;return(s==null||s==="0x0000000000000000000000000000000000000000")&&($(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),S(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Qe(s)}function os(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Qe(t):($(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Al(t,e.resolveName(t)));if(zp(t))return Al(t,t.getAddress());if(t&&typeof t.then=="function")return Al(t,t);S(!1,"unsupported addressable value","target",t)}const cn={};function de(t,e){let s=!1;return e<0&&(s=!0,e*=-1),new yt(cn,`${s?"":"u"}int${e}`,t,{signed:s,width:e})}function He(t,e){return new yt(cn,`bytes${e||""}`,t,{size:e})}const Fd=Symbol.for("_ethers_typed");class yt{type;value;#e;_typedSymbol;constructor(e,s,n,r){r==null&&(r=null),ho(cn,e,"Typed"),_e(this,{_typedSymbol:Fd,type:s,value:n}),this.#e=r,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,s){return new yt(cn,e,s)}static uint8(e){return de(e,8)}static uint16(e){return de(e,16)}static uint24(e){return de(e,24)}static uint32(e){return de(e,32)}static uint40(e){return de(e,40)}static uint48(e){return de(e,48)}static uint56(e){return de(e,56)}static uint64(e){return de(e,64)}static uint72(e){return de(e,72)}static uint80(e){return de(e,80)}static uint88(e){return de(e,88)}static uint96(e){return de(e,96)}static uint104(e){return de(e,104)}static uint112(e){return de(e,112)}static uint120(e){return de(e,120)}static uint128(e){return de(e,128)}static uint136(e){return de(e,136)}static uint144(e){return de(e,144)}static uint152(e){return de(e,152)}static uint160(e){return de(e,160)}static uint168(e){return de(e,168)}static uint176(e){return de(e,176)}static uint184(e){return de(e,184)}static uint192(e){return de(e,192)}static uint200(e){return de(e,200)}static uint208(e){return de(e,208)}static uint216(e){return de(e,216)}static uint224(e){return de(e,224)}static uint232(e){return de(e,232)}static uint240(e){return de(e,240)}static uint248(e){return de(e,248)}static uint256(e){return de(e,256)}static uint(e){return de(e,256)}static int8(e){return de(e,-8)}static int16(e){return de(e,-16)}static int24(e){return de(e,-24)}static int32(e){return de(e,-32)}static int40(e){return de(e,-40)}static int48(e){return de(e,-48)}static int56(e){return de(e,-56)}static int64(e){return de(e,-64)}static int72(e){return de(e,-72)}static int80(e){return de(e,-80)}static int88(e){return de(e,-88)}static int96(e){return de(e,-96)}static int104(e){return de(e,-104)}static int112(e){return de(e,-112)}static int120(e){return de(e,-120)}static int128(e){return de(e,-128)}static int136(e){return de(e,-136)}static int144(e){return de(e,-144)}static int152(e){return de(e,-152)}static int160(e){return de(e,-160)}static int168(e){return de(e,-168)}static int176(e){return de(e,-176)}static int184(e){return de(e,-184)}static int192(e){return de(e,-192)}static int200(e){return de(e,-200)}static int208(e){return de(e,-208)}static int216(e){return de(e,-216)}static int224(e){return de(e,-224)}static int232(e){return de(e,-232)}static int240(e){return de(e,-240)}static int248(e){return de(e,-248)}static int256(e){return de(e,-256)}static int(e){return de(e,-256)}static bytes1(e){return He(e,1)}static bytes2(e){return He(e,2)}static bytes3(e){return He(e,3)}static bytes4(e){return He(e,4)}static bytes5(e){return He(e,5)}static bytes6(e){return He(e,6)}static bytes7(e){return He(e,7)}static bytes8(e){return He(e,8)}static bytes9(e){return He(e,9)}static bytes10(e){return He(e,10)}static bytes11(e){return He(e,11)}static bytes12(e){return He(e,12)}static bytes13(e){return He(e,13)}static bytes14(e){return He(e,14)}static bytes15(e){return He(e,15)}static bytes16(e){return He(e,16)}static bytes17(e){return He(e,17)}static bytes18(e){return He(e,18)}static bytes19(e){return He(e,19)}static bytes20(e){return He(e,20)}static bytes21(e){return He(e,21)}static bytes22(e){return He(e,22)}static bytes23(e){return He(e,23)}static bytes24(e){return He(e,24)}static bytes25(e){return He(e,25)}static bytes26(e){return He(e,26)}static bytes27(e){return He(e,27)}static bytes28(e){return He(e,28)}static bytes29(e){return He(e,29)}static bytes30(e){return He(e,30)}static bytes31(e){return He(e,31)}static bytes32(e){return He(e,32)}static address(e){return new yt(cn,"address",e)}static bool(e){return new yt(cn,"bool",!!e)}static bytes(e){return new yt(cn,"bytes",e)}static string(e){return new yt(cn,"string",e)}static array(e,s){throw new Error("not implemented yet")}static tuple(e,s){throw new Error("not implemented yet")}static overrides(e){return new yt(cn,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===Fd}static dereference(e,s){if(yt.isTyped(e)){if(e.type!==s)throw new Error(`invalid type: expecetd ${s}, got ${e.type}`);return e.value}return e}}class bw extends Tn{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,s){let n=yt.dereference(s,"string");try{n=Qe(n)}catch(r){return this._throwError(r.message,s)}return e.writeValue(n)}decode(e){return Qe(Kn(e.readValue(),20))}}class ww extends Tn{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,s){return this.coder.encode(e,s)}decode(e){return this.coder.decode(e)}}function Qp(t,e,s){let n=[];if(Array.isArray(s))n=s;else if(s&&typeof s=="object"){let c={};n=e.map(u=>{const d=u.localName;return $(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:s}),$(!c[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:s}),c[d]=!0,s[d]})}else S(!1,"invalid tuple value","tuple",s);S(e.length===n.length,"types/value length mismatch","tuple",s);let r=new tc,i=new tc,o=[];e.forEach((c,u)=>{let d=n[u];if(c.dynamic){let f=i.length;c.encode(i,d);let h=r.writeUpdatableValue();o.push(p=>{h(p+f)})}else c.encode(r,d)}),o.forEach(c=>{c(r.length)});let l=t.appendWriter(r);return l+=t.appendWriter(i),l}function Jp(t,e){let s=[],n=[],r=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let l=t.readIndex(),c=r.subReader(l);try{o=i.decode(c)}catch(u){if(Kt(u,"BUFFER_OVERRUN"))throw u;o=u,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(l){if(Kt(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");s.push(o),n.push(i.localName||null)}),yn.fromItems(s,n)}class Aw extends Tn{coder;length;constructor(e,s,n){const r=e.type+"["+(s>=0?s:"")+"]",i=s===-1||e.dynamic;super("array",r,n,i),_e(this,{coder:e,length:s})}defaultValue(){const e=this.coder.defaultValue(),s=[];for(let n=0;n<this.length;n++)s.push(e);return s}encode(e,s){const n=yt.dereference(s,"array");Array.isArray(n)||this._throwError("expected array value",n);let r=this.length;r===-1&&(r=n.length,e.writeValue(n.length)),op(n.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let o=0;o<n.length;o++)i.push(this.coder);return Qp(e,i,n)}decode(e){let s=this.length;s===-1&&(s=e.readIndex(),$(s*is<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:s*is,length:e.dataLength}));let n=[];for(let r=0;r<s;r++)n.push(new ww(this.coder));return Jp(e,n)}}class Ew extends Tn{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,s){const n=yt.dereference(s,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class qp extends Tn{constructor(e,s){super(e,e,s,!0)}defaultValue(){return"0x"}encode(e,s){s=rs(s);let n=e.writeValue(s.length);return n+=e.writeBytes(s),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class _w extends qp{constructor(e){super("bytes",e)}decode(e){return oe(super.decode(e))}}class Pw extends Tn{size;constructor(e,s){let n="bytes"+String(e);super(n,n,s,!1),_e(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,s){let n=rs(yt.dereference(s,this.type));return n.length!==this.size&&this._throwError("incorrect data length",s),e.writeBytes(n)}decode(e){return oe(e.readBytes(this.size))}}const Sw=new Uint8Array([]);class kw extends Tn{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,s){return s!=null&&this._throwError("not null",s),e.writeBytes(Sw)}decode(e){return e.readBytes(0),null}}const Cw=BigInt(0),Tw=BigInt(1),Iw=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class xw extends Tn{size;signed;constructor(e,s,n){const r=(s?"int":"uint")+e*8;super(r,r,n,!1),_e(this,{size:e,signed:s},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,s){let n=he(yt.dereference(s,this.type)),r=dr(Iw,is*8);if(this.signed){let i=dr(r,this.size*8-1);(n>i||n<-(i+Tw))&&this._throwError("value out-of-bounds",s),n=cp(n,8*is)}else(n<Cw||n>dr(r,this.size*8))&&this._throwError("value out-of-bounds",s);return e.writeValue(n)}decode(e){let s=dr(e.readValue(),this.size*8);return this.signed&&(s=ra(s,this.size*8)),s}}class Rw extends qp{constructor(e){super("string",e)}defaultValue(){return""}encode(e,s){return super.encode(e,wn(yt.dereference(s,"string")))}decode(e){return ia(super.decode(e))}}class No extends Tn{coders;constructor(e,s){let n=!1;const r=[];e.forEach(o=>{o.dynamic&&(n=!0),r.push(o.type)});const i="tuple("+r.join(",")+")";super("tuple",i,s,n),_e(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const s=this.coders.reduce((n,r)=>{const i=r.localName;return i&&(n[i]||(n[i]=0),n[i]++),n},{});return this.coders.forEach((n,r)=>{let i=n.localName;!i||s[i]!==1||(i==="length"&&(i="_length"),e[i]==null&&(e[i]=e[r]))}),Object.freeze(e)}encode(e,s){const n=yt.dereference(s,"tuple");return Qp(e,this.coders,n)}decode(e){return Jp(e,this.coders)}}function El(t,e){return{address:Qe(t),storageKeys:e.map((s,n)=>(S(ct(s,32),"invalid slot",`storageKeys[${n}]`,s),s.toLowerCase()))}}function Sr(t){if(Array.isArray(t))return t.map((s,n)=>Array.isArray(s)?(S(s.length===2,"invalid slot set",`value[${n}]`,s),El(s[0],s[1])):(S(s!=null&&typeof s=="object","invalid address-slot set","value",t),El(s.address,s.storageKeys)));S(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(s=>{const n=t[s].reduce((r,i)=>(r[i]=!0,r),{});return El(s,Object.keys(n).sort())});return e.sort((s,n)=>s.address.localeCompare(n.address)),e}function Zp(t){return{address:Qe(t.address),nonce:he(t.nonce!=null?t.nonce:0),chainId:he(t.chainId!=null?t.chainId:0),signature:gt.from(t.signature)}}function Dw(t){let e;return typeof t=="string"?e=gn.computePublicKey(t,!1):e=t.publicKey,Qe(vt("0x"+e.substring(4)).substring(26))}function Nw(t,e){return Dw(gn.recoverPublicKey(t,e))}const Ft=BigInt(0),Lw=BigInt(2),Ow=BigInt(27),Uw=BigInt(28),Bw=BigInt(35),Mw=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),_l=4096*32;function Fw(t){return{blobToKzgCommitment:n=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Le(t.blobToKzgCommitment(oe(n)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Le(t.blobToKzgCommitment(n));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Le(t.blobToKZGCommitment(oe(n)));S(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(n,r)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Le(t.computeBlobProof(oe(n),oe(r)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(n,r);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Le(t.computeBlobKZGProof(oe(n),oe(r)));S(!1,"unsupported KZG library","kzg",t)}}}function Vd(t,e){let s=t.toString(16);for(;s.length<2;)s="0"+s;return s+=ui(e).substring(4),"0x"+s}function di(t){return t==="0x"?null:Qe(t)}function Va(t,e){try{return Sr(t)}catch(s){S(!1,s.message,e,t)}}function Vw(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const s=[];for(let n=0;n<t.length;n++){const r=t[n];if(!Array.isArray(r))throw new Error(`authorization[${n}]: invalid array`);if(r.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!r[1])throw new Error(`authorization[${n}]: null address`);s.push({address:di(r[1]),nonce:tt(r[2],"nonce"),chainId:tt(r[0],"chainId"),signature:gt.from({yParity:kr(r[3],"yParity"),r:Pn(r[4],32),s:Pn(r[5],32)})})}return s}catch(s){S(!1,s.message,e,t)}}function kr(t,e){return t==="0x"?0:De(t,e)}function tt(t,e){if(t==="0x")return Ft;const s=he(t,e);return S(s<=Mw,"value exceeds uint size",e,s),s}function Ve(t,e){const s=he(t,"value"),n=Nt(s);return S(n.length<=32,"value too large",`tx.${e}`,s),n}function ja(t){return Sr(t).map(e=>[e.address,e.storageKeys])}function jw(t){return t.map(e=>[Ve(e.chainId,"chainId"),e.address,Ve(e.nonce,"nonce"),Ve(e.signature.yParity,"yParity"),Nt(e.signature.r),Nt(e.signature.s)])}function $w(t,e){S(Array.isArray(t),`invalid ${e}`,"value",t);for(let s=0;s<t.length;s++)S(ct(t[s],32),"invalid ${ param } hash",`value[${s}]`,t[s]);return t}function Hw(t){const e=po(t);S(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const s={type:0,nonce:kr(e[0],"nonce"),gasPrice:tt(e[1],"gasPrice"),gasLimit:tt(e[2],"gasLimit"),to:di(e[3]),value:tt(e[4],"value"),data:oe(e[5]),chainId:Ft};if(e.length===6)return s;const n=tt(e[6],"v"),r=tt(e[7],"r"),i=tt(e[8],"s");if(r===Ft&&i===Ft)s.chainId=n;else{let o=(n-Bw)/Lw;o<Ft&&(o=Ft),s.chainId=o,S(o!==Ft||n===Ow||n===Uw,"non-canonical legacy v","v",e[6]),s.signature=gt.from({r:Pn(e[7],32),s:Pn(e[8],32),v:n})}return s}function Ww(t,e){const s=[Ve(t.nonce,"nonce"),Ve(t.gasPrice||0,"gasPrice"),Ve(t.gasLimit,"gasLimit"),t.to||"0x",Ve(t.value,"value"),t.data];let n=Ft;if(t.chainId!=Ft)n=he(t.chainId,"tx.chainId"),S(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(n=i)}if(!e)return n!==Ft&&(s.push(Nt(n)),s.push("0x"),s.push("0x")),Yn(s);let r=BigInt(27+e.yParity);return n!==Ft?r=gt.getChainIdV(n,e.v):BigInt(e.v)!==r&&S(!1,"tx.chainId/sig.v mismatch","sig",e),s.push(Nt(r)),s.push(Nt(e.r)),s.push(Nt(e.s)),Yn(s)}function $a(t,e){let s;try{if(s=kr(e[0],"yParity"),s!==0&&s!==1)throw new Error("bad yParity")}catch{S(!1,"invalid yParity","yParity",e[0])}const n=Pn(e[1],32),r=Pn(e[2],32),i=gt.from({r:n,s:r,yParity:s});t.signature=i}function Gw(t){const e=po(Le(t).slice(1));S(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",oe(t));const s={type:2,chainId:tt(e[0],"chainId"),nonce:kr(e[1],"nonce"),maxPriorityFeePerGas:tt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:tt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:tt(e[4],"gasLimit"),to:di(e[5]),value:tt(e[6],"value"),data:oe(e[7]),accessList:Va(e[8],"accessList")};return e.length===9||$a(s,e.slice(9)),s}function Kw(t,e){const s=[Ve(t.chainId,"chainId"),Ve(t.nonce,"nonce"),Ve(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ve(t.maxFeePerGas||0,"maxFeePerGas"),Ve(t.gasLimit,"gasLimit"),t.to||"0x",Ve(t.value,"value"),t.data,ja(t.accessList||[])];return e&&(s.push(Ve(e.yParity,"yParity")),s.push(Nt(e.r)),s.push(Nt(e.s))),bt(["0x02",Yn(s)])}function Yw(t){const e=po(Le(t).slice(1));S(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",oe(t));const s={type:1,chainId:tt(e[0],"chainId"),nonce:kr(e[1],"nonce"),gasPrice:tt(e[2],"gasPrice"),gasLimit:tt(e[3],"gasLimit"),to:di(e[4]),value:tt(e[5],"value"),data:oe(e[6]),accessList:Va(e[7],"accessList")};return e.length===8||$a(s,e.slice(8)),s}function zw(t,e){const s=[Ve(t.chainId,"chainId"),Ve(t.nonce,"nonce"),Ve(t.gasPrice||0,"gasPrice"),Ve(t.gasLimit,"gasLimit"),t.to||"0x",Ve(t.value,"value"),t.data,ja(t.accessList||[])];return e&&(s.push(Ve(e.yParity,"recoveryParam")),s.push(Nt(e.r)),s.push(Nt(e.s))),bt(["0x01",Yn(s)])}function Qw(t){let e=po(Le(t).slice(1)),s="3",n=null;if(e.length===4&&Array.isArray(e[0])){s="3 (network format)";const i=e[1],o=e[2],l=e[3];S(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),S(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),S(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),S(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),S(i.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let c=0;c<e[1].length;c++)n.push({data:i[c],commitment:o[c],proof:l[c]});e=e[0]}S(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${s}`,"data",oe(t));const r={type:3,chainId:tt(e[0],"chainId"),nonce:kr(e[1],"nonce"),maxPriorityFeePerGas:tt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:tt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:tt(e[4],"gasLimit"),to:di(e[5]),value:tt(e[6],"value"),data:oe(e[7]),accessList:Va(e[8],"accessList"),maxFeePerBlobGas:tt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(r.blobs=n),S(r.to!=null,`invalid address for transaction type: ${s}`,"data",t),S(Array.isArray(r.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<r.blobVersionedHashes.length;i++)S(ct(r.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||$a(r,e.slice(11)),r}function Jw(t,e,s){const n=[Ve(t.chainId,"chainId"),Ve(t.nonce,"nonce"),Ve(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ve(t.maxFeePerGas||0,"maxFeePerGas"),Ve(t.gasLimit,"gasLimit"),t.to||Zi,Ve(t.value,"value"),t.data,ja(t.accessList||[]),Ve(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),$w(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(Ve(e.yParity,"yParity")),n.push(Nt(e.r)),n.push(Nt(e.s)),s)?bt(["0x03",Yn([n,s.map(r=>r.data),s.map(r=>r.commitment),s.map(r=>r.proof)])]):bt(["0x03",Yn(n)])}function qw(t){const e=po(Le(t).slice(1));S(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",oe(t));const s={type:4,chainId:tt(e[0],"chainId"),nonce:kr(e[1],"nonce"),maxPriorityFeePerGas:tt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:tt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:tt(e[4],"gasLimit"),to:di(e[5]),value:tt(e[6],"value"),data:oe(e[7]),accessList:Va(e[8],"accessList"),authorizationList:Vw(e[9],"authorizationList")};return e.length===10||$a(s,e.slice(10)),s}function Zw(t,e){const s=[Ve(t.chainId,"chainId"),Ve(t.nonce,"nonce"),Ve(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ve(t.maxFeePerGas||0,"maxFeePerGas"),Ve(t.gasLimit,"gasLimit"),t.to||"0x",Ve(t.value,"value"),t.data,ja(t.accessList||[]),jw(t.authorizationList||[])];return e&&(s.push(Ve(e.yParity,"yParity")),s.push(Nt(e.r)),s.push(Nt(e.s))),bt(["0x04",Yn(s)])}class Bs{#e;#t;#s;#n;#r;#o;#i;#a;#d;#c;#p;#m;#l;#u;#f;#h;#y;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:S(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?Zi:e}set to(e){this.#t=e==null?null:Qe(e)}get nonce(){return this.#n}set nonce(e){this.#n=De(e,"value")}get gasLimit(){return this.#r}set gasLimit(e){this.#r=he(e)}get gasPrice(){const e=this.#o;return e==null&&(this.type===0||this.type===1)?Ft:e}set gasPrice(e){this.#o=e==null?null:he(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#i;return e??(this.type===2||this.type===3?Ft:null)}set maxPriorityFeePerGas(e){this.#i=e==null?null:he(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?Ft:null)}set maxFeePerGas(e){this.#a=e==null?null:he(e,"maxFeePerGas")}get data(){return this.#s}set data(e){this.#s=oe(e)}get value(){return this.#d}set value(e){this.#d=he(e,"value")}get chainId(){return this.#c}set chainId(e){this.#c=he(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:gt.from(e)}get accessList(){const e=this.#m||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#m=e==null?null:Sr(e)}get authorizationList(){const e=this.#y||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#y=e==null?null:e.map(s=>Zp(s))}get maxFeePerBlobGas(){const e=this.#l;return e==null&&this.type===3?Ft:e}set maxFeePerBlobGas(e){this.#l=e==null?null:he(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){S(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let s=0;s<e.length;s++)S(ct(e[s],32),"invalid blobVersionedHash",`value[${s}]`,e[s])}this.#u=e}get blobs(){return this.#h==null?null:this.#h.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#h=null;return}const s=[],n=[];for(let r=0;r<e.length;r++){const i=e[r];if(Qc(i)){$(this.#f,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Le(i);if(S(o.length<=_l,"blob is too large",`blobs[${r}]`,i),o.length!==_l){const u=new Uint8Array(_l);u.set(o),o=u}const l=this.#f.blobToKzgCommitment(o),c=oe(this.#f.computeBlobKzgProof(o,l));s.push({data:oe(o),commitment:oe(l),proof:c}),n.push(Vd(1,l))}else{const o=oe(i.commitment);s.push({data:oe(i.data),commitment:o,proof:oe(i.proof)}),n.push(Vd(1,o))}}this.#h=s,this.#u=n}get kzg(){return this.#f}set kzg(e){e==null?this.#f=null:this.#f=Fw(e)}constructor(){this.#e=null,this.#t=null,this.#n=0,this.#r=Ft,this.#o=null,this.#i=null,this.#a=null,this.#s="0x",this.#d=Ft,this.#c=Ft,this.#p=null,this.#m=null,this.#l=null,this.#u=null,this.#f=null,this.#h=null,this.#y=null}get hash(){return this.signature==null?null:vt(this.#g(!0,!1))}get unsignedHash(){return vt(this.unsignedSerialized)}get from(){return this.signature==null?null:Nw(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:gn.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#g(e,s){$(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return Ww(this,n);case 1:return zw(this,n);case 2:return Kw(this,n);case 3:return Jw(this,n,s?this.blobs:null);case 4:return Zw(this,n)}$(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#g(!0,!0)}get unsignedSerialized(){return this.#g(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,s=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,r=this.#l!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&$(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),$(!s||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),$(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):s?i.push(2):e?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Bs.from(this)}toJSON(){const e=s=>s==null?null:s.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Bs;if(typeof e=="string"){const n=Le(e);if(n[0]>=127)return Bs.from(Hw(n));switch(n[0]){case 1:return Bs.from(Yw(n));case 2:return Bs.from(Gw(n));case 3:return Bs.from(Qw(n));case 4:return Bs.from(qw(n))}$(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const s=new Bs;return e.type!=null&&(s.type=e.type),e.to!=null&&(s.to=e.to),e.nonce!=null&&(s.nonce=e.nonce),e.gasLimit!=null&&(s.gasLimit=e.gasLimit),e.gasPrice!=null&&(s.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(s.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(s.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(s.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(s.data=e.data),e.value!=null&&(s.value=e.value),e.chainId!=null&&(s.chainId=e.chainId),e.signature!=null&&(s.signature=gt.from(e.signature)),e.accessList!=null&&(s.accessList=e.accessList),e.authorizationList!=null&&(s.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(s.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(s.kzg=e.kzg),e.blobs!=null&&(s.blobs=e.blobs),e.hash!=null&&(S(s.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),S(s.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(S(s.isSigned(),"unsigned transaction cannot define '.from'","tx",e),S(s.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),s}}function wr(t){return vt(wn(t))}var Xw="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const jd=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),$d=4;function e1(t){let e=0;function s(){return t[e++]<<8|t[e++]}let n=s(),r=1,i=[0,1];for(let G=1;G<n;G++)i.push(r+=s());let o=s(),l=e;e+=o;let c=0,u=0;function d(){return c==0&&(u=u<<8|t[e++],c=8),u>>--c&1}const f=31,h=2**f,p=h>>>1,P=p>>1,w=h-1;let k=0;for(let G=0;G<f;G++)k=k<<1|d();let T=[],N=0,L=h;for(;;){let G=Math.floor(((k-N+1)*r-1)/L),W=0,j=n;for(;j-W>1;){let re=W+j>>>1;G<i[re]?j=re:W=re}if(W==0)break;T.push(W);let Q=N+Math.floor(L*i[W]/r),J=N+Math.floor(L*i[W+1]/r)-1;for(;((Q^J)&p)==0;)k=k<<1&w|d(),Q=Q<<1&w,J=J<<1&w|1;for(;Q&~J&P;)k=k&p|k<<1&w>>>1|d(),Q=Q<<1^p,J=(J^p)<<1|p|1;N=Q,L=1+J-Q}let R=n-4;return T.map(G=>{switch(G-R){case 3:return R+65792+(t[l++]<<16|t[l++]<<8|t[l++]);case 2:return R+256+(t[l++]<<8|t[l++]);case 1:return R+t[l++];default:return G-1}})}function t1(t){let e=0;return()=>t[e++]}function Xp(t){return t1(e1(s1(t)))}function s1(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((r,i)=>e[r.charCodeAt(0)]=i);let s=t.length,n=new Uint8Array(6*s>>3);for(let r=0,i=0,o=0,l=0;r<s;r++)l=l<<6|e[t.charCodeAt(r)],o+=6,o>=8&&(n[i++]=l>>(o-=8));return n}function n1(t){return t&1?~t>>1:t>>1}function r1(t,e){let s=Array(t);for(let n=0,r=0;n<t;n++)s[n]=r+=n1(e());return s}function Xi(t,e=0){let s=[];for(;;){let n=t(),r=t();if(!r)break;e+=n;for(let i=0;i<r;i++)s.push(e+i);e+=r+1}return s}function em(t){return eo(()=>{let e=Xi(t);if(e.length)return e})}function tm(t){let e=[];for(;;){let s=t();if(s==0)break;e.push(i1(s,t))}for(;;){let s=t()-1;if(s<0)break;e.push(o1(s,t))}return e.flat()}function eo(t){let e=[];for(;;){let s=t(e.length);if(!s)break;e.push(s)}return e}function sm(t,e,s){let n=Array(t).fill().map(()=>[]);for(let r=0;r<e;r++)r1(t,s).forEach((i,o)=>n[o].push(i));return n}function i1(t,e){let s=1+e(),n=e(),r=eo(e);return sm(r.length,1+t,e).flatMap((o,l)=>{let[c,...u]=o;return Array(r[l]).fill().map((d,f)=>{let h=f*n;return[c+f*s,u.map(p=>p+h)]})})}function o1(t,e){let s=1+e();return sm(s,1+t,e).map(r=>[r[0],r.slice(1)])}function a1(t){let e=[],s=Xi(t);return r(n([]),[]),e;function n(i){let o=t(),l=eo(()=>{let c=Xi(t).map(u=>s[u]);if(c.length)return n(c)});return{S:o,B:l,Q:i}}function r({S:i,B:o},l,c){if(!(i&4&&c===l[l.length-1])){i&2&&(c=l[l.length-1]),i&1&&e.push(l);for(let u of o)for(let d of u.Q)r(u,[...l,d],c)}}}function l1(t){return t.toString(16).toUpperCase().padStart(2,"0")}function nm(t){return`{${l1(t)}}`}function c1(t){let e=[];for(let s=0,n=t.length;s<n;){let r=t.codePointAt(s);s+=r<65536?1:2,e.push(r)}return e}function ti(t){let s=t.length;if(s<4096)return String.fromCodePoint(...t);let n=[];for(let r=0;r<s;)n.push(String.fromCodePoint(...t.slice(r,r+=4096)));return n.join("")}function u1(t,e){let s=t.length,n=s-e.length;for(let r=0;n==0&&r<s;r++)n=t[r]-e[r];return n}var d1="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const to=44032,ca=4352,ua=4449,da=4519,rm=19,im=21,si=28,fa=im*si,f1=rm*fa,h1=to+f1,p1=ca+rm,m1=ua+im,g1=da+si;function Si(t){return t>>24&255}function om(t){return t&16777215}let ac,Hd,lc,Ho;function y1(){let t=Xp(d1);ac=new Map(em(t).flatMap((e,s)=>e.map(n=>[n,s+1<<24]))),Hd=new Set(Xi(t)),lc=new Map,Ho=new Map;for(let[e,s]of tm(t)){if(!Hd.has(e)&&s.length==2){let[n,r]=s,i=Ho.get(n);i||(i=new Map,Ho.set(n,i)),i.set(r,e)}lc.set(e,s.reverse())}}function am(t){return t>=to&&t<h1}function v1(t,e){if(t>=ca&&t<p1&&e>=ua&&e<m1)return to+(t-ca)*fa+(e-ua)*si;if(am(t)&&e>da&&e<g1&&(t-to)%si==0)return t+(e-da);{let s=Ho.get(t);return s&&(s=s.get(e),s)?s:-1}}function lm(t){ac||y1();let e=[],s=[],n=!1;function r(i){let o=ac.get(i);o&&(n=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(am(i)){let o=i-to,l=o/fa|0,c=o%fa/si|0,u=o%si;r(ca+l),r(ua+c),u>0&&r(da+u)}else{let o=lc.get(i);o?s.push(...o):r(i)}if(!s.length)break;i=s.pop()}if(n&&e.length>1){let i=Si(e[0]);for(let o=1;o<e.length;o++){let l=Si(e[o]);if(l==0||i<=l){i=l;continue}let c=o-1;for(;;){let u=e[c+1];if(e[c+1]=e[c],e[c]=u,!c||(i=Si(e[--c]),i<=l))break}i=Si(e[o])}}return e}function b1(t){let e=[],s=[],n=-1,r=0;for(let i of t){let o=Si(i),l=om(i);if(n==-1)o==0?n=l:e.push(l);else if(r>0&&r>=o)o==0?(e.push(n,...s),s.length=0,n=l):s.push(l),r=o;else{let c=v1(n,l);c>=0?n=c:r==0&&o==0?(e.push(n),n=l):(s.push(l),r=o)}}return n>=0&&e.push(n,...s),e}function cm(t){return lm(t).map(om)}function w1(t){return b1(lm(t))}const Wd=45,um=".",dm=65039,fm=1,ha=t=>Array.from(t);function so(t,e){return t.P.has(e)||t.Q.has(e)}class A1 extends Array{get is_emoji(){return!0}}let cc,hm,hr,uc,pm,Yr,Pl,Or,or,Gd,dc;function ou(){if(cc)return;let t=Xp(Xw);const e=()=>Xi(t),s=()=>new Set(e()),n=(d,f)=>f.forEach(h=>d.add(h));cc=new Map(tm(t)),hm=s(),hr=e(),uc=new Set(e().map(d=>hr[d])),hr=new Set(hr),pm=s(),s();let r=em(t),i=t();const o=()=>{let d=new Set;return e().forEach(f=>n(d,r[f])),n(d,e()),d};Yr=eo(d=>{let f=eo(t).map(h=>h+96);if(f.length){let h=d>=i;f[0]-=32,f=ti(f),h&&(f=`Restricted[${f}]`);let p=o(),P=o(),w=!t();return{N:f,P:p,Q:P,M:w,R:h}}}),Pl=s(),Or=new Map;let l=e().concat(ha(Pl)).sort((d,f)=>d-f);l.forEach((d,f)=>{let h=t(),p=l[f]=h?l[f-h]:{V:[],M:new Map};p.V.push(d),Pl.has(d)||Or.set(d,p)});for(let{V:d,M:f}of new Set(Or.values())){let h=[];for(let P of d){let w=Yr.filter(T=>so(T,P)),k=h.find(({G:T})=>w.some(N=>T.has(N)));k||(k={G:new Set,V:[]},h.push(k)),k.V.push(P),n(k.G,w)}let p=h.flatMap(P=>ha(P.G));for(let{G:P,V:w}of h){let k=new Set(p.filter(T=>!P.has(T)));for(let T of w)f.set(T,k)}}or=new Set;let c=new Set;const u=d=>or.has(d)?c.add(d):or.add(d);for(let d of Yr){for(let f of d.P)u(f);for(let f of d.Q)u(f)}for(let d of or)!Or.has(d)&&!c.has(d)&&Or.set(d,fm);n(or,cm(or)),Gd=a1(t).map(d=>A1.from(d)).sort(u1),dc=new Map;for(let d of Gd){let f=[dc];for(let h of d){let p=f.map(P=>{let w=P.get(h);return w||(w=new Map,P.set(h,w)),w});h===dm?f.push(...p):f=p}for(let h of f)h.V=d}}function au(t){return(mm(t)?"":`${lu(Ha([t]))} `)+nm(t)}function lu(t){return`"${t}"‎`}function E1(t){if(t.length>=4&&t[2]==Wd&&t[3]==Wd)throw new Error(`invalid label extension: "${ti(t.slice(0,4))}"`)}function _1(t){for(let s=t.lastIndexOf(95);s>0;)if(t[--s]!==95)throw new Error("underscore allowed only at start")}function P1(t){let e=t[0],s=jd.get(e);if(s)throw Oi(`leading ${s}`);let n=t.length,r=-1;for(let i=1;i<n;i++){e=t[i];let o=jd.get(e);if(o){if(r==i)throw Oi(`${s} + ${o}`);r=i+1,s=o}}if(r==n)throw Oi(`trailing ${s}`)}function Ha(t,e=1/0,s=nm){let n=[];S1(t[0])&&n.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let r=0,i=t.length;for(let o=0;o<i;o++){let l=t[o];mm(l)&&(n.push(ti(t.slice(r,o))),n.push(s(l)),r=o+1)}return n.push(ti(t.slice(r,i))),n.join("")}function S1(t){return ou(),hr.has(t)}function mm(t){return ou(),pm.has(t)}function k1(t){return x1(C1(t,w1,N1))}function C1(t,e,s){if(!t)return[];ou();let n=0;return t.split(um).map(r=>{let i=c1(r),o={input:i,offset:n};n+=i.length+1;try{let l=o.tokens=D1(i,e,s),c=l.length,u;if(!c)throw new Error("empty label");let d=o.output=l.flat();if(_1(d),!(o.emoji=c>1||l[0].is_emoji)&&d.every(h=>h<128))E1(d),u="ASCII";else{let h=l.flatMap(p=>p.is_emoji?[]:p);if(!h.length)u="Emoji";else{if(hr.has(d[0]))throw Oi("leading combining mark");for(let w=1;w<c;w++){let k=l[w];if(!k.is_emoji&&hr.has(k[0]))throw Oi(`emoji + combining mark: "${ti(l[w-1])} + ${Ha([k[0]])}"`)}P1(d);let p=ha(new Set(h)),[P]=I1(p);R1(P,h),T1(P,p),u=P.N}}o.type=u}catch(l){o.error=l}return o})}function T1(t,e){let s,n=[];for(let r of e){let i=Or.get(r);if(i===fm)return;if(i){let o=i.M.get(r);if(s=s?s.filter(l=>o.has(l)):ha(o),!s.length)return}else n.push(r)}if(s){for(let r of s)if(n.every(i=>so(r,i)))throw new Error(`whole-script confusable: ${t.N}/${r.N}`)}}function I1(t){let e=Yr;for(let s of t){let n=e.filter(r=>so(r,s));if(!n.length)throw Yr.some(r=>so(r,s))?ym(e[0],s):gm(s);if(e=n,n.length==1)break}return e}function x1(t){return t.map(({input:e,error:s,output:n})=>{if(s){let r=s.message;throw new Error(t.length==1?r:`Invalid label ${lu(Ha(e,63))}: ${r}`)}return ti(n)}).join(um)}function gm(t){return new Error(`disallowed character: ${au(t)}`)}function ym(t,e){let s=au(e),n=Yr.find(r=>r.P.has(e));return n&&(s=`${n.N} ${s}`),new Error(`illegal mixture: ${t.N} + ${s}`)}function Oi(t){return new Error(`illegal placement: ${t}`)}function R1(t,e){for(let s of e)if(!so(t,s))throw ym(t,s);if(t.M){let s=cm(e);for(let n=1,r=s.length;n<r;n++)if(uc.has(s[n])){let i=n+1;for(let o;i<r&&uc.has(o=s[i]);i++)for(let l=n;l<i;l++)if(s[l]==o)throw new Error(`duplicate non-spacing marks: ${au(o)}`);if(i-n>$d)throw new Error(`excessive non-spacing marks: ${lu(Ha(s.slice(n-1,i)))} (${i-n}/${$d})`);n=i}}}function D1(t,e,s){let n=[],r=[];for(t=t.slice().reverse();t.length;){let i=L1(t);if(i)r.length&&(n.push(e(r)),r=[]),n.push(s(i));else{let o=t.pop();if(or.has(o))r.push(o);else{let l=cc.get(o);if(l)r.push(...l);else if(!hm.has(o))throw gm(o)}}}return r.length&&n.push(e(r)),n}function N1(t){return t.filter(e=>e!=dm)}function L1(t,e){let s=dc,n,r=t.length;for(;r&&(s=s.get(t[--r]),!!s);){let{V:i}=s;i&&(n=i,t.length=r)}return n}const vm=new Uint8Array(32);vm.fill(0);function Kd(t){return S(t.length!==0,"invalid ENS name; empty component","comp",t),t}function bm(t){const e=wn(O1(t)),s=[];if(t.length===0)return s;let n=0;for(let r=0;r<e.length;r++)e[r]===46&&(s.push(Kd(e.slice(n,r))),n=r+1);return S(n<e.length,"invalid ENS name; empty component","name",t),s.push(Kd(e.slice(n))),s}function O1(t){try{if(t.length===0)throw new Error("empty label");return k1(t)}catch(e){S(!1,`invalid ENS name (${e.message})`,"name",t)}}function fc(t){S(typeof t=="string","invalid ENS name; not a string","name",t),S(t.length,"invalid ENS name (empty label)","name",t);let e=vm;const s=bm(t);for(;s.length;)e=vt(bt([e,vt(s.pop())]));return oe(e)}function U1(t,e){const s=e;return S(s<=255,"DNS encoded label cannot exceed 255","length",s),oe(bt(bm(t).map(n=>{S(n.length<=s,`label ${JSON.stringify(t)} exceeds ${s} bytes`,"name",t);const r=new Uint8Array(n.length+1);return r.set(n,1),r[0]=r.length-1,r})))+"00"}const wm=new Uint8Array(32);wm.fill(0);const B1=BigInt(-1),Am=BigInt(0),Em=BigInt(1),M1=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function F1(t){const e=Le(t),s=e.length%32;return s?bt([e,wm.slice(s)]):oe(e)}const V1=Kn(Em,32),j1=Kn(Am,32),Yd={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Sl=["name","version","chainId","verifyingContract","salt"];function zd(t){return function(e){return S(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const $1={name:zd("name"),version:zd("version"),chainId:function(t){const e=he(t,"domain.chainId");return S(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Fs(e)},verifyingContract:function(t){try{return Qe(t).toLowerCase()}catch{}S(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Le(t,"domain.salt");return S(e.length===32,'invalid domain value "salt"',"domain.salt",t),oe(e)}};function kl(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const s=e[1]==="",n=parseInt(e[2]);S(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",t);const r=dr(M1,s?n-1:n),i=s?(r+Em)*B1:Am;return function(o){const l=he(o,"value");return S(l>=i&&l<=r,`value out-of-bounds for ${t}`,"value",l),Kn(s?cp(l,256):l,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const s=parseInt(e[1]);return S(s!==0&&s<=32&&e[1]===String(s),"invalid bytes width","type",t),function(n){const r=Le(n);return S(r.length===s,`invalid length for ${t}`,"value",n),F1(n)}}}switch(t){case"address":return function(e){return Pn(Qe(e),32)};case"bool":return function(e){return e?V1:j1};case"bytes":return function(e){return vt(e)};case"string":return function(e){return wr(e)}}return null}function Qd(t,e){return`${t}(${e.map(({name:s,type:n})=>n+" "+s).join(",")})`}function Lo(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}class bs{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#s;constructor(e){this.#t=new Map,this.#s=new Map;const s=new Map,n=new Map,r=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:u,type:d})=>{let{base:f,index:h}=Lo(d);return f==="int"&&!e.int&&(f="int256"),f==="uint"&&!e.uint&&(f="uint256"),{name:u,type:f+(h||"")}}),s.set(c,new Set),n.set(c,[]),r.set(c,new Set)}),this.#e=JSON.stringify(i);for(const c in i){const u=new Set;for(const d of i[c]){S(!u.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(c)}`,"types",e),u.add(d.name);const f=Lo(d.type).base;S(f!==c,`circular type reference to ${JSON.stringify(f)}`,"types",e),!kl(f)&&(S(n.has(f),`unknown type ${JSON.stringify(f)}`,"types",e),n.get(f).push(c),s.get(c).add(f))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);S(o.length!==0,"missing primary type","types",e),S(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),_e(this,{primaryType:o[0]});function l(c,u){S(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),u.add(c);for(const d of s.get(c))if(n.has(d)){l(d,u);for(const f of u)r.get(f).add(d)}u.delete(c)}l(this.primaryType,new Set);for(const[c,u]of r){const d=Array.from(u);d.sort(),this.#t.set(c,Qd(c,i[c])+d.map(f=>Qd(f,i[f])).join(""))}}getEncoder(e){let s=this.#s.get(e);return s||(s=this.#n(e),this.#s.set(e,s)),s}#n(e){{const r=kl(e);if(r)return r}const s=Lo(e).array;if(s){const r=s.prefix,i=this.getEncoder(r);return o=>{S(s.count===-1||s.count===o.length,`array length mismatch; expected length ${s.count}`,"value",o);let l=o.map(i);return this.#t.has(r)&&(l=l.map(vt)),vt(bt(l))}}const n=this.types[e];if(n){const r=wr(this.#t.get(e));return i=>{const o=n.map(({name:l,type:c})=>{const u=this.getEncoder(c)(i[l]);return this.#t.has(c)?vt(u):u});return o.unshift(r),bt(o)}}S(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const s=this.#t.get(e);return S(s,`unknown type: ${JSON.stringify(e)}`,"name",e),s}encodeData(e,s){return this.getEncoder(e)(s)}hashStruct(e,s){return vt(this.encodeData(e,s))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,s,n){if(kl(e))return n(e,s);const r=Lo(e).array;if(r)return S(r.count===-1||r.count===s.length,`array length mismatch; expected length ${r.count}`,"value",s),s.map(o=>this._visit(r.prefix,o,n));const i=this.types[e];if(i)return i.reduce((o,{name:l,type:c})=>(o[l]=this._visit(c,s[l],n),o),{});S(!1,`unknown type: ${e}`,"type",e)}visit(e,s){return this._visit(this.primaryType,e,s)}static from(e){return new bs(e)}static getPrimaryType(e){return bs.from(e).primaryType}static hashStruct(e,s,n){return bs.from(s).hashStruct(e,n)}static hashDomain(e){const s=[];for(const n in e){if(e[n]==null)continue;const r=Yd[n];S(r,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),s.push({name:n,type:r})}return s.sort((n,r)=>Sl.indexOf(n.name)-Sl.indexOf(r.name)),bs.hashStruct("EIP712Domain",{EIP712Domain:s},e)}static encode(e,s,n){return bt(["0x1901",bs.hashDomain(e),bs.from(s).hash(n)])}static hash(e,s,n){return vt(bs.encode(e,s,n))}static async resolveNames(e,s,n,r){e=Object.assign({},e);for(const l in e)e[l]==null&&delete e[l];const i={};e.verifyingContract&&!ct(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=bs.from(s);o.visit(n,(l,c)=>(l==="address"&&!ct(c,20)&&(i[c]="0x"),c));for(const l in i)i[l]=await r(l);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=o.visit(n,(l,c)=>l==="address"&&i[c]?i[c]:c),{domain:e,value:n}}static getPayload(e,s,n){bs.hashDomain(e);const r={},i=[];Sl.forEach(c=>{const u=e[c];u!=null&&(r[c]=$1[c](u),i.push({name:c,type:Yd[c]}))});const o=bs.from(s);s=o.types;const l=Object.assign({},s);return S(l.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",s),l.EIP712Domain=i,o.encode(n),{types:l,domain:r,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return oe(Le(u));if(c.match(/^u?int/))return he(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return S(typeof u=="string","invalid string","value",u),u}S(!1,"unsupported type","type",c)})}}}function as(t){const e=new Set;return t.forEach(s=>e.add(s)),Object.freeze(e)}const H1="external public payable override",W1=as(H1.split(" ")),_m="constant external internal payable private public pure view override",G1=as(_m.split(" ")),Pm="constructor error event fallback function receive struct",Sm=as(Pm.split(" ")),km="calldata memory storage payable indexed",K1=as(km.split(" ")),Y1="tuple returns",z1=[Pm,km,Y1,_m].join(" "),Q1=as(z1.split(" ")),J1={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},q1=new RegExp("^(\\s*)"),Z1=new RegExp("^([0-9]+)"),X1=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Cm=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Tm=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Ns{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Ns(this.#t)}reset(){this.#e=0}#s(e=0,s=0){return new Ns(this.#t.slice(e,s).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))}popKeyword(e){const s=this.peek();if(s.type!=="KEYWORD"||!e.has(s.text))throw new Error(`expected keyword ${s.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const s=this.peek();throw new Error(`expected ${e}; got ${s.type} ${JSON.stringify(s.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const s=this.#s(this.#e+1,e.match+1);return this.#e=e.match+1,s}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const s=[];for(;this.#e<e.match-1;){const n=this.peek().linkNext;s.push(this.#s(this.#e+1,n)),this.#e=n}return this.#e=e.match+1,s}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const s=this.peekType("KEYWORD");return s!=null&&e.has(s)?s:null}peekType(e){if(this.length===0)return null;const s=this.peek();return s.type===e?s.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let s=this.#e;s<this.#t.length;s++){const n=this.#t[s];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function Qn(t){const e=[],s=o=>{const l=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${l} at ${i}: ${o}`)};let n=[],r=[],i=0;for(;i<t.length;){let o=t.substring(i),l=o.match(q1);l&&(i+=l[1].length,o=t.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let u=J1[o[0]]||"";if(u){if(c.type=u,c.text=o[0],i++,u==="OPEN_PAREN")n.push(e.length-1),r.push(e.length-1);else if(u=="CLOSE_PAREN")n.length===0&&s("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=r.pop(),e[c.linkBack].linkNext=e.length-1;else if(u==="COMMA")c.linkBack=r.pop(),e[c.linkBack].linkNext=e.length-1,r.push(e.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let d=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;d=f+d,e[e.length-1].value=De(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=d}continue}if(l=o.match(X1),l){if(c.text=l[1],i+=c.text.length,Q1.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Tm)){c.type="TYPE";continue}c.type="ID";continue}if(l=o.match(Z1),l){c.text=l[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Ns(e.map(o=>Object.freeze(o)))}function Jd(t,e){let s=[];for(const n in e.keys())t.has(n)&&s.push(n);if(s.length>1)throw new Error(`conflicting types: ${s.join(", ")}`)}function Wa(t,e){if(e.peekKeyword(Sm)){const s=e.pop().text;if(s!==t)throw new Error(`expected ${t}, got ${s}`)}return e.popType("ID")}function kn(t,e){const s=new Set;for(;;){const n=t.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(t.pop(),s.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);s.add(n)}return Object.freeze(s)}function Im(t){let e=kn(t,G1);return Jd(e,as("constant payable nonpayable".split(" "))),Jd(e,as("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function An(t,e){return t.popParams().map(s=>lt.from(s,e))}function xm(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return he(t.pop().text);throw new Error("invalid gas")}return null}function Ar(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const eA=new RegExp(/^(.*)\[([0-9]*)\]$/);function qd(t){const e=t.match(Tm);if(S(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const s=parseInt(e[2]);S(s!==0&&s<=32,"invalid bytes length","type",t)}else if(e[3]){const s=parseInt(e[3]);S(s!==0&&s<=256&&s%8===0,"invalid numeric width","type",t)}return t}const pt={},gs=Symbol.for("_ethers_internal"),Zd="_ParamTypeInternal",Xd="_ErrorInternal",ef="_EventInternal",tf="_ConstructorInternal",sf="_FallbackInternal",nf="_FunctionInternal",rf="_StructInternal";class lt{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,s,n,r,i,o,l,c){if(ho(e,pt,"ParamType"),Object.defineProperty(this,gs,{value:Zd}),o&&(o=Object.freeze(o.slice())),r==="array"){if(l==null||c==null)throw new Error("")}else if(l!=null||c!=null)throw new Error("");if(r==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");_e(this,{name:s,type:n,baseType:r,indexed:i,components:o,arrayLength:l,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let s="";return this.isArray()?(s+=this.arrayChildren.format(e),s+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?s+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":s+=this.type,e!=="sighash"&&(this.indexed===!0&&(s+=" indexed"),e==="full"&&this.name&&(s+=" "+this.name)),s}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,s){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(r=>n.arrayChildren.walk(r,s))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((r,i)=>n.components[i].walk(r,s))}return s(this.type,e)}#e(e,s,n,r){if(this.isArray()){if(!Array.isArray(s))throw new Error("invalid array value");if(this.arrayLength!==-1&&s.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,l=s.slice();l.forEach((c,u)=>{o.#e(e,c,n,d=>{l[u]=d})}),r(l);return}if(this.isTuple()){const o=this.components;let l;if(Array.isArray(s))l=s.slice();else{if(s==null||typeof s!="object")throw new Error("invalid tuple value");l=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in s))throw new Error(`missing value for component ${c.name}`);return s[c.name]})}if(l.length!==this.components.length)throw new Error("array is wrong length");l.forEach((c,u)=>{o[u].#e(e,c,n,d=>{l[u]=d})}),r(l);return}const i=n(this.type,s);i.then?e.push((async function(){r(await i)})()):r(i)}async walkAsync(e,s){const n=[],r=[e];return this.#e(n,e,s,i=>{r[0]=i}),n.length&&await Promise.all(n),r[0]}static from(e,s){if(lt.isParamType(e))return e;if(typeof e=="string")try{return lt.from(Qn(e),s)}catch{S(!1,"invalid param type","obj",e)}else if(e instanceof Ns){let l="",c="",u=null;kn(e,as(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",u=e.popParams().map(w=>lt.from(w)),l=`tuple(${u.map(w=>w.format()).join(",")})`):(l=qd(e.popType("TYPE")),c=l);let d=null,f=null;for(;e.length&&e.peekType("BRACKET");){const w=e.pop();d=new lt(pt,"",l,c,null,u,f,d),f=w.value,l+=w.text,c="array",u=null}let h=null;if(kn(e,K1).has("indexed")){if(!s)throw new Error("");h=!0}const P=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new lt(pt,P,l,c,h,u,f,d)}const n=e.name;S(!n||typeof n=="string"&&n.match(Cm),"invalid name","obj.name",n);let r=e.indexed;r!=null&&(S(s,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let i=e.type,o=i.match(eA);if(o){const l=parseInt(o[2]||"-1"),c=lt.from({type:o[1],components:e.components});return new lt(pt,n||"",i,"array",r,null,l,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const l=e.components!=null?e.components.map(u=>lt.from(u)):null;return new lt(pt,n||"",i,"tuple",r,l,null,null)}return i=qd(e.type),new lt(pt,n||"",i,i,r,null,null,null)}static isParamType(e){return e&&e[gs]===Zd}}class Er{type;inputs;constructor(e,s,n){ho(e,pt,"Fragment"),n=Object.freeze(n.slice()),_e(this,{type:s,inputs:n})}static from(e){if(typeof e=="string"){try{Er.from(JSON.parse(e))}catch{}return Er.from(Qn(e))}if(e instanceof Ns)switch(e.peekKeyword(Sm)){case"constructor":return vn.from(e);case"error":return hs.from(e);case"event":return Zs.from(e);case"fallback":case"receive":return fn.from(e);case"function":return Xs.from(e);case"struct":return br.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return vn.from(e);case"error":return hs.from(e);case"event":return Zs.from(e);case"fallback":case"receive":return fn.from(e);case"function":return Xs.from(e);case"struct":return br.from(e)}$(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}S(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return vn.isFragment(e)}static isError(e){return hs.isFragment(e)}static isEvent(e){return Zs.isFragment(e)}static isFunction(e){return Xs.isFragment(e)}static isStruct(e){return br.isFragment(e)}}class Ga extends Er{name;constructor(e,s,n,r){super(e,s,r),S(typeof n=="string"&&n.match(Cm),"invalid identifier","name",n),r=Object.freeze(r.slice()),_e(this,{name:n})}}function no(t,e){return"("+e.map(s=>s.format(t)).join(t==="full"?", ":",")+")"}class hs extends Ga{constructor(e,s,n){super(e,"error",s,n),Object.defineProperty(this,gs,{value:Xd})}get selector(){return wr(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const s=[];return e!=="sighash"&&s.push("error"),s.push(this.name+no(e,this.inputs)),s.join(" ")}static from(e){if(hs.isFragment(e))return e;if(typeof e=="string")return hs.from(Qn(e));if(e instanceof Ns){const s=Wa("error",e),n=An(e);return Ar(e),new hs(pt,s,n)}return new hs(pt,e.name,e.inputs?e.inputs.map(lt.from):[])}static isFragment(e){return e&&e[gs]===Xd}}class Zs extends Ga{anonymous;constructor(e,s,n,r){super(e,"event",s,n),Object.defineProperty(this,gs,{value:ef}),_e(this,{anonymous:r})}get topicHash(){return wr(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const s=[];return e!=="sighash"&&s.push("event"),s.push(this.name+no(e,this.inputs)),e!=="sighash"&&this.anonymous&&s.push("anonymous"),s.join(" ")}static getTopicHash(e,s){return s=(s||[]).map(r=>lt.from(r)),new Zs(pt,e,s,!1).topicHash}static from(e){if(Zs.isFragment(e))return e;if(typeof e=="string")try{return Zs.from(Qn(e))}catch{S(!1,"invalid event fragment","obj",e)}else if(e instanceof Ns){const s=Wa("event",e),n=An(e,!0),r=!!kn(e,as(["anonymous"])).has("anonymous");return Ar(e),new Zs(pt,s,n,r)}return new Zs(pt,e.name,e.inputs?e.inputs.map(s=>lt.from(s,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[gs]===ef}}class vn extends Er{payable;gas;constructor(e,s,n,r,i){super(e,s,n),Object.defineProperty(this,gs,{value:tf}),_e(this,{payable:r,gas:i})}format(e){if($(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const s=[`constructor${no(e,this.inputs)}`];return this.payable&&s.push("payable"),this.gas!=null&&s.push(`@${this.gas.toString()}`),s.join(" ")}static from(e){if(vn.isFragment(e))return e;if(typeof e=="string")try{return vn.from(Qn(e))}catch{S(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Ns){kn(e,as(["constructor"]));const s=An(e),n=!!kn(e,W1).has("payable"),r=xm(e);return Ar(e),new vn(pt,"constructor",s,n,r)}return new vn(pt,"constructor",e.inputs?e.inputs.map(lt.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[gs]===tf}}class fn extends Er{payable;constructor(e,s,n){super(e,"fallback",s),Object.defineProperty(this,gs,{value:sf}),_e(this,{payable:n})}format(e){const s=this.inputs.length===0?"receive":"fallback";if(e==="json"){const n=this.payable?"payable":"nonpayable";return JSON.stringify({type:s,stateMutability:n})}return`${s}()${this.payable?" payable":""}`}static from(e){if(fn.isFragment(e))return e;if(typeof e=="string")try{return fn.from(Qn(e))}catch{S(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Ns){const s=e.toString(),n=e.peekKeyword(as(["fallback","receive"]));if(S(n,"type must be fallback or receive","obj",s),e.popKeyword(as(["fallback","receive"]))==="receive"){const l=An(e);return S(l.length===0,"receive cannot have arguments","obj.inputs",l),kn(e,as(["payable"])),Ar(e),new fn(pt,[],!0)}let i=An(e);i.length?S(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map(l=>l.format("minimal")).join(", ")):i=[lt.from("bytes")];const o=Im(e);if(S(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),kn(e,as(["returns"])).has("returns")){const l=An(e);S(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return Ar(e),new fn(pt,i,o==="payable")}if(e.type==="receive")return new fn(pt,[],!0);if(e.type==="fallback"){const s=[lt.from("bytes")],n=e.stateMutability==="payable";return new fn(pt,s,n)}S(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[gs]===sf}}class Xs extends Ga{constant;outputs;stateMutability;payable;gas;constructor(e,s,n,r,i,o){super(e,"function",s,r),Object.defineProperty(this,gs,{value:nf}),i=Object.freeze(i.slice()),_e(this,{constant:n==="view"||n==="pure",gas:o,outputs:i,payable:n==="payable",stateMutability:n})}get selector(){return wr(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});const s=[];return e!=="sighash"&&s.push("function"),s.push(this.name+no(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&s.push(this.stateMutability),this.outputs&&this.outputs.length&&(s.push("returns"),s.push(no(e,this.outputs))),this.gas!=null&&s.push(`@${this.gas.toString()}`)),s.join(" ")}static getSelector(e,s){return s=(s||[]).map(r=>lt.from(r)),new Xs(pt,e,"view",s,[],null).selector}static from(e){if(Xs.isFragment(e))return e;if(typeof e=="string")try{return Xs.from(Qn(e))}catch{S(!1,"invalid function fragment","obj",e)}else if(e instanceof Ns){const n=Wa("function",e),r=An(e),i=Im(e);let o=[];kn(e,as(["returns"])).has("returns")&&(o=An(e));const l=xm(e);return Ar(e),new Xs(pt,n,i,r,o,l)}let s=e.stateMutability;return s==null&&(s="payable",typeof e.constant=="boolean"?(s="view",e.constant||(s="payable",typeof e.payable=="boolean"&&!e.payable&&(s="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(s="nonpayable")),new Xs(pt,e.name,s,e.inputs?e.inputs.map(lt.from):[],e.outputs?e.outputs.map(lt.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[gs]===nf}}class br extends Ga{constructor(e,s,n){super(e,"struct",s,n),Object.defineProperty(this,gs,{value:rf})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return br.from(Qn(e))}catch{S(!1,"invalid struct fragment","obj",e)}else if(e instanceof Ns){const s=Wa("struct",e),n=An(e);return Ar(e),new br(pt,s,n)}return new br(pt,e.name,e.inputs?e.inputs.map(lt.from):[])}static isFragment(e){return e&&e[gs]===rf}}const Gs=new Map;Gs.set(0,"GENERIC_PANIC");Gs.set(1,"ASSERT_FALSE");Gs.set(17,"OVERFLOW");Gs.set(18,"DIVIDE_BY_ZERO");Gs.set(33,"ENUM_RANGE_ERROR");Gs.set(34,"BAD_STORAGE_DATA");Gs.set(49,"STACK_UNDERFLOW");Gs.set(50,"ARRAY_RANGE_ERROR");Gs.set(65,"OUT_OF_MEMORY");Gs.set(81,"UNINITIALIZED_FUNCTION_CALL");const tA=new RegExp(/^bytes([0-9]*)$/),sA=new RegExp(/^(u?int)([0-9]*)$/);let Cl=null,of=1024;function nA(t,e,s,n){let r="missing revert data",i=null;const o=null;let l=null;if(s){r="execution reverted";const u=Le(s);if(s=oe(s),u.length===0)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)r+=" (could not decode reason; invalid data length)";else if(oe(u.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],u.slice(4))[0],l={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch{r+=" (could not decode reason; invalid string data)"}else if(oe(u.slice(0,4))==="0x4e487b71")try{const d=Number(n.decode(["uint256"],u.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[d]},i=`Panic due to ${Gs.get(d)||"UNKNOWN"}(${d})`,r+=`: ${i}`}catch{r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const c={to:e.to?Qe(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Qe(e.from)),ft(r,"CALL_EXCEPTION",{action:t,data:s,reason:i,transaction:c,invocation:o,revert:l})}class zn{#e(e){if(e.isArray())return new Aw(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new No(e.components.map(n=>this.#e(n)),e.name);switch(e.baseType){case"address":return new bw(e.name);case"bool":return new Ew(e.name);case"string":return new Rw(e.name);case"bytes":return new _w(e.name);case"":return new kw(e.name)}let s=e.type.match(sA);if(s){let n=parseInt(s[2]||"256");return S(n!==0&&n<=256&&n%8===0,"invalid "+s[1]+" bit length","param",e),new xw(n/8,s[1]==="int",e.name)}if(s=e.type.match(tA),s){let n=parseInt(s[1]);return S(n!==0&&n<=32,"invalid bytes length","param",e),new Pw(n,e.name)}S(!1,"invalid type","type",e.type)}getDefaultValue(e){const s=e.map(r=>this.#e(lt.from(r)));return new No(s,"_").defaultValue()}encode(e,s){op(s.length,e.length,"types/values length mismatch");const n=e.map(o=>this.#e(lt.from(o))),r=new No(n,"_"),i=new tc;return r.encode(i,s),i.data}decode(e,s,n){const r=e.map(o=>this.#e(lt.from(o)));return new No(r,"_").decode(new Jc(s,n,of))}static _setDefaultMaxInflation(e){S(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),of=e}static defaultAbiCoder(){return Cl==null&&(Cl=new zn),Cl}static getBuiltinCallException(e,s,n){return nA(e,s,n,zn.defaultAbiCoder())}}class rA{fragment;name;signature;topic;args;constructor(e,s,n){const r=e.name,i=e.format();_e(this,{fragment:e,name:r,signature:i,topic:s,args:n})}}class iA{fragment;name;args;signature;selector;value;constructor(e,s,n,r){const i=e.name,o=e.format();_e(this,{fragment:e,name:i,args:n,signature:o,selector:s,value:r})}}class oA{fragment;name;args;signature;selector;constructor(e,s,n){const r=e.name,i=e.format();_e(this,{fragment:e,name:r,args:n,signature:i,selector:s})}}class af{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){_e(this,{hash:e,_isIndexed:!0})}}const lf={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},cf={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&lf[t.toString()]&&(e=lf[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class ur{fragments;deploy;fallback;receive;#e;#t;#s;#n;constructor(e){let s=[];typeof e=="string"?s=JSON.parse(e):s=e,this.#s=new Map,this.#e=new Map,this.#t=new Map;const n=[];for(const o of s)try{n.push(Er.from(o))}catch(l){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,l.message)}_e(this,{fragments:Object.freeze(n)});let r=null,i=!1;this.#n=this.getAbiCoder(),this.fragments.forEach((o,l)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}_e(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(S(!r||o.payable!==r.payable,"conflicting fallback fragments",`fragments[${l}]`,o),r=o,i=r.payable);return;case"function":c=this.#s;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}const u=o.format();c.has(u)||c.set(u,o)}),this.deploy||_e(this,{deploy:vn.from("constructor()")}),_e(this,{fallback:r,receive:i})}format(e){const s=e?"minimal":"full";return this.fragments.map(r=>r.format(s))}formatJson(){const e=this.fragments.map(s=>s.format("json"));return JSON.stringify(e.map(s=>JSON.parse(s)))}getAbiCoder(){return zn.defaultAbiCoder()}#r(e,s,n){if(ct(e)){const i=e.toLowerCase();for(const o of this.#s.values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,l]of this.#s)o.split("(")[0]===e&&i.push(l);if(s){const o=s.length>0?s[s.length-1]:null;let l=s.length,c=!0;yt.isTyped(o)&&o.type==="overrides"&&(c=!1,l--);for(let u=i.length-1;u>=0;u--){const d=i[u].inputs.length;d!==l&&(!c||d!==l-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const d=i[u].inputs;for(let f=0;f<s.length;f++)if(yt.isTyped(s[f])){if(f>=d.length){if(s[f].type==="overrides")continue;i.splice(u,1);break}if(s[f].type!==d[f].baseType){i.splice(u,1);break}}}}if(i.length===1&&s&&s.length!==i[0].inputs.length){const o=s[s.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(l=>JSON.stringify(l.format())).join(", ");S(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#s.get(Xs.from(e).format());return r||null}getFunctionName(e){const s=this.#r(e,null,!1);return S(s,"no matching function","key",e),s.name}hasFunction(e){return!!this.#r(e,null,!1)}getFunction(e,s){return this.#r(e,s||null,!0)}forEachFunction(e){const s=Array.from(this.#s.keys());s.sort((n,r)=>n.localeCompare(r));for(let n=0;n<s.length;n++){const r=s[n];e(this.#s.get(r),n)}}#o(e,s,n){if(ct(e)){const i=e.toLowerCase();for(const o of this.#t.values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,l]of this.#t)o.split("(")[0]===e&&i.push(l);if(s){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<s.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const l=i[o].inputs;for(let c=0;c<s.length;c++)if(yt.isTyped(s[c])&&s[c].type!==l[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(l=>JSON.stringify(l.format())).join(", ");S(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const r=this.#t.get(Zs.from(e).format());return r||null}getEventName(e){const s=this.#o(e,null,!1);return S(s,"no matching event","key",e),s.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,s){return this.#o(e,s||null,!0)}forEachEvent(e){const s=Array.from(this.#t.keys());s.sort((n,r)=>n.localeCompare(r));for(let n=0;n<s.length;n++){const r=s[n];e(this.#t.get(r),n)}}getError(e,s){if(ct(e)){const r=e.toLowerCase();if(cf[r])return hs.from(cf[r].signature);for(const i of this.#e.values())if(r===i.selector)return i;return null}if(e.indexOf("(")===-1){const r=[];for(const[i,o]of this.#e)i.split("(")[0]===e&&r.push(o);if(r.length===0)return e==="Error"?hs.from("error Error(string)"):e==="Panic"?hs.from("error Panic(uint256)"):null;if(r.length>1){const i=r.map(o=>JSON.stringify(o.format())).join(", ");S(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return r[0]}if(e=hs.from(e).format(),e==="Error(string)")return hs.from("error Error(string)");if(e==="Panic(uint256)")return hs.from("error Panic(uint256)");const n=this.#e.get(e);return n||null}forEachError(e){const s=Array.from(this.#e.keys());s.sort((n,r)=>n.localeCompare(r));for(let n=0;n<s.length;n++){const r=s[n];e(this.#e.get(r),n)}}_decodeParams(e,s){return this.#n.decode(e,s)}_encodeParams(e,s){return this.#n.encode(e,s)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,s){if(typeof e=="string"){const n=this.getError(e);S(n,"unknown error","fragment",e),e=n}return S(mt(s,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",s),this._decodeParams(e.inputs,mt(s,4))}encodeErrorResult(e,s){if(typeof e=="string"){const n=this.getError(e);S(n,"unknown error","fragment",e),e=n}return bt([e.selector,this._encodeParams(e.inputs,s||[])])}decodeFunctionData(e,s){if(typeof e=="string"){const n=this.getFunction(e);S(n,"unknown function","fragment",e),e=n}return S(mt(s,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",s),this._decodeParams(e.inputs,mt(s,4))}encodeFunctionData(e,s){if(typeof e=="string"){const n=this.getFunction(e);S(n,"unknown function","fragment",e),e=n}return bt([e.selector,this._encodeParams(e.inputs,s||[])])}decodeFunctionResult(e,s){if(typeof e=="string"){const i=this.getFunction(e);S(i,"unknown function","fragment",e),e=i}let n="invalid length for result data";const r=rs(s);if(r.length%32===0)try{return this.#n.decode(e.outputs,r)}catch{n="could not decode result data"}$(!1,n,"BAD_DATA",{value:oe(r),info:{method:e.name,signature:e.format()}})}makeError(e,s){const n=Le(e,"data"),r=zn.getBuiltinCallException("call",s,n);if(r.message.startsWith("execution reverted (unknown custom error)")){const l=oe(n.slice(0,4)),c=this.getError(l);if(c)try{const u=this.#n.decode(c.inputs,n.slice(4));r.revert={name:c.name,signature:c.format(),args:u},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch{r.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(s);return o&&(r.invocation={method:o.name,signature:o.signature,args:o.args}),r}encodeFunctionResult(e,s){if(typeof e=="string"){const n=this.getFunction(e);S(n,"unknown function","fragment",e),e=n}return oe(this.#n.encode(e.outputs,s||[]))}encodeFilterTopics(e,s){if(typeof e=="string"){const i=this.getEvent(e);S(i,"unknown event","eventFragment",e),e=i}$(s.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:s.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const r=(i,o)=>i.type==="string"?wr(o):i.type==="bytes"?vt(oe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Kn(o):i.type.match(/^bytes/)?o=Ev(o,32):i.type==="address"&&this.#n.encode(["address"],[o]),Pn(oe(o),32));for(s.forEach((i,o)=>{const l=e.inputs[o];if(!l.indexed){S(i==null,"cannot filter non-indexed parameters; must be null","contract."+l.name,i);return}i==null?n.push(null):l.baseType==="array"||l.baseType==="tuple"?S(!1,"filtering with tuples or arrays not supported","contract."+l.name,i):Array.isArray(i)?n.push(i.map(c=>r(l,c))):n.push(r(l,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,s){if(typeof e=="string"){const o=this.getEvent(e);S(o,"unknown event","eventFragment",e),e=o}const n=[],r=[],i=[];return e.anonymous||n.push(e.topicHash),S(s.length===e.inputs.length,"event arguments/values mismatch","values",s),e.inputs.forEach((o,l)=>{const c=s[l];if(o.indexed)if(o.type==="string")n.push(wr(c));else if(o.type==="bytes")n.push(vt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this.#n.encode([o.type],[c]))}else r.push(o),i.push(c)}),{data:this.#n.encode(r,i),topics:n}}decodeEventLog(e,s,n){if(typeof e=="string"){const p=this.getEvent(e);S(p,"unknown event","eventFragment",e),e=p}if(n!=null&&!e.anonymous){const p=e.topicHash;S(ct(n[0],32)&&n[0].toLowerCase()===p,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],i=[],o=[];e.inputs.forEach((p,P)=>{p.indexed?p.type==="string"||p.type==="bytes"||p.baseType==="tuple"||p.baseType==="array"?(r.push(lt.from({type:"bytes32",name:p.name})),o.push(!0)):(r.push(p),o.push(!1)):(i.push(p),o.push(!1))});const l=n!=null?this.#n.decode(r,bt(n)):null,c=this.#n.decode(i,s,!0),u=[],d=[];let f=0,h=0;return e.inputs.forEach((p,P)=>{let w=null;if(p.indexed)if(l==null)w=new af(null);else if(o[P])w=new af(l[h++]);else try{w=l[h++]}catch(k){w=k}else try{w=c[f++]}catch(k){w=k}u.push(w),d.push(p.name||null)}),yn.fromItems(u,d)}parseTransaction(e){const s=Le(e.data,"tx.data"),n=he(e.value!=null?e.value:0,"tx.value"),r=this.getFunction(oe(s.slice(0,4)));if(!r)return null;const i=this.#n.decode(r.inputs,s.slice(4));return new iA(r,r.selector,i,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const s=this.getEvent(e.topics[0]);return!s||s.anonymous?null:new rA(s,s.topicHash,this.decodeEventLog(s,e.data,e.topics))}parseError(e){const s=oe(e),n=this.getError(mt(s,0,4));if(!n)return null;const r=this.#n.decode(n.inputs,mt(s,4));return new oA(n,n.selector,r)}static from(e){return e instanceof ur?e:typeof e=="string"?new ur(JSON.parse(e)):typeof e.formatJson=="function"?new ur(e.formatJson()):typeof e.format=="function"?new ur(e.format("json")):new ur(e)}}const Rm=BigInt(0);function zr(t){return t??null}function Et(t){return t==null?null:t.toString()}class uf{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,s,n){_e(this,{gasPrice:zr(e),maxFeePerGas:zr(s),maxPriorityFeePerGas:zr(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:s,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:Et(e),maxFeePerGas:Et(s),maxPriorityFeePerGas:Et(n)}}}function pa(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=oe(t.data));const s="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of s)!(r in t)||t[r]==null||(e[r]=he(t[r],`request.${r}`));const n="type,nonce".split(/,/);for(const r of n)!(r in t)||t[r]==null||(e[r]=De(t[r],`request.${r}`));return t.accessList&&(e.accessList=Sr(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(r=>Qc(r)?oe(r):Object.assign({},r))),e}class aA{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,s){this.#e=e.transactions.map(n=>typeof n!="string"?new yo(n,s):n),_e(this,{provider:s,hash:zr(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:zr(e.prevRandao),extraData:e.extraData,baseFeePerGas:zr(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:($(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:s,extraData:n,gasLimit:r,gasUsed:i,hash:o,miner:l,prevRandao:c,nonce:u,number:d,parentHash:f,parentBeaconBlockRoot:h,stateRoot:p,receiptsRoot:P,timestamp:w,transactions:k}=this;return{_type:"Block",baseFeePerGas:Et(e),difficulty:Et(s),extraData:n,gasLimit:Et(r),gasUsed:Et(i),blobGasUsed:Et(this.blobGasUsed),excessBlobGas:Et(this.excessBlobGas),hash:o,miner:l,prevRandao:c,nonce:u,number:d,parentHash:f,timestamp:w,parentBeaconBlockRoot:h,stateRoot:p,receiptsRoot:P,transactions:k}}[Symbol.iterator](){let e=0;const s=this.transactions;return{next:()=>e<this.length?{value:s[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let s;if(typeof e=="number")s=this.#e[e];else{const n=e.toLowerCase();for(const r of this.#e)if(typeof r=="string"){if(r!==n)continue;s=r;break}else{if(r.hash!==n)continue;s=r;break}}if(s==null)throw new Error("no such tx");return typeof s=="string"?await this.provider.getTransaction(s):s}getPrefetchedTransaction(e){const s=this.prefetchedTransactions;if(typeof e=="number")return s[e];e=e.toLowerCase();for(const n of s)if(n.hash===e)return n;S(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return lA(this)}}class go{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,s){this.provider=s;const n=Object.freeze(e.topics.slice());_e(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:s,blockNumber:n,data:r,index:i,removed:o,topics:l,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:s,blockNumber:n,data:r,index:i,removed:o,topics:l,transactionHash:c,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return $(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return $(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return $(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return cA(this)}}class Dm{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,s){this.#e=Object.freeze(e.logs.map(r=>new go(r,s)));let n=Rm;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),_e(this,{provider:s,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:s,contractAddress:n,hash:r,index:i,blockHash:o,blockNumber:l,logsBloom:c,logs:u,status:d,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:l,contractAddress:n,cumulativeGasUsed:Et(this.cumulativeGasUsed),from:s,gasPrice:Et(this.gasPrice),blobGasUsed:Et(this.blobGasUsed),blobGasPrice:Et(this.blobGasPrice),gasUsed:Et(this.gasUsed),hash:r,index:i,logs:u,logsBloom:c,root:f,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Lm(this)}reorderedEvent(e){return $(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Nm(this,e)}}class yo{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,s){this.provider=s,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:s,index:n,hash:r,type:i,to:o,from:l,nonce:c,data:u,signature:d,accessList:f,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:s,blobVersionedHashes:h,chainId:Et(this.chainId),data:u,from:l,gasLimit:Et(this.gasLimit),gasPrice:Et(this.gasPrice),hash:r,maxFeePerGas:Et(this.maxFeePerGas),maxPriorityFeePerGas:Et(this.maxPriorityFeePerGas),maxFeePerBlobGas:Et(this.maxFeePerBlobGas),nonce:c,signature:d,to:o,index:n,type:i,value:Et(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const s=this.provider.getBlock(e);if(s==null)throw new Error("TODO");return s}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:s,blockNumber:n}=await es({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return s==null||s.blockNumber==null?0:n-s.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,s){const n=e??1,r=s??0;let i=this.#e,o=-1,l=i===-1;const c=async()=>{if(l)return null;const{blockNumber:h,nonce:p}=await es({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(p<this.nonce){i=h;return}if(l)return null;const P=await this.getTransaction();if(!(P&&P.blockNumber!=null))for(o===-1&&(o=i-3,o<this.#e&&(o=this.#e));o<=h;){if(l)return null;const w=await this.provider.getBlock(o,!0);if(w==null)return;for(const k of w)if(k===this.hash)return;for(let k=0;k<w.length;k++){const T=await w.getTransaction(k);if(T.from===this.from&&T.nonce===this.nonce){if(l)return null;const N=await this.provider.getTransactionReceipt(T.hash);if(N==null||h-N.blockNumber+1<n)return;let L="replaced";T.data===this.data&&T.to===this.to&&T.value===this.value?L="repriced":T.data==="0x"&&T.from===T.to&&T.value===Rm&&(L="cancelled"),$(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:L==="replaced"||L==="cancelled",reason:L,replacement:T.replaceableTransaction(i),hash:T.hash,receipt:N})}}o++}},u=h=>{if(h==null||h.status!==0)return h;$(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},d=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(d);if(d){if(n===1||await d.confirmations()>=n)return u(d)}else if(await c(),n===0)return null;return await new Promise((h,p)=>{const P=[],w=()=>{P.forEach(T=>T())};if(P.push(()=>{l=!0}),r>0){const T=setTimeout(()=>{w(),p(ft("wait for transaction timeout","TIMEOUT"))},r);P.push(()=>{clearTimeout(T)})}const k=async T=>{if(await T.confirmations()>=n){w();try{h(u(T))}catch(N){p(N)}}};if(P.push(()=>{this.provider.off(this.hash,k)}),this.provider.on(this.hash,k),i>=0){const T=async()=>{try{await c()}catch(N){if(Kt(N,"TRANSACTION_REPLACED")){w(),p(N);return}}l||this.provider.once("block",T)};P.push(()=>{this.provider.off("block",T)}),this.provider.once("block",T)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return $(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Lm(this)}reorderedEvent(e){return $(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),$(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Nm(this,e)}replaceableTransaction(e){S(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const s=new yo(this,this.provider);return s.#e=e,s}}function lA(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Nm(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Lm(t){return{orphan:"drop-transaction",tx:t}}function cA(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class cu extends go{interface;fragment;args;constructor(e,s,n){super(e,e.provider);const r=s.decodeEventLog(n,e.data,e.topics);_e(this,{args:r,fragment:n,interface:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Om extends go{error;constructor(e,s){super(e,e.provider),_e(this,{error:s})}}class uA extends Dm{#e;constructor(e,s,n){super(n,s),this.#e=e}get logs(){return super.logs.map(e=>{const s=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(s)try{return new cu(e,this.#e,s)}catch(n){return new Om(e,n)}return e})}}class uu extends yo{#e;constructor(e,s,n){super(n,s),this.#e=e}async wait(e,s){const n=await super.wait(e,s);return n==null?null:new uA(this.#e,this.provider,n)}}class Um extends up{log;constructor(e,s,n,r){super(e,s,n),_e(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class dA extends Um{constructor(e,s,n,r,i){super(e,s,n,new cu(i,e.interface,r));const o=e.interface.decodeEventLog(r,this.log.data,this.log.topics);_e(this,{args:o,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const df=BigInt(0);function Bm(t){return t&&typeof t.call=="function"}function Mm(t){return t&&typeof t.estimateGas=="function"}function Ka(t){return t&&typeof t.resolveName=="function"}function Fm(t){return t&&typeof t.sendTransaction=="function"}function Vm(t){if(t!=null){if(Ka(t))return t;if(t.provider)return t.provider}}class fA{#e;fragment;constructor(e,s,n){if(_e(this,{fragment:s}),s.inputs.length<n.length)throw new Error("too many arguments");const r=_r(e.runner,"resolveName"),i=Ka(r)?r:null;this.#e=(async function(){const o=await Promise.all(s.inputs.map((l,c)=>n[c]==null?null:l.walkAsync(n[c],(d,f)=>d==="address"?Array.isArray(f)?Promise.all(f.map(h=>os(h,i))):os(f,i):f)));return e.interface.encodeFilterTopics(s,o)})()}getTopicFilter(){return this.#e}}function _r(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function pr(t){return t==null?null:t.provider||null}async function jm(t,e){const s=yt.dereference(t,"overrides");S(typeof s=="object","invalid overrides parameter","overrides",t);const n=pa(s);return S(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),S(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function hA(t,e,s){const n=_r(t,"resolveName"),r=Ka(n)?n:null;return await Promise.all(e.map((i,o)=>i.walkAsync(s[o],(l,c)=>(c=yt.dereference(c,l),l==="address"?os(c,r):c))))}function pA(t){const e=async function(o){const l=await jm(o,["data"]);l.to=await t.getAddress(),l.from&&(l.from=await os(l.from,Vm(t.runner)));const c=t.interface,u=he(l.value||df,"overrides.value")===df,d=(l.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!d&&!u&&S(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),S(c.fallback||d,"cannot send data to receive-only contract","overrides.data",l.data);const f=c.receive||c.fallback&&c.fallback.payable;return S(f||u,"cannot send value to non-payable fallback","overrides.value",l.value),S(c.fallback||d,"cannot send data to receive-only contract","overrides.data",l.data),l},s=async function(o){const l=_r(t.runner,"call");$(Bm(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await l.call(c)}catch(u){throw zc(u)&&u.data?t.interface.makeError(u.data,c):u}},n=async function(o){const l=t.runner;$(Fm(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await l.sendTransaction(await e(o)),u=pr(t.runner);return new uu(t.interface,u,c)},r=async function(o){const l=_r(t.runner,"estimateGas");return $(Mm(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await e(o))},i=async o=>await n(o);return _e(i,{_contract:t,estimateGas:r,populateTransaction:e,send:n,staticCall:s}),i}function mA(t,e){const s=function(...u){const d=t.interface.getFunction(e,u);return $(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),d},n=async function(...u){const d=s(...u);let f={};if(d.inputs.length+1===u.length&&(f=await jm(u.pop()),f.from&&(f.from=await os(f.from,Vm(t.runner)))),d.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await hA(t.runner,d.inputs,u);return Object.assign({},f,await es({to:t.getAddress(),data:t.interface.encodeFunctionData(d,h)}))},r=async function(...u){const d=await l(...u);return d.length===1?d[0]:d},i=async function(...u){const d=t.runner;$(Fm(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await d.sendTransaction(await n(...u)),h=pr(t.runner);return new uu(t.interface,h,f)},o=async function(...u){const d=_r(t.runner,"estimateGas");return $(Mm(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await n(...u))},l=async function(...u){const d=_r(t.runner,"call");$(Bm(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await n(...u);let h="0x";try{h=await d.call(f)}catch(P){throw zc(P)&&P.data?t.interface.makeError(P.data,f):P}const p=s(...u);return t.interface.decodeFunctionResult(p,h)},c=async(...u)=>s(...u).constant?await r(...u):await i(...u);return _e(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:s,estimateGas:o,populateTransaction:n,send:i,staticCall:r,staticCallResult:l}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=t.interface.getFunction(e);return $(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),c}function gA(t,e){const s=function(...r){const i=t.interface.getEvent(e,r);return $(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),i},n=function(...r){return new fA(t,s(...r),r)};return _e(n,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:s}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=t.interface.getEvent(e);return $(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),n}const ma=Symbol.for("_ethersInternal_contract"),$m=new WeakMap;function yA(t,e){$m.set(t[ma],e)}function ws(t){return $m.get(t[ma])}function vA(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function du(t,e){let s,n=null;if(Array.isArray(e)){const i=function(o){if(ct(o,32))return o;const l=t.interface.getEvent(o);return S(l,"unknown fragment","name",o),l.topicHash};s=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?s=[null]:typeof e=="string"?ct(e,32)?s=[e]:(n=t.interface.getEvent(e),S(n,"unknown fragment","event",e),s=[n.topicHash]):vA(e)?s=await e.getTopicFilter():"fragment"in e?(n=e.fragment,s=[n.topicHash]):S(!1,"unknown event name","event",e);s=s.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(l=>l.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const r=s.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:r,topics:s}}async function ki(t,e){const{subs:s}=ws(t);return s.get((await du(t,e)).tag)||null}async function ff(t,e,s){const n=pr(t.runner);$(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:r,tag:i,topics:o}=await du(t,s),{addr:l,subs:c}=ws(t);let u=c.get(i);if(!u){const f={address:l||t,topics:o},h=k=>{let T=r;if(T==null)try{T=t.interface.getEvent(k.topics[0])}catch{}if(T){const N=T,L=r?t.interface.decodeEventLog(r,k.data,k.topics):[];pc(t,s,L,R=>new dA(t,R,s,N,k))}else pc(t,s,[],N=>new Um(t,N,s,k))};let p=[];u={tag:i,listeners:[],start:()=>{p.length||p.push(n.on(f,h))},stop:async()=>{if(p.length==0)return;let k=p;p=[],await Promise.all(k),n.off(f,h)}},c.set(i,u)}return u}let hc=Promise.resolve();async function bA(t,e,s,n){await hc;const r=await ki(t,e);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:l})=>{const c=Array.from(s);n&&c.push(n(l?null:o));try{o.call(t,...c)}catch{}return!l}),r.listeners.length===0&&(r.stop(),ws(t).subs.delete(r.tag)),i>0}async function pc(t,e,s,n){try{await hc}catch{}const r=bA(t,e,s,n);return hc=r,await r}const Oo=["then"];class Ui{target;interface;runner;filters;[ma];fallback;constructor(e,s,n,r){S(typeof e=="string"||zp(e),"invalid value for Contract target","target",e),n==null&&(n=null);const i=ur.from(s);_e(this,{target:e,runner:n,interface:i}),Object.defineProperty(this,ma,{value:{}});let o,l=null,c=null;if(r){const f=pr(n);c=new uu(this.interface,f,r)}let u=new Map;if(typeof e=="string")if(ct(e))l=e,o=Promise.resolve(e);else{const f=_r(n,"resolveName");if(!Ka(f))throw ft("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(e).then(h=>{if(h==null)throw ft("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return ws(this).addr=h,h})}else o=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return ws(this).addr=f,f});yA(this,{addrPromise:o,addr:l,deployTx:c,subs:u});const d=new Proxy({},{get:(f,h,p)=>{if(typeof h=="symbol"||Oo.indexOf(h)>=0)return Reflect.get(f,h,p);try{return this.getEvent(h)}catch(P){if(!Kt(P,"INVALID_ARGUMENT")||P.argument!=="key")throw P}},has:(f,h)=>Oo.indexOf(h)>=0?Reflect.has(f,h):Reflect.has(f,h)||this.interface.hasEvent(String(h))});return _e(this,{filters:d}),_e(this,{fallback:i.receive||i.fallback?pA(this):null}),new Proxy(this,{get:(f,h,p)=>{if(typeof h=="symbol"||h in f||Oo.indexOf(h)>=0)return Reflect.get(f,h,p);try{return f.getFunction(h)}catch(P){if(!Kt(P,"INVALID_ARGUMENT")||P.argument!=="key")throw P}},has:(f,h)=>typeof h=="symbol"||h in f||Oo.indexOf(h)>=0?Reflect.has(f,h):f.interface.hasFunction(h)})}connect(e){return new Ui(this.target,this.interface,e)}attach(e){return new Ui(e,this.interface,this.runner)}async getAddress(){return await ws(this).addrPromise}async getDeployedCode(){const e=pr(this.runner);$(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const s=await e.getCode(await this.getAddress());return s==="0x"?null:s}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=pr(this.runner);return $(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);n.once("block",o)}catch(l){i(l)}};o()})}deploymentTransaction(){return ws(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),mA(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),gA(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,s,n){s==null&&(s=0),n==null&&(n="latest");const{addr:r,addrPromise:i}=ws(this),o=r||await i,{fragment:l,topics:c}=await du(this,e),u={address:o,topics:c,fromBlock:s,toBlock:n},d=pr(this.runner);return $(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(u)).map(f=>{let h=l;if(h==null)try{h=this.interface.getEvent(f.topics[0])}catch{}if(h)try{return new cu(f,this.interface,h)}catch(p){return new Om(f,p)}return new go(f,d)})}async on(e,s){const n=await ff(this,"on",e);return n.listeners.push({listener:s,once:!1}),n.start(),this}async once(e,s){const n=await ff(this,"once",e);return n.listeners.push({listener:s,once:!0}),n.start(),this}async emit(e,...s){return await pc(this,e,s,null)}async listenerCount(e){if(e){const r=await ki(this,e);return r?r.listeners.length:0}const{subs:s}=ws(this);let n=0;for(const{listeners:r}of s.values())n+=r.length;return n}async listeners(e){if(e){const r=await ki(this,e);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:s}=ws(this);let n=[];for(const{listeners:r}of s.values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,s){const n=await ki(this,e);if(!n)return this;if(s){const r=n.listeners.map(({listener:i})=>i).indexOf(s);r>=0&&n.listeners.splice(r,1)}return(s==null||n.listeners.length===0)&&(n.stop(),ws(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const s=await ki(this,e);if(!s)return this;s.stop(),ws(this).subs.delete(s.tag)}else{const{subs:s}=ws(this);for(const{tag:n,stop:r}of s.values())r(),s.delete(n)}return this}async addListener(e,s){return await this.on(e,s)}async removeListener(e,s){return await this.off(e,s)}static buildClass(e){class s extends Ui{constructor(r,i=null){super(r,e,i)}}return s}static from(e,s,n){return n==null&&(n=null),new this(e,s,n)}}function wA(){return Ui}class Wt extends wA(){}function Tl(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):S(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class AA{name;constructor(e){_e(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,s){throw new Error("unsupported coin")}async decodeAddress(e,s){throw new Error("unsupported coin")}}const Hm=new RegExp("^(ipfs)://(.*)$","i"),hf=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Hm,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Qr{provider;address;name;#e;#t;constructor(e,s,n){_e(this,{provider:e,address:s,name:n}),this.#e=null,this.#t=new Wt(s,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(Kt(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#s(e,s){s=(s||[]).slice();const n=this.#t.interface;s.unshift(fc(this.name));let r=null;await this.supportsWildcard()&&(r=n.getFunction(e),$(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),s=[U1(this.name,255),n.encodeFunctionData(r,s)],e="resolve(bytes,bytes)"),s.push({enableCcipRead:!0});try{const i=await this.#t[e](...s);return r?n.decodeFunctionResult(r,i)[0]:i}catch(i){if(!Kt(i,"CALL_EXCEPTION"))throw i}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await this.#s("addr(bytes32)");return i==null||i===Zi?null:i}catch(i){if(Kt(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await this.#s("addr(bytes32,uint)",[i]);if(ct(o,20))return Qe(o)}let s=null;for(const i of this.provider.plugins)if(i instanceof AA&&i.supportsCoinType(e)){s=i;break}if(s==null)return null;const n=await this.#s("addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const r=await s.decodeAddress(e,n);if(r!=null)return r;$(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const s=await this.#s("text(bytes32,string)",[e]);return s==null||s==="0x"?null:s}async getContentHash(){const e=await this.#s("contenthash(bytes32)");if(e==null||e==="0x")return null;const s=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(s){const r=s[1]==="e3010170"?"ipfs":"ipns",i=parseInt(s[4],16);if(s[5].length===i*2)return`${r}://${Pv("0x"+s[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;$(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const s=await this.getText("avatar");if(s==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:s});for(let n=0;n<hf.length;n++){const r=s.match(hf[n]);if(r==null)continue;const i=r[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:s}),{linkage:e,url:s};case"ipfs":{const o=Tl(s);return e.push({type:"ipfs",value:s}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:s});const l=await this.getAddress();if(l==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(r[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:r[2]||""}),{url:null,linkage:e};const u=c[1],d=new Wt(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const w=await d.ownerOf(u);if(l!==w)return e.push({type:"!owner",value:w}),{url:null,linkage:e};e.push({type:"owner",value:w})}else if(i==="erc1155"){const w=await d.balanceOf(l,u);if(!w)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:w.toString()})}let f=await d[o](u);if(f==null||f==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),i==="erc1155"&&(f=f.replace("{id}",Kn(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=Tl(f)),e.push({type:"metadata-url",value:f});let h={};const p=await new Sn(f).send();p.assertOk();try{h=p.bodyJson}catch{try{e.push({type:"!metadata",value:p.bodyText})}catch{const T=p.body;return T&&e.push({type:"!metadata",value:oe(T)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let P=h.image;if(typeof P!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!P.match(/^(https:\/\/|data:)/i)){if(P.match(Hm)==null)return e.push({type:"!imageUrl-ipfs",value:P}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:P}),P=Tl(P)}return e.push({type:"url",value:P}),{linkage:e,url:P}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const s=await e.getNetwork(),n=s.getPlugin("org.ethers.plugins.network.Ens");return $(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:s}}),n.address}static async#n(e,s){const n=await Qr.getEnsAddress(e);try{const i=await new Wt(n,["function resolver(bytes32) view returns (address)"],e).resolver(fc(s),{enableCcipRead:!0});return i===Zi?null:i}catch(r){throw r}return null}static async fromName(e,s){let n=s;for(;;){if(n===""||n==="."||s!=="eth"&&n==="eth")return null;const r=await Qr.#n(e,n);if(r!=null){const i=new Qr(e,r,s);return n!==s&&!await i.supportsWildcard()?null:i}n=n.split(".").slice(1).join(".")}}}const pf=BigInt(0);function Fe(t,e){return(function(s){return s==null?e:t(s)})}function ro(t,e){return(s=>{if(e&&s==null)return null;if(!Array.isArray(s))throw new Error("not an array");return s.map(n=>t(n))})}function vo(t,e){return(s=>{const n={};for(const r in t){let i=r;if(e&&r in e&&!(i in s)){for(const o of e[r])if(o in s){i=o;break}}try{const o=t[r](s[i]);o!==void 0&&(n[r]=o)}catch(o){const l=o instanceof Error?o.message:"not-an-error";$(!1,`invalid value for value.${r} (${l})`,"BAD_DATA",{value:s})}}return n})}function EA(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}S(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function ni(t){return S(ct(t,!0),"invalid data","value",t),t}function Gt(t){return S(ct(t,32),"invalid hash","value",t),t}const _A=vo({address:Qe,blockHash:Gt,blockNumber:De,data:ni,index:De,removed:Fe(EA,!1),topics:ro(Gt),transactionHash:Gt,transactionIndex:De},{index:["logIndex"]});function PA(t){return _A(t)}const SA=vo({hash:Fe(Gt),parentHash:Gt,parentBeaconBlockRoot:Fe(Gt,null),number:De,timestamp:De,nonce:Fe(ni),difficulty:he,gasLimit:he,gasUsed:he,stateRoot:Fe(Gt,null),receiptsRoot:Fe(Gt,null),blobGasUsed:Fe(he,null),excessBlobGas:Fe(he,null),miner:Fe(Qe),prevRandao:Fe(Gt,null),extraData:ni,baseFeePerGas:Fe(he)},{prevRandao:["mixHash"]});function kA(t){const e=SA(t);return e.transactions=t.transactions.map(s=>typeof s=="string"?s:Wm(s)),e}const CA=vo({transactionIndex:De,blockNumber:De,transactionHash:Gt,address:Qe,topics:ro(Gt),data:ni,index:De,blockHash:Gt},{index:["logIndex"]});function TA(t){return CA(t)}const IA=vo({to:Fe(Qe,null),from:Fe(Qe,null),contractAddress:Fe(Qe,null),index:De,root:Fe(oe),gasUsed:he,blobGasUsed:Fe(he,null),logsBloom:Fe(ni),blockHash:Gt,hash:Gt,logs:ro(TA),blockNumber:De,cumulativeGasUsed:he,effectiveGasPrice:Fe(he),blobGasPrice:Fe(he,null),status:Fe(De),type:Fe(De,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function xA(t){return IA(t)}function Wm(t){t.to&&he(t.to)===pf&&(t.to="0x0000000000000000000000000000000000000000");const e=vo({hash:Gt,index:Fe(De,void 0),type:s=>s==="0x"||s==null?0:De(s),accessList:Fe(Sr,null),blobVersionedHashes:Fe(ro(Gt,!0),null),authorizationList:Fe(ro(s=>{let n;if(s.signature)n=s.signature;else{let r=s.yParity;r==="0x1b"?r=0:r==="0x1c"&&(r=1),n=Object.assign({},s,{yParity:r})}return{address:Qe(s.address),chainId:he(s.chainId),nonce:he(s.nonce),signature:gt.from(n)}},!1),null),blockHash:Fe(Gt,null),blockNumber:Fe(De,null),transactionIndex:Fe(De,null),from:Qe,gasPrice:Fe(he),maxPriorityFeePerGas:Fe(he),maxFeePerGas:Fe(he),maxFeePerBlobGas:Fe(he,null),gasLimit:he,to:Fe(Qe,null),value:he,nonce:De,data:ni,creates:Fe(Qe,null),chainId:Fe(he,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=vw(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=gt.from(t.signature):e.signature=gt.from(t),e.chainId==null){const s=e.signature.legacyChainId;s!=null&&(e.chainId=s)}return e.blockHash&&he(e.blockHash)===pf&&(e.blockHash=null),e}const RA="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class bo{name;constructor(e){_e(this,{name:e})}clone(){return new bo(this.name)}}class Ya extends bo{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,s){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const n={effectiveBlock:e};function r(i,o){let l=(s||{})[i];l==null&&(l=o),S(typeof l=="number",`invalud value for ${i}`,"costs",s),n[i]=l}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),_e(this,n)}clone(){return new Ya(this.effectiveBlock,this)}}class za extends bo{address;targetNetwork;constructor(e,s){super("org.ethers.plugins.network.Ens"),_e(this,{address:e||RA,targetNetwork:s??1})}clone(){return new za(this.address,this.targetNetwork)}}class DA extends bo{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,s){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=s}clone(){return this}}const Il=new Map;class Ps{#e;#t;#s;constructor(e,s){this.#e=e,this.#t=he(s),this.#s=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=he(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===he(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===he(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===he(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#s.values())}attachPlugin(e){if(this.#s.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#s.set(e.name,e.clone()),this}getPlugin(e){return this.#s.get(e)||null}getPlugins(e){return this.plugins.filter(s=>s.name.split("#")[0]===e)}clone(){const e=new Ps(this.name,this.chainId);return this.plugins.forEach(s=>{e.attachPlugin(s.clone())}),e}computeIntrinsicGas(e){const s=this.getPlugin("org.ethers.plugins.network.GasCost")||new Ya;let n=s.txBase;if(e.to==null&&(n+=s.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)e.data.substring(r,r+2)==="00"?n+=s.txDataZero:n+=s.txDataNonzero;if(e.accessList){const r=Sr(e.accessList);for(const i in r)n+=s.txAccessListAddress+s.txAccessListStorageKey*r[i].storageKeys.length}return n}static from(e){if(NA(),e==null)return Ps.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const s=Il.get(e);if(s)return s();if(typeof e=="bigint")return new Ps("unknown",e);S(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){S(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const s=new Ps(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&s.attachPlugin(new za(e.ensAddress,e.ensNetwork)),s}S(!1,"invalid network","network",e)}static register(e,s){typeof e=="number"&&(e=BigInt(e));const n=Il.get(e);n&&S(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),Il.set(e,s)}}function mf(t,e){const s=String(t);if(!s.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const n=s.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let r=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||r++,n[1]=r.toString()}return BigInt(n[0]+n[1])}function gf(t){return new DA(t,async(e,s,n)=>{n.setHeader("User-Agent","ethers");let r;try{const[i,o]=await Promise.all([n.send(),e()]);r=i;const l=r.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:mf(l.maxFee,9),maxPriorityFeePerGas:mf(l.maxPriorityFee,9)}}catch(i){$(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:r,error:i})}})}let yf=!1;function NA(){if(yf)return;yf=!0;function t(e,s,n){const r=function(){const i=new Ps(e,s);return n.ensNetwork!=null&&i.attachPlugin(new za(null,n.ensNetwork)),i.attachPlugin(new Ya),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ps.register(e,r),Ps.register(s,r),n.altNames&&n.altNames.forEach(i=>{Ps.register(i,r)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[gf("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[gf("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function mc(t){return JSON.parse(JSON.stringify(t))}class LA{#e;#t;#s;#n;constructor(e){this.#e=e,this.#t=null,this.#s=4e3,this.#n=-2}get pollingInterval(){return this.#s}set pollingInterval(e){this.#s=e}async#r(){try{const e=await this.#e.getBlockNumber();if(this.#n===-2){this.#n=e;return}if(e!==this.#n){for(let s=this.#n+1;s<=e;s++){if(this.#t==null)return;await this.#e.emit("block",s)}this.#n=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#s))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#r.bind(this),this.#s),this.#r())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#n=-2)}resume(){this.start()}}class fu{#e;#t;#s;constructor(e){this.#e=e,this.#s=!1,this.#t=s=>{this._poll(s,this.#e)}}async _poll(e,s){throw new Error("sub-classes must override this")}start(){this.#s||(this.#s=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#s&&(this.#s=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class OA extends fu{#e;#t;constructor(e,s){super(e),this.#e=s,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,s){const n=await s.getBlock(this.#e);n!=null&&(this.#t===-2?this.#t=n.number:n.number>this.#t&&(s.emit(this.#e,n.number),this.#t=n.number))}}class UA extends fu{#e;constructor(e,s){super(e),this.#e=mc(s)}async _poll(e,s){throw new Error("@TODO")}}class BA extends fu{#e;constructor(e,s){super(e),this.#e=s}async _poll(e,s){const n=await s.getTransactionReceipt(this.#e);n&&s.emit(this.#e,n)}}class hu{#e;#t;#s;#n;#r;constructor(e,s){this.#e=e,this.#t=mc(s),this.#s=this.#o.bind(this),this.#n=!1,this.#r=-2}async#o(e){if(this.#r===-2)return;const s=mc(this.#t);s.fromBlock=this.#r+1,s.toBlock=e;const n=await this.#e.getLogs(s);if(n.length===0){this.#r<e-60&&(this.#r=e-60);return}for(const r of n)this.#e.emit(this.#t,r),this.#r=r.blockNumber}start(){this.#n||(this.#n=!0,this.#r===-2&&this.#e.getBlockNumber().then(e=>{this.#r=e}),this.#e.on("block",this.#s))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#s))}pause(e){this.stop(),e&&(this.#r=-2)}resume(){this.start()}}const MA=BigInt(2),FA=10;function Uo(t){return t&&typeof t.then=="function"}function Wo(t,e){return t+":"+JSON.stringify(e,(s,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const r=Object.keys(n);return r.sort(),r.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class Gm{name;constructor(e){_e(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function VA(t){return JSON.parse(JSON.stringify(t))}function gc(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function xl(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(ct(t,32)){const s=t.toLowerCase();return{type:"transaction",tag:Wo("tx",{hash:s}),hash:s}}if(t.orphan){const s=t;return{type:"orphan",tag:Wo("orphan",s),filter:VA(s)}}if(t.address||t.topics){const s=t,n={topics:(s.topics||[]).map(r=>r==null?null:Array.isArray(r)?gc(r.map(i=>i.toLowerCase())):r.toLowerCase())};if(s.address){const r=[],i=[],o=l=>{ct(l)?r.push(l):i.push((async()=>{r.push(await os(l,e))})())};Array.isArray(s.address)?s.address.forEach(o):o(s.address),i.length&&await Promise.all(i),n.address=gc(r.map(l=>l.toLowerCase()))}return{filter:n,tag:Wo("event",n),type:"event"}}S(!1,"unknown ProviderEvent","event",t)}function Rl(){return new Date().getTime()}const jA={cacheTimeout:250,pollingInterval:4e3};class $A{#e;#t;#s;#n;#r;#o;#i;#a;#d;#c;#p;#m;constructor(e,s){if(this.#m=Object.assign({},jA,s||{}),e==="any")this.#o=!0,this.#r=null;else if(e){const n=Ps.from(e);this.#o=!1,this.#r=Promise.resolve(n),setTimeout(()=>{this.emit("network",n,null)},0)}else this.#o=!1,this.#r=null;this.#a=-1,this.#i=new Map,this.#e=new Map,this.#t=new Map,this.#s=null,this.#n=!1,this.#d=1,this.#c=new Map,this.#p=!1}get pollingInterval(){return this.#m.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#l(e){const s=this.#m.cacheTimeout;if(s<0)return await this._perform(e);const n=Wo(e.method,e);let r=this.#i.get(n);return r||(r=this._perform(e),this.#i.set(n,r),setTimeout(()=>{this.#i.get(n)===r&&this.#i.delete(n)},s)),await r}async ccipReadFetch(e,s,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const r=e.to.toLowerCase(),i=s.toLowerCase(),o=[];for(let l=0;l<n.length;l++){const c=n[l],u=c.replace("{sender}",r).replace("{data}",i),d=new Sn(u);c.indexOf("{data}")===-1&&(d.body={data:i,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:l,urls:n});let f="unknown error",h;try{h=await d.send()}catch(p){o.push(p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:p}});continue}try{const p=h.bodyJson;if(p.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:p}),p.data;p.message&&(f=p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:p})}catch{}$(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:f}}),o.push(f)}$(!1,`error encountered during CCIP fetch: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:o}})}_wrapBlock(e,s){return new aA(kA(e),this)}_wrapLog(e,s){return new go(PA(e),this)}_wrapTransactionReceipt(e,s){return new Dm(xA(e),this)}_wrapTransactionResponse(e,s){return new yo(Wm(e),this)}_detectNetwork(){$(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){$(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=De(await this.#l({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return os(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(ct(e))return ct(e,32)?e:Fs(e);if(typeof e=="bigint"&&(e=De(e,"blockTag")),typeof e=="number")return e>=0?Fs(e):this.#a>=0?Fs(this.#a+e):this.getBlockNumber().then(s=>Fs(s+e));S(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const s=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?gc(c.map(u=>u.toLowerCase())):c.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,r=(c,u,d)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(n&&(u!=null||d!=null))throw new Error("invalid filter");const h={};return f&&(h.address=f),s.length&&(h.topics=s),u&&(h.fromBlock=u),d&&(h.toBlock=d),n&&(h.blockHash=n),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let l;return"toBlock"in e&&(l=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||l!=null&&typeof l!="string"?Promise.all([Promise.all(i),o,l]).then(c=>r(c[0],c[1],c[2])):r(i,o,l)}_getTransactionRequest(e){const s=pa(e),n=[];if(["to","from"].forEach(r=>{if(s[r]==null)return;const i=os(s[r],this);Uo(i)?n.push((async function(){s[r]=await i})()):s[r]=i}),s.blockTag!=null){const r=this._getBlockTag(s.blockTag);Uo(r)?n.push((async function(){s.blockTag=await r})()):s.blockTag=r}return n.length?(async function(){return await Promise.all(n),s})():s}async getNetwork(){if(this.#r==null){const r=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw this.#r===r&&(this.#r=null),i}})();return this.#r=r,(await r).clone()}const e=this.#r,[s,n]=await Promise.all([e,this._detectNetwork()]);return s.chainId!==n.chainId&&(this.#o?(this.emit("network",n,s),this.#r===e&&(this.#r=Promise.resolve(n))):$(!1,`network changed: ${s.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),s.clone()}async getFeeData(){const e=await this.getNetwork(),s=async()=>{const{_block:r,gasPrice:i,priorityFee:o}=await es({_block:this.#y("latest",!1),gasPrice:(async()=>{try{const d=await this.#l({method:"getGasPrice"});return he(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await this.#l({method:"getPriorityFee"});return he(d,"%response")}catch{}return null})()});let l=null,c=null;const u=this._wrapBlock(r,e);return u&&u.baseFeePerGas&&(c=o??BigInt("1000000000"),l=u.baseFeePerGas*MA+c),new uf(i,l,c)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const r=new Sn(n.url),i=await n.processFunc(s,this,r);return new uf(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await s()}async estimateGas(e){let s=this._getTransactionRequest(e);return Uo(s)&&(s=await s),he(await this.#l({method:"estimateGas",transaction:s}),"%response")}async#u(e,s,n){$(n<FA,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:s,enableCcipRead:!0})});const r=pa(e);try{return oe(await this._perform({method:"call",transaction:r,blockTag:s}))}catch(i){if(!this.disableCcipRead&&zc(i)&&i.data&&n>=0&&s==="latest"&&r.to!=null&&mt(i.data,0,4)==="0x556f1830"){const o=i.data,l=await os(r.to,this);let c;try{c=YA(mt(i.data,4))}catch(f){$(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:o}})}$(c.sender.toLowerCase()===l.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(r,c.calldata,c.urls);$(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:i.data,errorArgs:c.errorArgs}});const d={to:l,data:bt([c.selector,KA([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const f=await this.#u(d,s,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:f}),f}}throw i}}async#f(e){const{value:s}=await es({network:this.getNetwork(),value:e});return s}async call(e){const{tx:s,blockTag:n}=await es({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#f(this.#u(s,n,e.enableCcipRead?0:-1))}async#h(e,s,n){let r=this._getAddress(s),i=this._getBlockTag(n);return(typeof r!="string"||typeof i!="string")&&([r,i]=await Promise.all([r,i])),await this.#f(this.#l(Object.assign(e,{address:r,blockTag:i})))}async getBalance(e,s){return he(await this.#h({method:"getBalance"},e,s),"%response")}async getTransactionCount(e,s){return De(await this.#h({method:"getTransactionCount"},e,s),"%response")}async getCode(e,s){return oe(await this.#h({method:"getCode"},e,s))}async getStorage(e,s,n){const r=he(s,"position");return oe(await this.#h({method:"getStorage",position:r},e,n))}async broadcastTransaction(e){const{blockNumber:s,hash:n,network:r}=await es({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Bs.from(e);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,r).replaceableTransaction(s)}async#y(e,s){if(ct(e,32))return await this.#l({method:"getBlock",blockHash:e,includeTransactions:s});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await this.#l({method:"getBlock",blockTag:n,includeTransactions:s})}async getBlock(e,s){const{network:n,params:r}=await es({network:this.getNetwork(),params:this.#y(e,!!s)});return r==null?null:this._wrapBlock(r,n)}async getTransaction(e){const{network:s,params:n}=await es({network:this.getNetwork(),params:this.#l({method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,s)}async getTransactionReceipt(e){const{network:s,params:n}=await es({network:this.getNetwork(),params:this.#l({method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const r=await this.#l({method:"getTransaction",hash:e});if(r==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=r.gasPrice}return this._wrapTransactionReceipt(n,s)}async getTransactionResult(e){const{result:s}=await es({network:this.getNetwork(),result:this.#l({method:"getTransactionResult",hash:e})});return s==null?null:oe(s)}async getLogs(e){let s=this._getFilter(e);Uo(s)&&(s=await s);const{network:n,params:r}=await es({network:this.getNetwork(),params:this.#l({method:"getLogs",filter:s})});return r.map(i=>this._wrapLog(i,n))}_getProvider(e){$(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Qr.fromName(this,e)}async getAvatar(e){const s=await this.getResolver(e);return s?await s.getAvatar():null}async resolveName(e){const s=await this.getResolver(e);return s?await s.getAddress():null}async lookupAddress(e){e=Qe(e);const s=fc(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await Qr.getEnsAddress(this),i=await new Wt(n,["function resolver(bytes32) view returns (address)"],this).resolver(s);if(i==null||i===Zi)return null;const l=await new Wt(i,["function name(bytes32) view returns (string)"],this).name(s);return await this.resolveName(l)!==e?null:l}catch(n){if(Kt(n,"BAD_DATA")&&n.value==="0x"||Kt(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,s,n){const r=s??1;return r===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let l=null;const c=(async u=>{try{const d=await this.getTransactionReceipt(e);if(d!=null&&u-d.blockNumber+1>=r){i(d),l&&(clearTimeout(l),l=null);return}}catch(d){console.log("EEE",d)}this.once("block",c)});n!=null&&(l=setTimeout(()=>{l!=null&&(l=null,this.off("block",c),o(ft("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(e){$(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const s=this.#c.get(e);s&&(s.timer&&clearTimeout(s.timer),this.#c.delete(e))}_setTimeout(e,s){s==null&&(s=0);const n=this.#d++,r=()=>{this.#c.delete(n),e()};if(this.paused)this.#c.set(n,{timer:null,func:r,time:s});else{const i=setTimeout(r,s);this.#c.set(n,{timer:i,func:r,time:Rl()})}return n}_forEachSubscriber(e){for(const s of this.#e.values())e(s.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Gm(e.type);case"block":{const s=new LA(this);return s.pollingInterval=this.pollingInterval,s}case"safe":case"finalized":return new OA(this,e.type);case"event":return new hu(this,e.filter);case"transaction":return new BA(this,e.hash);case"orphan":return new UA(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,s){for(const n of this.#e.values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=s,n.started&&s.start(),this.#s!=null&&s.pause(this.#s);break}}async#g(e,s){let n=await xl(e,this);return n.type==="event"&&s&&s.length>0&&s[0].removed===!0&&(n=await xl({orphan:"drop-log",log:s[0]},this)),this.#e.get(n.tag)||null}async#v(e){const s=await xl(e,this),n=s.tag;let r=this.#e.get(n);return r||(r={subscriber:this._getSubscriber(s),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(n,r)),r}async on(e,s){const n=await this.#v(e);return n.listeners.push({listener:s,once:!1}),n.started||(n.subscriber.start(),n.started=!0,this.#s!=null&&n.subscriber.pause(this.#s)),this}async once(e,s){const n=await this.#v(e);return n.listeners.push({listener:s,once:!0}),n.started||(n.subscriber.start(),n.started=!0,this.#s!=null&&n.subscriber.pause(this.#s)),this}async emit(e,...s){const n=await this.#g(e,s);if(!n||n.listeners.length===0)return!1;const r=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const l=new up(this,o?null:i,e);try{i.call(this,...s,l)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),this.#e.delete(n.tag)),r>0}async listenerCount(e){if(e){const n=await this.#g(e);return n?n.listeners.length:0}let s=0;for(const{listeners:n}of this.#e.values())s+=n.length;return s}async listeners(e){if(e){const n=await this.#g(e);return n?n.listeners.map(({listener:r})=>r):[]}let s=[];for(const{listeners:n}of this.#e.values())s=s.concat(n.map(({listener:r})=>r));return s}async off(e,s){const n=await this.#g(e);if(!n)return this;if(s){const r=n.listeners.map(({listener:i})=>i).indexOf(s);r>=0&&n.listeners.splice(r,1)}return(!s||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),this.#e.delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:s,started:n,subscriber:r}=await this.#v(e);n&&r.stop(),this.#e.delete(s)}else for(const[s,{started:n,subscriber:r}]of this.#e)n&&r.stop(),this.#e.delete(s);return this}async addListener(e,s){return await this.on(e,s)}async removeListener(e,s){return this.off(e,s)}get destroyed(){return this.#n}destroy(){this.removeAllListeners();for(const e of this.#c.keys())this._clearTimeout(e);this.#n=!0}get paused(){return this.#s!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#s!=null){if(this.#s==!!e)return;$(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(s=>s.pause(e)),this.#s=!!e;for(const s of this.#c.values())s.timer&&clearTimeout(s.timer),s.time=Rl()-s.time}resume(){if(this.#s!=null){this._forEachSubscriber(e=>e.resume()),this.#s=null;for(const e of this.#c.values()){let s=e.time;s<0&&(s=0),e.time=Rl(),setTimeout(e.func,s)}}}}function HA(t,e){try{const s=yc(t,e);if(s)return ia(s)}catch{}return null}function yc(t,e){if(t==="0x")return null;try{const s=De(mt(t,e,e+32)),n=De(mt(t,s,s+32));return mt(t,s+32,s+32+n)}catch{}return null}function vf(t){const e=Nt(t);if(e.length>32)throw new Error("internal; should not happen");const s=new Uint8Array(32);return s.set(e,32-e.length),s}function WA(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const GA=new Uint8Array([]);function KA(t){const e=[];let s=0;for(let n=0;n<t.length;n++)e.push(GA),s+=32;for(let n=0;n<t.length;n++){const r=Le(t[n]);e[n]=vf(s),e.push(vf(r.length)),e.push(WA(r)),s+=32+Math.ceil(r.length/32)*32}return bt(e)}const bf="0x0000000000000000000000000000000000000000000000000000000000000000";function YA(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};$(Gr(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const s=mt(t,0,32);$(mt(s,0,12)===mt(bf,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=mt(s,12);try{const n=[],r=De(mt(t,32,64)),i=De(mt(t,r,r+32)),o=mt(t,r+32);for(let l=0;l<i;l++){const c=HA(o,l*32);if(c==null)throw new Error("abort");n.push(c)}e.urls=n}catch{$(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=yc(t,64);if(n==null)throw new Error("abort");e.calldata=n}catch{$(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}$(mt(t,100,128)===mt(bf,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=mt(t,96,100);try{const n=yc(t,128);if(n==null)throw new Error("abort");e.extraData=n}catch{$(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function rr(t,e){if(t.provider)return t.provider;$(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function wf(t,e){let s=pa(e);if(s.to!=null&&(s.to=os(s.to,t)),s.from!=null){const n=s.from;s.from=Promise.all([t.getAddress(),os(n,t)]).then(([r,i])=>(S(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else s.from=t.getAddress();return await es(s)}class zA{provider;constructor(e){_e(this,{provider:e||null})}async getNonce(e){return rr(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await wf(this,e)}async populateTransaction(e){const s=rr(this,"populateTransaction"),n=await wf(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const r=await this.provider.getNetwork();if(n.chainId!=null){const o=he(n.chainId);S(o===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=r.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?S(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&i&&S(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await s.getFeeData();$(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await s.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const l=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=l,n.maxPriorityFeePerGas=l}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?($(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):$(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await es(n)}async populateAuthorization(e){const s=Object.assign({},e);return s.chainId==null&&(s.chainId=(await rr(this,"getNetwork").getNetwork()).chainId),s.nonce==null&&(s.nonce=await this.getNonce()),s}async estimateGas(e){return rr(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return rr(this,"call").call(await this.populateCall(e))}async resolveName(e){return await rr(this,"resolveName").resolveName(e)}async sendTransaction(e){const s=rr(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const r=Bs.from(n);return await s.broadcastTransaction(await this.signTransaction(r))}authorize(e){$(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function QA(t){return JSON.parse(JSON.stringify(t))}class Km{#e;#t;#s;#n;#r;#o;constructor(e){this.#e=e,this.#t=null,this.#s=this.#i.bind(this),this.#n=!1,this.#r=null,this.#o=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,s){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#i(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let s=null;try{s=await this.#t}catch(i){if(!Kt(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(s==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const n=await this.#e.getNetwork();if(this.#r||(this.#r=n),this.#r.chainId!==n.chainId)throw new Error("chaid changed");if(this.#o)return;const r=await this.#e.send("eth_getFilterChanges",[s]);await this._emitResults(this.#e,r)}catch(s){console.log("@TODO",s)}this.#e.once("block",this.#s)}#a(){const e=this.#t;e&&(this.#t=null,e.then(s=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[s])}))}start(){this.#n||(this.#n=!0,this.#i(-2))}stop(){this.#n&&(this.#n=!1,this.#o=!0,this.#a(),this.#e.off("block",this.#s))}pause(e){e&&this.#a(),this.#e.off("block",this.#s)}resume(){this.start()}}class JA extends Km{#e;constructor(e,s){super(e),this.#e=QA(s)}_recover(e){return new hu(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,s){for(const n of s)e.emit(this.#e,e._wrapLog(n,e._network))}}class qA extends Km{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,s){for(const n of s)e.emit("pending",n)}}const ZA="bigint,boolean,function,number,string,symbol".split(/,/g);function Go(t){if(t==null||ZA.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(Go);if(typeof t=="object")return Object.keys(t).reduce((e,s)=>(e[s]=t[s],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function XA(t){return new Promise(e=>{setTimeout(e,t)})}function Nr(t){return t&&t.toLowerCase()}function Af(t){return t&&typeof t.pollingInterval=="number"}const Ym={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Dl extends zA{address;constructor(e,s){super(e),s=Qe(s),_e(this,{address:s})}connect(e){$(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const s=Go(e),n=[];if(s.from){const i=s.from;n.push((async()=>{const o=await os(i,this.provider);S(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),s.from=o})())}else s.from=this.address;if(s.gasLimit==null&&n.push((async()=>{s.gasLimit=await this.provider.estimateGas({...s,from:this.address})})()),s.to!=null){const i=s.to;n.push((async()=>{s.to=await os(i,this.provider)})())}n.length&&await Promise.all(n);const r=this.provider.getRpcTransaction(s);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(e){const s=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise((r,i)=>{const o=[1e3,100];let l=0;const c=async()=>{try{const u=await this.provider.getTransaction(n);if(u!=null){r(u.replaceableTransaction(s));return}}catch(u){if(Kt(u,"CANCELLED")||Kt(u,"BAD_DATA")||Kt(u,"NETWORK_ERROR")||Kt(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=n,i(u);return}if(Kt(u,"INVALID_ARGUMENT")&&(l++,u.info==null&&(u.info={}),u.info.sendTransactionHash=n,l>10)){i(u);return}this.provider.emit("error",ft("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{c()},o.pop()||4e3)};c()})}async signTransaction(e){const s=Go(e);if(s.from){const r=await os(s.from,this.provider);S(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),s.from=r}else s.from=this.address;const n=this.provider.getRpcTransaction(s);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const s=typeof e=="string"?wn(e):e;return await this.provider.send("personal_sign",[oe(s),this.address.toLowerCase()])}async signTypedData(e,s,n){const r=Go(n),i=await bs.resolveNames(e,s,r,async o=>{const l=await os(o);return S(l!=null,"TypedData does not support null address","value",o),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(bs.getPayload(i.domain,s,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const s=typeof e=="string"?wn(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),oe(s)])}}class e2 extends $A{#e;#t;#s;#n;#r;#o;#i;#a(){if(this.#n)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#n=setTimeout(()=>{this.#n=null;const s=this.#s;for(this.#s=[];s.length;){const n=[s.shift()];for(;s.length&&n.length!==this.#e.batchMaxCount;)if(n.push(s.shift()),JSON.stringify(n.map(i=>i.payload)).length>this.#e.batchMaxSize){s.unshift(n.pop());break}(async()=>{const r=n.length===1?n[0].payload:n.map(i=>i.payload);this.emit("debug",{action:"sendRpcPayload",payload:r});try{const i=await this._send(r);this.emit("debug",{action:"receiveRpcResult",result:i});for(const{resolve:o,reject:l,payload:c}of n){if(this.destroyed){l(ft("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const u=i.filter(d=>d.id===c.id)[0];if(u==null){const d=ft("missing response for request","BAD_DATA",{value:i,info:{payload:c}});this.emit("error",d),l(d);continue}if("error"in u){l(this.getRpcError(c,u));continue}o(u.result)}}catch(i){this.emit("debug",{action:"receiveRpcError",error:i});for(const{reject:o}of n)o(i)}})()}},e)}constructor(e,s){super(e,s),this.#t=1,this.#e=Object.assign({},Ym,s||{}),this.#s=[],this.#n=null,this.#o=null,this.#i=null;{let r=null;const i=new Promise(o=>{r=o});this.#r={promise:i,resolve:r}}const n=this._getOption("staticNetwork");typeof n=="boolean"?(S(!n||e!=="any","staticNetwork cannot be used on special network 'any'","options",s),n&&e!=null&&(this.#o=Ps.from(e))):n&&(S(e==null||n.matches(e),"staticNetwork MUST match network object","options",s),this.#o=n)}_getOption(e){return this.#e[e]}get _network(){return $(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let n=e.transaction;if(n&&n.type!=null&&he(n.type)&&n.maxFeePerGas==null&&n.maxPriorityFeePerGas==null){const r=await this.getFeeData();r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},n,{type:void 0})}))}}const s=this.getRpcRequest(e);return s!=null?await this.send(s.method,s.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#o)return this.#o}else return e;return this.#i?await this.#i:this.ready?(this.#i=(async()=>{try{const s=Ps.from(he(await this.send("eth_chainId",[])));return this.#i=null,s}catch(s){throw this.#i=null,s}})(),await this.#i):(this.#i=(async()=>{const s={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:s});let n;try{n=(await this._send(s))[0],this.#i=null}catch(r){throw this.#i=null,this.emit("debug",{action:"receiveRpcError",error:r}),r}if(this.emit("debug",{action:"receiveRpcResult",result:n}),"result"in n)return Ps.from(he(n.result));throw this.getRpcError(s,n)})(),await this.#i)}_start(){this.#r==null||this.#r.resolve==null||(this.#r.resolve(),this.#r=null,(async()=>{for(;this.#o==null&&!this.destroyed;)try{this.#o=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",ft("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await XA(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#r!=null)return await this.#r.promise}_getSubscriber(e){return e.type==="pending"?new qA(this):e.type==="event"?this._getOption("polling")?new hu(this,e.filter):new JA(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Gm("orphan"):super._getSubscriber(e)}get ready(){return this.#r==null}getRpcTransaction(e){const s={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(n=>{if(e[n]==null)return;let r=n;n==="gasLimit"&&(r="gas"),s[r]=Fs(he(e[n],`tx.${n}`))}),["from","to","data"].forEach(n=>{e[n]!=null&&(s[n]=oe(e[n]))}),e.accessList&&(s.accessList=Sr(e.accessList)),e.blobVersionedHashes&&(s.blobVersionedHashes=e.blobVersionedHashes.map(n=>n.toLowerCase())),e.authorizationList&&(s.authorizationList=e.authorizationList.map(n=>{const r=Zp(n);return{address:r.address,nonce:Fs(r.nonce),chainId:Fs(r.chainId),yParity:Fs(r.signature.yParity),r:Fs(r.signature.r),s:Fs(r.signature.s)}})),s}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Nr(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Nr(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Nr(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Nr(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Nr):e.filter.address=Nr(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,s){const{method:n}=e,{error:r}=s;if(n==="eth_estimateGas"&&r.message){const l=r.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return ft("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}});if(l.match(/nonce/i)&&l.match(/too low/i))return ft("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:r}})}if(n==="eth_call"||n==="eth_estimateGas"){const l=vc(r),c=zn.getBuiltinCallException(n==="eth_call"?"call":"estimateGas",e.params[0],l?l.data:null);return c.info={error:r,payload:e},c}const i=JSON.stringify(s2(r));if(typeof r.message=="string"&&r.message.match(/user denied|ethers-user-denied/i))return ft("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:r}});if(n==="eth_sendRawTransaction"||n==="eth_sendTransaction"){const l=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return ft("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:r}});if(i.match(/nonce/i)&&i.match(/too low/i))return ft("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:r}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return ft("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:r}});if(i.match(/only replay-protected/i))return ft("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:l,info:{error:r}}})}let o=!!i.match(/the method .* does not exist/i);return o||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(o=!0),o?ft("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):ft("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}send(e,s){if(this.destroyed)return Promise.reject(ft("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const n=this.#t++,r=new Promise((i,o)=>{this.#s.push({resolve:i,reject:o,payload:{method:e,params:s,id:n,jsonrpc:"2.0"}})});return this.#a(),r}async getSigner(e){e==null&&(e=0);const s=this.send("eth_accounts",[]);if(typeof e=="number"){const r=await s;if(e>=r.length)throw new Error("no such account");return new Dl(this,r[e])}const{accounts:n}=await es({network:this.getNetwork(),accounts:s});e=Qe(e);for(const r of n)if(Qe(r)===e)return new Dl(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(s=>new Dl(this,s))}destroy(){this.#n&&(clearTimeout(this.#n),this.#n=null);for(const{payload:e,reject:s}of this.#s)s(ft("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#s=[],super.destroy()}}class t2 extends e2{#e;constructor(e,s){super(e,s);let n=this._getOption("pollingInterval");n==null&&(n=Ym.pollingInterval),this.#e=n}_getSubscriber(e){const s=super._getSubscriber(e);return Af(s)&&(s.pollingInterval=this.#e),s}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(s=>{Af(s)&&(s.pollingInterval=this.#e)})}}function vc(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&ct(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const s=vc(t[e]);if(s)return s}return null}if(typeof t=="string")try{return vc(JSON.parse(t))}catch{}return null}function bc(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const s in t)bc(t[s],e);if(typeof t=="string")try{return bc(JSON.parse(t),e)}catch{}}}function s2(t){const e=[];return bc(t,e),e}class As extends t2{#e;#t;constructor(e,s,n){const r=Object.assign({},n??{},{batchMaxCount:1});S(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(s,r),this.#t=null,n&&n.providerInfo&&(this.#t=n.providerInfo),this.#e=async(i,o)=>{const l={method:i,params:o};this.emit("debug",{action:"sendEip1193Request",payload:l});try{const c=await e.request(l);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const u=new Error(c.message);throw u.code=c.code,u.data=c.data,u.payload=l,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}}}get providerInfo(){return this.#t}async send(e,s){return await this._start(),await super.send(e,s)}async _send(e){S(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const s=await this.#e(e.method,e.params||[]);return[{id:e.id,result:s}]}catch(s){return[{id:e.id,error:{code:s.code,data:s.data,message:s.message}}]}}getRpcError(e,s){switch(s=JSON.parse(JSON.stringify(s)),s.error.code||-1){case 4001:s.error.message=`ethers-user-denied: ${s.error.message}`;break;case 4200:s.error.message=`ethers-unsupported: ${s.error.message}`;break}return super.getRpcError(e,s)}async hasSigner(e){e==null&&(e=0);const s=await this.send("eth_accounts",[]);return typeof e=="number"?s.length>e:(e=e.toLowerCase(),s.filter(n=>n.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(s){const n=s.payload;throw this.getRpcError(n,{id:n.id,error:s})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new As(e.provider);const s=e.window?e.window:typeof window<"u"?window:null;if(s==null)return null;const n=e.anyProvider;if(n&&s.ethereum)return new As(s.ethereum);if(!("addEventListener"in s&&"dispatchEvent"in s&&"removeEventListener"in s))return null;const r=e.timeout?e.timeout:300;return r===0?null:await new Promise((i,o)=>{let l=[];const c=f=>{l.push(f.detail),n&&u()},u=()=>{if(clearTimeout(d),l.length)if(e&&e.filter){const f=e.filter(l.map(h=>Object.assign({},h.info)));if(f==null)i(null);else if(f instanceof As)i(f);else{let h=null;if(f.uuid&&(h=l.filter(P=>f.uuid===P.info.uuid)[0]),h){const{provider:p,info:P}=h;i(new As(p,void 0,{providerInfo:P}))}else o(ft("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:h}=l[0];i(new As(f,void 0,{providerInfo:h}))}else i(null);s.removeEventListener("eip6963:announceProvider",c)},d=setTimeout(()=>{u()},r);s.addEventListener("eip6963:announceProvider",c),s.dispatchEvent(new Event("eip6963:requestProvider"))})}}const ri=fe(!1),Ss=fe(""),ss=fe(null),pu=fe(""),Qa=fe("ETH"),Ja=fe(0n),ii=fe(null),ga=fe(null),ya=co([]),Ms=fe(""),xs=fe(""),wc=fe(!1),n2=fe("tokens");let Jt=null,zm=null,va=!1,Bi=null,Ac=!1;const r2={1:[{address:"0x7b21325dcB87A8167A7eFF504ec876C0F520dc17",label:"PWL-P"},{address:"#",label:"PWL-P"},{address:"#",label:"PWL-I"}],11155111:[{address:"0xYOUR_PWLP_SEPOLIA",label:"PWL-P"},{address:"0xYOUR_PWLI_SEPOLIA",label:"PWL-I"}]},Qm=["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)"],i2=Ae(()=>Ss.value||""),o2=Ae(()=>{const t=Ss.value;return t?`${t.slice(0,6)}...${t.slice(-4)}`:""}),a2=Ae(()=>{try{return Jt?Mt(Ja.value):"0"}catch{return"0"}}),Jm=Ae(()=>ii.value?(Number(Mt(Ja.value))*ii.value).toLocaleString(void 0,{maximumFractionDigits:2}):"0"),l2=Ae(()=>`AUD$${Jm.value||"0"} AUD`);function c2(t,e){try{return Number(oa(t,e)).toLocaleString(void 0,{maximumFractionDigits:6})}catch{return"0"}}function Ef(t,e){return t().catch(()=>e)}function u2(t){return t&&t[0].toUpperCase()+t.slice(1)}function Mi(t){const e=t&&(t.reason||t.message)?t.reason||t.message:String(t);return e.toLowerCase().includes("user rejected")?"User rejected the request.":e}function qm(){window.ethereum&&(window.ethereum.on("accountsChanged",Zm),window.ethereum.on("chainChanged",Xm),Jt&&!va&&(Bi=async()=>{try{await gu()}catch{}},Jt.on("block",Bi),va=!0))}function d2(){window.ethereum&&(window.ethereum.removeListener("accountsChanged",Zm),window.ethereum.removeListener("chainChanged",Xm)),Jt&&va&&Bi&&(Jt.removeListener("block",Bi),va=!1,Bi=null)}async function Zm(t){if(console.log("🔄 Accounts changed:",t),!t||t.length===0)eg();else{const e=Ss.value;Ss.value=t[0],e&&e!==t[0]&&(console.log("🔄 Wallet address changed from",e,"to",t[0]),window.dispatchEvent(new CustomEvent("walletAddressChanged",{detail:{oldAddress:e,newAddress:t[0]}}))),await mu()}}async function Xm(){await mu()}async function f2(){try{const t=Qa.value==="MATIC"?"matic-network":"ethereum",s=await(await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${t}&vs_currencies=aud&include_24hr_change=true`)).json();ii.value=s?.[t]?.aud||null,ga.value=s?.[t]?.aud_24h_change||null}catch{ii.value=null,ga.value=null}}async function h2(){console.log("🔄 useWallet connect() called"),xs.value="",Ms.value="";try{if(!window.ethereum){console.log("❌ MetaMask not detected"),Ms.value="MetaMask not detected. Please install MetaMask extension.";return}console.log("🔗 Creating provider..."),Jt=new As(window.ethereum,"any"),console.log("📝 Requesting accounts...");const t=await Jt.send("eth_requestAccounts",[]);if(console.log("📋 Received accounts:",t),!t||t.length===0){console.log("❌ No accounts found"),xs.value="No accounts found. Please unlock your wallet or create a new account.";return}console.log("🔐 Getting signer..."),zm=await Jt.getSigner(),Ss.value=t[0],ri.value=!0,console.log("🔄 Refreshing wallet data..."),await tg(),await gu(),await yu(),qm(),console.log("✅ Wallet connected successfully:",t[0]),window.dispatchEvent(new CustomEvent("walletConnected",{detail:{address:t[0],chainId:ss.value}}))}catch(t){console.error("❌ Wallet connection failed:",t),t.code===4001?xs.value="User rejected the connection request.":t.code===-32002?xs.value="Connection request already pending. Please check your MetaMask.":t.message.includes("User denied")?xs.value="Connection was denied. Please approve the connection in MetaMask.":t.message.includes("Already processing")?xs.value="MetaMask is already processing a request. Please wait and try again.":xs.value=Mi(t)}}async function eg(){const t=ri.value,e=Ss.value;try{window.ethereum&&window.ethereum.disconnect&&(console.log("🔌 Attempting to disconnect from MetaMask..."),await window.ethereum.disconnect()),localStorage.removeItem("walletConnected"),localStorage.removeItem("walletAddress"),localStorage.removeItem("primaryWallet");const n=JSON.parse(localStorage.getItem("linkedWallets")||"[]").filter(r=>r!==e);localStorage.setItem("linkedWallets",JSON.stringify(n))}catch(s){console.warn("MetaMask disconnect failed, continuing with local disconnect:",s)}ri.value=!1,Ss.value="",ss.value=null,pu.value="",Qa.value="ETH",Ja.value=0n,ii.value=null,ga.value=null,ya.splice(0),d2(),t&&(console.log("🔌 Wallet disconnected, triggering event..."),window.dispatchEvent(new CustomEvent("walletDisconnected",{detail:{address:e}})))}async function mu(){ri.value&&(await tg(),await gu(),await yu())}async function tg(){const t=await Jt.getNetwork();ss.value=Number(t.chainId),pu.value=t.name&&t.name!=="unknown"?u2(t.name):`Chain ${ss.value}`,Qa.value=ss.value===1?"ETH":ss.value===137?"MATIC":(ss.value===42161||ss.value===10,"ETH"),f2()}async function gu(){Ja.value=await Jt.getBalance(Ss.value)}async function yu(){wc.value=!0,ya.splice(0);try{const t=r2[ss.value]||[],e=vu(ss.value),s=[...t,...e];for(const n of s)if(la(n.address))try{const r=new Wt(n.address,Qm,Jt);let i=!1;try{await r.symbol(),i=!0}catch(f){console.warn(`合约 ${n.address} 不存在或不是ERC20代币:`,f.message);continue}if(!i)continue;const[o,l,c,u]=await Promise.all([r.balanceOf(Ss.value).catch(f=>(console.warn(`查询 ${n.address} 余额失败:`,f.message),0n)),r.decimals().catch(f=>(console.warn(`获取 ${n.address} 小数位失败:`,f.message),18)),Ef(()=>r.symbol(),n.label||"TKN"),Ef(()=>r.name(),n.label||"Token")]),d=c2(o,l);ya.push({address:n.address,symbol:c||n.label||"TKN",name:u||n.label||"Token",decimals:l,displayBalance:d})}catch(r){console.warn(`处理代币 ${n.address} 时出错:`,r.message),n.source==="ImportFromUs"&&(console.log(`移除无效的自定义代币: ${n.address}`),rg(n.address));continue}}catch(t){xs.value=Mi(t)}finally{wc.value=!1}}function p2(){Ss.value&&navigator.clipboard.writeText(Ss.value)}function sg(t){return`customTokens:${t||""}`}function vu(t){try{const e=sessionStorage.getItem(sg(t)),s=e?JSON.parse(e):[];return Array.isArray(s)?s.filter(n=>n&&n.address):[]}catch{return[]}}function ng(t,e){try{sessionStorage.setItem(sg(t),JSON.stringify(e||[]))}catch{}}async function m2(t,e){try{if(!la(t))return Ms.value="Invalid token address format.",!1;const s=vu(ss.value);if(s.find(n=>n.address.toLowerCase()===t.toLowerCase()))return Ms.value="Token already exists in your list.",!0;if(Jt)try{const n=new Wt(t,Qm,Jt),[r,i,o]=await Promise.all([n.symbol().catch(()=>"UNKNOWN"),n.name().catch(()=>"Unknown Token"),n.decimals().catch(()=>18)]);console.log(`✅ 合约 ${t} 验证成功:`,{symbol:r,name:i,decimals:o});let l=e||r||"Token";(r==="LPT"||r==="LIT")&&(l=`${r} (RWA ${r==="LPT"?"本金币":"利息币"})`),s.push({address:t,label:l,addedAt:Date.now(),source:"ImportFromUs",symbol:r,name:i,decimals:o})}catch(n){return console.error(`❌ 合约 ${t} 验证失败:`,n.message),n.code==="BAD_DATA"||n.message.includes("could not decode result data")?Ms.value="Contract address is invalid or not an ERC20 token.":n.code==="CALL_EXCEPTION"?Ms.value="Contract call failed. Please check the address and network.":Ms.value=`Contract validation failed: ${n.message}`,!1}else s.push({address:t,label:e||"Token",addedAt:Date.now(),source:"ImportFromUs",unverified:!0});return ng(ss.value,s),Ms.value="",!0}catch(s){return Ms.value=`Failed to add token: ${s.message}`,!1}}function rg(t){try{const e=vu(ss.value).filter(s=>s.address.toLowerCase()!==(t||"").toLowerCase());ng(ss.value,e)}catch{}}function _f(){if(!Ac){if(Ac=!0,!window.ethereum){Ms.value="MetaMask not detected.";return}try{Jt=new As(window.ethereum,"any"),Jt.send("eth_accounts",[]).then(async t=>{if(t&&t.length>0)try{zm=await Jt.getSigner(),Ss.value=t[0],ri.value=!0,await mu(),qm()}catch(e){console.error("Failed to initialize wallet:",e),xs.value=Mi(e)}}).catch(t=>{console.error("Failed to get accounts:",t),xs.value=Mi(t)})}catch(t){console.error("Failed to create provider:",t),xs.value=Mi(t)}}}function jn(){return _f(),ci(()=>{Ac||_f()}),xa(()=>{}),{connected:ri,address:Ss,fullAddress:i2,shortAddress:o2,chainId:ss,networkLabel:pu,nativeSymbol:Qa,nativeBalanceDisplay:a2,nativeToAudDisplay:Jm,bigAudDisplay:l2,tokens:ya,warning:Ms,error:xs,loadingTokens:wc,activeTab:n2,audPrice:ii,priceChange24h:ga,connect:h2,disconnect:eg,refreshTokens:yu,copyAddress:p2,addCustomToken:m2,removeCustomToken:rg}}const ig="/icons/RWA-logo.svg",g2="/icons/search-icon.png",Tt=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},y2={name:"AppHeader",props:{},setup(){const{connected:t,fullAddress:e,shortAddress:s,connect:n,disconnect:r}=jn();return{connected:t,fullAddress:e,shortAddress:s,connect:n,disconnect:r}},data(){return{searchOpen:!1,searchText:"",isLoggedIn:!1,moreDropdownOpen:!1,mobileMenuOpen:!1,walletDropdownOpen:!1,showLinkWalletModal:!1,showDisconnectModal:!1,showDisconnectSuccess:!1,disconnectSuccessMsg:"",availableAccounts:[],selectedAccountIndex:-1,loadingAccounts:!1,accountBalances:{}}},methods:{noop(){},go(t){this.$router.push(t),this.closeSearch(),this.closeMoreDropdown(),this.closeMobileMenu()},toggleMoreDropdown(){this.moreDropdownOpen=!this.moreDropdownOpen,this.closeSearch(),this.closeMobileMenu()},closeMoreDropdown(){this.moreDropdownOpen=!1},toggleWalletDropdown(){this.walletDropdownOpen=!this.walletDropdownOpen,this.updateArrowRotation()},hideWalletDropdown(){this.walletDropdownOpen=!1,this.updateArrowRotation()},updateArrowRotation(){this.$nextTick(()=>{const t=this.$el.querySelector(".dropdown-arrow");t&&(t.style.transform=this.walletDropdownOpen?"rotate(180deg)":"rotate(0deg)")})},toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen,this.closeSearch(),this.closeMoreDropdown()},closeMobileMenu(){this.mobileMenuOpen=!1},checkLogin(){this.isLoggedIn=Zl()},logout(){bv(),this.$router.push("/login")},toggleSearch(){this.searchOpen=!this.searchOpen,this.$nextTick(()=>{this.searchOpen&&this.$refs.searchInput&&this.$refs.searchInput.focus()})},closeSearch(){this.searchOpen=!1,this.searchText=""},submitSearch(){this.$emit("search",this.searchText)},onDocClick(t){const e=this.$refs.searchInput,s=this.$el.querySelector(".search-toggle"),n=this.$el.querySelector(".dropdown-container"),r=this.$el.querySelector(".mobile-menu-btn"),i=this.$el.querySelector(".mobile-menu"),o=this.$el.querySelector(".wallet-dropdown-container");e&&this.searchOpen&&!e.contains(t.target)&&!s.contains(t.target)&&this.closeSearch(),n&&this.moreDropdownOpen&&!n.contains(t.target)&&this.closeMoreDropdown(),o&&this.walletDropdownOpen&&!o.contains(t.target)&&this.hideWalletDropdown(),i&&this.mobileMenuOpen&&!i.contains(t.target)&&!r.contains(t.target)&&this.closeMobileMenu()},async connectWallet(){try{await this.connect(),console.log("Wallet connected successfully")}catch(t){console.error("Wallet connection failed:",t)}},shortenAddress(t){return t.slice(0,6)+"..."+t.slice(-4)},goToWallet(){this.go("/wallet")},goToProfile(){this.go("/profile")},linkNewWallet(){this.hideWalletDropdown(),this.connectWallet()},addManualWallet(){this.hideWalletDropdown();const t=prompt("请输入钱包地址:");t&&t.trim()&&this.addManualWalletAddress(t.trim())},addManualWalletAddress(t){if(t.length===42&&t.startsWith("0x")){const e=JSON.parse(localStorage.getItem("linkedWallets")||"[]");e.includes(t)?alert("该钱包地址已存在"):(e.push(t),localStorage.setItem("linkedWallets",JSON.stringify(e)),alert(`钱包地址 ${t} 已添加`),this.$emit("wallet-added",t))}else alert("请输入有效的以太坊地址")},setPrimaryWallet(){this.hideWalletDropdown();const t=JSON.parse(localStorage.getItem("linkedWallets")||"[]"),e=localStorage.getItem("walletAddress");if(t.length===0){alert("没有可设置的钱包地址");return}let s=t.map((i,o)=>`${o+1}. ${i}${i===e?" (当前)":""}`).join(`
`);const n=prompt(`选择要设置为主钱包的地址:
${s}

请输入序号:`),r=parseInt(n)-1;if(r>=0&&r<t.length){const i=t[r];localStorage.setItem("primaryWallet",i),localStorage.setItem("walletAddress",i),alert(`主钱包已设置为: ${i}`),this.$emit("primary-wallet-changed",i)}else n!==null&&alert("无效的选择")},async linkNewWallet(){this.hideWalletDropdown(),this.showLinkWalletModal=!0,await this.loadAvailableAccounts()},async loadAvailableAccounts(){this.loadingAccounts=!0,this.availableAccounts=[],this.selectedAccountIndex=-1,this.accountBalances={};try{if(typeof window.ethereum<"u"){const t=await window.ethereum.request({method:"eth_accounts"}),e=this.fullAddress;this.availableAccounts=t.filter(s=>s.toLowerCase()!==e.toLowerCase()),console.log("Available accounts:",this.availableAccounts),await this.loadAccountBalances()}else console.error("MetaMask not detected")}catch(t){console.error("Failed to load accounts:",t)}finally{this.loadingAccounts=!1}},async loadAccountBalances(){for(const t of this.availableAccounts)try{const e=await window.ethereum.request({method:"eth_getBalance",params:[t,"latest"]}),s=(parseInt(e,16)/Math.pow(10,18)).toFixed(4);this.accountBalances[t]=s,this.$forceUpdate()}catch(e){console.error(`Failed to get balance for ${t}:`,e),this.accountBalances[t]="Error"}},generateWalletAvatar(t){const e=this.simpleHash(t),s=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"],i=`
        <svg width="80" height="80" xmlns="http://www.w3.org/2000/svg">
          <rect width="80" height="80" fill="${s[e%s.length]}" rx="40"/>
          <text x="40" y="45" font-family="Arial, sans-serif" font-size="24" font-weight="bold" 
                text-anchor="middle" fill="#FFFFFF">
            ${t.slice(2,4).toUpperCase()}
          </text>
        </svg>
      `;return`data:image/svg+xml;base64,${btoa(i)}`},simpleHash(t){let e=0;for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);e=(e<<5)-e+n,e=e&e}return Math.abs(e)},selectAccount(t){this.selectedAccountIndex=t},formatAddress(t){return t?`${t.slice(0,6)}...${t.slice(-4)}`:""},async linkSelectedAccount(){if(this.selectedAccountIndex!==-1)try{const t=this.availableAccounts[this.selectedAccountIndex];await window.ethereum.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}),await window.ethereum.request({method:"eth_requestAccounts"}),this.showLinkWalletModal=!1,console.log("Account switched successfully to:",t),alert(`Successfully linked account: ${this.formatAddress(t)}`)}catch(t){console.error("Failed to link account:",t),t.code===4001?alert("User rejected the account switch request."):alert("Failed to link account. Please try again.")}},disconnectWallet(){this.hideWalletDropdown(),this.showDisconnectModal=!0},async confirmDisconnect(){try{await this.disconnect(),this.showDisconnectModal=!1,this.showDisconnectSuccess=!0,this.disconnectSuccessMsg="Wallet has been disconnected successfully.",console.log("Wallet disconnected successfully")}catch(t){console.error("Wallet disconnection failed:",t),this.showDisconnectModal=!1,alert("Failed to disconnect wallet. Please try again.")}},disconnectWalletConnection(t){const s=JSON.parse(localStorage.getItem("linkedWallets")||"[]").filter(r=>r!==t);localStorage.setItem("linkedWallets",JSON.stringify(s)),localStorage.getItem("walletAddress")===t&&(localStorage.removeItem("walletConnected"),localStorage.removeItem("walletAddress"),localStorage.removeItem("primaryWallet")),alert(`钱包 ${t} 已断开连接`),this.$emit("wallet-disconnected",t)}},mounted(){document.addEventListener("click",this.onDocClick),this.checkLogin(),window.addEventListener(ld,this.checkLogin),this.isLoggedIn=Zl()},beforeUnmount(){document.removeEventListener("click",this.onDocClick),window.removeEventListener(ld,this.checkLogin)}},v2={key:0,class:"modal-mask"},b2={class:"modal-wrapper"},w2={class:"modal-container"},A2={key:0,class:"account-grid"},E2=["onClick"],_2={class:"wallet-avatar"},P2=["src","alt"],S2={class:"account-details"},k2={class:"account-name"},C2={class:"account-address"},T2={key:0,class:"account-balance"},I2={key:1,class:"account-balance"},x2={key:0,class:"selection-indicator"},R2={key:1,class:"loading-accounts"},D2={key:2,class:"no-accounts"},N2={style:{"text-align":"right","margin-top":"20px"}},L2=["disabled"],O2={key:1,class:"modal-mask"},U2={class:"modal-wrapper"},B2={class:"modal-container"},M2={style:{display:"block","font-size":"15px",padding:"8px 0",color:"#ffffff",background:"#2a2a4a","border-radius":"8px"}},F2={style:{"text-align":"right"}},V2={key:2,class:"modal-mask"},j2={class:"modal-wrapper"},$2={class:"modal-container"},H2={style:{color:"#ffffff"}},W2={style:{"text-align":"right"}},G2={class:"header"},K2={class:"container nav"},Y2={class:"left"},z2={class:"menu","aria-label":"Primary"},Q2={class:"dropdown-container"},J2={key:0,class:"dropdown-menu"},q2={class:"right"},Z2={class:"search-wrapper"},X2={key:0},eE={key:0,class:"wallet-connect-section"},tE={key:1,class:"wallet-dropdown-container"},sE={class:"wallet-btn-wrapper"},nE={key:0,class:"wallet-dropdown-menu"},rE={key:1},iE={key:0,class:"mobile-menu"},oE={class:"mobile-menu-content"};function aE(t,e,s,n,r,i){return g(),y(ye,null,[r.showLinkWalletModal?(g(),y("div",v2,[a("div",b2,[a("div",w2,[e[37]||(e[37]=a("h2",{style:{"margin-bottom":"8px",color:"#ffffff"}},"Link New Wallet",-1)),e[38]||(e[38]=a("p",{style:{color:"#ffffff"}},"Select a MetaMask account to link to your profile:",-1)),r.availableAccounts.length>0?(g(),y("div",A2,[(g(!0),y(ye,null,At(r.availableAccounts,(o,l)=>(g(),y("div",{key:o,class:we(["account-card",{selected:r.selectedAccountIndex===l}]),onClick:c=>i.selectAccount(l)},[a("div",_2,[a("img",{src:i.generateWalletAvatar(o),alt:`Wallet ${l+1}`,class:"avatar-image"},null,8,P2),e[33]||(e[33]=a("div",{class:"avatar-overlay"},[a("span",{class:"avatar-icon"},"🦊")],-1))]),a("div",S2,[a("div",k2,"Account "+m(l+1),1),a("div",C2,m(i.formatAddress(o)),1),r.accountBalances[o]?(g(),y("div",T2,m(r.accountBalances[o])+" ETH ",1)):(g(),y("div",I2," Loading... "))]),r.selectedAccountIndex===l?(g(),y("div",x2,[...e[34]||(e[34]=[a("div",{class:"checkmark"},"✓",-1)])])):V("",!0)],10,E2))),128))])):V("",!0),r.loadingAccounts?(g(),y("div",R2,[...e[35]||(e[35]=[a("div",{class:"loading-spinner"},null,-1),a("span",null,"Loading accounts...",-1)])])):V("",!0),!r.loadingAccounts&&r.availableAccounts.length===0?(g(),y("div",D2,[...e[36]||(e[36]=[a("p",null,"No additional accounts found in MetaMask.",-1),a("p",null,"Please add more accounts in MetaMask and try again.",-1)])])):V("",!0),a("div",N2,[a("button",{class:"mm-btn mm-outline",onClick:e[0]||(e[0]=o=>r.showLinkWalletModal=!1)},"Cancel"),r.availableAccounts.length>0?(g(),y("button",{key:0,class:"mm-btn mm-primary",style:{"margin-left":"8px"},onClick:e[1]||(e[1]=(...o)=>i.linkSelectedAccount&&i.linkSelectedAccount(...o)),disabled:r.selectedAccountIndex===-1}," Link Selected Account ",8,L2)):V("",!0)])])])])):V("",!0),r.showDisconnectModal?(g(),y("div",O2,[a("div",U2,[a("div",B2,[e[39]||(e[39]=a("h2",{style:{"margin-bottom":"8px",color:"#ffffff"}},"Disconnect Wallet",-1)),e[40]||(e[40]=a("p",{style:{color:"#ffffff"}},"Are you sure you want to disconnect this wallet?",-1)),a("div",null,[a("span",M2,m(n.fullAddress),1)]),a("div",F2,[a("button",{class:"mm-btn mm-outline",onClick:e[2]||(e[2]=o=>r.showDisconnectModal=!1)},"Cancel"),a("button",{class:"mm-btn mm-outline",style:{"margin-left":"8px"},onClick:e[3]||(e[3]=(...o)=>i.confirmDisconnect&&i.confirmDisconnect(...o))},"Confirm")])])])])):V("",!0),r.showDisconnectSuccess?(g(),y("div",V2,[a("div",j2,[a("div",$2,[e[41]||(e[41]=a("h2",{style:{"margin-bottom":"8px",color:"#ffffff"}},"Wallet Disconnected",-1)),a("p",H2,m(r.disconnectSuccessMsg),1),a("div",W2,[a("button",{class:"mm-btn mm-outline",onClick:e[4]||(e[4]=o=>r.showDisconnectSuccess=!1)},"Confirm")])])])])):V("",!0),a("header",G2,[a("div",K2,[a("div",Y2,[a("a",{class:"brand",href:"#",onClick:e[5]||(e[5]=ue(o=>i.go("/"),["prevent"]))},[...e[42]||(e[42]=[a("img",{src:ig,alt:"Mortgage RWA",class:"brand-logo"},null,-1)])]),a("nav",z2,[a("a",{href:"#",onClick:e[6]||(e[6]=ue(o=>i.go("/home"),["prevent"])),class:"menu-item"},"Home"),a("a",{href:"#",onClick:e[7]||(e[7]=ue(o=>i.go("/listedprojects"),["prevent"])),class:"menu-item"},"Listed Projects"),a("a",{href:"#",onClick:e[8]||(e[8]=ue(o=>i.go("/to-be-listed"),["prevent"])),class:"menu-item"},"To be listed"),a("a",{href:"#",onClick:e[9]||(e[9]=ue(o=>i.go("/portfolio"),["prevent"])),class:"menu-item"},"Portfolio"),a("div",Q2,[a("a",{href:"#",class:"menu-item more-link",onClick:e[10]||(e[10]=ue((...o)=>i.toggleMoreDropdown&&i.toggleMoreDropdown(...o),["prevent"]))},"More ▾"),r.moreDropdownOpen?(g(),y("div",J2,[a("a",{href:"#",onClick:e[11]||(e[11]=ue(o=>i.go("/overview"),["prevent"])),class:"dropdown-item"},"Overview"),a("a",{href:"#",onClick:e[12]||(e[12]=ue(o=>i.go("/about"),["prevent"])),class:"dropdown-item"},"About Us")])):V("",!0)])]),a("button",{class:we(["mobile-menu-btn",{active:r.mobileMenuOpen}]),onClick:e[13]||(e[13]=(...o)=>i.toggleMobileMenu&&i.toggleMobileMenu(...o)),"aria-label":"Toggle mobile menu"},[...e[43]||(e[43]=[a("span",{class:"hamburger-line"},null,-1),a("span",{class:"hamburger-line"},null,-1),a("span",{class:"hamburger-line"},null,-1)])],2)]),a("div",q2,[a("div",Z2,[a("form",{class:"search-form",onSubmit:e[16]||(e[16]=ue((...o)=>i.submitSearch&&i.submitSearch(...o),["prevent"]))},[Se(a("input",{ref:"searchInput",type:"text",class:we(["search-input",{expanded:r.searchOpen}]),placeholder:"Search...","onUpdate:modelValue":e[14]||(e[14]=o=>r.searchText=o)},null,2),[[Ze,r.searchText]]),a("button",{type:"button",class:"search-toggle",onClick:e[15]||(e[15]=(...o)=>i.toggleSearch&&i.toggleSearch(...o))},[...e[44]||(e[44]=[a("img",{src:g2,alt:"Search"},null,-1)])])],32)]),r.isLoggedIn?(g(),y("div",X2,[n.connected?(g(),y("div",tE,[a("div",sE,[a("button",{class:"btn orange pill wallet-main-btn",onClick:e[18]||(e[18]=ue(o=>i.goToWallet(),["prevent"]))},[a("span",null,m(n.shortAddress),1)]),e[47]||(e[47]=a("div",{class:"wallet-divider"},null,-1)),a("button",{class:"btn orange pill wallet-dropdown-btn",onClick:e[19]||(e[19]=ue((...o)=>i.toggleWalletDropdown&&i.toggleWalletDropdown(...o),["prevent"]))},[...e[46]||(e[46]=[a("span",{class:"dropdown-arrow"},"▾",-1)])])]),r.walletDropdownOpen?(g(),y("div",nE,[e[50]||(e[50]=a("div",{class:"wallet-dropdown-header"},"Wallet Management",-1)),a("a",{href:"#",onClick:e[20]||(e[20]=ue(o=>{r.showLinkWalletModal=!0,r.walletDropdownOpen=!1},["prevent"])),class:"wallet-dropdown-item"},[...e[48]||(e[48]=[a("span",null,"Link new wallet",-1)])]),a("a",{href:"#",onClick:e[21]||(e[21]=ue(o=>{r.showDisconnectModal=!0,r.walletDropdownOpen=!1},["prevent"])),class:"wallet-dropdown-item"},[...e[49]||(e[49]=[a("span",null,"Disconnect wallet",-1)])])])):V("",!0)])):(g(),y("div",eE,[a("button",{class:"btn orange pill",onClick:e[17]||(e[17]=ue((...o)=>i.connectWallet&&i.connectWallet(...o),["prevent"]))},[...e[45]||(e[45]=[a("span",null,"Connect Wallet",-1)])])])),a("button",{class:"btn light pill",onClick:e[22]||(e[22]=ue(o=>i.goToProfile(),["prevent"]))},[...e[51]||(e[51]=[a("span",null,"👤",-1)])]),a("button",{class:"btn ghost pill settings-btn",onClick:e[23]||(e[23]=ue(o=>i.go("/settings"),["prevent"]))},"⚙️")])):(g(),y("div",rE,[a("a",{class:"btn ghost",href:"#",onClick:e[24]||(e[24]=ue(o=>i.go("/login"),["prevent"]))},"Log in"),a("a",{class:"btn orange",href:"#",onClick:e[25]||(e[25]=ue(o=>i.go("/signup"),["prevent"]))},"Sign up")]))])]),r.mobileMenuOpen?(g(),y("div",iE,[a("div",oE,[a("a",{href:"#",onClick:e[26]||(e[26]=ue(o=>i.go("/home"),["prevent"])),class:"mobile-menu-item"},[...e[52]||(e[52]=[a("span",null,"Home",-1)])]),a("a",{href:"#",onClick:e[27]||(e[27]=ue(o=>i.go("/listedprojects"),["prevent"])),class:"mobile-menu-item"},[...e[53]||(e[53]=[a("span",null,"Listed Projects",-1)])]),a("a",{href:"#",onClick:e[28]||(e[28]=ue(o=>i.go("/to-be-listed"),["prevent"])),class:"mobile-menu-item"},[...e[54]||(e[54]=[a("span",null,"To be listed",-1)])]),a("a",{href:"#",onClick:e[29]||(e[29]=ue(o=>i.go("/portfolio"),["prevent"])),class:"mobile-menu-item"},[...e[55]||(e[55]=[a("span",null,"Portfolio",-1)])]),e[59]||(e[59]=a("div",{class:"mobile-menu-divider"},null,-1)),a("a",{href:"#",onClick:e[30]||(e[30]=ue(o=>i.go("/overview"),["prevent"])),class:"mobile-menu-item"},[...e[56]||(e[56]=[a("span",null,"Overview",-1)])]),a("a",{href:"#",onClick:e[31]||(e[31]=ue(o=>i.go("/about"),["prevent"])),class:"mobile-menu-item"},[...e[57]||(e[57]=[a("span",null,"About Us",-1)])]),a("a",{href:"#",onClick:e[32]||(e[32]=ue(o=>i.go("/contact"),["prevent"])),class:"mobile-menu-item"},[...e[58]||(e[58]=[a("span",null,"Contact Us",-1)])])])])):V("",!0)])],64)}const lE=Tt(y2,[["render",aE],["__scopeId","data-v-03ce8578"]]),cE={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:3000/api",VITE_API_LOANS_BY_CODE_URL:"http://localhost:3000/api/loans",VITE_API_LOANS_SUBSCRIPTION_URL:"http://localhost:3000/api/loans",VITE_API_LOANS_URL:"http://localhost:3000/api/loans",VITE_API_LOGIN_URL:"http://localhost:3000/user/login",VITE_API_PROJECTS_URL:"http://localhost:3000/api/projects",VITE_API_PROJECT_BY_CODE_DIRECT_URL:"http://localhost:3000/project",VITE_API_PROJECT_BY_CODE_URL:"http://localhost:3000/api/project",VITE_API_PROJECT_DIRECT_URL:"http://localhost:3000/project",VITE_API_PROJECT_SUBSCRIPTION_DIRECT_URL:"http://localhost:3000/project",VITE_API_PROJECT_SUBSCRIPTION_URL:"http://localhost:3000/api/loans",VITE_API_PROJECT_URL:"http://localhost:3000/api/project",VITE_API_REGISTER_URL:"http://localhost:3000/user/reguser",VITE_API_TRANSACTION_URL:"http://localhost:3000/api/transaction",VITE_API_USER_INFO_URL:"http://localhost:3000/user/userinfo",VITE_APP_ENV:"development",VITE_APP_NAME:"RWA Trading Platform",VITE_APP_VERSION:"1.0.0",VITE_AUTO_REFRESH_INTERVAL:"30",VITE_BACKEND_PORT:"3000",VITE_COMPLIANCE_GUARD_ADDRESS:"0x1234567890123456789012345678901234567890",VITE_COMPLIANCE_GUARD_ADDRESS_PROD:"0x1234567890123456789012345678901234567890",VITE_DB_HOST:"localhost",VITE_DB_NAME:"rwa",VITE_DB_PASSWORD:"123456",VITE_DB_PORT:"3306",VITE_DB_USER:"root",VITE_ENABLE_AUTO_REFRESH:"true",VITE_ENABLE_KYC:"true",VITE_ENABLE_TRADING:"true",VITE_INTEREST_TOKEN_ADDRESS:"0xE6aeE4a898c6d99033ee5380Df407C5DD470fb17",VITE_INTEREST_TOKEN_ADDRESS_PROD:"0xE6aeE4a898c6d99033ee5380Df407C5DD470fb17",VITE_KYC_DEFAULT_LEVEL:"3",VITE_KYC_DEFAULT_LEVEL_PROD:"3",VITE_KYC_DEFAULT_SUCCESS:"true",VITE_KYC_DEFAULT_SUCCESS_PROD:"true",VITE_KYC_REGISTRY_ADDRESS:"0x4533f47BE0ce8b80F7bbdF02939f81F4A15b7A45",VITE_KYC_REGISTRY_ADDRESS_PROD:"0x4533f47BE0ce8b80F7bbdF02939f81F4A15b7A45",VITE_LOAN_ISSUER_ADDRESS:"0x13159e6417D98528C220b12Ec4950D5A343E5eAA",VITE_LOAN_ISSUER_ADDRESS_PROD:"0x1234567890123456789012345678901234567890",VITE_NETWORK_CHAIN_ID:"11155111",VITE_NETWORK_CHAIN_ID_PROD:"1",VITE_NETWORK_NAME:"Sepolia Testnet",VITE_NETWORK_NAME_PROD:"Ethereum Mainnet",VITE_PRINCIPAL_TOKEN_ADDRESS:"0x45b1eCb3D9af651244eC656ed15B86404924c354",VITE_PRINCIPAL_TOKEN_ADDRESS_PROD:"0x45b1eCb3D9af651244eC656ed15B86404924c354",VITE_RPC_URL:"https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID",VITE_RPC_URL_PROD:"https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID",VITE_TRADE_CONTRACT_ADDRESS:"0x1234567890123456789012345678901234567890",VITE_TRADE_CONTRACT_ADDRESS_PROD:"0x1234567890123456789012345678901234567890"},Nl=(t,e)=>cE[t]||e,Bo={async getAllProjects(){try{console.log("📊 API: 从数据库获取所有项目数据");const t=await fetch(Nl("VITE_API_PROJECT_URL","http://localhost:3000/api/project"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();return console.log("📊 API: 数据库返回数据:",e),e}catch(t){return console.error("❌ API: 获取项目数据失败:",t),{status:1,message:t instanceof Error?t.message:"Unknown error",data:[]}}},async getProjectByCode(t){try{console.log("📊 API: 从数据库根据代码获取项目:",t);const e=await fetch(`${Nl("VITE_API_PROJECT_BY_CODE_URL","http://localhost:3000/api/project")}/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();return console.log("📊 API: 数据库返回项目详情:",s),s}catch(e){return console.error("❌ API: 获取项目详情失败:",e),{status:1,message:e instanceof Error?e.message:"Unknown error",data:null}}},async searchProjects(t){try{console.log("📊 API: 搜索项目:",t);const e=await this.getAllProjects();if(e.status!==0)return e;const s=e.data||[];return!t||t.trim()===""?{status:0,message:"Success",data:s}:{status:0,message:"Success",data:s.filter(r=>{const i=t.toLowerCase();return r.code.toLowerCase().includes(i)||r.name.toLowerCase().includes(i)||r.propertyLocation.toLowerCase().includes(i)||r.propertyState.toLowerCase().includes(i)})}}catch(e){return console.error("❌ API: 搜索项目失败:",e),{status:1,message:e instanceof Error?e.message:"Unknown error",data:[]}}},async getProjectsByType(t){try{console.log("📊 API: 根据类型获取项目:",t);const e=await this.getAllProjects();if(e.status!==0)return e;const s=e.data||[];return!t||t==="all"?{status:0,message:"Success",data:s}:{status:0,message:"Success",data:s.filter(r=>r.propertyType===t)}}catch(e){return console.error("❌ API: 根据类型获取项目失败:",e),{status:1,message:e instanceof Error?e.message:"Unknown error",data:[]}}},async getProjectsByStatus(t){try{console.log("📊 API: 根据状态获取项目:",t);const e=await this.getAllProjects();if(e.status!==0)return e;const s=e.data||[];return!t||t==="all"?{status:0,message:"Success",data:s}:{status:0,message:"Success",data:s.filter(r=>r.status===t)}}catch(e){return console.error("❌ API: 根据状态获取项目失败:",e),{status:1,message:e instanceof Error?e.message:"Unknown error",data:[]}}},async updateProjectSubscription(t,e){try{console.log("📊 API: 更新项目订阅信息:",t,e);const s={subscribe_token:e.subscribed||e.subscribe_token},n=await fetch(`${Nl("VITE_API_PROJECT_SUBSCRIPTION_URL","http://localhost:3000/api/loans")}/${t}/subscription`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();return console.log("📊 API: 数据库更新订阅信息结果:",r),r}catch(s){return console.error("❌ API: 更新项目订阅信息失败:",s),{status:1,message:s instanceof Error?s.message:"Unknown error",data:null}}}},ms={...Bo,getAllProducts:Bo.getAllProjects,getProductByCode:Bo.getProjectByCode,updateProductSubscription:Bo.updateProjectSubscription},bu="userInfo",uE="userName",Ec={name:"",email:"",phone:"",firstName:"",lastName:"",dob:"1990-01-01",country:"US",docType:"passport",agreeEmailUpdates:!1};function Ct(){try{const t=localStorage.getItem(bu);if(t){const e=JSON.parse(t);return{...Ec,...e}}}catch(t){console.error("Failed to get user info:",t)}return{...Ec}}function mr(t){try{const e={...Ec,...t};localStorage.setItem(bu,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("user-info-changed",{detail:e}))}catch(e){console.error("Failed to set user info:",e)}}function ba(){return Ct().name||"User"}function og(){return Ct().email||""}function dE(){return Ct().phone||""}function fE(){return ba().charAt(0).toUpperCase()||"U"}function ag(t){const e=t.trim().split(" "),s=e[0]||"",n=e.slice(1).join(" ")||"";return{firstName:s,lastName:n}}function hE(){localStorage.removeItem(bu),localStorage.removeItem(uE),window.dispatchEvent(new CustomEvent("user-info-changed",{detail:null}))}function pE(){const t=Ct();return!!(t.name||t.email)}function lg(t){const e={name:t.user_name||"",email:t.user_email||"",phone:t.user_phone||"",agreeEmailUpdates:t.agree_email_updates||!1,...ag(t.user_name||"")};mr(e)}function cg(t){const e=Ct();if(t.user_name){e.name=t.user_name;const{firstName:s,lastName:n}=ag(t.user_name);e.firstName=s,e.lastName=n}t.user_email&&(e.email=t.user_email),t.user_phone&&(e.phone=t.user_phone),mr(e)}const Pf="user-info-changed";class mE{constructor(){this.baseUrl="http://localhost:3000/api",this.userInfo=null,this.loading=!1,this.error=null}async getUserData(e=null){try{if(this.loading=!0,this.error=null,console.log("🔄 UserDataService: 开始获取用户信息...",{userId:e}),!e){const o=Ct();o&&o.user_id&&(e=o.user_id)}if(!e)throw new Error("用户ID未提供且本地存储中未找到");const s=[`${this.baseUrl}/user/profile/${e}`,`${this.baseUrl}/user/${e}`,`${this.baseUrl}/profile/${e}`];let n=null,r=null;for(const o of s)try{console.log(`📡 尝试端点: ${o}`);const l=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(`📡 ${o} 响应状态:`,l.status),l.ok){const c=await l.json();if(console.log(`✅ ${o} 返回数据:`,c),c.status===0&&c.data){n=c.data;break}else if(c.user_id||c.user_name){n=c;break}}}catch(l){console.warn(`⚠️ 端点 ${o} 失败:`,l.message),r=l}if(!n)throw r||new Error("所有API端点都无法获取用户数据");const i=this.standardizeUserData(n);return mr(i),this.userInfo=i,console.log("✅ UserDataService: 用户信息获取成功:",i),{success:!0,data:i}}catch(s){return this.error=s.message,console.error("❌ UserDataService: 获取用户信息失败:",s),{success:!1,error:s.message,data:null}}finally{this.loading=!1}}async updateUserData(e,s){try{this.loading=!0,this.error=null,console.log("🔄 UserDataService: 开始更新用户信息...",{userId:e,userData:s});const n=await fetch(`${this.baseUrl}/user/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s)});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const r=await n.json();if(r.status===0){const i={...Ct(),...s};return mr(i),this.userInfo=i,console.log("✅ UserDataService: 用户信息更新成功"),{success:!0,data:r.data}}else throw new Error(r.message||"更新失败")}catch(n){return this.error=n.message,console.error("❌ UserDataService: 更新用户信息失败:",n),{success:!1,error:n.message}}finally{this.loading=!1}}async sendEmailVerification(e){try{if(this.loading=!0,this.error=null,!this.isValidEmail(e))throw new Error("请输入有效的邮箱地址");console.log("🔄 UserDataService: 发送邮箱验证码...",{email:e});const n=await(await fetch(`${this.baseUrl}/email/verify`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user_email:e})})).json();if(n.status===0)return console.log("✅ UserDataService: 邮箱验证码发送成功"),{success:!0,message:n.message||"验证码已发送到您的邮箱",code:n.code};throw new Error(n.message||"发送验证码失败")}catch(s){return this.error=s.message,console.error("❌ UserDataService: 发送邮箱验证码失败:",s),{success:!1,error:s.message}}finally{this.loading=!1}}async verifyEmailCode(e,s){try{if(this.loading=!0,this.error=null,!this.isValidEmail(e))throw new Error("请输入有效的邮箱地址");if(!s||s.length<4)throw new Error("请输入有效的验证码");console.log("🔄 UserDataService: 验证邮箱验证码...",{email:e,code:s});const r=await(await fetch(`${this.baseUrl}/email/verify`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user_email:e,verification_code:s})})).json();if(r.status===0){const i=Ct();return i.email=e,i.email_verified=!0,mr(i),console.log("✅ UserDataService: 邮箱验证成功"),{success:!0,message:r.message||"邮箱验证成功"}}else throw new Error(r.message||"验证码验证失败")}catch(n){return this.error=n.message,console.error("❌ UserDataService: 验证邮箱验证码失败:",n),{success:!1,error:n.message}}finally{this.loading=!1}}getUserStatus(){const e=Ct();return{isLoggedIn:pE(),userName:ba(),userEmail:og(),userPhone:dE(),emailVerified:e.email_verified||!1,kycStatus:e.kyc_status||"unverified",kycLevel:e.kyc_level||0,lastLogin:e.last_login||null}}updateUserStatus(e){const n={...Ct(),...e};mr(n),this.userInfo=n}clearUserData(){hE(),this.userInfo=null,this.error=null}standardizeUserData(e){return{user_id:e.user_id||e.id||null,user_name:e.user_name||e.name||e.username||"",user_email:e.user_email||e.email||"",user_phone:e.user_phone||e.phone||"",user_wallet:e.user_wallet||e.wallet_address||"",email_verified:e.email_verified||!1,kyc_status:e.kyc_status||"unverified",kyc_level:e.kyc_level||0,is_active:e.is_active!==!1,created_at:e.created_at||null,updated_at:e.updated_at||null,last_login:e.last_login||null}}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}getUserInitial(){return ba().charAt(0).toUpperCase()||"U"}setUserFromLogin(e){cg(e),this.userInfo=Ct()}setUserFromSignup(e){lg(e),this.userInfo=Ct()}}const _c=new mE,{getUserData:GO,updateUserData:KO,sendEmailVerification:YO,verifyEmailCode:zO,getUserStatus:QO,updateUserStatus:JO,clearUserData:qO,getUserInitial:ZO}=_c;class gE{constructor(){this.baseUrl="http://localhost:3000/api",this.projects=[],this.currentProject=null,this.loading=!1,this.error=null,this.filters={q:"",type:"",status:"",minYield:0,maxYield:20},this.syncInterval=null}async getAllProjects(e={}){try{this.loading=!0,this.error=null,this.filters={...this.filters,...e},console.log("🔄 ProjectDataService: 从数据库加载项目数据...",this.filters);const s=await ms.getAllProducts();if(s.status===0)return this.projects=(s.data||[]).map(n=>this.standardizeProjectData(n)),console.log("✅ ProjectDataService: 项目数据加载成功:",this.projects.length,"个项目"),{success:!0,data:this.projects,count:this.projects.length};throw new Error(s.message||"获取项目列表失败")}catch(s){return this.error=s.message,console.error("❌ ProjectDataService: 获取项目列表失败:",s),{success:!1,error:s.message,data:[]}}finally{this.loading=!1}}async getProjectById(e){try{this.loading=!0,this.error=null,console.log("🔄 ProjectDataService: 获取项目详情...",{projectId:e});const s=await ms.getProductByCode(e);if(s.status===0)return this.currentProject=this.standardizeProjectData(s.data),console.log("✅ ProjectDataService: 项目详情获取成功:",this.currentProject),{success:!0,data:this.currentProject};throw new Error(s.message||"获取项目详情失败")}catch(s){return this.error=s.message,console.error("❌ ProjectDataService: 获取项目详情失败:",s),{success:!1,error:s.message,data:null}}finally{this.loading=!1}}async getProjectByCode(e){try{this.loading=!0,this.error=null,console.log("🔄 ProjectDataService: 根据代码获取项目详情...",{projectCode:e});const s=await ms.getProductByCode(e);if(s.status===0)return this.currentProject=this.standardizeProjectData(s.data),console.log("✅ ProjectDataService: 项目详情获取成功:",this.currentProject),{success:!0,data:this.currentProject};throw new Error(s.message||"获取项目详情失败")}catch(s){return this.error=s.message,console.error("❌ ProjectDataService: 获取项目详情失败:",s),{success:!1,error:s.message,data:null}}finally{this.loading=!1}}searchProjects(e){if(!e||!e.trim())return this.projects;const s=e.trim().toLowerCase();return this.projects.filter(n=>{const r=n.code&&n.code.toLowerCase().includes(s),i=n.name&&n.name.toLowerCase().includes(s),o=n.subtitle&&n.subtitle.toLowerCase().includes(s),l=n.location&&n.location.toLowerCase().includes(s);return r||i||o||l})}filterProjects(e={}){const s={...this.filters,...e};return this.projects.filter(n=>{const r=s.q?.trim().toLowerCase()||"",i=!r||n.code&&n.code.toLowerCase().includes(r)||n.name&&n.name.toLowerCase().includes(r)||n.subtitle&&n.subtitle.toLowerCase().includes(r)||n.location&&n.location.toLowerCase().includes(r),o=!s.type||n.type===s.type,l=!s.status||n.status===s.status,c=n.estimatedYield||0,u=c>=s.minYield&&c<=s.maxYield;return i&&o&&l&&u})}getFilteredProjects(e={}){return this.filterProjects(e).sort((n,r)=>{const i=n.estimatedYield||0;return(r.estimatedYield||0)-i})}async refreshProjectData(e=!1){try{return console.log("🔄 ProjectDataService: 刷新项目数据...",{forceRefresh:e}),this.currentProject?await this.getProjectByCode(this.currentProject.code):await this.getAllProjects()}catch(s){return console.error("❌ ProjectDataService: 刷新项目数据失败:",s),{success:!1,error:s.message}}}setupDatabaseSync(e=3e4){this.syncInterval&&clearInterval(this.syncInterval),this.syncInterval=setInterval(async()=>{try{console.log("🔄 ProjectDataService: 自动同步项目数据..."),await this.refreshProjectData()}catch(s){console.error("❌ ProjectDataService: 自动同步失败:",s)}},e),console.log("✅ ProjectDataService: 数据库同步已设置，间隔:",e,"ms")}stopDatabaseSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null,console.log("✅ ProjectDataService: 数据库同步已停止"))}async updateProjectStatus(e,s){try{this.loading=!0,this.error=null,console.log("🔄 ProjectDataService: 更新项目状态...",{projectCode:e,status:s});const n=await fetch(`${this.baseUrl}/project/${e}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({status:s})});if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const r=await n.json();if(r.status===0){const i=this.projects.findIndex(o=>o.code===e);return i!==-1&&(this.projects[i].status=s),this.currentProject&&this.currentProject.code===e&&(this.currentProject.status=s),console.log("✅ ProjectDataService: 项目状态更新成功"),{success:!0,data:r.data}}else throw new Error(r.message||"更新项目状态失败")}catch(n){return this.error=n.message,console.error("❌ ProjectDataService: 更新项目状态失败:",n),{success:!1,error:n.message}}finally{this.loading=!1}}standardizeProjectData(e){return{id:e.id||e.project_id,code:e.project_code||e.code,name:e.project_name||e.name,subtitle:e.property_summary||e.subtitle||"",status:e.loan_status||e.status||"INCOMING",subscribeToken:parseFloat(e.subscribe_token||0),totalOfferingToken:parseFloat(e.total_offering_token||0),loanAmount:parseFloat(e.loan_amount||0),interestRate:parseFloat(e.interest_rate||0),lvr:parseFloat(e.lvr||0),location:e.property_location||e.location||"",state:e.property_state||e.state||"",type:e.property_type||e.type||"",value:parseFloat(e.property_value||0),loanType:e.loan_type||"",loanProduct:e.loan_product||"",loanPurpose:e.loan_purpose||"",loanTermMonths:parseInt(e.loan_term_months||0),commencementDate:e.commencement_date||null,expiryDate:e.expiry_date||null,expectedRecoveryDate:e.expected_recovery_date||null,estimatedYield:this.calculateEstimatedYield(e),progressPercentage:this.calculateProgressPercentage(e),remainingAmount:this.calculateRemainingAmount(e),createdAt:e.created_at||null,updatedAt:e.updated_at||null,createdBy:e.created_by||null,updatedBy:e.updated_by||null}}calculateEstimatedYield(e){const s=parseFloat(e.interest_rate||0),n=parseInt(e.loan_term_months||0);return s>0&&n>0?s:0}calculateProgressPercentage(e){const s=parseFloat(e.subscribe_token||0),n=parseFloat(e.total_offering_token||0);return n>0?Math.min(s/n*100,100):0}calculateRemainingAmount(e){const s=parseFloat(e.subscribe_token||0),n=parseFloat(e.total_offering_token||0);return Math.max(n-s,0)}getCurrentState(){return{projects:this.projects,currentProject:this.currentProject,loading:this.loading,error:this.error,filters:this.filters,isSyncing:!!this.syncInterval}}clearError(){this.error=null}reset(){this.projects=[],this.currentProject=null,this.loading=!1,this.error=null,this.filters={q:"",type:"",status:"",minYield:0,maxYield:20},this.stopDatabaseSync()}}const ug=new gE,{getAllProjects:XO,getProjectById:e8,getProjectByCode:t8,searchProjects:s8,filterProjects:n8,getFilteredProjects:r8,refreshProjectData:i8,setupDatabaseSync:o8,stopDatabaseSync:a8,updateProjectStatus:l8,getCurrentState:c8,clearError:u8,reset:d8}=ug;class yE{constructor(){this.provider=null,this.signer=null,this.address=null,this.connected=!1,this.chainId=null,this.networkLabel="",this.nativeBalance=0n,this.nativeSymbol="ETH",this.audPrice=null,this.tokens=[],this.walletActivity=[],this.loading=!1,this.error=null,this.blockListenerAttached=!1,this.blockHandler=null}async connectWallet(){try{if(this.loading=!0,this.error=null,console.log("🔄 WalletService: 开始连接钱包..."),!window.ethereum)throw new Error("MetaMask未检测到，请安装MetaMask钱包");return this.provider=new As(window.ethereum,"any"),await window.ethereum.request({method:"eth_requestAccounts"}),this.signer=await this.provider.getSigner(),this.address=await this.signer.getAddress(),this.connected=!0,await this.refreshAll(),this.attachEventListeners(),console.log("✅ WalletService: 钱包连接成功:",this.address),{success:!0,address:this.address,chainId:this.chainId,networkLabel:this.networkLabel}}catch(e){return this.error=e.message,console.error("❌ WalletService: 钱包连接失败:",e),{success:!1,error:e.message}}finally{this.loading=!1}}async disconnectWallet(){try{return console.log("🔄 WalletService: 断开钱包连接..."),this.detachEventListeners(),this.provider=null,this.signer=null,this.address=null,this.connected=!1,this.chainId=null,this.networkLabel="",this.nativeBalance=0n,this.nativeSymbol="ETH",this.audPrice=null,this.tokens=[],this.walletActivity=[],this.error=null,console.log("✅ WalletService: 钱包断开连接成功"),{success:!0,message:"钱包已断开连接"}}catch(e){return this.error=e.message,console.error("❌ WalletService: 断开钱包连接失败:",e),{success:!1,error:e.message}}}async refreshAll(){if(this.connected)try{await this.refreshNetwork(),await this.refreshNative(),await this.refreshTokens(),await this.loadWalletActivity()}catch(e){console.error("❌ WalletService: 刷新数据失败:",e)}}async refreshNetwork(){try{const e=await this.provider.getNetwork();this.chainId=Number(e.chainId),this.networkLabel=e.name&&e.name!=="unknown"?this.capitalize(e.name):`Chain ${this.chainId}`,this.nativeSymbol=this.chainId===1?"ETH":this.chainId===137?"MATIC":(this.chainId===11155111,"ETH"),await this.fetchAudPriceSafely(),console.log("✅ WalletService: 网络信息刷新成功:",this.networkLabel)}catch(e){console.error("❌ WalletService: 刷新网络信息失败:",e)}}async refreshNative(){try{this.nativeBalance=await this.provider.getBalance(this.address),console.log("✅ WalletService: 原生代币余额刷新成功:",Mt(this.nativeBalance))}catch(e){console.error("❌ WalletService: 刷新原生代币余额失败:",e)}}async refreshTokens(){try{console.log("✅ WalletService: 代币余额刷新完成")}catch(e){console.error("❌ WalletService: 刷新代币余额失败:",e)}}async sendTransaction(e){try{if(this.loading=!0,this.error=null,!this.connected||!this.signer)throw new Error("钱包未连接");console.log("🔄 WalletService: 发送交易...",e);const n=await(await this.signer.sendTransaction(e)).wait();return await this.recordTransaction({hash:n.hash,from:n.from,to:n.to,value:n.value,gasUsed:n.gasUsed,blockNumber:n.blockNumber,timestamp:Date.now(),type:"transaction"}),console.log("✅ WalletService: 交易发送成功:",n.hash),{success:!0,hash:n.hash,receipt:n}}catch(s){return this.error=s.message,console.error("❌ WalletService: 发送交易失败:",s),{success:!1,error:s.message}}finally{this.loading=!1}}async sendEthTransaction(e,s,n={}){try{const r=Ji(s.toString()),i={to:e,value:r,...n};return await this.sendTransaction(i)}catch(r){return console.error("❌ WalletService: 发送ETH交易失败:",r),{success:!1,error:r.message}}}async getBalance(e=null){try{const s=e||this.address;if(!s)throw new Error("地址未提供");const n=await this.provider.getBalance(s);return Mt(n)}catch(s){return console.error("❌ WalletService: 获取余额失败:",s),"0"}}async getTokenBalance(e,s=null){try{const n=s||this.address;if(!n)throw new Error("用户地址未提供");const r=new Wt(e,["function balanceOf(address owner) view returns (uint256)","function decimals() view returns (uint8)"],this.provider),[i,o]=await Promise.all([r.balanceOf(n),r.decimals()]);return oa(i,o)}catch(n){return console.error("❌ WalletService: 获取代币余额失败:",n),"0"}}async switchNetwork(e){try{if(!window.ethereum)throw new Error("MetaMask未检测到");const s="0x"+e.toString(16);return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:s}]}),await this.refreshNetwork(),console.log("✅ WalletService: 网络切换成功:",e),{success:!0,chainId:e}}catch(s){return console.error("❌ WalletService: 切换网络失败:",s),{success:!1,error:s.message}}}getCurrentNetwork(){return{chainId:this.chainId,networkLabel:this.networkLabel,nativeSymbol:this.nativeSymbol}}async loadWalletActivity(){try{this.loading=!0,console.log("🔄 WalletService: 加载钱包活动记录...");const e=localStorage.getItem("walletActivity");e&&(this.walletActivity=JSON.parse(e));for(const s of this.walletActivity)if(s.transactionHash&&!s.etherscan)try{const n=await this.fetchTransactionDetails(s.transactionHash);n.success&&(s.etherscan={hash:n.transaction.hash,from:n.transaction.from,to:n.transaction.to,value:n.transaction.value,gasUsed:n.receipt.gasUsed,blockNumber:n.transaction.blockNumber,timestamp:parseInt(n.transaction.timeStamp)*1e3})}catch(n){console.warn("获取交易详情失败:",n)}console.log("✅ WalletService: 钱包活动记录加载完成:",this.walletActivity.length,"条记录")}catch(e){console.error("❌ WalletService: 加载钱包活动记录失败:",e)}finally{this.loading=!1}}async recordTransaction(e){try{const s={id:Date.now().toString(),type:e.type||"transaction",transactionHash:e.hash,from:e.from,to:e.to,value:e.value,gasUsed:e.gasUsed,blockNumber:e.blockNumber,timestamp:e.timestamp||Date.now(),status:"confirmed"};this.walletActivity.unshift(s),this.walletActivity.length>100&&(this.walletActivity=this.walletActivity.slice(0,100)),localStorage.setItem("walletActivity",JSON.stringify(this.walletActivity)),window.dispatchEvent(new CustomEvent("walletActivityUpdated",{detail:{activity:s,allActivity:this.walletActivity}})),console.log("✅ WalletService: 交易记录已保存:",s.hash)}catch(s){console.error("❌ WalletService: 记录交易失败:",s)}}async fetchTransactionDetails(e){try{console.log("🔍 WalletService: 从Etherscan获取交易详情:",e);const s=`https://api-sepolia.etherscan.io/api?module=proxy&action=eth_getTransactionByHash&txhash=${e}`,n=`https://api-sepolia.etherscan.io/api?module=proxy&action=eth_getTransactionReceipt&txhash=${e}`,[r,i]=await Promise.all([fetch(s),fetch(n)]),[o,l]=await Promise.all([r.json(),i.json()]);if(o.result&&l.result)return console.log("✅ WalletService: 成功获取交易详情:",o.result),{success:!0,transaction:o.result,receipt:l.result};throw new Error("无法获取交易详情")}catch(s){return console.error("❌ WalletService: 获取交易详情失败:",s),{success:!1,error:s.message}}}attachEventListeners(){window.ethereum&&(window.ethereum.on("accountsChanged",this.handleAccountsChanged.bind(this)),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this)),this.provider&&!this.blockListenerAttached&&(this.blockHandler=async()=>{try{await this.refreshNative()}catch(e){console.error("刷新原生代币余额失败:",e)}},this.provider.on("block",this.blockHandler),this.blockListenerAttached=!0))}detachEventListeners(){window.ethereum&&(window.ethereum.removeAllListeners("accountsChanged"),window.ethereum.removeAllListeners("chainChanged")),this.provider&&this.blockListenerAttached&&(this.provider.off("block",this.blockHandler),this.blockListenerAttached=!1)}async handleAccountsChanged(e){!e||e.length===0?await this.disconnectWallet():(this.address=e[0],await this.refreshAll())}async handleChainChanged(){await this.refreshAll()}formatUnitsSafe(e,s){try{return Number(oa(e,s)).toLocaleString(void 0,{maximumFractionDigits:6})}catch{return"0"}}async fetchAudPriceSafely(){try{const e=this.nativeSymbol==="MATIC"?"matic-network":"ethereum",n=await(await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${e}&vs_currencies=aud`)).json();this.audPrice=n?.[e]?.aud||null}catch{this.audPrice=null}}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}getCurrentState(){return{connected:this.connected,address:this.address,chainId:this.chainId,networkLabel:this.networkLabel,nativeBalance:this.nativeBalance,nativeSymbol:this.nativeSymbol,audPrice:this.audPrice,tokens:this.tokens,walletActivity:this.walletActivity,loading:this.loading,error:this.error}}clearError(){this.error=null}reset(){this.detachEventListeners(),this.provider=null,this.signer=null,this.address=null,this.connected=!1,this.chainId=null,this.networkLabel="",this.nativeBalance=0n,this.nativeSymbol="ETH",this.audPrice=null,this.tokens=[],this.walletActivity=[],this.loading=!1,this.error=null}}const Pc=new yE,{connectWallet:f8,disconnectWallet:h8,refreshAll:p8,sendTransaction:m8,sendEthTransaction:g8,getBalance:y8,getTokenBalance:v8,switchNetwork:b8,getCurrentNetwork:w8,loadWalletActivity:A8,recordTransaction:E8,getCurrentState:_8,clearError:P8,reset:S8}=Pc,vE={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:3000/api",VITE_API_LOANS_BY_CODE_URL:"http://localhost:3000/api/loans",VITE_API_LOANS_SUBSCRIPTION_URL:"http://localhost:3000/api/loans",VITE_API_LOANS_URL:"http://localhost:3000/api/loans",VITE_API_LOGIN_URL:"http://localhost:3000/user/login",VITE_API_PROJECTS_URL:"http://localhost:3000/api/projects",VITE_API_PROJECT_BY_CODE_DIRECT_URL:"http://localhost:3000/project",VITE_API_PROJECT_BY_CODE_URL:"http://localhost:3000/api/project",VITE_API_PROJECT_DIRECT_URL:"http://localhost:3000/project",VITE_API_PROJECT_SUBSCRIPTION_DIRECT_URL:"http://localhost:3000/project",VITE_API_PROJECT_SUBSCRIPTION_URL:"http://localhost:3000/api/loans",VITE_API_PROJECT_URL:"http://localhost:3000/api/project",VITE_API_REGISTER_URL:"http://localhost:3000/user/reguser",VITE_API_TRANSACTION_URL:"http://localhost:3000/api/transaction",VITE_API_USER_INFO_URL:"http://localhost:3000/user/userinfo",VITE_APP_ENV:"development",VITE_APP_NAME:"RWA Trading Platform",VITE_APP_VERSION:"1.0.0",VITE_AUTO_REFRESH_INTERVAL:"30",VITE_BACKEND_PORT:"3000",VITE_COMPLIANCE_GUARD_ADDRESS:"0x1234567890123456789012345678901234567890",VITE_COMPLIANCE_GUARD_ADDRESS_PROD:"0x1234567890123456789012345678901234567890",VITE_DB_HOST:"localhost",VITE_DB_NAME:"rwa",VITE_DB_PASSWORD:"123456",VITE_DB_PORT:"3306",VITE_DB_USER:"root",VITE_ENABLE_AUTO_REFRESH:"true",VITE_ENABLE_KYC:"true",VITE_ENABLE_TRADING:"true",VITE_INTEREST_TOKEN_ADDRESS:"0xE6aeE4a898c6d99033ee5380Df407C5DD470fb17",VITE_INTEREST_TOKEN_ADDRESS_PROD:"0xE6aeE4a898c6d99033ee5380Df407C5DD470fb17",VITE_KYC_DEFAULT_LEVEL:"3",VITE_KYC_DEFAULT_LEVEL_PROD:"3",VITE_KYC_DEFAULT_SUCCESS:"true",VITE_KYC_DEFAULT_SUCCESS_PROD:"true",VITE_KYC_REGISTRY_ADDRESS:"0x4533f47BE0ce8b80F7bbdF02939f81F4A15b7A45",VITE_KYC_REGISTRY_ADDRESS_PROD:"0x4533f47BE0ce8b80F7bbdF02939f81F4A15b7A45",VITE_LOAN_ISSUER_ADDRESS:"0x13159e6417D98528C220b12Ec4950D5A343E5eAA",VITE_LOAN_ISSUER_ADDRESS_PROD:"0x1234567890123456789012345678901234567890",VITE_NETWORK_CHAIN_ID:"11155111",VITE_NETWORK_CHAIN_ID_PROD:"1",VITE_NETWORK_NAME:"Sepolia Testnet",VITE_NETWORK_NAME_PROD:"Ethereum Mainnet",VITE_PRINCIPAL_TOKEN_ADDRESS:"0x45b1eCb3D9af651244eC656ed15B86404924c354",VITE_PRINCIPAL_TOKEN_ADDRESS_PROD:"0x45b1eCb3D9af651244eC656ed15B86404924c354",VITE_RPC_URL:"https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID",VITE_RPC_URL_PROD:"https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID",VITE_TRADE_CONTRACT_ADDRESS:"0x1234567890123456789012345678901234567890",VITE_TRADE_CONTRACT_ADDRESS_PROD:"0x1234567890123456789012345678901234567890"},et=(t,e)=>vE[t]||e;et("VITE_KYC_REGISTRY_ADDRESS","0x4533f47BE0ce8b80F7bbdF02939f81F4A15b7A45"),et("VITE_LOAN_ISSUER_ADDRESS","0x13159e6417D98528C220b12Ec4950D5A343E5eAA"),et("VITE_PRINCIPAL_TOKEN_ADDRESS","0x45b1eCb3D9af651244eC656ed15B86404924c354"),et("VITE_INTEREST_TOKEN_ADDRESS","0xE6aeE4a898c6d99033ee5380Df407C5DD470fb17"),et("VITE_TRADE_CONTRACT_ADDRESS","0x13159e6417D98528C220b12Ec4950D5A343E5eAA"),et("VITE_COMPLIANCE_GUARD_ADDRESS","0x1234567890123456789012345678901234567890"),parseInt(et("VITE_NETWORK_CHAIN_ID","11155111")),et("VITE_NETWORK_NAME","Sepolia Testnet"),et("VITE_RPC_URL","https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID"),et("VITE_KYC_DEFAULT_SUCCESS","false"),parseInt(et("VITE_KYC_DEFAULT_LEVEL","0"));const bE={KYC_REGISTRY_ADDRESS:et("VITE_KYC_REGISTRY_ADDRESS_PROD","0x4533f47BE0ce8b80F7bbdF02939f81F4A15b7A45"),LOAN_ISSUER_ADDRESS:et("VITE_LOAN_ISSUER_ADDRESS_PROD","0x1234567890123456789012345678901234567890"),PRINCIPAL_TOKEN_ADDRESS:et("VITE_PRINCIPAL_TOKEN_ADDRESS_PROD","0x45b1eCb3D9af651244eC656ed15B86404924c354"),INTEREST_TOKEN_ADDRESS:et("VITE_INTEREST_TOKEN_ADDRESS_PROD","0xE6aeE4a898c6d99033ee5380Df407C5DD470fb17"),TRADE_CONTRACT_ADDRESS:et("VITE_TRADE_CONTRACT_ADDRESS_PROD","0x1234567890123456789012345678901234567890"),COMPLIANCE_GUARD_ADDRESS:et("VITE_COMPLIANCE_GUARD_ADDRESS_PROD","0x1234567890123456789012345678901234567890"),NETWORK:{chainId:parseInt(et("VITE_NETWORK_CHAIN_ID_PROD","1")),name:et("VITE_NETWORK_NAME_PROD","Ethereum Mainnet"),rpcUrl:et("VITE_RPC_URL_PROD","https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID")},KYC:{DEFAULT_SUCCESS:et("VITE_KYC_DEFAULT_SUCCESS_PROD","false")==="true",DEFAULT_LEVEL:parseInt(et("VITE_KYC_DEFAULT_LEVEL_PROD","0"))}},ke=bE,Sc=ke.KYC;et("VITE_APP_NAME","RWA Trading Platform"),et("VITE_APP_VERSION","1.0.0"),et("VITE_APP_ENV","development");et("VITE_ENABLE_KYC","true"),et("VITE_ENABLE_TRADING","true"),et("VITE_ENABLE_AUTO_REFRESH","true"),parseInt(et("VITE_AUTO_REFRESH_INTERVAL","30"));const Vs={UNVERIFIED:"unverified",PENDING:"pending",VERIFIED:"verified",REJECTED:"rejected"},Ye={LEVEL_0:0,LEVEL_1:1,LEVEL_2:2,LEVEL_3:3},dg="kycStatus",fg="kycLevel";function Ll(){return Sc.DEFAULT_SUCCESS?Vs.VERIFIED:localStorage.getItem(dg)||Vs.UNVERIFIED}function gr(){if(Sc.DEFAULT_SUCCESS)return Sc.DEFAULT_LEVEL;const t=localStorage.getItem(fg);return t?parseInt(t):Ye.LEVEL_0}function wa(t){localStorage.setItem(dg,t)}function Aa(t){localStorage.setItem(fg,t.toString())}class wE{constructor(){this.provider=null,this.signer=null,this.contracts={kycRegistry:null,loanIssuer:null,principalToken:null,interestToken:null,trade:null,complianceGuard:null},this.isInitialized=!1,this.loading=!1,this.error=null}async initializeContract(){try{if(this.loading=!0,this.error=null,console.log("🚀 ContractService: 初始化智能合约服务..."),typeof window.ethereum>"u")throw new Error("Web3钱包未检测到，请安装MetaMask或类似钱包");return this.validateContractAddresses(),await this.checkNetwork(),this.provider=new As(window.ethereum),await window.ethereum.request({method:"eth_requestAccounts"}),this.signer=await this.provider.getSigner(),await this.initializeContracts(),this.isInitialized=!0,console.log("✅ ContractService: 智能合约服务初始化成功!"),{success:!0,message:"合约服务初始化成功"}}catch(e){return this.error=e.message,console.error("❌ ContractService: 初始化失败:",e),{success:!1,error:e.message}}finally{this.loading=!1}}validateContractAddresses(){const e={"KYC Registry":ke.KYC_REGISTRY_ADDRESS,"Loan Issuer":ke.LOAN_ISSUER_ADDRESS,"Principal Token":ke.PRINCIPAL_TOKEN_ADDRESS,"Interest Token":ke.INTEREST_TOKEN_ADDRESS,"Trade Contract":ke.TRADE_CONTRACT_ADDRESS,"Compliance Guard":ke.COMPLIANCE_GUARD_ADDRESS};for(const[s,n]of Object.entries(e))this.validateContractAddress(n,s)}async checkNetwork(){const e=await window.ethereum.request({method:"eth_chainId"}),s="0x"+ke.NETWORK.chainId.toString(16),n=parseInt(e,16);if(console.log("🌐 当前链ID:",n),console.log("🎯 目标链ID:",ke.NETWORK.chainId),e!==s)throw new Error(`请切换到 ${ke.NETWORK.name} (链ID: ${ke.NETWORK.chainId})`)}async initializeContracts(){const e=[{name:"kycRegistry",address:ke.KYC_REGISTRY_ADDRESS,abi:this.getKycRegistryABI()},{name:"loanIssuer",address:ke.LOAN_ISSUER_ADDRESS,abi:this.getLoanIssuerABI()},{name:"principalToken",address:ke.PRINCIPAL_TOKEN_ADDRESS,abi:this.getCompliantERC20ABI()},{name:"interestToken",address:ke.INTEREST_TOKEN_ADDRESS,abi:this.getCompliantERC20ABI()},{name:"trade",address:ke.TRADE_CONTRACT_ADDRESS,abi:this.getTradeContractABI()},{name:"complianceGuard",address:ke.COMPLIANCE_GUARD_ADDRESS,abi:this.getComplianceGuardABI()}];for(const s of e)try{this.contracts[s.name]=new Wt(s.address,s.abi,this.signer),console.log(`✅ ${s.name} 合约初始化成功`)}catch(n){throw console.error(`❌ ${s.name} 合约初始化失败:`,n),new Error(`初始化 ${s.name} 合约失败: ${n.message}`)}}async buyTokens(e){try{this.isInitialized||await this.initializeContract();const s=await this.getUserAddress();if(!s)throw new Error("无法获取用户钱包地址，请确保钱包已连接");if(console.log("💰 购买代币:",{amount:e,userAddress:s}),!ke.TRADE_CONTRACT_ADDRESS||ke.TRADE_CONTRACT_ADDRESS==="0x1234567890123456789012345678901234567890"){console.warn("⚠️ 交易合约地址未配置，模拟成功交易");const l="0x"+Math.random().toString(16).substr(2,64),c=Math.floor(Math.random()*1e6)+1e6;return{success:!0,transactionHash:l,blockNumber:c,tokenPrice:"1.0",totalCost:e.toString(),userAddress:s}}let n,r;try{n=await this.contracts.trade.getTokenPrice(),r=n*BigInt(e),console.log("💰 获取到代币价格:",n.toString())}catch(l){console.warn("⚠️ 无法获取代币价格，使用默认价格:",l.message),n=Ji("1.0"),r=n*BigInt(e)}console.log("💰 购买代币:",{amount:e,userAddress:s,tokenPrice:n.toString(),totalCost:r.toString()});const o=await(await this.contracts.trade.buyTokens(e,{value:r})).wait();return{success:!0,transactionHash:o.transactionHash,blockNumber:o.blockNumber,tokenPrice:Mt(n),totalCost:Mt(r),userAddress:s}}catch(s){return console.error("❌ 购买代币失败:",s),{success:!1,error:s.message}}}async sellTokens(e){try{this.isInitialized||await this.initializeContract();const s=await this.getUserAddress();if(!s)throw new Error("无法获取用户钱包地址，请确保钱包已连接");if(console.log("💸 出售代币:",{amount:e,userAddress:s}),!ke.TRADE_CONTRACT_ADDRESS||ke.TRADE_CONTRACT_ADDRESS==="0x1234567890123456789012345678901234567890"){console.warn("⚠️ 交易合约地址未配置，模拟成功交易");const l="0x"+Math.random().toString(16).substr(2,64),c=Math.floor(Math.random()*1e6)+1e6;return{success:!0,transactionHash:l,blockNumber:c,tokenPrice:"1.0",totalCost:e.toString(),userAddress:s}}let n,r;try{n=await this.contracts.trade.getTokenPrice(),r=n*BigInt(e),console.log("💰 获取到代币价格:",n.toString())}catch(l){console.warn("⚠️ 无法获取代币价格，使用默认价格:",l.message),n=Ji("1.0"),r=n*BigInt(e)}console.log("💸 出售代币:",{amount:e,userAddress:s,tokenPrice:n.toString(),totalRevenue:r.toString()});const o=await(await this.contracts.trade.sellTokens(e)).wait();return{success:!0,transactionHash:o.transactionHash,blockNumber:o.blockNumber,tokenPrice:Mt(n),totalCost:Mt(r),userAddress:s}}catch(s){return console.error("❌ 出售代币失败:",s),{success:!1,error:s.message}}}async getTokenPrice(){try{if(this.isInitialized||await this.initializeContract(),console.log("🔍 尝试从合约获取代币价格:",ke.TRADE_CONTRACT_ADDRESS),!ke.TRADE_CONTRACT_ADDRESS||ke.TRADE_CONTRACT_ADDRESS==="0x1234567890123456789012345678901234567890")return console.warn("⚠️ 交易合约地址未配置，返回默认价格"),"1.0";const e=await this.contracts.trade.getTokenPrice();return console.log("✅ 代币价格获取成功:",Mt(e)),Mt(e)}catch(e){return console.error("❌ 获取代币价格失败:",e),e.message.includes("BAD_DATA")||e.message.includes("UNSUPPORTED_OPERATION")?(console.warn("⚠️ 合约方法不可用，使用默认价格"),"1.0"):"0"}}async getUserTokenBalance(e,s=null){try{this.isInitialized||await this.initializeContract(),e||(e=await this.getUserAddress()),s||(s=ke.PRINCIPAL_TOKEN_ADDRESS);const r=await new Wt(s,this.getCompliantERC20ABI(),this.signer).balanceOf(e);return Mt(r)}catch(n){return console.error("❌ 获取代币余额失败:",n),"0"}}async applyForKYC(e){try{this.isInitialized||await this.initializeContract();const s=await this.getUserAddress();if(await this.contracts.kycRegistry.blocked(s))throw new Error("用户已被阻止进行KYC验证");const r=await this.contracts.kycRegistry.kycLevel(s);if(r>=2)return{success:!0,message:"用户已有足够的KYC等级",currentLevel:r};const i=vt(zn.defaultAbiCoder().encode(["string","string","string","string","string"],[e.firstName,e.lastName,e.dob,e.country,e.docType]));return console.log("KYC数据哈希:",i),console.log("KYC数据:",e),wa(Vs.VERIFIED),Aa(Ye.LEVEL_2),{success:!0,message:"KYC申请提交成功",kycHash:i,userAddress:s}}catch(s){return console.error("KYC申请失败:",s),{success:!1,error:s.message}}}async getKycLevel(e=null){try{return this.isInitialized||await this.initializeContract(),e||(e=await this.getUserAddress()),await this.contracts.kycRegistry.kycLevel(e)}catch(s){return console.error("检查KYC等级失败:",s),0}}async isBlocked(e=null){try{return this.isInitialized||await this.initializeContract(),e||(e=await this.getUserAddress()),await this.contracts.kycRegistry.blocked(e)}catch(s){return console.error("检查阻止状态失败:",s),!1}}async isWhitelisted(e){try{this.isInitialized||await this.initializeContract(),console.log("🔍 检查白名单状态:",e);const s=await this.contracts.complianceGuard.whitelist(e);return console.log("✅ 白名单状态:",s),s}catch(s){return console.error("❌ 检查白名单状态失败:",s),!1}}async getWhitelistStatus(e){try{console.log("🔍 获取综合白名单状态:",e);const[s,n,r,i]=await Promise.all([this.isWhitelisted(e),this.isBlocked(e),this.getKycLevel(e),this.getKycExpireAt(e)]),o=Math.floor(Date.now()/1e3),l=i>0&&o>i;let c="none";return n?c="rejected":s&&r>=2&&!l||s&&r>=2?c="approved":s&&r>=1&&(c="pending"),console.log("✅ 白名单状态:",c),{status:c,isWhitelisted:s,isBlocked:n,kycLevel:r,kycExpireAt:i,isKycExpired:l}}catch(s){return console.error("❌ 获取白名单状态失败:",s),{status:"none",isWhitelisted:!1,isBlocked:!1,kycLevel:0,kycExpireAt:0,isKycExpired:!1}}}async getUserAddress(){try{if(this.signer)return await this.signer.getAddress();if(typeof window.ethereum<"u"){const e=await window.ethereum.request({method:"eth_accounts"});if(e&&e.length>0)return e[0]}throw new Error("无法获取用户地址")}catch(e){return console.error("❌ 获取用户地址失败:",e),null}}validateContractAddress(e,s){if(!e||e==="#"||e==="0x...")throw new Error(`${s} 合约地址未正确配置`);if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`${s} 合约地址格式无效: ${e}`);return!0}getKycRegistryABI(){return["function kycLevel(address user) external view returns (uint8)","function blocked(address user) external view returns (bool)","function setKycLevel(address user, uint8 level) external","function setBlocked(address user, bool isBlocked) external","function kycSigner() external view returns (address)","function DOMAIN_SEPARATOR() external view returns (bytes32)"]}getLoanIssuerABI(){return["function registry() external view returns (address)","function principalToken() external view returns (address)","function interestToken() external view returns (address)","function nextLoanId() external view returns (uint256)","function loans(uint256 loanId) external view returns (uint256 principal, uint256 annualRateBps, uint64 startDate, uint64 dueDate, string memory borrower, string memory lender, string memory collateral, string memory note, bool closed)","function loanHolder(uint256 loanId) external view returns (address)"]}getCompliantERC20ABI(){return["function name() external view returns (string memory)","function symbol() external view returns (string memory)","function decimals() external pure returns (uint8)","function totalSupply() external view returns (uint256)","function balanceOf(address account) external view returns (uint256)","function allowance(address owner, address spender) external view returns (uint256)","function transfer(address to, uint256 amount) external returns (bool)","function approve(address spender, uint256 amount) external returns (bool)","function transferFrom(address from, address to, uint256 amount) external returns (bool)"]}getTradeContractABI(){return["function buyTokens(uint256 amount) external payable","function sellTokens(uint256 amount) external","function getTokenPrice() external view returns (uint256)","function getUserBalance(address user) external view returns (uint256)"]}getComplianceGuardABI(){return["function whitelist(address user) external view returns (bool)","function blocked(address user) external view returns (bool)","function kycTier(address user) external view returns (uint8)","function kycExpireAt(address user) external view returns (uint64)"]}getCurrentState(){return{isInitialized:this.isInitialized,loading:this.loading,error:this.error,contracts:Object.keys(this.contracts).reduce((e,s)=>(e[s]=this.contracts[s]?"initialized":"not_initialized",e),{})}}clearError(){this.error=null}reset(){this.provider=null,this.signer=null,this.contracts={kycRegistry:null,loanIssuer:null,principalToken:null,interestToken:null,trade:null,complianceGuard:null},this.isInitialized=!1,this.loading=!1,this.error=null}}const hg=new wE,{initializeContract:k8,buyTokens:C8,sellTokens:T8,getTokenPrice:I8,getUserTokenBalance:x8,applyForKYC:R8,getKycLevel:D8,isBlocked:N8,isWhitelisted:L8,getWhitelistStatus:O8,getCurrentState:U8,clearError:B8,reset:M8}=hg;class AE{constructor(){this.syncIntervals=new Map,this.isRunning=!1,this.syncConfig={userData:{interval:3e4,enabled:!0},projectData:{interval:3e4,enabled:!0},walletData:{interval:15e3,enabled:!0},contractData:{interval:6e4,enabled:!1}},this.cache=new Map,this.lastSync=new Map,this.errorCount=new Map,this.maxRetries=3,this.subscribers=new Map,this.lastRefreshTime=null}subscribe(e,s){if(this.subscribers.has(e)||this.subscribers.set(e,new Set),this.subscribers.get(e).add(s),this.cache.has(e)){const n=this.cache.get(e);s(n.data||n)}return()=>this.unsubscribe(e,s)}unsubscribe(e,s){this.subscribers.has(e)&&(this.subscribers.get(e).delete(s),this.subscribers.get(e).size===0&&this.subscribers.delete(e))}notify(e,s){this.subscribers.has(e)&&this.subscribers.get(e).forEach(n=>{try{n(s)}catch(r){console.error("❌ DataSyncService: 通知订阅者失败:",r)}})}async startDataSync(e={}){try{return console.log("🔄 DataSyncService: 启动数据同步服务..."),this.syncConfig={...this.syncConfig,...e},this.syncConfig.userData.enabled&&await this.startUserDataSync(),this.syncConfig.projectData.enabled&&await this.startProjectDataSync(),this.syncConfig.walletData.enabled&&await this.startWalletDataSync(),this.syncConfig.contractData.enabled&&await this.startContractDataSync(),this.isRunning=!0,console.log("✅ DataSyncService: 数据同步服务启动成功"),{success:!0,message:"数据同步服务启动成功",config:this.syncConfig}}catch(s){return console.error("❌ DataSyncService: 启动数据同步服务失败:",s),{success:!1,error:s.message}}}async stopDataSync(){try{console.log("🔄 DataSyncService: 停止数据同步服务...");for(const[e,s]of this.syncIntervals)clearInterval(s),console.log(`✅ 停止 ${e} 数据同步`);return this.syncIntervals.clear(),this.isRunning=!1,console.log("✅ DataSyncService: 数据同步服务已停止"),{success:!0,message:"数据同步服务已停止"}}catch(e){return console.error("❌ DataSyncService: 停止数据同步服务失败:",e),{success:!1,error:e.message}}}async startUserDataSync(){const e=this.syncConfig.userData.interval,s=async()=>{try{if(console.log("🔄 DataSyncService: 同步用户数据..."),!this.shouldSync("userData"))return;await this.syncUserData(),this.lastSync.set("userData",Date.now()),this.errorCount.set("userData",0),console.log("✅ DataSyncService: 用户数据同步完成")}catch(r){console.error("❌ DataSyncService: 用户数据同步失败:",r),this.handleSyncError("userData",r)}};await s();const n=setInterval(s,e);this.syncIntervals.set("userData",n),console.log(`✅ DataSyncService: 用户数据同步已启动，间隔: ${e}ms`)}async syncUserData(){try{if(_c.getUserStatus().isLoggedIn){const s=await _c.getUserData();s.success&&(this.cache.set("userData",s.data),console.log("✅ 用户数据已更新到缓存"))}}catch(e){throw console.error("❌ 同步用户数据失败:",e),e}}async startProjectDataSync(){const e=this.syncConfig.projectData.interval,s=async()=>{try{if(console.log("🔄 DataSyncService: 同步项目数据..."),!this.shouldSync("projectData"))return;await this.syncProjectData(),this.lastSync.set("projectData",Date.now()),this.errorCount.set("projectData",0),console.log("✅ DataSyncService: 项目数据同步完成")}catch(r){console.error("❌ DataSyncService: 项目数据同步失败:",r),this.handleSyncError("projectData",r)}};await s();const n=setInterval(s,e);this.syncIntervals.set("projectData",n),console.log(`✅ DataSyncService: 项目数据同步已启动，间隔: ${e}ms`)}async syncProjectData(){try{const e=await ug.refreshProjectData();if(e.success){const s=e.data||[];this.setCacheWithTimestamp("products",s),this.cache.set("projectData",s),this.notify("products",s);const n=await this.checkForNewProjects(s);n.length>0&&this.notify("new_projects",n),console.log("✅ 项目数据已更新到缓存并通知订阅者")}}catch(e){throw console.error("❌ 同步项目数据失败:",e),e}}async startWalletDataSync(){const e=this.syncConfig.walletData.interval,s=async()=>{try{if(console.log("🔄 DataSyncService: 同步钱包数据..."),!this.shouldSync("walletData"))return;await this.syncWalletData(),this.lastSync.set("walletData",Date.now()),this.errorCount.set("walletData",0),console.log("✅ DataSyncService: 钱包数据同步完成")}catch(r){console.error("❌ DataSyncService: 钱包数据同步失败:",r),this.handleSyncError("walletData",r)}};await s();const n=setInterval(s,e);this.syncIntervals.set("walletData",n),console.log(`✅ DataSyncService: 钱包数据同步已启动，间隔: ${e}ms`)}async syncWalletData(){try{const e=Pc.getCurrentState();e.connected&&(await Pc.refreshAll(),this.cache.set("walletData",e),console.log("✅ 钱包数据已更新到缓存"))}catch(e){throw console.error("❌ 同步钱包数据失败:",e),e}}async startContractDataSync(){const e=this.syncConfig.contractData.interval,s=async()=>{try{if(console.log("🔄 DataSyncService: 同步合约数据..."),!this.shouldSync("contractData"))return;await this.syncContractData(),this.lastSync.set("contractData",Date.now()),this.errorCount.set("contractData",0),console.log("✅ DataSyncService: 合约数据同步完成")}catch(r){console.error("❌ DataSyncService: 合约数据同步失败:",r),this.handleSyncError("contractData",r)}};await s();const n=setInterval(s,e);this.syncIntervals.set("contractData",n),console.log(`✅ DataSyncService: 合约数据同步已启动，间隔: ${e}ms`)}async syncContractData(){try{const e=hg.getCurrentState();e.isInitialized&&(this.cache.set("contractData",e),console.log("✅ 合约数据已更新到缓存"))}catch(e){throw console.error("❌ 同步合约数据失败:",e),e}}async syncAllData(){try{console.log("🔄 DataSyncService: 手动同步所有数据...");const e={userData:{success:!1,error:null},projectData:{success:!1,error:null},walletData:{success:!1,error:null},contractData:{success:!1,error:null}};try{await this.syncUserData(),e.userData.success=!0}catch(r){e.userData.error=r.message}try{await this.syncProjectData(),e.projectData.success=!0}catch(r){e.projectData.error=r.message}try{await this.syncWalletData(),e.walletData.success=!0}catch(r){e.walletData.error=r.message}try{await this.syncContractData(),e.contractData.success=!0}catch(r){e.contractData.error=r.message}const s=Object.values(e).filter(r=>r.success).length,n=Object.keys(e).length;return console.log(`✅ DataSyncService: 手动同步完成，成功: ${s}/${n}`),{success:s>0,results:e,summary:`${s}/${n} 项数据同步成功`}}catch(e){return console.error("❌ DataSyncService: 手动同步失败:",e),{success:!1,error:e.message}}}setCacheWithTimestamp(e,s){this.cache.set(e,{data:s,timestamp:Date.now()})}getCacheWithTimestamp(e,s=300*1e3){const n=this.cache.get(e);return n&&n.timestamp&&!(Date.now()-n.timestamp>s)?n.data:null}async checkForNewProjects(e){try{const s=this.getCacheWithTimestamp("products")||[],n=e.filter(r=>!s.some(i=>i.code===r.code||i.project_code===r.project_code));return n.length>0&&console.log("🆕 DataSyncService: 发现",n.length,"个新项目:",n.map(r=>r.code||r.project_code)),n}catch(s){return console.error("❌ DataSyncService: 检查新项目失败:",s),[]}}getCachedData(e){return this.cache.get(e)}setCachedData(e,s){this.cache.set(e,s)}clearCache(e=null){e?(this.cache.delete(e),console.log(`✅ 清除缓存: ${e}`)):(this.cache.clear(),console.log("✅ 清除所有缓存"))}shouldSync(e){const s=this.lastSync.get(e);if((this.errorCount.get(e)||0)>=this.maxRetries)return console.warn(`⚠️ ${e} 同步错误次数过多，暂停同步`),!1;if(!s)return!0;const r=this.syncConfig[e]?.interval||3e4;return Date.now()-s>=r}handleSyncError(e,s){const r=(this.errorCount.get(e)||0)+1;this.errorCount.set(e,r),console.error(`❌ ${e} 同步错误 (${r}/${this.maxRetries}):`,s.message),r>=this.maxRetries&&(console.error(`❌ ${e} 同步错误次数过多，停止同步`),this.stopDataTypeSync(e))}stopDataTypeSync(e){const s=this.syncIntervals.get(e);s&&(clearInterval(s),this.syncIntervals.delete(e),console.log(`✅ 停止 ${e} 数据同步`))}resetErrorCount(e){this.errorCount.set(e,0),console.log(`✅ 重置 ${e} 错误计数`)}getSyncStatus(){return{isRunning:this.isRunning,config:this.syncConfig,lastSync:Object.fromEntries(this.lastSync),errorCount:Object.fromEntries(this.errorCount),cacheSize:this.cache.size,activeSyncs:Array.from(this.syncIntervals.keys())}}getCacheStatus(){const e={};for(const[s,n]of this.cache)e[s]={size:JSON.stringify(n).length,lastUpdated:this.lastSync.get(s)||null,hasData:n!=null};return e}reset(){this.stopDataSync(),this.cache.clear(),this.lastSync.clear(),this.errorCount.clear(),this.subscribers.clear(),this.isRunning=!1,this.lastRefreshTime=null,console.log("✅ DataSyncService: 服务状态已重置")}}const kt=new AE,{startDataSync:F8,stopDataSync:V8,syncAllData:j8,getCachedData:$8,setCachedData:H8,clearCache:W8,getSyncStatus:G8,getCacheStatus:K8,reset:Y8,subscribe:z8,unsubscribe:Q8,notify:J8,setCacheWithTimestamp:q8,getCacheWithTimestamp:Z8,checkForNewProjects:X8}=kt,fi=()=>({subscribeProducts:t=>kt.subscribe("products",t),subscribeProduct:(t,e)=>kt.subscribe(`product_${t}`,e),subscribeNewProjects:t=>kt.subscribe("new_projects",t),refresh:()=>kt.syncAllData(),getLastRefreshTime:()=>kt.lastRefreshTime,checkForUpdates:()=>kt.checkForNewProjects(kt.getCachedData("projectData")||[]),startAutoRefresh:t=>kt.startDataSync({projectData:{interval:t||3e4,enabled:!0}}),stopAutoRefresh:()=>kt.stopDataSync()});kt.subscribe.bind(kt),kt.unsubscribe.bind(kt),kt.notify.bind(kt),kt.setCacheWithTimestamp.bind(kt),kt.getCacheWithTimestamp.bind(kt);const EE="/videos/Introvideo.mp4",_E={name:"HomeView",components:{},emits:["notify"],data(){return{products:[],loading:!1,error:null,form:{name:"",email:"",phone:"",subject:"",message:""},isSubmitting:!1,showIntroVideo:!1,introVideoLoading:!0,showIntroSkipButton:!1,introVideoError:!1,introVideoTimer:null,isTransitioning:!1,transitionTimer:null}},computed:{upcomingProjects(){return this.products.filter(t=>t.status==="INCOMING").sort((t,e)=>t.code.localeCompare(e.code))},newListingProject(){return this.upcomingProjects.length>0?this.upcomingProjects[0]:null}},methods:{notify(t){this.$emit("notify",t)},async loadProducts(){this.loading=!0,this.error=null;try{console.log("HomeView: 从数据库加载产品数据...");const t=await ms.getAllProducts();if(t.status===0){const e=t.data||[];if(this.products=e,console.log("HomeView: 成功加载",e.length,"个产品"),console.log("HomeView: Upcoming项目:",this.upcomingProjects),e.length>0){const s=this.upcomingProjects.length;s>0&&this.notify(`成功加载 ${s} 个即将发布的项目`)}this.$nextTick(()=>{console.log("HomeView: UI已更新，项目列表已显示")})}else this.error=t.message||"加载产品数据失败",console.error("HomeView: 加载产品数据失败:",this.error),this.notify("加载产品数据失败: "+this.error)}catch(t){this.error=t.message||"网络错误",console.error("HomeView: 加载产品数据异常:",t),this.notify("加载产品数据异常: "+this.error)}finally{this.loading=!1}},setupDatabaseSync(){const{subscribeProducts:t,subscribeNewProjects:e}=fi();this.unsubscribeProducts=t(s=>{console.log("🔄 HomeView: 收到产品数据更新，共",s.length,"个项目");const n=[...this.products];this.products=s;const r=n.filter(o=>o.status==="INCOMING").length,i=s.filter(o=>o.status==="INCOMING").length;i>r&&(console.log("🆕 HomeView: 发现",i-r,"个新的upcoming项目"),this.notify(`发现 ${i-r} 个新项目`)),this.$nextTick(()=>{console.log("HomeView: 实时更新完成，项目列表已刷新")})}),this.unsubscribeNewProjects=e(s=>{console.log("🆕 HomeView: 收到新项目通知:",s),this.notify(`新增 ${s.length} 个项目`)})},getStatusText(t){return{ACTIVE:"Active",INCOMING:"Upcoming",PERFORMING:"Performing",DEFAULT:"Default"}[t]||"Unknown"},getStatusClass(t){return{ACTIVE:"status-active",INCOMING:"status-upcoming",PERFORMING:"status-performing",DEFAULT:"status-default"}[t]||"status-unknown"},viewProjectDetails(t){this.$router.push(`/detail/${t}`)},addToWatchlist(t){this.notify(`Added ${t} to watchlist`),console.log("Added to watchlist:",t)},refreshListings(){this.notify("Refreshing listings..."),console.log("🔄 Refreshing listings..."),this.loadProducts()},viewAllProjects(){this.$router.push("/projects")},formatNumber(t){return t?new Intl.NumberFormat("en-US").format(t):"0"},handleWalletActivityUpdate(t){console.log("🏠 HomeView: Received wallet activity update:",t)},playIntroVideo(){this.showIntroVideo=!0,this.introVideoLoading=!0,this.introVideoError=!1,this.showIntroSkipButton=!1,this.introVideoTimer=setTimeout(()=>{this.showIntroSkipButton=!0},3e3)},goToProjects(){this.$router.push("/listedprojects")},goToContact(){const t=document.querySelector(".contact-content");t?t.scrollIntoView({behavior:"smooth"}):this.$router.push("/projects")},handleIntroVideoReady(){this.introVideoLoading=!1,console.log("开场视频加载完成")},handleIntroVideoEnd(){console.log("开场视频播放完成"),this.startTransition()},handleIntroVideoError(){console.error("开场视频加载失败"),this.introVideoLoading=!1,this.introVideoError=!0},skipIntroVideo(){console.log("用户跳过开场视频"),this.startTransition()},startTransition(){this.isTransitioning=!0;const t=this.$refs.introVideo;t&&t.pause(),this.transitionTimer=setTimeout(()=>{this.showIntroVideo=!1,setTimeout(()=>{this.isTransitioning=!1,this.resetVideoState()},10)},10)},closeIntroVideo(){this.showIntroVideo=!1,this.introVideoLoading=!1,this.introVideoError=!1,this.showIntroSkipButton=!1,this.isTransitioning=!1,this.introVideoTimer&&(clearTimeout(this.introVideoTimer),this.introVideoTimer=null),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null),this.resetVideoState()},resetVideoState(){const t=this.$refs.introVideo;t&&(t.pause(),t.currentTime=0),this.introVideoLoading=!1,this.introVideoError=!1,this.showIntroSkipButton=!1,this.isTransitioning=!1},async submitForm(){if(this.isSubmitting)return;if(!this.form.name||!this.form.email||!this.form.subject||!this.form.message){alert("Please fill in all required fields");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.form.email)){alert("Please enter a valid email address");return}this.isSubmitting=!0;try{console.log("Submit contact form:",this.form),await new Promise(e=>setTimeout(e,1e3)),alert("Message sent successfully! We will reply to you as soon as possible."),this.form={name:"",email:"",phone:"",subject:"",message:""}}catch(e){console.error("Form submission failed:",e),alert("Message sending failed, please try again later.")}finally{this.isSubmitting=!1}}},async mounted(){console.log("🏠 HomeView: 组件已挂载，开始初始化..."),this.setupDatabaseSync(),console.log("🏠 HomeView: 开始加载产品数据..."),await this.loadProducts(),console.log("🏠 HomeView: Loaded product data:",this.products.length,"projects"),console.log("📋 HomeView: Upcoming项目:",this.upcomingProjects),console.log("🆕 HomeView: New Listing项目:",this.newListingProject),this.newListingProject?(console.log("✅ HomeView: Project Details of New Listing:",{code:this.newListingProject.code,name:this.newListingProject.name,loanAmount:this.newListingProject.loanAmount,targetYield:this.newListingProject.targetYield,loanTerm:this.newListingProject.loanTerm,status:this.newListingProject.status}),this.$nextTick(()=>{console.log("🏠 HomeView: 项目列表已显示在UI中")})):console.log("ℹ️ HomeView: No upcoming project"),this.$root.$on("walletActivityUpdated",this.handleWalletActivityUpdate)},beforeUnmount(){this.unsubscribeProducts&&this.unsubscribeProducts(),this.unsubscribeNewProjects&&this.unsubscribeNewProjects(),this.$root.$off("walletActivityUpdated",this.handleWalletActivityUpdate),this.introVideoTimer&&clearTimeout(this.introVideoTimer),this.transitionTimer&&clearTimeout(this.transitionTimer)}},PE={class:"video-overlay"},SE={key:0,class:"loading-indicator"},kE={key:1,class:"error-message"},CE={class:"grid"},TE={style:{"margin-top":"40px","margin-left":"100px",display:"flex",gap:"20px",width:"500px"}},IE={class:"contact-container"},xE={class:"contact-layout"},RE={class:"contact-form-column"},DE={class:"contact-form-card"},NE={class:"form-group"},LE={class:"form-group"},OE={class:"form-group"},UE={class:"form-group"},BE=["disabled"];function ME(t,e,s,n,r,i){return g(),y(ye,null,[r.showIntroVideo||r.isTransitioning?(g(),y("div",{key:0,class:we(["intro-video-overlay",{"fade-out":r.isTransitioning}])},[a("div",{class:we(["intro-video-container",{"fade-out":r.isTransitioning}])},[a("video",{ref:"introVideo",class:"intro-video",autoplay:"",muted:"",playsinline:"",onEnded:e[0]||(e[0]=(...o)=>i.handleIntroVideoEnd&&i.handleIntroVideoEnd(...o)),onCanplaythrough:e[1]||(e[1]=(...o)=>i.handleIntroVideoReady&&i.handleIntroVideoReady(...o)),onError:e[2]||(e[2]=(...o)=>i.handleIntroVideoError&&i.handleIntroVideoError(...o))},[...e[12]||(e[12]=[a("source",{src:EE,type:"video/mp4"},null,-1),ne(" 您的浏览器不支持视频播放 ",-1)])],544),a("div",PE,[r.introVideoLoading?(g(),y("div",SE,[...e[13]||(e[13]=[a("div",{class:"loading-spinner"},null,-1),a("p",{class:"loading-text"},"正在加载视频...",-1)])])):V("",!0),r.introVideoError?(g(),y("div",kE,[e[14]||(e[14]=a("p",null,"视频加载失败",-1)),a("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...o)=>i.closeIntroVideo&&i.closeIntroVideo(...o))},"关闭")])):V("",!0)]),e[15]||(e[15]=a("div",{class:"brand-info"},[a("div",{class:"logo-container"}),a("h1",{class:"headline"},[ne("我们专注于将房地产资产打造为"),a("br"),ne("投资人偏爱的 RWA 底层资产 ")]),a("p",{class:"brand-subtitle"},"澳洲地产资产上链 · 安全、低风险、高回报的 RWA 投资平台")],-1))],2)],2)):V("",!0),a("section",{class:we(["container hero",{"fade-in":!r.showIntroVideo&&!r.isTransitioning}])},[a("div",CE,[a("div",null,[e[17]||(e[17]=a("h1",{class:"headline"},[ne("我们专注于将房地产资产打造为"),a("br"),ne("投资人偏爱的 RWA 底层资产 ")],-1)),e[18]||(e[18]=a("p",{class:"sub"},"澳洲地产资产上链 · 安全、低风险、高回报的 RWA 投资平台 ",-1)),e[19]||(e[19]=a("p",{class:"foot"},[ne("By continuing, you agree to our Terms and acknowledge our "),a("a",{href:"/src/components/privacypolicy.vue"},"Privacy Policy.")],-1)),a("div",TE,[a("button",{class:"btn-primary",onClick:e[4]||(e[4]=(...o)=>i.goToProjects&&i.goToProjects(...o))},"Invest Now"),a("button",{class:"btn-secondary",onClick:e[5]||(e[5]=(...o)=>i.goToContact&&i.goToContact(...o))},"Contact Us"),a("button",{class:"btn-intro",onClick:e[6]||(e[6]=(...o)=>i.playIntroVideo&&i.playIntroVideo(...o))},[...e[16]||(e[16]=[a("span",{class:"btn-icon"},"🎬",-1),ne(" 观看介绍视频 ",-1)])])])])])],2),a("section",{class:we(["contact-section",{"fade-in":!r.showIntroVideo&&!r.isTransitioning}])},[e[28]||(e[28]=Dt('<div class="contact-bg-decoration" data-v-6ccf5f4c><div class="blockchain-token token-1" data-v-6ccf5f4c></div><div class="blockchain-token token-2" data-v-6ccf5f4c></div><div class="blockchain-token token-3" data-v-6ccf5f4c></div><div class="real-estate-icon building-1" data-v-6ccf5f4c></div><div class="real-estate-icon building-2" data-v-6ccf5f4c></div></div>',1)),a("div",IE,[e[26]||(e[26]=a("header",{class:"contact-header"},[a("h2",{class:"headline"},"Contact Us")],-1)),a("div",xE,[e[25]||(e[25]=Dt('<div class="contact-info-column" data-v-6ccf5f4c><div class="contact-info-card" data-v-6ccf5f4c><div class="contact-item" data-v-6ccf5f4c><div class="contact-icon location-icon" data-v-6ccf5f4c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6ccf5f4c><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="currentColor" data-v-6ccf5f4c></path></svg></div><div class="contact-details" data-v-6ccf5f4c><h4 data-v-6ccf5f4c>Office Address</h4><p data-v-6ccf5f4c>Level 15, 123 George Street<br data-v-6ccf5f4c>Sydney NSW 2000, Australia</p></div></div><div class="contact-item" data-v-6ccf5f4c><div class="contact-icon email-icon" data-v-6ccf5f4c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6ccf5f4c><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" fill="currentColor" data-v-6ccf5f4c></path></svg></div><div class="contact-details" data-v-6ccf5f4c><h4 data-v-6ccf5f4c>Email Address</h4><p data-v-6ccf5f4c>support@mortgagerwa.com<br data-v-6ccf5f4c>business@mortgagerwa.com</p></div></div><div class="contact-item" data-v-6ccf5f4c><div class="contact-icon phone-icon" data-v-6ccf5f4c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6ccf5f4c><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" fill="currentColor" data-v-6ccf5f4c></path></svg></div><div class="contact-details" data-v-6ccf5f4c><h4 data-v-6ccf5f4c>Phone Number</h4><p data-v-6ccf5f4c>+61 2 1234 5678<br data-v-6ccf5f4c>Monday to Friday 9:00-18:00</p></div></div><div class="contact-item" data-v-6ccf5f4c><div class="contact-icon hours-icon" data-v-6ccf5f4c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6ccf5f4c><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" fill="currentColor" data-v-6ccf5f4c></path><path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z" fill="currentColor" data-v-6ccf5f4c></path></svg></div><div class="contact-details" data-v-6ccf5f4c><h4 data-v-6ccf5f4c>Business Hours</h4><p data-v-6ccf5f4c>Monday - Friday: 9:00 AM - 6:00 PM<br data-v-6ccf5f4c>Saturday: 10:00 AM - 2:00 PM</p></div></div></div></div>',1)),a("div",RE,[a("div",DE,[a("form",{onSubmit:e[11]||(e[11]=ue((...o)=>i.submitForm&&i.submitForm(...o),["prevent"])),class:"modern-form"},[a("div",NE,[e[20]||(e[20]=a("label",{for:"contact-name"},"Full Name *",-1)),Se(a("input",{type:"text",id:"contact-name","onUpdate:modelValue":e[7]||(e[7]=o=>r.form.name=o),required:"",placeholder:"Enter your full name"},null,512),[[Ze,r.form.name]])]),a("div",LE,[e[21]||(e[21]=a("label",{for:"contact-email"},"Email *",-1)),Se(a("input",{type:"email",id:"contact-email","onUpdate:modelValue":e[8]||(e[8]=o=>r.form.email=o),required:"",placeholder:"Enter your email address"},null,512),[[Ze,r.form.email]])]),a("div",OE,[e[23]||(e[23]=a("label",{for:"contact-subject"},"Subject *",-1)),Se(a("select",{id:"contact-subject","onUpdate:modelValue":e[9]||(e[9]=o=>r.form.subject=o),required:""},[...e[22]||(e[22]=[Dt('<option value="" data-v-6ccf5f4c>Select a subject</option><option value="investor" data-v-6ccf5f4c>Investment Inquiry</option><option value="asset_holder" data-v-6ccf5f4c>Asset Listing</option><option value="general" data-v-6ccf5f4c>General Question</option><option value="technical" data-v-6ccf5f4c>Technical Support</option><option value="business" data-v-6ccf5f4c>Business Partnership</option><option value="other" data-v-6ccf5f4c>Other</option>',7)])],512),[[ps,r.form.subject]])]),a("div",UE,[e[24]||(e[24]=a("label",{for:"contact-message"},"Message *",-1)),Se(a("textarea",{id:"contact-message","onUpdate:modelValue":e[10]||(e[10]=o=>r.form.message=o),rows:"5",required:"",placeholder:"Tell us how we can help you..."},null,512),[[Ze,r.form.message]])]),a("button",{type:"submit",class:"send-message-btn",disabled:r.isSubmitting},m(r.isSubmitting?"Sending...":"Send Message"),9,BE)],32)])])]),e[27]||(e[27]=Dt('<div class="social-media-section" data-v-6ccf5f4c><h3 data-v-6ccf5f4c>Follow Us</h3><div class="social-links" data-v-6ccf5f4c><a href="#" class="social-link" title="LinkedIn" data-v-6ccf5f4c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6ccf5f4c><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" fill="currentColor" data-v-6ccf5f4c></path></svg></a><a href="#" class="social-link" title="Instagram" data-v-6ccf5f4c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6ccf5f4c><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" fill="currentColor" data-v-6ccf5f4c></path></svg></a><a href="#" class="social-link" title="X (Twitter)" data-v-6ccf5f4c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6ccf5f4c><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" fill="currentColor" data-v-6ccf5f4c></path></svg></a></div></div>',1))])],2)],64)}const pg=Tt(_E,[["render",ME],["__scopeId","data-v-6ccf5f4c"]]),FE={name:"ListedProjectsView",props:{code:{type:String,default:null}},data(){return{filters:{q:"",type:"",status:"",minYield:0,maxYield:20},products:[],currentProduct:null,loading:!0,error:null,refreshInterval:null,lastRefreshTime:null,isDetailView:!1}},async mounted(){this.isDetailView=!!this.code,this.isDetailView?await this.loadSingleProduct():await this.loadProducts(),this.setupDatabaseSync()},beforeUnmount(){this.cleanupDatabaseSync()},watch:{$route(t,e){console.log("🔄 ListedProjectsView: 路由变化",{to:t.params,from:e.params}),t.params.code!==e.params.code&&(this.isDetailView=!!t.params.code,this.isDetailView?this.loadSingleProduct():this.loadProducts())},code:{handler(t,e){console.log("🔄 ListedProjectsView: Props代码变化",{newCode:t,oldCode:e}),this.isDetailView=!!t,this.isDetailView?this.loadSingleProduct():this.loadProducts()},immediate:!0}},methods:{async loadSingleProduct(){try{this.loading=!0,this.error=null,console.log("🔄 ProjectsView: 从数据库加载单个产品数据...",this.code);const t=await ms.getProductByCode(this.code);if(t.status===0){const e=t.data,s={...e,totalOffering:e.total_token,subscribed:e.current_subscribed_token,targetYield:e.target_yield,ltv:e.LTV,annualInterestRate:e.annual_interest_rate,loanAmount:e.loan_amount,valuation:e.valuation,image:e.image||this.getProductImage(e.code),totalOfferingRaw:e.total_token||0,subscribedRaw:e.current_subscribed_token||0};this.currentProduct={code:s.code,name:s.name,image:s.image,subtitle:s.subtitle,type:s.type,risk:s.risk,targetYield:s.targetYield,status:s.status,summary:s.summary,totalOffering:s.totalOffering,subscribed:s.subscribed,totalSubscriptionTokens:s.totalSubscriptionTokens,subscribedTokens:s.subscribedTokens,metrics:{currentElaraPrice:this.calculateTokenPrice(s),collateralPropertyValue:s.valuation||"TBA",rentalIncome:this.calculateRentalIncome(s),targetLoanYield:`${s.targetYield}% p.a.`},loanAmount:s.loanAmount,annualInterestRate:s.annualInterestRate,loanTerm:s.loanTerm,ltv:s.ltv,drawdownDate:s.drawdownDate,earlyRepayment:s.earlyRepayment,repaymentArrangement:s.repaymentArrangement,issuer:s.issuer,pwShareholders:s.pwShareholders,lender:s.lender,borrower:s.borrower,guarantor:s.guarantor,disbursementMethod:s.disbursementMethod,interest:s.interest,earlyRepaymentDetails:s.earlyRepaymentDetails,maturityDate:s.maturityDate,propertyAddress:s.propertyAddress,valuation:s.valuation,securityRank:s.securityRank,defaultInterestRate:s.defaultInterestRate,defaultTriggers:s.defaultTriggers,defaultProcess:s.defaultProcess,issuerToken:s.issuerToken,loanToken:s.loanToken,valuationReport:s.valuationReport,mortgageDeed:s.mortgageDeed},this.lastRefreshTime=new Date,console.log("✅ ProjectsView: 单个产品数据加载成功:",this.currentProduct)}else this.error=t.message||"获取产品数据失败",console.error("❌ ProjectsView: API返回错误:",t)}catch(t){this.error="网络错误，无法获取产品数据",console.error("❌ ProjectsView: 获取单个产品数据失败:",t)}finally{this.loading=!1}},async loadProducts(){try{this.loading=!0,this.error=null,console.log("🔄 从数据库加载产品数据...");const t=await ms.getAllProducts();t.status===0?(this.products=(t.data||[]).map(e=>{const s={id:e.id,code:e.code,name:e.name,status:e.status,totalOffering:e.total_offering_token?`AUD$${e.total_offering_token.toLocaleString()}`:"AUD$0",subscribed:e.subscribe_token?`AUD$${e.subscribe_token.toLocaleString()}`:"AUD$0",totalOfferingRaw:e.total_offering_token||0,subscribedRaw:e.subscribe_token||0,property_location:e.propertyLocation,property_state:e.propertyState,property_type:e.propertyType,property_value:e.propertyValue,property_summary:e.propertySummary,loan_type:e.loanType,loan_product:e.loanProduct,loan_amount:e.loanAmount,loan_purpose:e.loanPurpose,loan_term_months:e.loanTermMonths,lvr:e.lvr,interest_rate:e.interestRate,default_rate:e.defaultRate,commencement_date:e.commencementDate,expiry_date:e.expiryDate,expected_recovery_date:e.expectedRecoveryDate,subtitle:`${e.loanProduct} - ${e.propertyType}`,loanAmount:e.loanAmount?`AUD$${e.loanAmount.toLocaleString()}`:"AUD$0",loanTerm:`${e.loanTermMonths} months`,targetYield:e.interestRate,image:e.image||this.getProductImage(e.code)};return s.metrics={currentElaraPrice:this.calculateTokenPrice(s),collateralPropertyValue:e.propertyValue?`AUD$${e.propertyValue.toLocaleString()}`:"TBA",rentalIncome:this.calculateRentalIncome(s),targetLoanYield:`${e.interestRate}% p.a.`},s}),this.lastRefreshTime=new Date,console.log("✅ 产品数据加载成功，共",this.products.length,"个项目")):(this.error=t.message||"获取产品数据失败",console.error("❌ API返回错误:",t))}catch(t){this.error="网络错误，无法获取产品数据",console.error("❌ 加载产品数据失败:",t)}finally{this.loading=!1}},async refreshProducts(){console.log("🔄 手动刷新产品数据..."),this.isDetailView?await this.loadSingleProduct():await this.loadProducts()},setupDatabaseSync(){const{subscribeProducts:t,subscribeNewProjects:e,getLastRefreshTime:s}=fi();this.unsubscribeProducts=t(r=>{console.log("📡 ProjectsView: 收到产品数据更新，共",r.length,"个项目"),this.products=r.map(i=>({...i,totalOffering:i.total_token,subscribed:i.current_subscribed_token,targetYield:i.target_yield,ltv:i.LTV,annualInterestRate:i.annual_interest_rate,totalOfferingRaw:i.total_token||0,subscribedRaw:i.current_subscribed_token||0,loanAmount:i.loan_amount,valuation:i.valuation,image:i.image||this.getProductImage(i.code)})),this.lastRefreshTime=new Date}),this.unsubscribeNewProjects=e(r=>{console.log("🆕 ProjectsView: 发现",r.length,"个新项目"),this.showNewProjectsNotification(r)});const n=s();n&&(this.lastRefreshTime=n)},cleanupDatabaseSync(){this.unsubscribeProducts&&this.unsubscribeProducts(),this.unsubscribeNewProjects&&this.unsubscribeNewProjects()},showNewProjectsNotification(t){if(t.length>0){const e=t.map(s=>s.name).join(", ");console.log("🆕 发现新项目:",e)}},startAutoRefresh(){this.refreshInterval=setInterval(()=>{console.log("🔄 自动刷新产品数据..."),this.loadProducts()},3e4)},stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null,console.log("⏹️ 停止自动刷新"))},formatCurrency(t){if(!t)return null;const e=parseFloat(t);return isNaN(e)?t:`AUD$${e.toLocaleString()}`},resetFilters(){this.filters={q:"",type:"",risk:"",status:"",minYield:0,maxYield:20}},onFilterChange(){console.log("筛选器变化:",this.filters),this.$forceUpdate()},openDetail(t){const e=this.products.find(s=>s.code===t);try{sessionStorage.setItem("lastProduct",JSON.stringify(e))}catch{}this.$router.push({name:"detail",params:{code:t}})},openTrade(t){const e=this.isDetailView?this.currentProduct:this.products.find(s=>s.code===t);try{sessionStorage.setItem("lastProduct",JSON.stringify(e))}catch{}this.$router.push({name:"tradeProject",params:{code:t}})},getProgressPercentage(t){if(!t)return 0;const e=t.totalOfferingRaw||0,s=t.subscribedRaw||0;if(e===0)return 0;const n=s/e*100;return Math.min(Math.round(n),100)},getStatusText(t){return{INCOMING:"Incoming",ACTIVE:"Active",PERFORMING:"Performing",DEFAULT:"Default",COMPLETED:"Completed"}[t]||"Unknown"},joinWaitlist(t){this.addToWatchlist(t)},registerInterest(t){this.addToWatchlist(t)},addToWatchlist(t){try{let e=[];const s=localStorage.getItem("projectWatchlist");if(s&&(e=JSON.parse(s)),e.includes(t)){alert("This Project is already in your watchlist!");return}e.push(t),localStorage.setItem("projectWatchlist",JSON.stringify(e));const n=this.products.find(r=>r.code===t);alert(`Added ${n.name} to your watchlist!`),console.log("Added to watchlist:",t)}catch(e){console.error("❌ Projects: Failed to add to watchlist:",e),alert("Failed to add to watchlist, please try again")}},formatTime(t){if(!t)return"";const s=new Date-t,n=Math.floor(s/6e4);if(n<1)return"Just now";if(n<60)return`${n} minutes ago`;const r=Math.floor(n/60);return r<24?`${r} hours ago`:`${Math.floor(r/24)} days ago`},getProductImage(t){return{RWA001:"/pics/TYMU.png",RWA002:"/pics/SQNB.png",RWA003:"/pics/LZYT.png",YYD:"/pics/YYD.png",COMP:"/pics/TYMU.png"}[t]||"/pics/TYMU.png"},calculateTokenPrice(t){return`AUD$${(1*((t.targetYield||6)/6)).toFixed(2)}`},calculateRentalIncome(t){if(!t.valuation)return"TBA";const e=t.valuation.replace(/[AUD$,]/g,""),s=parseFloat(e),n=(t.targetYield||6)/12/100;return`AUD$${(s*n).toLocaleString("en-AU",{maximumFractionDigits:0})} / month`},getSubscriptionProgress(t){if(!t)return 0;const e=t.totalOfferingRaw||0,s=t.subscribedRaw||0;if(e===0)return 0;const n=s/e*100;return Math.round(n*100)/100},formatNumber(t){if(!t)return"0";const e=parseFloat(t);return isNaN(e)?t:e.toLocaleString()}},computed:{filteredProducts(){const t=this.filters.q.trim().toLowerCase();return this.products.filter(e=>{if(e.status!=="ACTIVE")return!1;const s=!t||e.code.toLowerCase().includes(t)||(e.name||"").toLowerCase().includes(t)||(e.subtitle||"").toLowerCase().includes(t),n=!this.filters.type||e.property_type===this.filters.type,r=!this.filters.status||e.status===this.filters.status,i=parseFloat(e.targetYield)||0,o=i>=this.filters.minYield&&i<=this.filters.maxYield;return s&&n&&r&&o}).sort((e,s)=>e.code.localeCompare(s.code))},hasActiveFilters(){return this.filters.q.trim()!==""||this.filters.type!==""||this.filters.status!==""||this.filters.minYield>0||this.filters.maxYield<20},projectData(){const t=this.project;if(t)return console.log("TradeProjectView: Retrieve project data from database:",t),{code:t.code,name:t.name,image:t.image||this.getProductImage(t.code),subtitle:t.subtitle,type:t.type,risk:t.risk,targetYield:t.targetYield,status:t.status,summary:t.summary,totalOffering:t.totalOffering,subscribed:t.subscribed,totalSubscriptionTokens:t.totalSubscriptionTokens,subscribedTokens:t.subscribedTokens,metrics:{currentElaraPrice:this.calculateTokenPrice(t),collateralPropertyValue:t.valuation||"TBA",rentalIncome:this.calculateRentalIncome(t),targetLoanYield:`${t.targetYield}% p.a.`},loanAmount:t.loanAmount,annualInterestRate:t.annualInterestRate,loanTerm:t.loanTerm,ltv:t.ltv,drawdownDate:t.drawdownDate,earlyRepayment:t.earlyRepayment,repaymentArrangement:t.repaymentArrangement,issuer:t.issuer,pwShareholders:t.pwShareholders,lender:t.lender,borrower:t.borrower,guarantor:t.guarantor,disbursementMethod:t.disbursementMethod,interest:t.interest,earlyRepaymentDetails:t.earlyRepaymentDetails,maturityDate:t.maturityDate,propertyAddress:t.propertyAddress,valuation:t.valuation,securityRank:t.securityRank,defaultInterestRate:t.defaultInterestRate,defaultTriggers:t.defaultTriggers,defaultProcess:t.defaultProcess,issuerToken:t.issuerToken,loanToken:t.loanToken,valuationReport:t.valuationReport,mortgageDeed:t.mortgageDeed}}}},VE={class:"container"},jE={class:"project-container"},$E={class:"doc-header"},HE={class:"headline"},WE={class:"subline"},GE={key:0,class:"filters",style:{display:"flex",gap:"10px","flex-wrap":"wrap","align-items":"center",margin:"8px 0 6px"}},KE={class:"yield-range-filter"},YE={class:"yield-range-container"},zE={class:"yield-range-slider"},QE=["max"],JE=["min"],qE={class:"yield-range-display"},ZE={key:1,class:"filter-stats",style:{margin:"8px 0",color:"var(--muted)","font-size":"14px",display:"flex","justify-content":"space-between","align-items":"center","flex-wrap":"wrap",gap:"8px"}},XE={key:0,style:{"margin-left":"12px"}},e_={style:{display:"flex","align-items":"center",gap:"12px"}},t_={key:0,style:{"font-size":"12px",color:"#6b7280"}},s_=["disabled"],n_={key:2,class:"loading-container"},r_={key:3,class:"error-container"},i_={class:"error-message"},o_={key:4,class:"doc-list"},a_={class:"doc-card","aria-labelledby":"'title-' + currentProduct.code"},l_={class:"main-content"},c_={class:"left-content"},u_={class:"title-section"},d_={class:"title-header"},f_=["id"],h_={class:"doc-code"},p_={class:"doc-name"},m_={class:"doc-subtitle"},g_={class:"project-basic-info"},y_={class:"info-item"},v_={class:"info-value"},b_={class:"progress-actions-row"},w_={class:"progress-container"},A_={class:"progress-bar"},E_={class:"progress-text"},__={class:"doc-actions"},P_={key:5,class:"doc-list"},S_={class:"pf-project-header"},k_=["src","alt"],C_={class:"pf-project-info"},T_=["id"],I_={class:"pf-project-metrics"},x_={class:"pf-project-metric"},R_={class:"pf-metric-value"},D_={class:"pf-project-metric"},N_={class:"pf-metric-value",style:{color:"#16a34a"}},L_={class:"pf-project-metric"},O_={class:"pf-metric-value"},U_={class:"pf-investment-progress"},B_={class:"pf-progress-metrics"},M_={class:"pf-progress-metric"},F_={class:"pf-progress-value"},V_={class:"pf-progress-metric"},j_={class:"pf-progress-value"},$_={class:"pf-progress-bar-container"},H_={class:"pf-progress-bar"},W_={class:"pf-progress-text"},G_={class:"pf-project-actions"},K_=["onClick"],Y_=["onClick"],z_=["onClick"],Q_=["onClick"],J_=["onClick"],q_=["onClick"],Z_=["onClick"],X_=["onClick"],eP=["onClick"];function tP(t,e,s,n,r,i){return g(),y("div",VE,[a("div",jE,[a("header",$E,[a("h1",HE,[r.isDetailView&&r.currentProduct?(g(),y(ye,{key:0},[ne(m(r.currentProduct.name)+" - "+m(r.currentProduct.code),1)],64)):(g(),y(ye,{key:1},[ne(" Active Property Loans ")],64))]),a("p",WE,[r.isDetailView&&r.currentProduct?(g(),y(ye,{key:0},[ne(m(r.currentProduct.subtitle),1)],64)):V("",!0)])]),r.isDetailView?V("",!0):(g(),y("div",GE,[Se(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.filters.q=o),class:"input",placeholder:"Search code/name/subtitle",style:{"max-width":"240px",height:"38px"}},null,512),[[Ze,r.filters.q]]),Se(a("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.filters.type=o),class:"input",style:{"max-width":"160px",height:"38px"}},[...e[19]||(e[19]=[Dt('<option value="" data-v-b666a942>All Types</option><option value="Single House" data-v-b666a942>Single House</option><option value="Commercial Building" data-v-b666a942>Commercial Building</option><option value="Unit Development" data-v-b666a942>Unit Development</option><option value="Residential Land" data-v-b666a942>Residential Land</option><option value="Mixed Use" data-v-b666a942>Mixed Use</option><option value="Retail" data-v-b666a942>Retail</option><option value="Office" data-v-b666a942>Office</option><option value="Industrial" data-v-b666a942>Industrial</option><option value="Student Accommodation" data-v-b666a942>Student Accommodation</option>',10)])],512),[[ps,r.filters.type]]),a("div",KE,[e[20]||(e[20]=a("label",{class:"yield-range-label"},"EST. YIELD (IRR) Range:",-1)),a("div",YE,[a("div",zE,[Se(a("input",{type:"range","onUpdate:modelValue":e[2]||(e[2]=o=>r.filters.minYield=o),min:0,max:r.filters.maxYield-.5,step:.5,onInput:e[3]||(e[3]=(...o)=>i.onFilterChange&&i.onFilterChange(...o)),class:"yield-slider yield-slider-min"},null,40,QE),[[Ze,r.filters.minYield,void 0,{number:!0}]]),Se(a("input",{type:"range","onUpdate:modelValue":e[4]||(e[4]=o=>r.filters.maxYield=o),min:r.filters.minYield+.5,max:20,step:.5,onInput:e[5]||(e[5]=(...o)=>i.onFilterChange&&i.onFilterChange(...o)),class:"yield-slider yield-slider-max"},null,40,JE),[[Ze,r.filters.maxYield,void 0,{number:!0}]])]),a("div",qE,m(r.filters.minYield)+"% - "+m(r.filters.maxYield)+"% ",1)])]),a("button",{class:"btn",onClick:e[6]||(e[6]=(...o)=>i.resetFilters&&i.resetFilters(...o))},"Reset")])),r.isDetailView?V("",!0):(g(),y("div",ZE,[a("div",null,[ne(" Showing "+m(i.filteredProducts.length)+" of "+m(r.products.length)+" projects ",1),i.hasActiveFilters?(g(),y("span",XE,[a("button",{onClick:e[7]||(e[7]=(...o)=>i.resetFilters&&i.resetFilters(...o)),style:{background:"none",border:"none",color:"#3b82f6","text-decoration":"underline",cursor:"pointer"}}," Clear filters ")])):V("",!0)]),a("div",e_,[r.lastRefreshTime?(g(),y("span",t_," Last Updated: "+m(i.formatTime(r.lastRefreshTime)),1)):V("",!0),a("button",{onClick:e[8]||(e[8]=(...o)=>i.refreshProducts&&i.refreshProducts(...o)),disabled:r.loading,class:"refresh-btn",style:Rt([{background:"#374151",border:"1px solid #4b5563",color:"#ffffff",padding:"6px 12px","border-radius":"6px","font-size":"12px",cursor:"pointer",transition:"all 0.2s ease"},{opacity:r.loading?.6:1,cursor:r.loading?"not-allowed":"pointer"}])},m(r.loading?"Refreshing...":"Refresh Data"),13,s_)])])),r.loading?(g(),y("div",n_,[...e[21]||(e[21]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Loading product data...",-1)])])):r.error?(g(),y("div",r_,[a("div",i_,[e[22]||(e[22]=a("h3",null,"Load Failed",-1)),a("button",{onClick:e[9]||(e[9]=(...o)=>i.loadProducts&&i.loadProducts(...o)),class:"btn retry-btn"},"Retry")])])):r.isDetailView&&r.currentProduct?(g(),y("section",o_,[a("article",a_,[a("div",l_,[a("div",c_,[a("section",u_,[a("div",d_,[a("h2",{id:"title-"+r.currentProduct.code},[a("span",h_,m(r.currentProduct.code),1),a("span",p_,m(r.currentProduct.name),1)],8,f_),a("div",{class:we(["status-badge","status-"+r.currentProduct.status])},m(i.getStatusText(r.currentProduct.status)),3)]),a("p",m_,m(r.currentProduct.subtitle),1),a("div",g_,[a("div",y_,[e[23]||(e[23]=a("span",{class:"info-label"},"Type:",-1)),a("span",v_,m(r.currentProduct.type),1)])])]),e[24]||(e[24]=a("hr",{class:"sep"},null,-1))])]),a("div",b_,[a("div",w_,[a("div",A_,[a("div",{class:"progress-fill",style:Rt({width:i.getProgressPercentage(r.currentProduct)+"%"})},null,4),a("div",{class:"progress-empty",style:Rt({width:100-i.getProgressPercentage(r.currentProduct)+"%"})},null,4)]),a("span",E_,m(i.getProgressPercentage(r.currentProduct))+"%",1)]),a("div",__,[r.currentProduct.status==="ACTIVE"?(g(),y(ye,{key:0},[a("a",{href:"#",class:"btn small orange",onClick:e[10]||(e[10]=ue(o=>i.openTrade(r.currentProduct.code),["prevent"]))},"Buy"),a("a",{href:"#",class:"btn small",onClick:e[11]||(e[11]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"Detail")],64)):r.currentProduct.status==="INCOMING"?(g(),y(ye,{key:1},[a("a",{href:"#",class:"btn small",onClick:e[12]||(e[12]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"Preview"),a("a",{href:"#",class:"btn small",onClick:e[13]||(e[13]=ue(o=>i.joinWaitlist(r.currentProduct.code),["prevent"]))},"Join Waitlist")],64)):r.currentProduct.status==="PERFORMING"?(g(),y("a",{key:2,href:"#",class:"btn small",onClick:e[14]||(e[14]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):r.currentProduct.status==="COMPLETED"?(g(),y("a",{key:3,href:"#",class:"btn small",onClick:e[15]||(e[15]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):r.currentProduct.status==="COMPLETE"?(g(),y("a",{key:4,href:"#",class:"btn small",onClick:e[16]||(e[16]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):r.currentProduct.status==="DEFAULT"?(g(),y("a",{key:5,href:"#",class:"btn small",onClick:e[17]||(e[17]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):(g(),y("a",{key:6,href:"#",class:"btn small",onClick:e[18]||(e[18]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"Learn More"))])])])])):(g(),y("section",P_,[(g(!0),y(ye,null,At(i.filteredProducts,o=>(g(),y("article",{key:o.code,class:"pf-project-card","aria-labelledby":"'title-' + p.code"},[a("div",S_,[a("img",{src:o.image,class:"pf-project-image",alt:o.code},null,8,k_),a("div",C_,[a("h4",{id:"title-"+o.code},m(o.code)+" • "+m(o.name),9,T_),a("p",null,m(o.subtitle),1)]),a("div",{class:we(["status-badge","status-"+o.status])},m(i.getStatusText(o.status)),3)]),a("div",I_,[a("div",x_,[e[25]||(e[25]=a("span",{class:"pf-metric-label"},"LOAN SIZE",-1)),a("span",R_,m(o.loanAmount),1)]),a("div",D_,[e[26]||(e[26]=a("span",{class:"pf-metric-label"},"EST. YIELD (IRR)",-1)),a("span",N_,m(o.metrics.targetLoanYield),1)]),a("div",L_,[e[27]||(e[27]=a("span",{class:"pf-metric-label"},"TERM",-1)),a("span",O_,m(o.loanTerm),1)])]),a("div",U_,[a("div",B_,[a("div",M_,[e[28]||(e[28]=a("span",{class:"pf-progress-label"},"SUBSCRIBED",-1)),a("span",F_,m(i.formatNumber(o.subscribed||0)),1)]),a("div",V_,[e[29]||(e[29]=a("span",{class:"pf-progress-label"},"TOTAL OFFERING",-1)),a("span",j_,m(i.formatNumber(o.totalOffering||0)),1)])]),a("div",$_,[a("div",H_,[a("div",{class:"pf-progress-fill",style:Rt({width:i.getSubscriptionProgress(o)+"%"})},null,4)]),a("div",W_,m(i.getSubscriptionProgress(o))+"% Subscribed",1)])]),a("div",G_,[o.status==="ACTIVE"?(g(),y(ye,{key:0},[a("button",{class:"pf-project-btn pf-project-btn-secondary",onClick:l=>i.openTrade(o.code)},"BUY",8,K_),a("button",{class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,Y_)],64)):o.status==="INCOMING"?(g(),y(ye,{key:1},[a("button",{class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,z_),a("button",{class:"pf-project-btn",onClick:l=>i.joinWaitlist(o.code)},"ADD TO WATCHLIST",8,Q_)],64)):o.status==="PERFORMING"?(g(),y("button",{key:2,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,J_)):o.status==="COMPLETED"?(g(),y("button",{key:3,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,q_)):o.status==="COMPLETE"?(g(),y("button",{key:4,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,Z_)):o.status==="DEFAULT"?(g(),y("button",{key:5,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,X_)):(g(),y("button",{key:6,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,eP))])]))),128))]))])])}const kc=Tt(FE,[["render",tP],["__scopeId","data-v-b666a942"]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ur=typeof document<"u";function mg(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function sP(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&mg(t.default)}const Je=Object.assign;function Ol(t,e){const s={};for(const n in e){const r=e[n];s[n]=Ws(r)?r.map(t):t(r)}return s}const Fi=()=>{},Ws=Array.isArray,gg=/#/g,nP=/&/g,rP=/\//g,iP=/=/g,oP=/\?/g,yg=/\+/g,aP=/%5B/g,lP=/%5D/g,vg=/%5E/g,cP=/%60/g,bg=/%7B/g,uP=/%7C/g,wg=/%7D/g,dP=/%20/g;function wu(t){return encodeURI(""+t).replace(uP,"|").replace(aP,"[").replace(lP,"]")}function fP(t){return wu(t).replace(bg,"{").replace(wg,"}").replace(vg,"^")}function Cc(t){return wu(t).replace(yg,"%2B").replace(dP,"+").replace(gg,"%23").replace(nP,"%26").replace(cP,"`").replace(bg,"{").replace(wg,"}").replace(vg,"^")}function hP(t){return Cc(t).replace(iP,"%3D")}function pP(t){return wu(t).replace(gg,"%23").replace(oP,"%3F")}function mP(t){return t==null?"":pP(t).replace(rP,"%2F")}function io(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const gP=/\/$/,yP=t=>t.replace(gP,"");function Ul(t,e,s="/"){let n,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(n=e.slice(0,c),i=e.slice(c+1,l>-1?l:e.length),r=t(i)),l>-1&&(n=n||e.slice(0,l),o=e.slice(l,e.length)),n=AP(n??e,s),{fullPath:n+(i&&"?")+i+o,path:n,query:r,hash:io(o)}}function vP(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function Sf(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function bP(t,e,s){const n=e.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&oi(e.matched[n],s.matched[r])&&Ag(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function oi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ag(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!wP(t[s],e[s]))return!1;return!0}function wP(t,e){return Ws(t)?kf(t,e):Ws(e)?kf(e,t):t===e}function kf(t,e){return Ws(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function AP(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let i=s.length-1,o,l;for(o=0;o<n.length;o++)if(l=n[o],l!==".")if(l==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(o).join("/")}const On={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var oo;(function(t){t.pop="pop",t.push="push"})(oo||(oo={}));var Vi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Vi||(Vi={}));function EP(t){if(!t)if(Ur){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),yP(t)}const _P=/^[^#]+#/;function PP(t,e){return t.replace(_P,"#")+e}function SP(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const qa=()=>({left:window.scrollX,top:window.scrollY});function kP(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;e=SP(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Cf(t,e){return(history.state?history.state.position-e:-1)+t}const Tc=new Map;function CP(t,e){Tc.set(t,e)}function TP(t){const e=Tc.get(t);return Tc.delete(t),e}let IP=()=>location.protocol+"//"+location.host;function Eg(t,e){const{pathname:s,search:n,hash:r}=e,i=t.indexOf("#");if(i>-1){let l=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(l);return c[0]!=="/"&&(c="/"+c),Sf(c,"")}return Sf(s,t)+n+r}function xP(t,e,s,n){let r=[],i=[],o=null;const l=({state:h})=>{const p=Eg(t,location),P=s.value,w=e.value;let k=0;if(h){if(s.value=p,e.value=h,o&&o===P){o=null;return}k=w?h.position-w.position:0}else n(p);r.forEach(T=>{T(s.value,P,{delta:k,type:oo.pop,direction:k?k>0?Vi.forward:Vi.back:Vi.unknown})})};function c(){o=s.value}function u(h){r.push(h);const p=()=>{const P=r.indexOf(h);P>-1&&r.splice(P,1)};return i.push(p),p}function d(){const{history:h}=window;h.state&&h.replaceState(Je({},h.state,{scroll:qa()}),"")}function f(){for(const h of i)h();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function Tf(t,e,s,n=!1,r=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:r?qa():null}}function RP(t){const{history:e,location:s}=window,n={value:Eg(t,s)},r={value:e.state};r.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,d){const f=t.indexOf("#"),h=f>-1?(s.host&&document.querySelector("base")?t:t.slice(f))+c:IP()+t+c;try{e[d?"replaceState":"pushState"](u,"",h),r.value=u}catch(p){console.error(p),s[d?"replace":"assign"](h)}}function o(c,u){const d=Je({},e.state,Tf(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,d,!0),n.value=c}function l(c,u){const d=Je({},r.value,e.state,{forward:c,scroll:qa()});i(d.current,d,!0);const f=Je({},Tf(n.value,c,null),{position:d.position+1},u);i(c,f,!1),n.value=c}return{location:n,state:r,push:l,replace:o}}function DP(t){t=EP(t);const e=RP(t),s=xP(t,e.state,e.location,e.replace);function n(i,o=!0){o||s.pauseListeners(),history.go(i)}const r=Je({location:"",base:t,go:n,createHref:PP.bind(null,t)},e,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function NP(t){return typeof t=="string"||t&&typeof t=="object"}function _g(t){return typeof t=="string"||typeof t=="symbol"}const Pg=Symbol("");var If;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(If||(If={}));function ai(t,e){return Je(new Error,{type:t,[Pg]:!0},e)}function an(t,e){return t instanceof Error&&Pg in t&&(e==null||!!(t.type&e))}const xf="[^/]+?",LP={sensitive:!1,strict:!1,start:!0,end:!0},OP=/[.+*?^${}()[\]/\\]/g;function UP(t,e){const s=Je({},LP,e),n=[];let r=s.start?"^":"";const i=[];for(const u of t){const d=u.length?[]:[90];s.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const h=u[f];let p=40+(s.sensitive?.25:0);if(h.type===0)f||(r+="/"),r+=h.value.replace(OP,"\\$&"),p+=40;else if(h.type===1){const{value:P,repeatable:w,optional:k,regexp:T}=h;i.push({name:P,repeatable:w,optional:k});const N=T||xf;if(N!==xf){p+=10;try{new RegExp(`(${N})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${P}" (${N}): `+R.message)}}let L=w?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;f||(L=k&&u.length<2?`(?:/${L})`:"/"+L),k&&(L+="?"),r+=L,p+=20,k&&(p+=-8),w&&(p+=-20),N===".*"&&(p+=-50)}d.push(p)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,s.sensitive?"":"i");function l(u){const d=u.match(o),f={};if(!d)return null;for(let h=1;h<d.length;h++){const p=d[h]||"",P=i[h-1];f[P.name]=p&&P.repeatable?p.split("/"):p}return f}function c(u){let d="",f=!1;for(const h of t){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const p of h)if(p.type===0)d+=p.value;else if(p.type===1){const{value:P,repeatable:w,optional:k}=p,T=P in u?u[P]:"";if(Ws(T)&&!w)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const N=Ws(T)?T.join("/"):T;if(!N)if(k)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${P}"`);d+=N}}return d||"/"}return{re:o,score:n,keys:i,parse:l,stringify:c}}function BP(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Sg(t,e){let s=0;const n=t.score,r=e.score;for(;s<n.length&&s<r.length;){const i=BP(n[s],r[s]);if(i)return i;s++}if(Math.abs(r.length-n.length)===1){if(Rf(n))return 1;if(Rf(r))return-1}return r.length-n.length}function Rf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const MP={type:0,value:""},FP=/[a-zA-Z0-9_]/;function VP(t){if(!t)return[[]];if(t==="/")return[[MP]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${u}": ${p}`)}let s=0,n=s;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",d="";function f(){u&&(s===0?i.push({type:0,value:u}):s===1||s===2||s===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function h(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),s=1):h();break;case 4:h(),s=n;break;case 1:c==="("?s=2:FP.test(c)?h():(f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:s=3:d+=c;break;case 3:f(),s=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}function jP(t,e,s){const n=UP(VP(t.path),s),r=Je(n,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function $P(t,e){const s=[],n=new Map;e=Of({strict:!1,end:!0,sensitive:!1},e);function r(f){return n.get(f)}function i(f,h,p){const P=!p,w=Nf(f);w.aliasOf=p&&p.record;const k=Of(e,f),T=[w];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const G of R)T.push(Nf(Je({},w,{components:p?p.record.components:w.components,path:G,aliasOf:p?p.record:w})))}let N,L;for(const R of T){const{path:G}=R;if(h&&G[0]!=="/"){const W=h.record.path,j=W[W.length-1]==="/"?"":"/";R.path=h.record.path+(G&&j+G)}if(N=jP(R,h,k),p?p.alias.push(N):(L=L||N,L!==N&&L.alias.push(N),P&&f.name&&!Lf(N)&&o(f.name)),kg(N)&&c(N),w.children){const W=w.children;for(let j=0;j<W.length;j++)i(W[j],N,p&&p.children[j])}p=p||N}return L?()=>{o(L)}:Fi}function o(f){if(_g(f)){const h=n.get(f);h&&(n.delete(f),s.splice(s.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=s.indexOf(f);h>-1&&(s.splice(h,1),f.record.name&&n.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return s}function c(f){const h=GP(f,s);s.splice(h,0,f),f.record.name&&!Lf(f)&&n.set(f.record.name,f)}function u(f,h){let p,P={},w,k;if("name"in f&&f.name){if(p=n.get(f.name),!p)throw ai(1,{location:f});k=p.record.name,P=Je(Df(h.params,p.keys.filter(L=>!L.optional).concat(p.parent?p.parent.keys.filter(L=>L.optional):[]).map(L=>L.name)),f.params&&Df(f.params,p.keys.map(L=>L.name))),w=p.stringify(P)}else if(f.path!=null)w=f.path,p=s.find(L=>L.re.test(w)),p&&(P=p.parse(w),k=p.record.name);else{if(p=h.name?n.get(h.name):s.find(L=>L.re.test(h.path)),!p)throw ai(1,{location:f,currentLocation:h});k=p.record.name,P=Je({},h.params,f.params),w=p.stringify(P)}const T=[];let N=p;for(;N;)T.unshift(N.record),N=N.parent;return{name:k,path:w,params:P,matched:T,meta:WP(T)}}t.forEach(f=>i(f));function d(){s.length=0,n.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function Df(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function Nf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:HP(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function HP(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function Lf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function WP(t){return t.reduce((e,s)=>Je(e,s.meta),{})}function Of(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}function GP(t,e){let s=0,n=e.length;for(;s!==n;){const i=s+n>>1;Sg(t,e[i])<0?n=i:s=i+1}const r=KP(t);return r&&(n=e.lastIndexOf(r,n-1)),n}function KP(t){let e=t;for(;e=e.parent;)if(kg(e)&&Sg(t,e)===0)return e}function kg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function YP(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(yg," "),o=i.indexOf("="),l=io(o<0?i:i.slice(0,o)),c=o<0?null:io(i.slice(o+1));if(l in e){let u=e[l];Ws(u)||(u=e[l]=[u]),u.push(c)}else e[l]=c}return e}function Uf(t){let e="";for(let s in t){const n=t[s];if(s=hP(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(Ws(n)?n.map(i=>i&&Cc(i)):[n&&Cc(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+s,i!=null&&(e+="="+i))})}return e}function zP(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=Ws(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const QP=Symbol(""),Bf=Symbol(""),Za=Symbol(""),Cg=Symbol(""),Ic=Symbol("");function Ei(){let t=[];function e(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Fn(t,e,s,n,r,i=o=>o()){const o=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=h=>{h===!1?c(ai(4,{from:s,to:e})):h instanceof Error?c(h):NP(h)?c(ai(2,{from:e,to:h})):(o&&n.enterCallbacks[r]===o&&typeof h=="function"&&o.push(h),l())},d=i(()=>t.call(n&&n.instances[r],e,s,u));let f=Promise.resolve(d);t.length<3&&(f=f.then(u)),f.catch(h=>c(h))})}function Bl(t,e,s,n,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(mg(c)){const d=(c.__vccOpts||c)[e];d&&i.push(Fn(d,s,n,o,l,r))}else{let u=c();i.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=sP(d)?d.default:d;o.mods[l]=d,o.components[l]=f;const p=(f.__vccOpts||f)[e];return p&&Fn(p,s,n,o,l,r)()}))}}return i}function Mf(t){const e=tn(Za),s=tn(Cg),n=Ae(()=>{const c=Ke(t.to);return e.resolve(c)}),r=Ae(()=>{const{matched:c}=n.value,{length:u}=c,d=c[u-1],f=s.matched;if(!d||!f.length)return-1;const h=f.findIndex(oi.bind(null,d));if(h>-1)return h;const p=Ff(c[u-2]);return u>1&&Ff(d)===p&&f[f.length-1].path!==p?f.findIndex(oi.bind(null,c[u-2])):h}),i=Ae(()=>r.value>-1&&eS(s.params,n.value.params)),o=Ae(()=>r.value>-1&&r.value===s.matched.length-1&&Ag(s.params,n.value.params));function l(c={}){if(XP(c)){const u=e[Ke(t.replace)?"replace":"push"](Ke(t.to)).catch(Fi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:Ae(()=>n.value.href),isActive:i,isExactActive:o,navigate:l}}function JP(t){return t.length===1?t[0]:t}const qP=Th({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Mf,setup(t,{slots:e}){const s=co(Mf(t)),{options:n}=tn(Za),r=Ae(()=>({[Vf(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Vf(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&JP(e.default(s));return t.custom?i:Yc("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},i)}}}),ZP=qP;function XP(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function eS(t,e){for(const s in e){const n=e[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!Ws(r)||r.length!==n.length||n.some((i,o)=>i!==r[o]))return!1}return!0}function Ff(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Vf=(t,e,s)=>t??e??s,tS=Th({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=tn(Ic),r=Ae(()=>t.route||n.value),i=tn(Bf,0),o=Ae(()=>{let u=Ke(i);const{matched:d}=r.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),l=Ae(()=>r.value.matched[o.value]);Fo(Bf,Ae(()=>o.value+1)),Fo(QP,l),Fo(Ic,r);const c=fe();return qs(()=>[c.value,l.value,t.name],([u,d,f],[h,p,P])=>{d&&(d.instances[f]=u,p&&p!==d&&u&&u===h&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),u&&d&&(!p||!oi(d,p)||!h)&&(d.enterCallbacks[f]||[]).forEach(w=>w(u))},{flush:"post"}),()=>{const u=r.value,d=t.name,f=l.value,h=f&&f.components[d];if(!h)return jf(s.default,{Component:h,route:u});const p=f.props[d],P=p?p===!0?u.params:typeof p=="function"?p(u):p:null,k=Yc(h,Je({},P,e,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return jf(s.default,{Component:k,route:u})||k}}});function jf(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const sS=tS;function nS(t){const e=$P(t.routes,t),s=t.parseQuery||YP,n=t.stringifyQuery||Uf,r=t.history,i=Ei(),o=Ei(),l=Ei(),c=P0(On);let u=On;Ur&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ol.bind(null,O=>""+O),f=Ol.bind(null,mP),h=Ol.bind(null,io);function p(O,te){let Z,le;return _g(O)?(Z=e.getRecordMatcher(O),le=te):le=O,e.addRoute(le,Z)}function P(O){const te=e.getRecordMatcher(O);te&&e.removeRoute(te)}function w(){return e.getRoutes().map(O=>O.record)}function k(O){return!!e.getRecordMatcher(O)}function T(O,te){if(te=Je({},te||c.value),typeof O=="string"){const I=Ul(s,O,te.path),U=e.resolve({path:I.path},te),F=r.createHref(I.fullPath);return Je(I,U,{params:h(U.params),hash:io(I.hash),redirectedFrom:void 0,href:F})}let Z;if(O.path!=null)Z=Je({},O,{path:Ul(s,O.path,te.path).path});else{const I=Je({},O.params);for(const U in I)I[U]==null&&delete I[U];Z=Je({},O,{params:f(I)}),te.params=f(te.params)}const le=e.resolve(Z,te),xe=O.hash||"";le.params=d(h(le.params));const v=vP(n,Je({},O,{hash:fP(xe),path:le.path})),_=r.createHref(v);return Je({fullPath:v,hash:xe,query:n===Uf?zP(O.query):O.query||{}},le,{redirectedFrom:void 0,href:_})}function N(O){return typeof O=="string"?Ul(s,O,c.value.path):Je({},O)}function L(O,te){if(u!==O)return ai(8,{from:te,to:O})}function R(O){return j(O)}function G(O){return R(Je(N(O),{replace:!0}))}function W(O){const te=O.matched[O.matched.length-1];if(te&&te.redirect){const{redirect:Z}=te;let le=typeof Z=="function"?Z(O):Z;return typeof le=="string"&&(le=le.includes("?")||le.includes("#")?le=N(le):{path:le},le.params={}),Je({query:O.query,hash:O.hash,params:le.path!=null?{}:O.params},le)}}function j(O,te){const Z=u=T(O),le=c.value,xe=O.state,v=O.force,_=O.replace===!0,I=W(Z);if(I)return j(Je(N(I),{state:typeof I=="object"?Je({},xe,I.state):xe,force:v,replace:_}),te||Z);const U=Z;U.redirectedFrom=te;let F;return!v&&bP(n,le,Z)&&(F=ai(16,{to:U,from:le}),je(le,le,!0,!1)),(F?Promise.resolve(F):re(U,le)).catch(B=>an(B)?an(B,2)?B:We(B):me(B,U,le)).then(B=>{if(B){if(an(B,2))return j(Je({replace:_},N(B.to),{state:typeof B.to=="object"?Je({},xe,B.to.state):xe,force:v}),te||U)}else B=H(U,le,!0,_,xe);return ce(U,le,B),B})}function Q(O,te){const Z=L(O,te);return Z?Promise.reject(Z):Promise.resolve()}function J(O){const te=Xe.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(O):O()}function re(O,te){let Z;const[le,xe,v]=rS(O,te);Z=Bl(le.reverse(),"beforeRouteLeave",O,te);for(const I of le)I.leaveGuards.forEach(U=>{Z.push(Fn(U,O,te))});const _=Q.bind(null,O,te);return Z.push(_),st(Z).then(()=>{Z=[];for(const I of i.list())Z.push(Fn(I,O,te));return Z.push(_),st(Z)}).then(()=>{Z=Bl(xe,"beforeRouteUpdate",O,te);for(const I of xe)I.updateGuards.forEach(U=>{Z.push(Fn(U,O,te))});return Z.push(_),st(Z)}).then(()=>{Z=[];for(const I of v)if(I.beforeEnter)if(Ws(I.beforeEnter))for(const U of I.beforeEnter)Z.push(Fn(U,O,te));else Z.push(Fn(I.beforeEnter,O,te));return Z.push(_),st(Z)}).then(()=>(O.matched.forEach(I=>I.enterCallbacks={}),Z=Bl(v,"beforeRouteEnter",O,te,J),Z.push(_),st(Z))).then(()=>{Z=[];for(const I of o.list())Z.push(Fn(I,O,te));return Z.push(_),st(Z)}).catch(I=>an(I,8)?I:Promise.reject(I))}function ce(O,te,Z){l.list().forEach(le=>J(()=>le(O,te,Z)))}function H(O,te,Z,le,xe){const v=L(O,te);if(v)return v;const _=te===On,I=Ur?history.state:{};Z&&(le||_?r.replace(O.fullPath,Je({scroll:_&&I&&I.scroll},xe)):r.push(O.fullPath,xe)),c.value=O,je(O,te,Z,_),We()}let be;function Ce(){be||(be=r.listen((O,te,Z)=>{if(!wt.listening)return;const le=T(O),xe=W(le);if(xe){j(Je(xe,{replace:!0,force:!0}),le).catch(Fi);return}u=le;const v=c.value;Ur&&CP(Cf(v.fullPath,Z.delta),qa()),re(le,v).catch(_=>an(_,12)?_:an(_,2)?(j(Je(N(_.to),{force:!0}),le).then(I=>{an(I,20)&&!Z.delta&&Z.type===oo.pop&&r.go(-1,!1)}).catch(Fi),Promise.reject()):(Z.delta&&r.go(-Z.delta,!1),me(_,le,v))).then(_=>{_=_||H(le,v,!1),_&&(Z.delta&&!an(_,8)?r.go(-Z.delta,!1):Z.type===oo.pop&&an(_,20)&&r.go(-1,!1)),ce(le,v,_)}).catch(Fi)}))}let Y=Ei(),ee=Ei(),ae;function me(O,te,Z){We(O);const le=ee.list();return le.length?le.forEach(xe=>xe(O,te,Z)):console.error(O),Promise.reject(O)}function Ie(){return ae&&c.value!==On?Promise.resolve():new Promise((O,te)=>{Y.add([O,te])})}function We(O){return ae||(ae=!O,Ce(),Y.list().forEach(([te,Z])=>O?Z(O):te()),Y.reset()),O}function je(O,te,Z,le){const{scrollBehavior:xe}=t;if(!Ur||!xe)return Promise.resolve();const v=!Z&&TP(Cf(O.fullPath,0))||(le||!Z)&&history.state&&history.state.scroll||null;return Hi().then(()=>xe(O,te,v)).then(_=>_&&kP(_)).catch(_=>me(_,O,te))}const $e=O=>r.go(O);let St;const Xe=new Set,wt={currentRoute:c,listening:!0,addRoute:p,removeRoute:P,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:w,resolve:T,options:t,push:R,replace:G,go:$e,back:()=>$e(-1),forward:()=>$e(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:ee.add,isReady:Ie,install(O){const te=this;O.component("RouterLink",ZP),O.component("RouterView",sS),O.config.globalProperties.$router=te,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>Ke(c)}),Ur&&!St&&c.value===On&&(St=!0,R(r.location).catch(xe=>{}));const Z={};for(const xe in On)Object.defineProperty(Z,xe,{get:()=>c.value[xe],enumerable:!0});O.provide(Za,te),O.provide(Cg,hh(Z)),O.provide(Ic,c);const le=O.unmount;Xe.add(O),O.unmount=function(){Xe.delete(O),Xe.size<1&&(u=On,be&&be(),be=null,c.value=On,St=!1,ae=!1),le()}}};function st(O){return O.reduce((te,Z)=>te.then(()=>J(Z)),Promise.resolve())}return wt}function rS(t,e){const s=[],n=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>oi(u,l))?n.push(l):s.push(l));const c=t.matched[o];c&&(e.matched.find(u=>oi(u,c))||r.push(c))}return[s,n,r]}function iS(){return tn(Za)}const oS={class:"container pf-page"},aS={class:"pf-mobile-header"},lS={class:"pf-mobile-nav"},cS={class:"pf-mobile-actions"},uS={class:"pf-main-content"},dS={class:"pf-body"},fS={class:"pf-side-head"},hS={class:"pf-side-tools"},pS={class:"pf-acc-group"},mS={class:"pf-acc-list"},gS=["onClick"],yS={class:"pf-acc-info"},vS={class:"pf-acc-name"},bS=["title"],wS={class:"pf-acc-balance"},AS={key:0,class:"pf-account-overview"},ES={class:"pf-stats"},_S={class:"pf-stat-card"},PS={class:"pf-stat-value"},SS={class:"pf-stat-card"},kS={class:"pf-stat-card"},CS={class:"pf-sidebar-pie-section"},TS={class:"pf-pie-chart-container"},IS={class:"pf-pie-chart"},xS={viewBox:"0 0 200 200",class:"pf-pie-svg"},RS=["stroke","stroke-dasharray","stroke-dashoffset"],DS=["x1","y1","x2","y2","stroke"],NS=["x","y","fill"],LS={class:"pf-pie-center"},OS={class:"pf-pie-total"},US={class:"pf-chart-legend"},BS={class:"pf-legend-left"},MS={class:"pf-legend-code"},FS={class:"pf-legend-right"},VS={class:"pf-legend-value"},jS={class:"pf-main"},$S={class:"pf-hero"},HS={class:"pf-balance"},WS={class:"pf-tabs"},GS=["onClick"],KS={key:0,class:"pf-projects"},YS={key:0,class:"pf-empty-projects"},zS={key:1,class:"pf-projects-grid"},QS={class:"pf-project-header"},JS=["src","alt"],qS={class:"pf-project-info"},ZS={class:"pf-project-metrics"},XS={class:"pf-project-metric"},ek={class:"pf-metric-value"},tk={class:"pf-project-metric"},sk={key:0,class:"pf-project-metric"},nk={class:"pf-metric-value"},rk={key:1,class:"pf-project-metric"},ik={key:2,class:"pf-project-metric"},ok={class:"pf-project-actions"},ak=["onClick"],lk=["onClick"],ck=["onClick"],uk={key:1,class:"pf-watchlist"},dk={class:"pf-watchlist-header"},fk={class:"pf-watchlist-stats"},hk={class:"pf-watchlist-count"},pk={key:0,class:"pf-empty-watchlist"},mk={key:1,class:"pf-watchlist-grid"},gk={class:"pf-watchlist-card-header"},yk=["src","alt"],vk={class:"pf-watchlist-info"},bk={class:"pf-watchlist-actions"},wk=["onClick"],Ak={class:"pf-watchlist-metrics"},Ek={class:"pf-watchlist-metric"},_k={class:"pf-watchlist-value"},Pk={class:"pf-watchlist-metric"},Sk={class:"pf-watchlist-value",style:{color:"#16a34a"}},kk={class:"pf-watchlist-metric"},Ck={class:"pf-watchlist-progress"},Tk={class:"pf-watchlist-progress-bar"},Ik={class:"pf-watchlist-progress-text"},xk={class:"pf-watchlist-actions-bottom"},Rk=["onClick"],Dk=["onClick"],Nk={key:2,class:"pf-analysis"},Lk={class:"pf-analysis-overview"},Ok={class:"pf-analysis-header"},Uk={class:"pf-analysis-actions"},Bk=["disabled"],Mk={key:0},Fk={key:1},Vk={class:"pf-analysis-stats-four"},jk={class:"pf-analysis-stat-card"},$k={class:"pf-stat-content"},Hk={class:"pf-stat-label-inline"},Wk={class:"pf-stat-number"},Gk={class:"pf-analysis-stat-card"},Kk={class:"pf-stat-content"},Yk={class:"pf-stat-label-inline"},zk={class:"pf-stat-number"},Qk={class:"pf-analysis-stat-card"},Jk={class:"pf-stat-content"},qk={class:"pf-stat-label-inline"},Zk={class:"pf-stat-number"},Xk={class:"pf-analysis-stat-card"},eC={class:"pf-stat-content"},tC={class:"pf-stat-label-inline"},sC={class:"pf-stat-number"},nC={class:"pf-transaction-breakdown"},rC={class:"pf-breakdown-header"},iC={class:"pf-breakdown-controls"},oC={class:"pf-breakdown-content"},aC={key:0,class:"pf-analysis-loading"},lC={key:1,class:"pf-analysis-empty"},cC={key:2,class:"pf-breakdown-list"},uC={class:"pf-day-header"},dC={class:"pf-day-date"},fC={class:"pf-day-summary"},hC={class:"pf-day-total"},pC={class:"pf-day-value"},mC={class:"pf-day-transactions"},gC={class:"pf-type-header"},yC={class:"pf-type-info"},vC={class:"pf-type-name"},bC={class:"pf-type-count"},wC={class:"pf-type-value"},AC={class:"pf-type-amount"},EC={class:"pf-type-avg"},_C={class:"pf-type-projects"},PC={class:"pf-project-info"},SC={class:"pf-project-code"},kC={class:"pf-project-name"},CC={class:"pf-project-stats"},TC={class:"pf-project-count"},IC={class:"pf-project-value"},xC={key:3,class:"pf-transactions"},RC={class:"pf-transactions-header"},DC={class:"pf-transactions-actions"},NC=["disabled"],LC={key:0},OC={key:1},UC={key:0,class:"pf-filters"},BC=["value"],MC={class:"pf-transactions-list"},FC={key:0,class:"pf-no-transactions"},VC={key:1},jC=["onClick"],$C={class:"pf-transaction-details"},HC={class:"pf-transaction-title"},WC={class:"pf-transaction-subtitle"},GC={class:"pf-transaction-value"},KC={class:"pf-transaction-time"},YC={class:"pf-transaction-price"},zC={__name:"PortfolioView",setup(t){const e=iS(),{fullAddress:s,connected:n,nativeBalanceDisplay:r,nativeSymbol:i}=jn();Ae(()=>!0);const o=["Projects","My Watchlist","Analysis","Transactions"],l=fe("Projects"),c=fe(null);fe("1d");const u=fe("3d"),d=fe(!1),f=fe([]),h=fe("30d"),p=fe(800),P=fe(200);fe({visible:!1,x:0,y:0,content:"",type:""});const w=fe(!1),k=fe(!1),T=fe(""),N=fe(""),L=fe(!0),R=fe(""),G=fe(!1);let W=null;const j=fe([]),Q=fe([]),J=fe([]);async function re(){try{Z.value=!0,le.value=null,console.log("🔄 PortfolioView: 从数据库加载项目数据...");const A=await ms.getAllProducts();A.status===0?(te.value=A.data||[],console.log("✅ PortfolioView: 项目数据加载成功，共",te.value.length,"个项目")):(le.value=A.message||"获取项目数据失败",console.error("❌ PortfolioView: API返回错误:",A))}catch(A){le.value="网络错误，无法获取项目数据",console.error("❌ PortfolioView: 加载项目数据失败:",A)}finally{Z.value=!1}}function ce(){try{const A=localStorage.getItem("projectWatchlist");A?(Q.value=JSON.parse(A),console.log("📂 Portfolio loaded watchlist:",Q.value)):Q.value=[]}catch(A){console.error("❌ Portfolio: 加载 watchlist 失败:",A),Q.value=[]}}async function H(){try{if(Q.value.length===0){J.value=[];return}console.log("🔄 Portfolio: 加载 watchlist 项目详情...");const A=te.value.length>0?te.value:null;if(A)be(A);else{const E=await ms.getAllProducts();if(E.status===0){const b=E.data||[];be(b)}else console.error("❌ Portfolio: 获取 watchlist 项目失败:",E),J.value=[]}}catch(A){console.error("❌ Portfolio: 加载 watchlist 项目失败:",A),J.value=[]}}function be(A){J.value=A.filter(E=>Q.value.includes(E.code)).map(E=>({...E,totalOfferingRaw:E.total_offering_token||0,subscribedRaw:E.subscribe_token||0,totalOffering:E.total_offering_token?`AUD$${E.total_offering_token.toLocaleString()}`:"AUD$0",subscribed:E.subscribe_token?`AUD$${E.subscribe_token.toLocaleString()}`:"AUD$0"})),console.log("✅ Portfolio: watchlist 项目更新成功，共",J.value.length,"个项目")}function Ce(A){try{const E=Q.value.indexOf(A);E>-1&&(Q.value.splice(E,1),localStorage.setItem("projectWatchlist",JSON.stringify(Q.value)),J.value=J.value.filter(b=>b.code!==A),console.log("✅ Portfolio: 已从 watchlist 移除项目:",A))}catch(E){console.error("❌ Portfolio: 移除 watchlist 项目失败:",E)}}function Y(A){return{RWA001:"/pics/TYMU.png",RWA002:"/pics/SQNB.png",RWA003:"/pics/LZYT.png",YYD:"/pics/YYD.png",COMP:"/pics/TYMU.png"}[A]||"/pics/TYMU.png"}function ee(A){if(!A)return 0;const E=A.totalOfferingRaw||0,b=A.subscribedRaw||0;if(E===0)return 0;const M=b/E*100;return Math.round(M*100)/100}function ae(A){return ee(A)}function me(A){if(!A)return"0";const E=parseFloat(A);return isNaN(E)?A:E.toLocaleString()}function Ie(A){return{ACTIVE:"#16a34a",INCOMING:"#d97706",PERFORMING:"#2563eb",COMPLETED:"#6b7280"}[A]||"#6b7280"}function We(A){return{ACTIVE:"Active",INCOMING:"Incoming",PERFORMING:"Performing",COMPLETED:"Completed",active:"Active",upcoming:"Upcoming",research:"Research",planning:"Planning",completed:"Completed"}[A]||"Unknown"}function je(A){e.push({name:"detail",params:{code:A}})}function $e(A){e.push({name:"tradeProject",params:{code:A}})}function St(){e.push({name:"projects"})}function Xe(){try{const A=localStorage.getItem("walletBoundAccounts");if(A){const E=JSON.parse(A);j.value=E.map((b,M)=>({address:b,name:`Wallet ${M+1}`,balance:0})),console.log("📂 Portfolio loaded bound accounts:",j.value)}else s.value?(j.value=[{address:s.value,name:"Main Account",balance:0}],console.log("📂 Portfolio using current connected wallet:",s.value)):(j.value=[{address:"0x1234567890123456789012345678901234567890",name:"Demo Account",balance:1.5}],console.log("📂 Portfolio using demo account for display"));wt(),st()}catch(A){console.error("❌ Failed to load bound accounts:",A),j.value=[{address:"Please connect your wallet",name:"No Account",balance:0}],st()}}function wt(){j.value.forEach(A=>{if(A.address===s.value&&n.value){const E=r.value;A.balance=parseFloat(E)||0,console.log(`💰 Updated balance for ${A.address}: ${A.balance} ${i.value}`)}else A.balance===0&&(A.balance=Math.random()*2)})}function st(){if(j.value.length===0)return;const A={};j.value.forEach((E,b)=>{b===0?A[E.address]=[{id:1,type:"buy",projectCode:"TYMU",amount:100,price:1,timestamp:Date.now()-36e5},{id:2,type:"buy",projectCode:"SQNB",amount:50,price:1.02,timestamp:Date.now()-72e5}]:b===1?A[E.address]=[{id:3,type:"sell",projectCode:"LZYT",amount:25,price:.98,timestamp:Date.now()-108e5},{id:4,type:"buy",projectCode:"YYD",amount:75,price:1.05,timestamp:Date.now()-144e5}]:A[E.address]=[{id:5,type:"buy",projectCode:"TYMU",amount:200,price:.99,timestamp:Date.now()-18e6}]}),O.value=A,console.log("📊 Portfolio initialized transaction data:",O.value)}const O=fe({}),te=fe([]),Z=fe(!0),le=fe(null),xe=Ae(()=>{let E=v().filter(b=>b.type==="buy"||b.type==="sell");return E.length===0?(console.log("📊 PortfolioView: 没有找到交易活动数据"),[]):(E=E.map(b=>({id:b.id||Date.now()+Math.random(),type:b.type,projectCode:b.project_code||b.projectCode,projectName:b.project_name||"Unknown Project",amount:b.amount||0,price:b.price||1,timestamp:b.timestamp||Date.now(),userAddress:b.user_address||R.value})),T.value&&(E=E.filter(b=>b.type===T.value)),N.value&&(E=E.filter(b=>b.projectCode===N.value)),E.sort((b,M)=>M.timestamp-b.timestamp))}),v=()=>{try{const A=JSON.parse(localStorage.getItem("walletActivity")||"[]");return console.log("📊 PortfolioView: 获取到WalletView活动数据:",A.length,"条记录"),A}catch(A){return console.error("❌ PortfolioView: 获取wallet activity数据失败:",A),[]}},_=A=>{if(!A)return[];const b=v().filter(q=>q.type==="buy"||q.type==="sell");console.log("📊 PortfolioView: 账户",A,"的交易活动:",b.length,"条");const M=new Map;return b.forEach(q=>{const pe=q.project_code||q.projectCode;M.has(pe)||M.set(pe,{code:pe,amount:0,totalCost:0,totalInvestment:0});const Me=M.get(pe),dt=te.value.find(xt=>xt.code===pe),ht=dt&&dt.currentPrice||1;q.type==="buy"?(Me.amount+=q.amount,Me.totalCost+=q.amount*ht,Me.totalInvestment+=q.amount*(q.price||ht)):(Me.amount-=q.amount,Me.totalCost-=q.amount*ht,Me.totalInvestment-=q.amount*(q.price||ht))}),Array.from(M.values()).filter(q=>q.amount>0).map(q=>{const pe=te.value.find(xt=>xt.code===q.code),Me=pe&&pe.currentPrice||1,dt=q.amount*Me,ht=q.totalInvestment>0?(dt-q.totalInvestment)/q.totalInvestment*100:0;return{...q,currentPrice:Me,change:ht}})},I=A=>{const b=_(A).reduce((M,q)=>M+(q.totalInvestment||0),0);return console.log("💰 PortfolioView: 账户",A,"总投资:",b),b},U=A=>{const b=_(A).reduce((M,q)=>M+q.amount*q.currentPrice,0);return console.log("📈 PortfolioView: 账户",A,"当前价值:",b),b},F=A=>{const E=U(A),b=I(A),M=E-b;return console.log("📊 PortfolioView: 账户",A,"总收益:",M,"(当前价值:",E,"- 总投资:",b,")"),M},B=A=>{if(!R.value)return null;const b=_(R.value).find(M=>M.code===A);return b?{amount:b.amount,currentPrice:b.currentPrice,currentValue:b.amount*b.currentPrice,totalInvestment:b.totalInvestment,change:b.change}:null},se=A=>{const E=I(A),b=F(A),M=E>0?b/E*100:0;return console.log("📈 PortfolioView: 账户",A,"ROI:",M.toFixed(2)+"%","(总收益:",b,"/ 总投资:",E,")"),M},X=()=>{const E=v().filter(q=>q.type==="buy"||q.type==="sell");console.log("📊 PortfolioView: 获取所有资产分布，共",E.length,"条交易记录");const b=new Map;E.forEach(q=>{const pe=q.project_code||q.projectCode;b.has(pe)||b.set(pe,{code:pe,amount:0,totalCost:0,totalInvestment:0,projectName:q.project_name||"Unknown Project"});const Me=b.get(pe),dt=te.value.find(xt=>xt.code===pe),ht=dt&&dt.currentPrice||1;Me.currentPrice=ht,q.type==="buy"?(Me.amount+=parseFloat(q.amount)||0,Me.totalCost+=(parseFloat(q.amount)||0)*(parseFloat(q.price)||1),Me.totalInvestment+=(parseFloat(q.amount)||0)*(parseFloat(q.price)||1)):q.type==="sell"&&(Me.amount-=parseFloat(q.amount)||0,Me.totalCost-=(parseFloat(q.amount)||0)*(parseFloat(q.price)||1))});const M=Array.from(b.values()).filter(q=>q.amount>0);return console.log("📊 PortfolioView: 所有资产分布:",M),M},z=Ae(()=>{const A=X();return A.length>0?A:[{code:"TYMU",amount:100,totalCost:100,currentPrice:1,change:2.5},{code:"SQNB",amount:50,totalCost:51,currentPrice:1.02,change:-1.2},{code:"LZYT",amount:25,totalCost:24.5,currentPrice:.98,change:.8},{code:"YYD",amount:75,totalCost:78.75,currentPrice:1.05,change:3.1}]}),K=Ae(()=>{const A=X();if(A.length>0){const E=A.reduce((b,M)=>b+(M.totalInvestment||0),0);return console.log("💰 PortfolioView: 所有资产总投资:",E),E}return R.value?I(R.value):254.25}),ge=Ae(()=>{const A=X();if(A.length>0){const E=A.reduce((b,M)=>b+M.amount*M.currentPrice,0);return console.log("📈 PortfolioView: 所有资产当前价值:",E),E}return R.value?U(R.value):267.75}),ie=Ae(()=>{const A=ge.value,E=K.value,b=A-E;return console.log("📊 PortfolioView: 所有资产总收益:",b,"(当前价值:",A,"- 总投资:",E,")"),b}),ve=Ae(()=>{const A=K.value,E=ie.value,b=A>0?E/A*100:0;return console.log("📈 PortfolioView: 所有资产ROI:",b.toFixed(2)+"%","(总收益:",E,"/ 总投资:",A,")"),b}),Pe=Ae(()=>{if(!R.value)return te.value;const E=_(R.value).map(b=>b.code);return te.value.filter(b=>E.includes(b.code))});Ae(()=>{const A={low:1,medium:2,high:3},E=z.value.reduce((q,pe)=>{const Me=te.value.find(ht=>ht.code===pe.code),dt=Me&&A[Me.risk]||2;return q+dt*pe.amount*pe.currentPrice},0),b=ge.value;if(b===0)return"Low";const M=E/b;return M<=1.5?"Low":M<=2.5?"Medium":"High"});const Oe=Ae(()=>{const A=z.value.length,E=te.value.length;return E>0?Math.min(A/E*100,100):0});Ae(()=>{const A=[];return Object.values(O.value).forEach(E=>{A.push(...E)}),A.length===0?[{id:1,type:"buy",projectCode:"TYMU",amount:100,price:1,timestamp:Date.now()-36e5},{id:2,type:"buy",projectCode:"SQNB",amount:50,price:1.02,timestamp:Date.now()-72e5},{id:3,type:"sell",projectCode:"LZYT",amount:25,price:.98,timestamp:Date.now()-108e5},{id:4,type:"buy",projectCode:"YYD",amount:75,price:1.05,timestamp:Date.now()-144e5}]:A});const Ge=Ae(()=>f.value.length===0?1:Math.max(...f.value.map(A=>A.cumulativeBuyValue+A.cumulativeSellValue))),Ue=Ae(()=>{if(f.value.length===0)return[];const A=f.value,E=Ge.value,b=20,M=p.value-b*2,q=P.value-b*2;return A.map((pe,Me)=>({x:A.length===1?b+M/2:b+Me*M/(A.length-1),y:b+q-pe.cumulativeBuyValue/E*q,value:pe.cumulativeBuyValue,date:pe.date,count:pe.buy}))}),It=Ae(()=>{if(f.value.length===0)return[];const A=f.value,E=Ge.value,b=20,M=p.value-b*2,q=P.value-b*2;return A.map((pe,Me)=>({x:A.length===1?b+M/2:b+Me*M/(A.length-1),y:b+q-pe.cumulativeSellValue/E*q,value:pe.cumulativeSellValue,date:pe.date,count:pe.sell}))});Ae(()=>Ue.value.map(A=>`${A.x},${A.y}`).join(" ")),Ae(()=>It.value.map(A=>`${A.x},${A.y}`).join(" ")),Ae(()=>{if(f.value.length===0)return console.log("📊 当天交易统计: 无交易数据"),{totalBuy:0,totalSell:0,totalTransactions:0,buyPercentage:0,sellPercentage:0};const A=f.value[f.value.length-1];console.log("📊 当天交易统计: 今天数据",A);const E=A.cumulativeBuyValue||0,b=A.cumulativeSellValue||0,M=E+b,q={totalBuy:E,totalSell:b,totalTransactions:M,buyPercentage:M>0?E/M*100:0,sellPercentage:M>0?b/M*100:0};return console.log("📊 当天交易统计: 计算结果",q),q});const Lt=Ae(()=>xe.value.length),ls=Ae(()=>xe.value.filter(A=>A.type==="buy").length),qt=Ae(()=>xe.value.filter(A=>A.type==="sell").length),cs=Ae(()=>xe.value.reduce((A,E)=>A+parseFloat(E.amount||0),0)),Jn=Ae(()=>{if(xe.value.length===0)return[];const A=new Date,E=xe.value.filter(M=>{if(h.value==="all")return!0;const q=new Date(M.timestamp),pe=Math.floor((A-q)/(1e3*60*60*24));switch(h.value){case"7d":return pe<=7;case"30d":return pe<=30;case"90d":return pe<=90;case"1y":return pe<=365;default:return!0}}),b={};return E.forEach(M=>{const q=new Date(M.timestamp).toISOString().split("T")[0];b[q]||(b[q]=[]),b[q].push(M)}),Object.entries(b).map(([M,q])=>{const pe={};q.forEach(xt=>{pe[xt.type]||(pe[xt.type]=[]),pe[xt.type].push(xt)});const Me=Object.entries(pe).map(([xt,ks])=>{const nn={};ks.forEach(Bt=>{const $t=Bt.projectCode||"Unknown";nn[$t]||(nn[$t]=[]),nn[$t].push(Bt)});const nt=Object.entries(nn).map(([Bt,$t])=>{const In=$t.reduce((mi,sl)=>mi+parseFloat(sl.amount||0),0);return{projectCode:Bt,projectName:$t[0].projectName||"Unknown Project",count:$t.length,totalAmount:In}}),Ut=ks.reduce((Bt,$t)=>Bt+parseFloat($t.amount||0),0),Zt=ks.length>0?Ut/ks.length:0;return{type:xt,count:ks.length,totalAmount:Ut,averageAmount:Zt,projects:nt}}),dt=q.length,ht=q.reduce((xt,ks)=>xt+parseFloat(ks.amount||0),0);return{date:M,totalTransactions:dt,totalValue:ht,types:Me}}).sort((M,q)=>new Date(q.date)-new Date(M.date))});Ae(()=>{const A=ge.value,E=K.value,b=A-E;return{totalBuy:Math.max(E,A*.8),totalSell:Math.max(0,b*.3),netValue:Math.max(E,A*.8)-Math.max(0,b*.3),buyPercentage:A>0?Math.max(E,A*.8)/A*100:0,sellPercentage:A>0?Math.max(0,b*.3)/A*100:0}}),Ae(()=>{const A=[];ie.value>0?A.push({id:1,icon:"📈",text:`Portfolio is up ${ve.value.toFixed(1)}%. Consider taking some profits.`}):A.push({id:1,icon:"📉",text:`Portfolio is down ${Math.abs(ve.value).toFixed(1)}%. Consider dollar-cost averaging.`}),Oe.value<50&&A.push({id:2,icon:"⚠️",text:"Low diversification. Consider spreading risk across more projects."});const E=z.value.reduce((b,M)=>M.change>b.change?M:b,z.value[0]||{change:0,code:""});return E.change>5&&A.push({id:3,icon:"🎯",text:`${E.code} is performing well (+${E.change.toFixed(1)}%). Consider increasing allocation.`}),A});const Ot=A=>{R.value=A},us=()=>{alert("请在Wallet页面绑定新的钱包账户。Portfolio只显示已绑定的钱包。")},Cr=()=>{G.value=!G.value},ys=()=>{G.value=!1},Tr=()=>{console.log("🔌 Handling wallet disconnect..."),R.value===s.value&&(R.value=null),j.value=j.value.filter(A=>A.address!==s.value),j.value.length>0||(j.value=[{address:"0x1234567890123456789012345678901234567890",name:"Demo Account",balance:1.5}]),R.value=j.value[0].address,Ls(),console.log("✅ Wallet disconnect handled, current accounts:",j.value.length)},hi=()=>{console.log("🔌 Handling wallet reconnect..."),Xe();const A=j.value.find(E=>E.address===s.value);A?R.value=A.address:j.value.length>0&&(R.value=j.value[0].address),wt(),Ls(),console.log("✅ Wallet reconnect handled, selected account:",R.value)},qn=A=>{console.log("🔄 Handling wallet address change to:",A);const E=j.value.find(b=>b.address===s.value);E&&(E.address=A,R.value=A),wt(),Ls(),console.log("✅ Wallet address change handled")},wo=A=>A?`${A.slice(0,6)}...${A.slice(-4)}`:"—",Xa=A=>{const E=j.value.find(b=>b.address===A);if(!E)return"0.0000";if(A===s.value&&n.value){const b=r.value;return parseFloat(b).toFixed(4)}return E.balance.toFixed(4)},Ao=async()=>{await re()},Eo=async()=>{d.value=!0;try{console.log("🔄 PortfolioView: 刷新交易数据...");const E=v().filter(b=>b.type==="buy"||b.type==="sell");console.log("📊 PortfolioView: 获取到",E.length,"条交易记录")}catch(A){console.error("❌ PortfolioView: 刷新交易数据失败:",A)}finally{d.value=!1}},Ls=async()=>{d.value=!0;try{await x()}catch(A){console.error("Failed to refresh transaction data:",A)}finally{d.value=!1}},x=async()=>{console.log("📊 PortfolioView: 基于Current Assets生成交易图表数据");const A=z.value;console.log("📊 PortfolioView: 当前资产分布:",A);const E=C(u.value),b=new Date,M=new Date(b.getTime()-(E-1)*24*60*60*1e3);console.log("📅 PortfolioView: 日期范围设置:",{days:E,startDate:M.toISOString().split("T")[0],endDate:b.toISOString().split("T")[0]});const pe=v().filter(nt=>nt.type==="buy"||nt.type==="sell");console.log("📊 PortfolioView: 获取到真实交易数据",pe.length,"条记录");const Me=new Map;for(let nt=0;nt<E;nt++){const Ut=new Date(M.getTime()+nt*24*60*60*1e3),Zt=Ut.toISOString().split("T")[0];Me.set(Zt,{date:D(Ut),dateKey:Zt,buy:0,sell:0,buyAmount:0,sellAmount:0,buyValue:0,sellValue:0})}if(pe.length>0&&pe.forEach(nt=>{const Zt=new Date(nt.timestamp).toISOString().split("T")[0];if(Me.has(Zt)){const Bt=Me.get(Zt),$t=parseFloat(nt.amount)||0,In=parseFloat(nt.price)||1,mi=$t*In;nt.type==="buy"?(Bt.buy++,Bt.buyAmount+=$t,Bt.buyValue+=mi):nt.type==="sell"&&(Bt.sell++,Bt.sellAmount+=$t,Bt.sellValue+=mi)}}),pe.length===0&&A.length>0){console.log("📊 PortfolioView: 无真实交易数据，基于Current Assets生成模拟数据");const nt=A.reduce((Ut,Zt)=>Ut+Zt.amount*Zt.currentPrice,0);A.forEach((Ut,Zt)=>{const Bt=Ut.amount*Ut.currentPrice,$t=Bt/nt*100;for(let In=0;In<E;In++){const sl=new Date(M.getTime()+In*24*60*60*1e3).toISOString().split("T")[0],Zn=Me.get(sl);if(Zn){const Hg=Math.max(.1,1-In/E*.8),Wg=.5+Math.random()*1,nl=Bt*$t/100*Hg*Wg*.1;if(Math.random()>.3)Zn.buy++,Zn.buyAmount+=nl/Ut.currentPrice,Zn.buyValue+=nl;else{const _u=nl*.6;Zn.sell++,Zn.sellAmount+=_u/Ut.currentPrice,Zn.sellValue+=_u}}}})}let dt=0,ht=0,xt=0,ks=0;const nn=Array.from(Me.values()).sort((nt,Ut)=>new Date(nt.dateKey)-new Date(Ut.dateKey));f.value=nn.map(nt=>(dt+=nt.buyValue,ht+=nt.sellValue,xt+=nt.buyAmount,ks+=nt.sellAmount,{...nt,cumulativeBuyValue:dt,cumulativeSellValue:ht,cumulativeBuyAmount:xt,cumulativeSellAmount:ks,netValue:dt-ht})),console.log("📊 PortfolioView: 交易图表数据生成完成，共",f.value.length,"个数据点"),console.log("📊 PortfolioView: 累计买入价值:",dt),console.log("📊 PortfolioView: 累计卖出价值:",ht),console.log("📊 PortfolioView: 净价值:",dt-ht),Re()},C=A=>{switch(A){case"3d":return 3;case"7d":return 7;case"30d":return 30;case"90d":return 90;case"1y":return 365;default:return 3}},D=A=>{const E=new Date,b=new Date(E.getFullYear(),E.getMonth(),E.getDate()),M=new Date(A.getFullYear(),A.getMonth(),A.getDate()),q=b-M,pe=Math.floor(q/(1e3*60*60*24));return pe===0?"Today":pe===1?"Yesterday":pe<=3?A.toLocaleDateString("en-US",{month:"short",day:"numeric",weekday:"short"}):pe<7?A.toLocaleDateString("en-US",{month:"short",day:"numeric",weekday:"short"}):pe<30?A.toLocaleDateString("en-US",{month:"short",day:"numeric"}):A.toLocaleDateString("en-US",{month:"short",year:"2-digit"})},Re=()=>{Hi(()=>{const A=c.value;A&&(A.scrollLeft=A.scrollWidth-A.clientWidth)})},ut=A=>{const b=Date.now()-A,M=Math.floor(b/6e4),q=Math.floor(b/36e5),pe=Math.floor(b/864e5);return pe>0?`${pe}d ago`:q>0?`${q}h ago`:M>0?`${M}m ago`:"Just now"},Au=A=>{if(!A)return"Unknown";const E=new Date(A),b=new Date,M=new Date(b);return M.setDate(M.getDate()-1),E.toDateString()===b.toDateString()?"Today":E.toDateString()===M.toDateString()?"Yesterday":E.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},Ks=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316"],_o=A=>Ks[A%Ks.length],pi=A=>ge.value===0?0:A.amount*A.currentPrice/ge.value*100,Ug=A=>{const E=pi(A),b=2*Math.PI*80;return`${E/100*b} ${b}`},Bg=A=>{let E=0;for(let b=0;b<A;b++){const M=z.value[b],q=pi(M),pe=2*Math.PI*80;E-=q/100*pe}return E},Ir=A=>{const E=z.value[A],b=pi(E);let M=0;for(let Zt=0;Zt<A;Zt++){const Bt=z.value[Zt],$t=pi(Bt);M+=$t/100*360}const pe=(M+b/100*360/2-90)*Math.PI/180,Me=100,dt=100,ht=80,xt=Me+Math.cos(pe)*ht,ks=dt+Math.sin(pe)*ht,nn=50,nt=Me+Math.cos(pe)*(ht+nn),Ut=dt+Math.sin(pe)*(ht+nn);return{startX:xt,startY:ks,endX:nt,endY:Ut,textX:nt,textY:Ut}},Mg=A=>{e.push({name:"detail",params:{code:A}})},Fg=A=>{e.push({name:"tradeProject",params:{code:A},query:{type:"sell",interest:!0}})};let el;ci(async()=>{await re(),ce(),await H(),Vg(),Xe(),await x(),j.value.length>0&&(R.value=j.value[0].address),Ls(),el=setInterval(Ao,3e4),window.addEventListener("walletActivityUpdated",Eu),window.addEventListener("walletConnected",hi),window.addEventListener("walletDisconnected",Tr),window.addEventListener("walletAddressChanged",b=>{console.log("🔄 Wallet address changed event received:",b.detail),qn(b.detail.newAddress)}),window.ethereum&&(window.ethereum.on("accountsChanged",b=>{console.log("🔄 Ethereum accounts changed:",b),b&&b.length>0?qn(b[0]):Tr()}),window.ethereum.on("chainChanged",b=>{console.log("🔄 Ethereum chain changed:",b),Ls()})),qs(u,async()=>{console.log("📊 PortfolioView: 时间范围变化，重新生成图表数据:",u.value),await x()});const E=v().filter(b=>b.type==="buy"||b.type==="sell");console.log("🚀 PortfolioView初始化: 检测到WalletView交易活动数据:",E.length,"条"),E.length>0&&(console.log("📊 PortfolioView: 交易活动详情:",E),console.log("💰 PortfolioView: 计算的总投资:",I(R.value)),console.log("📈 PortfolioView: 计算的当前价值:",U(R.value)),console.log("📊 PortfolioView: 计算的总收益:",F(R.value)),console.log("📈 PortfolioView: 计算的ROI:",se(R.value))),qs(()=>e.currentRoute.value.path,(b,M)=>{b==="/portfolio"&&b!==M&&(console.log("🔄 PortfolioView: 检测到portfolio页面访问，自动刷新数据..."),Ao(),Eo())},{immediate:!1})});const Vg=()=>{const{subscribeProducts:A,getLastRefreshTime:E}=fi();W=A(M=>{console.log("📡 PortfolioView: 收到产品数据更新，共",M.length,"个项目"),te.value=M,Q.value.length>0&&be(M)});const b=E();b&&console.log("🕐 PortfolioView: 最后刷新时间:",b)},jg=()=>{W&&W()},Eu=A=>{console.log("🔄 PortfolioView: 检测到WalletView交易活动更新:",A.detail);const b=v().filter(M=>M.type==="buy"||M.type==="sell");console.log("📊 PortfolioView: 当前交易活动数据:",b.length,"条"),console.log("💰 PortfolioView: 计算的总投资:",I(R.value)),console.log("📈 PortfolioView: 计算的当前价值:",U(R.value)),console.log("📊 PortfolioView: 计算的总收益:",F(R.value)),console.log("📈 PortfolioView: 计算的ROI:",se(R.value))};Hc(()=>{el&&clearInterval(el),jg(),window.removeEventListener("walletActivityUpdated",Eu),window.removeEventListener("walletConnected",hi),window.removeEventListener("walletDisconnected",Tr),window.removeEventListener("walletAddressChanged",qn),window.ethereum&&(window.ethereum.removeListener("accountsChanged",qn),window.ethereum.removeListener("chainChanged",Ls)),window.removeEventListener("resize",tl)}),qs(u,()=>{Ls()});const tl=()=>{const A=document.querySelector(".pf-line-chart-container");A&&(p.value=A.offsetWidth)};window.addEventListener("resize",tl),Hi(()=>{tl()}),qs(z,()=>{console.log("📊 PortfolioView: 资产分布变化，重新生成交易图表数据"),Ls()},{deep:!0}),qs([s,r,n],(A,E)=>{const[b,M,q]=A,[pe,Me,dt]=E||[null,null,null];console.log("🔄 Wallet state changed:",{connected:{from:dt,to:q},address:{from:pe,to:b},balance:{from:Me,to:M}}),wt(),dt&&!q&&(console.log("🔌 Wallet disconnected, clearing dashboard data..."),Tr()),!dt&&q&&(console.log("🔌 Wallet reconnected, refreshing dashboard data..."),hi()),pe&&b&&pe!==b&&(console.log("🔄 Wallet address changed, updating selected account..."),qn(b))},{deep:!0});const $g=A=>{console.log("📄 查看合约详情:",A),e.push({path:"/contract",query:{projectCode:A.projectCode,transactionId:A.id,type:A.type,amount:A.amount,timestamp:A.timestamp}})};return window.addEventListener("storage",A=>{A.key==="walletBoundAccounts"&&(console.log("🔄 Detected wallet bound accounts change, reloading..."),Xe(),j.value.length>0&&!j.value.find(E=>E.address===R.value)&&(R.value=j.value[0].address))}),(A,E)=>(g(),y("div",oS,[a("div",aS,[a("div",lS,[a("button",{class:"pf-mobile-menu-btn",onClick:Cr},[...E[7]||(E[7]=[a("span",{class:"pf-menu-icon"},"☰",-1)])]),E[8]||(E[8]=a("h1",{class:"pf-mobile-title"},"Portfolio",-1)),a("div",cS,[a("button",{class:"pf-mobile-action-btn",onClick:E[0]||(E[0]=b=>w.value=!w.value)},"⚙️")])])]),G.value?(g(),y("div",{key:0,class:"pf-mobile-overlay",onClick:ys})):V("",!0),a("div",uS,[a("div",dS,[a("aside",{class:we(["pf-sidebar",{"pf-sidebar-mobile-open":G.value}])},[a("div",fS,[E[9]||(E[9]=a("h2",null,"My Wallet",-1)),a("div",hS,[a("span",{class:"gear",onClick:E[1]||(E[1]=b=>w.value=!w.value)},"⚙️"),a("span",{class:"plus",onClick:us,title:"Add wallets in Wallet page"},"＋")])]),a("div",pS,[a("button",{class:"pf-acc-title",onClick:E[2]||(E[2]=b=>L.value=!L.value)},[E[10]||(E[10]=a("span",null,"Decentralized",-1)),a("span",{class:we(["caret",{open:L.value}])},"▾",2)]),Se(a("div",mS,[(g(!0),y(ye,null,At(j.value,b=>(g(),y("div",{key:b.address,class:we(["pf-acc-item",{active:R.value===b.address}]),onClick:M=>Ot(b.address)},[E[11]||(E[11]=a("div",{class:"pf-avatar"},null,-1)),a("div",yS,[a("div",vS,m(b.name||"Account"),1),a("div",{class:"pf-addr",title:b.address},m(wo(b.address)),9,bS),a("div",wS,m(Xa(b.address))+" "+m(Ke(i)),1)])],10,gS))),128))],512),[[qy,L.value]])]),R.value?(g(),y("div",AS,[E[19]||(E[19]=a("h3",null,"Account Overview",-1)),a("div",ES,[a("div",_S,[E[12]||(E[12]=a("div",{class:"pf-stat-label"},"Total Investment",-1)),a("div",PS,"AUD$"+m(I(R.value).toFixed(2)),1)]),a("div",SS,[E[13]||(E[13]=a("div",{class:"pf-stat-label"},"Interest Income",-1)),a("div",{class:we(["pf-stat-value",{positive:F(R.value)>=0,negative:F(R.value)<0}])},m(F(R.value)>=0?"+":"")+"AUD$"+m(F(R.value).toFixed(2)),3)]),a("div",kS,[E[14]||(E[14]=a("div",{class:"pf-stat-label"},"ROI",-1)),a("div",{class:we(["pf-stat-value",{positive:se(R.value)>=0,negative:se(R.value)<0}])},m(se(R.value)>=0?"+":"")+m(se(R.value).toFixed(2))+"% ",3)])]),a("div",CS,[E[17]||(E[17]=a("div",{class:"pf-chart-header"},[a("h4",null,"Current Assets Distribution")],-1)),E[18]||(E[18]=a("p",{class:"pf-chart-subtitle"},"All purchased assets across all wallets",-1)),a("div",TS,[a("div",IS,[(g(),y("svg",xS,[E[15]||(E[15]=a("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:"#e5e7eb","stroke-width":"20"},null,-1)),(g(!0),y(ye,null,At(z.value,(b,M)=>(g(),y("circle",{key:b.code,cx:"100",cy:"100",r:"80",fill:"none",stroke:_o(M),"stroke-width":"20","stroke-dasharray":Ug(b),"stroke-dashoffset":Bg(M),transform:"rotate(-90 100 100)"},null,8,RS))),128)),(g(!0),y(ye,null,At(z.value,(b,M)=>(g(),y("g",{key:`label-${b.code}`},[a("line",{x1:Ir(M).startX,y1:Ir(M).startY,x2:Ir(M).endX,y2:Ir(M).endY,stroke:_o(M),"stroke-width":"2","stroke-linecap":"round"},null,8,DS),a("text",{x:Ir(M).textX,y:Ir(M).textY,fill:_o(M),"font-size":"20","font-weight":"600","text-anchor":"middle","dominant-baseline":"middle",class:"pf-pie-label-text"},m(pi(b).toFixed(2))+"% ",9,NS)]))),128))])),a("div",LS,[a("div",OS,"AUD$"+m(ge.value.toFixed(2)),1),E[16]||(E[16]=a("div",{class:"pf-pie-label"},"Total Value",-1))])]),a("div",US,[(g(!0),y(ye,null,At(z.value,(b,M)=>(g(),y("div",{key:b.code,class:"pf-legend-item"},[a("div",BS,[a("div",{class:"pf-legend-color",style:Rt({backgroundColor:_o(M)})},null,4),a("div",MS,m(b.code),1)]),a("div",FS,[a("div",VS,"AUD$"+m((b.amount*b.currentPrice).toFixed(2)),1)])]))),128))])])])])):V("",!0)],2),a("main",jS,[a("div",$S,[a("div",HS," AUD$"+m(I(R.value).toFixed(2)),1)]),a("nav",WS,[(g(),y(ye,null,At(o,b=>a("button",{key:b,class:we(["pf-tab",{active:l.value===b}]),onClick:M=>l.value=b},m(b),11,GS)),64))]),l.value==="Projects"?(g(),y("div",KS,[Pe.value.length===0?(g(),y("div",YS,[E[20]||(E[20]=a("div",{class:"pf-empty-icon"},null,-1)),E[21]||(E[21]=a("h4",null,"No project available",-1)),E[22]||(E[22]=a("p",null,"Complete some trades in the Trade page to see your project dashboard",-1)),a("button",{class:"pf-btn pf-btn-primary",onClick:St}," Browse Projects ")])):(g(),y("div",zS,[(g(!0),y(ye,null,At(Pe.value,b=>(g(),y("div",{key:b.code,class:"pf-project-card"},[a("div",QS,[a("img",{src:b.image,alt:b.code,class:"pf-project-image"},null,8,JS),a("div",qS,[a("h4",null,m(b.code),1),a("p",null,m(b.subtitle),1)])]),a("div",ZS,[a("div",XS,[E[23]||(E[23]=a("span",{class:"pf-metric-label"},"Target Yield",-1)),a("span",ek,m(b.targetYield)+"%",1)]),a("div",tk,[E[24]||(E[24]=a("span",{class:"pf-metric-label"},"Risk Level",-1)),a("span",{class:we(["pf-metric-value","risk-"+b.risk])},m(b.risk),3)]),B(b.code)?(g(),y("div",sk,[E[25]||(E[25]=a("span",{class:"pf-metric-label"},"Holding Amount",-1)),a("span",nk,m(B(b.code).currentValue.toFixed(2))+" tokens",1)])):V("",!0),B(b.code)?(g(),y("div",rk,[...E[26]||(E[26]=[a("span",{class:"pf-metric-label"},"Interest Received",-1)])])):V("",!0),B(b.code)?(g(),y("div",ik,[...E[27]||(E[27]=[a("span",{class:"pf-metric-label"},"Interest Accrued",-1)])])):V("",!0)]),a("div",ok,[a("button",{class:"pf-project-btn",onClick:M=>$e(b.code)},"Buy",8,ak),a("button",{class:"pf-project-btn pf-project-btn-secondary",onClick:M=>Mg(b.code)},"Details",8,lk),a("button",{class:"pf-project-btn pf-project-btn-interest",onClick:M=>Fg(b.code)},"Sell Interest",8,ck)])]))),128))]))])):V("",!0),l.value==="My Watchlist"?(g(),y("div",uk,[a("div",dk,[E[28]||(E[28]=a("h3",null,null,-1)),a("div",fk,[a("span",hk,m(J.value.length)+" Projects",1)])]),J.value.length===0?(g(),y("div",pk,[E[29]||(E[29]=a("div",{class:"pf-empty-icon"},null,-1)),E[30]||(E[30]=a("h4",null,"No projects in your watchlist",-1)),E[31]||(E[31]=a("p",null,"Add projects to your watchlist from the Projects page to track them here.",-1)),a("button",{class:"pf-btn pf-btn-primary",onClick:St}," Browse Projects ")])):(g(),y("div",mk,[(g(!0),y(ye,null,At(J.value,b=>(g(),y("div",{key:b.code,class:"pf-watchlist-card"},[a("div",gk,[a("img",{src:b.image||Y(b.code),alt:b.code,class:"pf-watchlist-image"},null,8,yk),a("div",vk,[a("h4",null,m(b.code)+" • "+m(b.name),1),a("p",null,m(b.subtitle),1)]),a("div",bk,[a("button",{class:"pf-remove-btn",onClick:M=>Ce(b.code),title:"Remove from watchlist"}," ✕ ",8,wk)])]),a("div",Ak,[a("div",Ek,[E[32]||(E[32]=a("span",{class:"pf-watchlist-label"},"LOAN SIZE",-1)),a("span",_k,"AUD$"+m(me(b.loan_amount||0)),1)]),a("div",Pk,[E[33]||(E[33]=a("span",{class:"pf-watchlist-label"},"EST. YIELD",-1)),a("span",Sk,m(b.target_yield)+"%",1)]),a("div",kk,[E[34]||(E[34]=a("span",{class:"pf-watchlist-label"},"STATUS",-1)),a("span",{class:"pf-watchlist-value",style:Rt({color:Ie(b.status)})},m(We(b.status)),5)])]),a("div",Ck,[a("div",Tk,[a("div",{class:"pf-watchlist-progress-fill",style:Rt({width:ae(b)+"%"})},null,4)]),a("div",Ik,m(ae(b))+"% Subscribed",1)]),a("div",xk,[a("button",{class:"pf-watchlist-btn pf-watchlist-btn-primary",onClick:M=>je(b.code)}," View Details ",8,Rk),b.status==="active"?(g(),y("button",{key:0,class:"pf-watchlist-btn pf-watchlist-btn-secondary",onClick:M=>$e(b.code)}," Trade ",8,Dk)):V("",!0)])]))),128))]))])):V("",!0),l.value==="Analysis"?(g(),y("div",Nk,[a("div",Lk,[a("div",Ok,[E[35]||(E[35]=a("h3",null,"Transaction Analysis",-1)),a("div",Uk,[a("button",{class:"pf-analysis-btn",onClick:Ls,disabled:d.value},[d.value?(g(),y("span",Mk,"🔄")):(g(),y("span",Fk,"Refresh"))],8,Bk)])]),a("div",Vk,[a("div",jk,[a("div",$k,[a("div",Hk,[E[36]||(E[36]=ne("Total Transactions: ",-1)),a("span",Wk,m(Lt.value),1)])])]),a("div",Gk,[a("div",Kk,[a("div",Yk,[E[37]||(E[37]=ne("Buy Orders: ",-1)),a("span",zk,m(ls.value),1)])])]),a("div",Qk,[a("div",Jk,[a("div",qk,[E[38]||(E[38]=ne("Sell Orders: ",-1)),a("span",Zk,m(qt.value),1)])])]),a("div",Xk,[a("div",eC,[a("div",tC,[E[39]||(E[39]=ne("Total Value: ",-1)),a("span",sC,"AUD$"+m(cs.value.toFixed(2)),1)])])])])]),a("div",nC,[a("div",rC,[E[41]||(E[41]=a("h4",null,"Transaction Breakdown by Date & Type",-1)),a("div",iC,[Se(a("select",{"onUpdate:modelValue":E[3]||(E[3]=b=>h.value=b),class:"pf-select"},[...E[40]||(E[40]=[Dt('<option value="7d" data-v-2dea270e>Last 7 Days</option><option value="30d" data-v-2dea270e>Last 30 Days</option><option value="90d" data-v-2dea270e>Last 3 Months</option><option value="1y" data-v-2dea270e>Last Year</option><option value="all" data-v-2dea270e>All Time</option>',5)])],512),[[ps,h.value]])])]),a("div",oC,[d.value?(g(),y("div",aC,[...E[42]||(E[42]=[a("div",{class:"pf-spinner"},null,-1),a("span",null,"Loading transaction analysis...",-1)])])):Jn.value.length===0?(g(),y("div",lC,[...E[43]||(E[43]=[a("p",null,"No transaction data available",-1),a("p",{class:"pf-empty-hint"},"Complete some trades to see detailed analysis",-1)])])):(g(),y("div",cC,[(g(!0),y(ye,null,At(Jn.value,b=>(g(),y("div",{key:b.date,class:"pf-day-group"},[a("div",uC,[a("div",dC,m(Au(b.date)),1),a("div",fC,[a("span",hC,m(b.totalTransactions)+" transactions",1),a("span",pC,"AUD$"+m(b.totalValue.toFixed(2)),1)])]),a("div",mC,[(g(!0),y(ye,null,At(b.types,M=>(g(),y("div",{key:M.type,class:"pf-type-group"},[a("div",gC,[a("div",{class:we(["pf-type-icon",M.type])},m(M.type==="buy"?"📈":"📉"),3),a("div",yC,[a("div",vC,m(M.type.toUpperCase()),1),a("div",bC,m(M.count)+" transactions",1)]),a("div",wC,[a("div",AC,"AUD$"+m(M.totalAmount.toFixed(2)),1),a("div",EC,"Avg: AUD$"+m(M.averageAmount.toFixed(2)),1)])]),a("div",_C,[(g(!0),y(ye,null,At(M.projects,q=>(g(),y("div",{key:q.projectCode,class:"pf-project-summary"},[a("div",PC,[a("div",SC,m(q.projectCode),1),a("div",kC,m(q.projectName),1)]),a("div",CC,[a("div",TC,m(q.count)+" txns",1),a("div",IC,"AUD$"+m(q.totalAmount.toFixed(2)),1)])]))),128))])]))),128))])]))),128))]))])])])):V("",!0),l.value==="Transactions"?(g(),y("div",xC,[a("div",RC,[a("div",DC,[a("button",{class:"pf-filter-btn",onClick:E[4]||(E[4]=b=>k.value=!k.value)}," Filter "),a("button",{class:"pf-refresh-btn",onClick:Eo,disabled:d.value},[d.value?(g(),y("span",LC,"🔄")):(g(),y("span",OC,"Refresh"))],8,NC)])]),k.value?(g(),y("div",UC,[Se(a("select",{"onUpdate:modelValue":E[5]||(E[5]=b=>T.value=b),class:"pf-filter-select"},[...E[44]||(E[44]=[a("option",{value:""},"All Types",-1),a("option",{value:"buy"},"Buy",-1),a("option",{value:"sell"},"Sell",-1)])],512),[[ps,T.value]]),Se(a("select",{"onUpdate:modelValue":E[6]||(E[6]=b=>N.value=b),class:"pf-filter-select"},[E[45]||(E[45]=a("option",{value:""},"All Projects",-1)),(g(!0),y(ye,null,At(te.value,b=>(g(),y("option",{key:b.code,value:b.code},m(b.code),9,BC))),128))],512),[[ps,N.value]])])):V("",!0),a("div",MC,[xe.value.length===0?(g(),y("div",FC,[...E[46]||(E[46]=[a("div",{class:"pf-empty-icon"},null,-1),a("p",null,"No transaction data available",-1),a("p",{class:"pf-empty-hint"},"Complete some trades in the Trade page to see your transaction history",-1)])])):(g(),y("div",VC,[(g(!0),y(ye,null,At(xe.value,b=>(g(),y("div",{key:b.id,class:"pf-transaction-item",onClick:M=>$g(b)},[a("div",{class:we(["pf-transaction-icon",b.type])},m(b.type==="buy"?"📈":"📉"),3),a("div",$C,[a("div",HC,m(b.type.toUpperCase())+" "+m(b.amount)+" "+m(b.projectCode),1),a("div",WC,m(b.projectName),1)]),a("div",GC,[a("div",KC,m(ut(b.timestamp)),1),a("div",YC,"AUD$"+m(b.amount),1)])],8,jC))),128))]))])])):V("",!0)])])])]))}},Tg=Tt(zC,[["__scopeId","data-v-2dea270e"]]),QC="/icons/signup-icon1.png",JC={name:"LoginView",emits:["notify","navigate"],data(){return{user_email:"",user_password:"",remember:!1,loginStatus:!1,loginStatusMessage:"",loginStatusClass:"",loading:!1}},mounted(){localStorage.getItem("isLoggedIn")==="true"&&(this.loginStatus=!0,this.loginStatusClass="status success")},methods:{async submitLogin(){if(!this.user_email||!this.user_password){this.$emit("notify","Please enter email and password");return}this.loading=!0,this.loginStatus=!0,this.loginStatusClass="status",this.loginStatusMessage="Logging in...";try{const e=await(await fetch("http://localhost:3000/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:this.user_email,user_password:this.user_password})})).json();e.status===0?(this.loginStatusClass="status success",this.loginStatusMessage="Login successful!",localStorage.setItem("isLoggedIn","true"),localStorage.setItem("token",e.token),this.remember&&localStorage.setItem("remember_email",this.user_email),this.saveUserInfo(e),window.dispatchEvent(new CustomEvent("auth-changed")),this.$emit("notify","Login successful!"),setTimeout(()=>{this.$router.push("/home")},1e3)):(this.loginStatusClass="status error",this.loginStatusMessage=`Login failed: ${e.message}`,this.$emit("notify",e.message))}catch(t){this.loginStatusClass="status error",this.loginStatusMessage=`Network error: ${t.message}`,this.$emit("notify",`Network error: ${t.message}`)}finally{this.loading=!1}},saveUserInfo(t){try{cg({user_email:this.user_email,user_name:t.user_name||"",...t}),console.log("User info saved from login:",this.user_email)}catch(e){console.error("Failed to save user info from login:",e)}}}},qC={class:"auth-card"},ZC={class:"auth-row"},XC={class:"auth-check"},eT=["disabled"],tT={class:"auth-alt"};function sT(t,e,s,n,r,i){return g(),y("div",qC,[e[10]||(e[10]=a("div",{class:"auth-logo"},[a("img",{src:QC,alt:"Mortgage RWA"})],-1)),e[11]||(e[11]=a("h1",{class:"auth-title"},"Login Your Account",-1)),e[12]||(e[12]=a("p",{class:"auth-sub"},"Welcome to Mortgage RWA",-1)),r.loginStatus?(g(),y("div",{key:0,class:we(["status",r.loginStatusClass])},m(r.loginStatusMessage),3)):V("",!0),a("form",{class:"auth-form",onSubmit:e[5]||(e[5]=ue((...o)=>i.submitLogin&&i.submitLogin(...o),["prevent"]))},[e[8]||(e[8]=a("label",{for:"lemail",class:"auth-label"},"Email",-1)),Se(a("input",{id:"lemail",type:"email",class:"input auth-input",placeholder:"Enter your email","onUpdate:modelValue":e[0]||(e[0]=o=>r.user_email=o),required:""},null,512),[[Ze,r.user_email,void 0,{trim:!0}]]),e[9]||(e[9]=a("label",{for:"lpass",class:"auth-label"},"Password",-1)),Se(a("input",{id:"lpass",type:"password",class:"input auth-input",placeholder:"••••••••","onUpdate:modelValue":e[1]||(e[1]=o=>r.user_password=o),required:""},null,512),[[Ze,r.user_password]]),a("div",ZC,[a("label",XC,[Se(a("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=o=>r.remember=o)},null,512),[[ql,r.remember]]),e[6]||(e[6]=a("span",null,"Remember for 30 days",-1))]),a("a",{href:"#",class:"auth-link",onClick:e[3]||(e[3]=ue(o=>t.$emit("navigate","forgot"),["prevent"]))},"Forgot password")]),a("button",{class:"btn orange auth-submit",type:"submit",disabled:r.loading},m(r.loading?"Logging in...":"Login"),9,eT),a("p",tT,[e[7]||(e[7]=ne(" Don't have an account? ",-1)),a("a",{href:"#",class:"auth-link",onClick:e[4]||(e[4]=ue(o=>t.$emit("navigate","signup"),["prevent"]))},"Sign up")])],32)])}const Ig=Tt(JC,[["render",sT],["__scopeId","data-v-c6c4c79f"]]);function nT(){const t=Date.now(),e=Math.random().toString(36).slice(2,7);return`user${t}${e}`}const rT="/icons/RWA-logo.png",iT={name:"SignupView",emits:["notify","navigate"],data(){return{user_email:"",user_password:"",user_name:"",user_phone:"",agreeTerms:!1,agreeEmailUpdates:!1,signupStatus:!1,signupStatusMessage:"",signupStatusClass:"",loading:!1}},methods:{generateUserId(){return nT()},async submitSignup(){this.clearFieldErrors();const t={user_email:this.user_email?.trim(),user_password:this.user_password,user_name:this.user_name?.trim(),user_phone:this.user_phone?.trim(),user_id:this.generateUserId()};console.log("🔍 注册表单数据:",t);const e=this.validateForm(t);if(this.agreeTerms||e.push("Please agree to the terms and conditions"),e.length>0){this.$emit("notify",`Validation errors: ${e.join(", ")}`),this.showFieldErrors(t);return}this.loading=!0,this.signupStatus=!0,this.signupStatusClass="status",this.signupStatusMessage="Registering...";try{console.log("🚀 发送注册请求:",t);const n=await(await fetch("http://localhost:3000/user/reguser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();n.status===0?(this.signupStatusClass="status success",this.signupStatusMessage=`Registration successful! User: ${this.user_email}`,this.saveUserInfo(),console.log("✅ Registration successful!"),console.log("📧 Email:",this.user_email),console.log("👤 Name:",this.user_name),console.log("📱 Phone:",this.user_phone),console.log("💾 User data saved to MySQL user table"),this.$emit("notify",n.message||"Registration successful! Please login to continue."),setTimeout(()=>{this.$router.push("/login")},1500)):(this.signupStatusClass="status error",this.signupStatusMessage=`Registration failed: ${n.message}`,console.error("❌ Registration failed:",n.message),console.error("🔍 Error details: status=",n.status),this.$emit("notify",n.message))}catch(s){this.signupStatusClass="status error",this.signupStatusMessage=`Network error: ${s.message}`,console.error("🌐 Network error:",s.message),console.error("🔍 Error type:",s.name),s.name==="TypeError"&&s.message.includes("fetch")?(console.error("🔌 Check if backend server is running on localhost:3000"),this.$emit("notify","Network error: Please check if the server is running")):this.$emit("notify",`Network error: ${s.message}`)}finally{this.loading=!1}},saveUserInfo(){try{lg({user_name:this.user_name,user_email:this.user_email,user_phone:this.user_phone,agree_email_updates:this.agreeEmailUpdates}),console.log("User info saved:",this.user_name,this.user_email,this.user_phone),console.log("Email updates preference:",this.agreeEmailUpdates)}catch(t){console.error("Failed to save user info:",t)}},validateForm(t){const e=[];return t.user_email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.user_email)||e.push("Invalid email format"):e.push("Email is required"),t.user_password?t.user_password.length<6&&e.push("Password must be at least 6 characters"):e.push("Password is required"),t.user_name&&t.user_name.length<2&&e.push("Name must be at least 2 characters if provided"),t.user_phone?this.isValidPhone(t.user_phone)||e.push("Invalid phone number format"):e.push("Phone number is required"),e},showFieldErrors(t){(!t.user_email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.user_email))&&this.showFieldError("semail","Invalid email format"),(!t.user_password||t.user_password.length<6)&&this.showFieldError("spass","Password must be at least 6 characters"),t.user_name&&t.user_name.length<2&&this.showFieldError("sname","Name must be at least 2 characters if provided"),(!t.user_phone||!this.isValidPhone(t.user_phone))&&this.showFieldError("sphone","Invalid phone number format")},showFieldError(t,e){const s=document.getElementById(t);if(s){s.classList.add("error");const n=document.createElement("div");n.className="error-message",n.textContent=e,s.parentNode.appendChild(n)}},clearFieldErrors(){document.querySelectorAll(".auth-input").forEach(t=>{t.classList.remove("error")}),document.querySelectorAll(".error-message").forEach(t=>{t.remove()})},isValidPhone(t){return/^[\+]?[1-9][\d]{0,15}$/.test(t.replace(/[\s\-\(\)]/g,""))},goToTerms(){this.$router.push("/terms")},goToPrivacy(){this.$router.push("/privacy")}}},oT={class:"auth-card"},aT={key:0,class:"modal-mask"},lT={class:"modal-wrapper"},cT={class:"modal-container"},uT={class:"auth-row"},dT={class:"auth-check"},fT={class:"auth-row"},hT={class:"auth-check"},pT=["disabled"],mT={class:"auth-alt"};function gT(t,e,s,n,r,i){return g(),y("div",oT,[t.showModal?(g(),y("div",aT,[a("div",lT,[a("div",cT,[a("h3",null,m(t.modalTitle),1),a("p",null,m(t.modalMessage),1),a("button",{class:"btn orange",onClick:e[0]||(e[0]=(...o)=>t.handleModalAction&&t.handleModalAction(...o))},m(t.modalButtonText),1)])])])):V("",!0),e[19]||(e[19]=a("div",{class:"auth-logo"},[a("img",{src:rT,alt:"Mortgage RWA"})],-1)),e[20]||(e[20]=a("h1",{class:"auth-title"},"Create an account",-1)),r.signupStatus?(g(),y("div",{key:1,class:we(["status",r.signupStatusClass])},m(r.signupStatusMessage),3)):V("",!0),a("form",{class:"auth-form",onSubmit:e[10]||(e[10]=ue((...o)=>i.submitSignup&&i.submitSignup(...o),["prevent"]))},[e[15]||(e[15]=a("label",{for:"semail",class:"auth-label"},"Email",-1)),Se(a("input",{id:"semail","onUpdate:modelValue":e[1]||(e[1]=o=>r.user_email=o),type:"email",class:"input auth-input",placeholder:"Enter your email",required:""},null,512),[[Ze,r.user_email,void 0,{trim:!0}]]),e[16]||(e[16]=a("label",{for:"spass",class:"auth-label"},"Password",-1)),Se(a("input",{id:"spass","onUpdate:modelValue":e[2]||(e[2]=o=>r.user_password=o),type:"password",class:"input auth-input",placeholder:"Enter your password",required:""},null,512),[[Ze,r.user_password]]),e[17]||(e[17]=a("label",{for:"sname",class:"auth-label"},"Full Name",-1)),Se(a("input",{id:"sname","onUpdate:modelValue":e[3]||(e[3]=o=>r.user_name=o),type:"text",class:"input auth-input",placeholder:"Enter your name"},null,512),[[Ze,r.user_name,void 0,{trim:!0}]]),e[18]||(e[18]=a("label",{for:"sphone",class:"auth-label"},"Phone number",-1)),Se(a("input",{id:"sphone","onUpdate:modelValue":e[4]||(e[4]=o=>r.user_phone=o),type:"tel",class:"input auth-input",placeholder:"Enter your phone number",required:""},null,512),[[Ze,r.user_phone,void 0,{trim:!0}]]),a("div",uT,[a("label",dT,[Se(a("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=o=>r.agreeTerms=o)},null,512),[[ql,r.agreeTerms]]),a("span",null,[e[11]||(e[11]=ne("I agree to the ",-1)),a("a",{href:"#",onClick:e[6]||(e[6]=ue((...o)=>i.goToTerms&&i.goToTerms(...o),["prevent"]))},"Terms"),e[12]||(e[12]=ne(" and ",-1)),a("a",{href:"#",onClick:e[7]||(e[7]=ue((...o)=>i.goToPrivacy&&i.goToPrivacy(...o),["prevent"]))},"Privacy Policy.")])])]),a("div",fT,[a("label",hT,[Se(a("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=o=>r.agreeEmailUpdates=o)},null,512),[[ql,r.agreeEmailUpdates]]),e[13]||(e[13]=a("span",null,"I want to receive e-mail updates from RWA. ",-1))])]),a("button",{class:"btn orange auth-submit",type:"submit",disabled:r.loading||!r.agreeTerms},m(r.loading?"registering...":"Sign up"),9,pT),a("p",mT,[e[14]||(e[14]=ne(" Already have an account? ",-1)),a("a",{href:"#",class:"auth-link",onClick:e[9]||(e[9]=ue(o=>t.go("/login"),["prevent"]))},"Log in")])],32)])}const xg=Tt(iT,[["render",gT],["__scopeId","data-v-55e3b169"]]),$f=["function kycLevel(address user) external view returns (uint8)","function blocked(address user) external view returns (bool)","function setKycLevel(address user, uint8 level) external","function setBlocked(address user, bool isBlocked) external","function setKycLevelBySig(address user, uint8 level, uint256 deadline, bytes32 nonce, bytes calldata signature) external","function setSigner(address signer) external","function kycSigner() external view returns (address)","function DOMAIN_SEPARATOR() external view returns (bytes32)","function usedNonce(bytes32 nonce) external view returns (bool)","event SetLevel(address indexed user, uint8 level, address indexed setter)","event Block(address indexed user, bool blocked, address indexed setter)","event SetSigner(address indexed signer)"],Hf=["function registry() external view returns (address)","function principalToken() external view returns (address)","function interestToken() external view returns (address)","function nextLoanId() external view returns (uint256)","function loans(uint256 loanId) external view returns (uint256 principal, uint256 annualRateBps, uint64 startDate, uint64 dueDate, string memory borrower, string memory lender, string memory collateral, string memory note, bool closed)","function loanHolder(uint256 loanId) external view returns (address)","function wireControllers() external","function createLoan((address holder, uint256 principalAmount, uint256 annualRateBps, uint64 startDate, uint64 dueDate, string memory borrower, string memory lender, string memory collateral, string memory note) calldata p) external returns (uint256 loanId)","function mintInterest(uint256 loanId, address to, uint256 amount) external","function redeem(uint256 loanId, uint256 principalAmt, uint256 interestAmt) external","function closeLoan(uint256 loanId) external","event CreateLoan(uint256 indexed loanId, address indexed holder, uint256 principal, uint256 rateBps)","event MintInterest(uint256 indexed loanId, address indexed to, uint256 amount)","event Redeem(uint256 indexed loanId, address indexed from, uint256 principalBurn, uint256 interestBurn)","event CloseLoan(uint256 indexed loanId)"],yT=["function whitelist(address user) external view returns (bool)","function blocked(address user) external view returns (bool)","function kycTier(address user) external view returns (uint8)","function kycExpireAt(address user) external view returns (uint64)","function setWhitelist(address user, bool allow) external","function setBlocked(address user, bool blocked) external","function setWhitelistBySig(address user, bool allow, uint8 tier, uint64 expireAt, uint256 nonce, uint256 deadline, uint8 v, bytes32 r, bytes32 s) external","function activateByProof(address user, bool allow, uint8 tier, uint64 expireAt, bytes32[] calldata proof) external","function canReceivePrincipal(address user) external view returns (bool)","function canReceiveInterest(address user) external view returns (bool)","function canRedeem(address user) external view returns (bool)","function checkPrincipal(address from, address to) external view","function checkInterest(address from, address to) external view","function minTierPrincipal() external view returns (uint8)","function minTierInterest() external view returns (uint8)","function minTierRedeem() external view returns (uint8)","function transfersPaused() external view returns (bool)","function nonces(address user) external view returns (uint256)","event WhitelistSet(address indexed user, bool allow)","event BlockedSet(address indexed user, bool blocked)","event KycStamped(address indexed user, bool allow, uint8 tier, uint64 expireAt)","event WhitelistBySig(address indexed user, bool allow, uint8 tier, uint64 expireAt, uint256 nonce, uint256 deadline, address indexed relayer)"],_i=["function name() external view returns (string memory)","function symbol() external view returns (string memory)","function decimals() external pure returns (uint8)","function totalSupply() external view returns (uint256)","function balanceOf(address account) external view returns (uint256)","function allowance(address owner, address spender) external view returns (uint256)","function transfer(address to, uint256 amount) external returns (bool)","function approve(address spender, uint256 amount) external returns (bool)","function transferFrom(address from, address to, uint256 amount) external returns (bool)","function registry() external view returns (address)","function requiredKycLevel() external view returns (uint8)","function paused() external view returns (bool)","function setRequiredKycLevel(uint8 level) external","function setPaused(bool p) external","event Transfer(address indexed from, address indexed to, uint256 value)","event Approval(address indexed owner, address indexed spender, uint256 value)","event RequiredKycLevel(uint8 oldLevel, uint8 newLevel)","event Paused(bool status)"],vT=["function buyTokens(uint256 amount) external payable","function sellTokens(uint256 amount) external","function getTokenPrice() external view returns (uint256)","function getUserBalance(address user) external view returns (uint256)","function getTradeHistory(uint256 limit) external view returns (tuple(uint256 id, address user, uint8 tradeType, uint256 amount, uint256 price, uint256 timestamp)[])","event TradeExecuted(uint256 indexed id, address indexed user, uint8 tradeType, uint256 amount, uint256 price, uint256 timestamp)"];class bT{constructor(){this.provider=null,this.signer=null,this.contracts={kycRegistry:null,loanIssuer:null,principalToken:null,interestToken:null,trade:null,complianceGuard:null},this.isInitialized=!1}async initialize(){try{if(console.log("🚀 Initializing Unified Contract Service..."),typeof window.ethereum>"u")throw new Error("Web3钱包未检测到，请安装MetaMask或类似钱包");return this.validateContractAddresses(),await this.checkNetwork(),this.provider=new As(window.ethereum),await window.ethereum.request({method:"eth_requestAccounts"}),this.signer=await this.provider.getSigner(),await this.initializeContracts(),this.isInitialized=!0,console.log("✅ Unified Contract Service initialized successfully!"),!0}catch(e){throw console.error("❌ Failed to initialize Unified Contract Service:",e),this.handleError(e)}}validateContractAddresses(){const e={"KYC Registry":ke.KYC_REGISTRY_ADDRESS,"Loan Issuer":ke.LOAN_ISSUER_ADDRESS,"Principal Token":ke.PRINCIPAL_TOKEN_ADDRESS,"Interest Token":ke.INTEREST_TOKEN_ADDRESS,"Trade Contract":ke.TRADE_CONTRACT_ADDRESS,"Compliance Guard":ke.COMPLIANCE_GUARD_ADDRESS};for(const[s,n]of Object.entries(e))this.validateContractAddress(n,s)}async checkNetwork(){const e=await window.ethereum.request({method:"eth_chainId"}),s="0x"+ke.NETWORK.chainId.toString(16),n=parseInt(e,16);if(console.log("🌐 Current chain ID:",n),console.log("🎯 Target chain ID:",ke.NETWORK.chainId),e!==s)throw new Error(`Please switch to ${ke.NETWORK.name} (Chain ID: ${ke.NETWORK.chainId})`)}async initializeContracts(){const e=[{name:"kycRegistry",address:ke.KYC_REGISTRY_ADDRESS,abi:$f},{name:"loanIssuer",address:ke.LOAN_ISSUER_ADDRESS,abi:Hf},{name:"principalToken",address:ke.PRINCIPAL_TOKEN_ADDRESS,abi:_i},{name:"interestToken",address:ke.INTEREST_TOKEN_ADDRESS,abi:_i},{name:"trade",address:ke.TRADE_CONTRACT_ADDRESS,abi:vT},{name:"complianceGuard",address:ke.COMPLIANCE_GUARD_ADDRESS,abi:yT}];for(const s of e)try{this.contracts[s.name]=new Wt(s.address,s.abi,this.signer),console.log(`✅ ${s.name} contract initialized`)}catch(n){throw console.error(`❌ Failed to initialize ${s.name} contract:`,n),new Error(`Failed to initialize ${s.name} contract: ${n.message}`)}}validateContractAddress(e,s){if(!e||e==="#"||e==="0x...")throw new Error(`${s} contract address is not configured properly`);if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`${s} contract address format is invalid: ${e}`);return!0}async verifyContractExists(e){try{if(this.provider||await this.initialize(),!la(e))throw new Error(`无效的合约地址格式: ${e}`);const s=await this.provider.getCode(e);return{exists:s!=="0x",codeLength:s.length,address:e}}catch(s){return console.error("❌ Failed to verify contract:",s),{exists:!1,error:s.message,address:e}}}async batchVerifyContracts(e){try{this.provider||await this.initialize(),console.log("🔍 Batch verifying contracts:",e);const s={};for(const[n,r]of Object.entries(e))r&&r!=="0x1234567890123456789012345678901234567890"?s[n]=await this.verifyContractExists(r):s[n]={exists:!1,error:"地址未配置或为默认地址",address:r};return console.log("✅ Batch verification completed:",s),s}catch(s){throw console.error("❌ Failed to batch verify contracts:",s),s}}async getNetworkInfo(){try{this.provider||await this.initialize();const e=await this.provider.getNetwork(),s=await this.provider.send("eth_chainId",[]);return{chainId:parseInt(s,16),name:e.name,ensAddress:e.ensAddress}}catch(e){throw console.error("❌ Failed to get network info:",e),e}}async switchNetwork(e){try{const s="0x"+e.toString(16);return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:s}]}),console.log("✅ Network switched to:",e),!0}catch(s){throw console.error("❌ Failed to switch network:",s),s}}async getUserAddress(){try{if(console.log("🔍 Getting user address..."),this.signer)try{const e=await this.signer.getAddress();return console.log("✅ Address from signer:",e),e}catch(e){console.warn("⚠️ Signer getAddress failed:",e.message)}if(!this.signer&&(console.log("🔄 Signer not available, initializing..."),await this.initialize(),this.signer))try{const e=await this.signer.getAddress();return console.log("✅ Address after initialization:",e),e}catch(e){console.warn("⚠️ Signer still not working:",e.message)}if(typeof window.ethereum<"u"){console.log("🔄 Trying direct ethereum access...");try{const e=await window.ethereum.request({method:"eth_accounts"});if(e&&e.length>0)return console.log("✅ Address from ethereum:",e[0]),e[0]}catch(e){console.warn("⚠️ Ethereum access failed:",e.message)}}return console.error("❌ Unable to get user address from any source"),null}catch(e){return console.error("❌ Failed to get user address:",e),null}}async validateUserAddress(e=null){try{if(console.log("🔍 Validating user address..."),e||(e=await this.getUserAddress()),!e)throw new Error("无法获取用户钱包地址");if(!la(e))throw new Error(`无效的钱包地址格式: ${e}`);if(e==="0x0000000000000000000000000000000000000000")throw new Error("钱包地址不能为零地址");return console.log("✅ User address validated:",e),{success:!0,address:e,isValid:!0}}catch(s){return console.error("❌ Address validation failed:",s),{success:!1,address:e,isValid:!1,error:s.message}}}async fetchTokenAddressesFromLoanIssuer(e){try{if(this.provider||await this.initialize(),console.log("🔍 Fetching token addresses from LoanIssuer:",e),!(await this.verifyContractExists(e)).exists)throw new Error(`LoanIssuer合约不存在: ${e}`);const n=new Wt(e,Hf,this.provider),[r,i,o,l]=await Promise.all([n.registry().catch(()=>"0x0000000000000000000000000000000000000000"),n.principalToken().catch(()=>"0x0000000000000000000000000000000000000000"),n.interestToken().catch(()=>"0x0000000000000000000000000000000000000000"),n.nextLoanId().catch(()=>0)]),c={loanIssuer:{address:e,registry:r,principalToken:i,interestToken:o,nextLoanId:l.toString()},tokenAddresses:{principalToken:i,interestToken:o}};return console.log("✅ Token addresses fetched:",c),c}catch(s){throw console.error("❌ Failed to fetch token addresses:",s),s}}async fetchTokenDetails(e){try{if(this.provider||await this.initialize(),console.log("🔍 Fetching token details:",e),!(await this.verifyContractExists(e)).exists)throw new Error(`代币合约不存在: ${e}`);const n=new Wt(e,_i,this.provider),[r,i,o,l,c,u,d]=await Promise.all([n.name().catch(()=>"未知"),n.symbol().catch(()=>"未知"),n.decimals().catch(()=>18),n.totalSupply().catch(()=>0),n.registry().catch(()=>"0x0000000000000000000000000000000000000000"),n.requiredKycLevel().catch(()=>0),n.paused().catch(()=>!1)]),f={address:e,name:r,symbol:i,decimals:o.toString(),totalSupply:Mt(l),registry:c,requiredKycLevel:u.toString(),paused:d};return console.log("✅ Token details fetched:",f),f}catch(s){throw console.error("❌ Failed to fetch token details:",s),s}}async fetchKycRegistryDetails(e){try{if(this.provider||await this.initialize(),console.log("🔍 Fetching KYC registry details:",e),!(await this.verifyContractExists(e)).exists)throw new Error(`KYC注册表合约不存在: ${e}`);const n=new Wt(e,$f,this.provider),[r,i]=await Promise.all([n.kycSigner().catch(()=>"0x0000000000000000000000000000000000000000"),n.DOMAIN_SEPARATOR().catch(()=>"0x0000000000000000000000000000000000000000000000000000000000000000")]),o={address:e,kycSigner:r,domainSeparator:i};return console.log("✅ KYC registry details fetched:",o),o}catch(s){throw console.error("❌ Failed to fetch KYC registry details:",s),s}}async fetchAllContractInfo(e){try{this.provider||await this.initialize(),console.log("🔍 Fetching all contract information:",e);const s={network:await this.getNetworkInfo(),verification:{},tokenAddresses:{},tokenDetails:{},kycRegistry:{}};if(s.verification=await this.batchVerifyContracts(e),s.verification.LOAN_ISSUER_ADDRESS?.exists)try{const n=await this.fetchTokenAddressesFromLoanIssuer(e.LOAN_ISSUER_ADDRESS);s.tokenAddresses=n.tokenAddresses,s.loanIssuer=n.loanIssuer}catch(n){console.warn("⚠️ Failed to fetch token addresses from LoanIssuer:",n.message)}if(s.tokenAddresses.principalToken&&s.verification.PRINCIPAL_TOKEN_ADDRESS?.exists)try{s.tokenDetails.principalToken=await this.fetchTokenDetails(s.tokenAddresses.principalToken)}catch(n){console.warn("⚠️ Failed to fetch principal token details:",n.message)}if(s.tokenAddresses.interestToken&&s.verification.INTEREST_TOKEN_ADDRESS?.exists)try{s.tokenDetails.interestToken=await this.fetchTokenDetails(s.tokenAddresses.interestToken)}catch(n){console.warn("⚠️ Failed to fetch interest token details:",n.message)}if(s.verification.KYC_REGISTRY_ADDRESS?.exists)try{s.kycRegistry=await this.fetchKycRegistryDetails(e.KYC_REGISTRY_ADDRESS)}catch(n){console.warn("⚠️ Failed to fetch KYC registry details:",n.message)}return console.log("✅ All contract information fetched:",s),s}catch(s){throw console.error("❌ Failed to fetch all contract info:",s),s}}async applyForKYC(e){try{this.contracts.kycRegistry||await this.initialize();const s=await this.getUserAddress();if(await this.contracts.kycRegistry.blocked(s))throw new Error("User is blocked from KYC verification");const r=await this.contracts.kycRegistry.kycLevel(s);if(r>=2)return{success:!0,message:"User already has sufficient KYC level",currentLevel:r};const i=vt(zn.defaultAbiCoder().encode(["string","string","string","string","string"],[e.firstName,e.lastName,e.dob,e.country,e.docType]));return console.log("KYC Data Hash:",i),console.log("KYC Data:",e),{success:!0,message:"KYC application submitted successfully",kycHash:i,userAddress:s}}catch(s){return console.error("KYC application failed:",s),{success:!1,error:s.message}}}async getKycLevel(e=null){try{return this.contracts.kycRegistry||await this.initialize(),e||(e=await this.getUserAddress()),await this.contracts.kycRegistry.kycLevel(e)}catch(s){return console.error("Failed to check KYC level:",s),0}}async isBlocked(e=null){try{return this.contracts.kycRegistry||await this.initialize(),e||(e=await this.getUserAddress()),await this.contracts.kycRegistry.blocked(e)}catch(s){return console.error("Failed to check block status:",s),!1}}async getTokenBalance(e,s=null){try{return s||(s=await this.getUserAddress()),await new Wt(e,_i,this.signer).balanceOf(s)}catch(n){return console.error("Failed to get token balance:",n),0n}}async getTokenInfo(e){try{const s=new Wt(e,_i,this.signer),[n,r,i,o]=await Promise.all([s.name(),s.symbol(),s.decimals(),s.totalSupply()]);return{name:n,symbol:r,decimals:i,totalSupply:o,address:e}}catch(s){return console.error("Failed to get token info:",s),null}}async buyTokens(e){try{this.contracts.trade||await this.initialize();const s=await this.getUserAddress();if(!s)throw new Error("无法获取用户钱包地址，请确保钱包已连接");if(console.log("💰 购买代币:",{amount:e,userAddress:s}),!ke.TRADE_CONTRACT_ADDRESS||ke.TRADE_CONTRACT_ADDRESS==="0x1234567890123456789012345678901234567890"){console.warn("⚠️ Trade contract address is not configured, simulating successful transaction");const l="0x"+Math.random().toString(16).substr(2,64),c=Math.floor(Math.random()*1e6)+1e6;return{success:!0,transactionHash:l,blockNumber:c,tokenPrice:"1.0",totalCost:e.toString(),userAddress:s}}let n,r;try{n=await this.contracts.trade.getTokenPrice(),r=n*BigInt(e),console.log("💰 获取到代币价格:",n.toString())}catch(l){console.warn("⚠️ 无法获取代币价格，使用默认价格:",l.message),n=Ji("1.0"),r=n*BigInt(e)}console.log("💰 购买代币:",{amount:e,userAddress:s,tokenPrice:n.toString(),totalCost:r.toString()});const o=await(await this.contracts.trade.buyTokens(e,{value:r})).wait();return{success:!0,transactionHash:o.transactionHash,blockNumber:o.blockNumber,tokenPrice:Mt(n),totalCost:Mt(r),userAddress:s}}catch(s){return console.error("❌ Failed to buy tokens:",s),{success:!1,error:s.message}}}async sellTokens(e){try{this.contracts.trade||await this.initialize();const s=await this.getUserAddress();if(!s)throw new Error("无法获取用户钱包地址，请确保钱包已连接");if(console.log("💸 出售代币:",{amount:e,userAddress:s}),!ke.TRADE_CONTRACT_ADDRESS||ke.TRADE_CONTRACT_ADDRESS==="0x1234567890123456789012345678901234567890"){console.warn("⚠️ Trade contract address is not configured, simulating successful transaction");const l="0x"+Math.random().toString(16).substr(2,64),c=Math.floor(Math.random()*1e6)+1e6;return{success:!0,transactionHash:l,blockNumber:c,tokenPrice:"1.0",totalCost:e.toString(),userAddress:s}}let n,r;try{n=await this.contracts.trade.getTokenPrice(),r=n*BigInt(e),console.log("💰 获取到代币价格:",n.toString())}catch(l){console.warn("⚠️ 无法获取代币价格，使用默认价格:",l.message),n=Ji("1.0"),r=n*BigInt(e)}console.log("💸 出售代币:",{amount:e,userAddress:s,tokenPrice:n.toString(),totalRevenue:r.toString()});const o=await(await this.contracts.trade.sellTokens(e)).wait();return{success:!0,transactionHash:o.transactionHash,blockNumber:o.blockNumber,tokenPrice:Mt(n),totalCost:Mt(r),userAddress:s}}catch(s){return console.error("Failed to sell tokens:",s),{success:!1,error:s.message}}}async getTokenPrice(){try{if(this.contracts.trade||await this.initialize(),console.log("🔍 Attempting to get token price from contract:",ke.TRADE_CONTRACT_ADDRESS),!ke.TRADE_CONTRACT_ADDRESS||ke.TRADE_CONTRACT_ADDRESS==="0x1234567890123456789012345678901234567890")return console.warn("⚠️ Trade contract address is not configured, returning default price"),"1.0";const e=await this.contracts.trade.getTokenPrice();return console.log("✅ Token price retrieved:",Mt(e)),Mt(e)}catch(e){return console.error("❌ Failed to get token price:",e),e.message.includes("BAD_DATA")||e.message.includes("UNSUPPORTED_OPERATION")?(console.warn("⚠️ Contract method not available, using default price"),"1.0"):"0"}}async isWhitelisted(e){try{this.contracts.complianceGuard||await this.initialize(),console.log("🔍 Checking whitelist status for:",e);const s=await this.contracts.complianceGuard.whitelist(e);return console.log("✅ Whitelist status:",s),s}catch(s){return console.error("❌ Failed to check whitelist status:",s),!1}}async getKycLevel(e){try{this.contracts.complianceGuard||await this.initialize(),console.log("🔍 Getting KYC level for:",e);const s=await this.contracts.complianceGuard.kycTier(e);return console.log("✅ KYC level:",s.toString()),parseInt(s.toString())}catch(s){return console.error("❌ Failed to get KYC level:",s),0}}async getWhitelistStatus(e){try{console.log("🔍 Getting comprehensive whitelist status for:",e);const[s,n,r,i]=await Promise.all([this.isWhitelisted(e),this.isBlocked(e),this.getKycLevel(e),this.getKycExpireAt(e)]),o=Math.floor(Date.now()/1e3),l=i>0&&o>i;let c="none";return n?c="rejected":s&&r>=2&&!l||s&&r>=2?c="approved":s&&r>=1&&(c="pending"),console.log("✅ Whitelist status:",c),{status:c,isWhitelisted:s,isBlocked:n,kycLevel:r,kycExpireAt:i,isKycExpired:l}}catch(s){return console.error("❌ Failed to get whitelist status:",s),{status:"none",isWhitelisted:!1,isBlocked:!1,kycLevel:0,kycExpireAt:0,isKycExpired:!1}}}async getKycExpireAt(e){try{this.contracts.complianceGuard||await this.initialize(),console.log("🔍 Getting KYC expire time for:",e);const s=await this.contracts.complianceGuard.kycExpireAt(e);return console.log("✅ KYC expire time:",s.toString()),parseInt(s.toString())}catch(s){return console.error("❌ Failed to get KYC expire time:",s),0}}async getLoanInfo(e){try{this.contracts.loanIssuer||await this.initialize();const s=await this.contracts.loanIssuer.loans(e),n=await this.contracts.loanIssuer.loanHolder(e);return{loanId:e,principal:s.principal,annualRateBps:s.annualRateBps,startDate:s.startDate,dueDate:s.dueDate,borrower:s.borrower,lender:s.lender,collateral:s.collateral,note:s.note,closed:s.closed,holder:n}}catch(s){return console.error("Failed to get loan info:",s),null}}async getNextLoanId(){try{return this.contracts.loanIssuer||await this.initialize(),await this.contracts.loanIssuer.nextLoanId()}catch(e){return console.error("Failed to get next loan ID:",e),0n}}handleError(e){return e.message.includes("UNSUPPORTED_OPERATION")?new Error("Contract address format is invalid. Please check your configuration."):e.message.includes("network")?new Error(`Network error: ${e.message}`):e.message.includes("wallet")?new Error("Wallet connection failed. Please check your MetaMask connection."):new Error(`Service error: ${e.message}`)}}const Rg=new bT,wT={name:"WhitelistApplication",props:{isKycVerified:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>({})}},data(){return{whitelistStatus:"none",showApplicationModal:!1,showProcessingModal:!1,showResultModal:!1,loading:!1,processingTitle:"Applying for Whitelist...",processingMessage:"Please wait while we process your whitelist application.",processingSubMessage:"Connecting to blockchain and submitting your application...",resultType:"success",resultTitle:"",resultMessage:"",showValidationErrorModal:!1,validationErrorTitle:"",validationErrorMessage:"",contractService:Rg}},computed:{statusClass(){switch(this.whitelistStatus){case"approved":return"green";case"pending":return"orange";case"rejected":return"red";default:return"gray"}}},async mounted(){try{await this.loadWhitelistStatus()}catch(t){console.error("Failed to initialize contract service:",t)}},methods:{async loadWhitelistStatus(){try{const t=gr();if(this.isKycVerified&&t>=Ye.LEVEL_2){this.whitelistStatus="approved",localStorage.setItem("whitelistStatus","approved"),console.log("✅ KYC Level 2用户，白名单状态自动设置为approved");return}if(!this.contractService)return;const s=await this.getUserWalletAddress();if(!s){console.warn("No wallet address available for whitelist status check");return}const n=await this.contractService.getWhitelistStatus(s);this.whitelistStatus=n.status,console.log("✅ Whitelist status loaded:",n)}catch(t){console.error("Failed to load whitelist status:",t);const e=localStorage.getItem("whitelistStatus");e&&(this.whitelistStatus=e)}},async applyWhitelist(){if(console.log("🔍 开始验证白名单申请条件..."),!Zl()){this.showValidationError("请先登录账户","您需要先登录才能申请白名单");return}if(!this.isKycVerified){this.showValidationError("KYC验证未完成","请先完成KYC身份验证才能申请白名单");return}const t=gr();t<Ye.LEVEL_2&&(console.log(`🔧 KYC验证成功，自动设置级别为 ${Ye.LEVEL_2}`),Aa(Ye.LEVEL_2),console.log("✅ KYC级别已设置为Level 2"));const e=await this.getUserWalletAddress();if(!e){this.showValidationError("钱包未连接","请先连接MetaMask钱包才能申请白名单");return}if(t>=Ye.LEVEL_2){console.log("✅ KYC Level 2用户，直接通过白名单申请"),this.whitelistStatus="approved",localStorage.setItem("whitelistStatus","approved"),this.showSuccessResult("Whitelist Approved!","Congratulations! Your KYC Level 2 status automatically qualifies you for whitelist. You can now start trading assets."),this.$emit("success","Whitelist automatically approved due to KYC Level 2 status!");return}const s=await this.checkCurrentWhitelistStatus(e);if(s==="approved"){this.showValidationError("已在白名单中","您的钱包地址已经在白名单中，无需重复申请");return}if(s==="pending"){this.showValidationError("申请审核中","您的白名单申请正在审核中，请耐心等待");return}console.log("✅ 所有条件验证通过，可以申请白名单"),this.showApplicationModal=!0},async submitApplication(){this.loading=!0,this.showApplicationModal=!1,this.showProcessingModal=!0;try{console.log("🚀 开始提交白名单申请...");const t=await this.getUserWalletAddress();if(!t)throw new Error("无法获取钱包地址");this.processingTitle="正在提交白名单申请...",this.processingMessage="正在连接区块链并提交您的申请",this.processingSubMessage="请稍候，不要关闭页面...";let e;if(this.contractService){console.log("📝 通过合约服务申请白名单...");const s={userAddress:t,kycLevel:gr(),timestamp:Date.now(),userInfo:this.userInfo};e=await this.contractService.applyForWhitelist(s)}else console.log("⚠️ 合约服务未初始化，使用模拟申请..."),await this.delay(2e3),e={success:!0,transactionHash:"0x"+Math.random().toString(16).substr(2,40),blockNumber:Math.floor(Math.random()*1e6)+1e6,message:"白名单申请已提交（模拟）"};e.success?(console.log("✅ 白名单申请提交成功:",e),this.whitelistStatus="pending",localStorage.setItem("whitelistStatus","pending"),e.transactionHash&&localStorage.setItem("whitelistTransactionHash",e.transactionHash),this.showProcessingModal=!1,console.log("🎉 白名单申请提交成功！"),console.log(`交易哈希: ${e.transactionHash||"N/A"}`),console.log("我们将在24小时内审核您的申请"),this.$emit("success","白名单申请提交成功！"),setTimeout(()=>{this.checkWhitelistStatus()},5e3)):(console.error("❌ 白名单申请失败:",e.error),this.showProcessingModal=!1,console.error("申请失败:",e.error||"白名单申请提交失败，请稍后重试。"),this.$emit("error","白名单申请失败，请稍后重试。"))}catch(t){console.error("❌ 白名单申请错误:",t),this.showProcessingModal=!1,console.error("申请错误:",t.message||"提交申请时发生错误，请检查网络连接后重试。"),this.$emit("error","提交申请时发生错误，请检查网络连接后重试。")}finally{this.loading=!1}},async checkWhitelistStatus(){this.loading=!0,this.showProcessingModal=!0,this.processingTitle="Checking Status...",this.processingMessage="Please wait while we check your whitelist status.",this.processingSubMessage="Querying blockchain for latest status...";try{await this.delay(1e3),await this.loadWhitelistStatus(),this.showProcessingModal=!1,this.whitelistStatus==="approved"?(this.showSuccessResult("Application Approved!","Congratulations! Your whitelist application has been approved. You can now start trading assets."),this.$emit("success","Whitelist application approved!")):this.whitelistStatus==="rejected"?(this.showErrorResult("Application Rejected","Your whitelist application was rejected. Please contact support for more information."),this.$emit("error","Whitelist application rejected.")):(this.showWarningResult("Still Pending","Your application is still under review. Please check again later."),this.$emit("info","Application still pending."))}catch(t){console.error("Failed to check whitelist status:",t),this.showProcessingModal=!1,this.showErrorResult("Check Failed","Failed to check whitelist status. Please try again."),this.$emit("error","Failed to check whitelist status.")}finally{this.loading=!1,this.resetProcessingModal()}},async reapplyWhitelist(){this.whitelistStatus="none",localStorage.setItem("whitelistStatus","none"),await this.applyWhitelist()},goToProjects(){this.$router.push("/listedprojects")},showSuccessResult(t,e){this.resultType="success",this.resultTitle=t,this.resultMessage=e,this.showResultModal=!0},showErrorResult(t,e){this.resultType="error",this.resultTitle=t,this.resultMessage=e,this.showResultModal=!0},showWarningResult(t,e){this.resultType="warning",this.resultTitle=t,this.resultMessage=e,this.showResultModal=!0},closeResultModal(){this.showResultModal=!1},resetProcessingModal(){this.processingTitle="Applying for Whitelist...",this.processingMessage="Please wait while we process your whitelist application.",this.processingSubMessage="Connecting to blockchain and submitting your application..."},delay(t){return new Promise(e=>setTimeout(e,t))},showValidationError(t,e){this.validationErrorTitle=t,this.validationErrorMessage=e,this.showValidationErrorModal=!0},async getUserWalletAddress(){try{return typeof window.ethereum<"u"&&(await window.ethereum.request({method:"eth_accounts"}))[0]||null}catch(t){return console.error("获取用户钱包地址失败:",t),null}},async checkCurrentWhitelistStatus(t){try{return this.contractService?(await this.contractService.getWhitelistStatus(t)).status:localStorage.getItem("whitelistStatus")||"none"}catch(e){return console.error("检查白名单状态失败:",e),localStorage.getItem("whitelistStatus")||"none"}}},watch:{isKycVerified(t){!t&&this.whitelistStatus!=="none"&&(this.whitelistStatus="none",localStorage.removeItem("whitelistStatus"))}}},AT={class:"whitelist-application"},ET={class:"field"},_T={key:0,class:"verified"},PT={key:1},ST={key:2},kT={key:3},CT=["disabled"],TT=["disabled"],IT=["disabled"],xT={key:0,class:"modal-mask"},RT={class:"modal-wrapper"},DT={class:"modal-container"},NT={style:{"margin-top":"18px",display:"flex",gap:"12px","justify-content":"flex-end"}},LT=["disabled"],OT=["disabled"],UT={key:0},BT={key:1},MT={key:1,class:"modal-mask"},FT={class:"modal-wrapper"},VT={class:"modal-container"},jT={style:{"text-align":"center",padding:"20px"}},$T={style:{"margin-bottom":"8px"}},HT={style:{color:"#64748b","font-size":"14px","margin-top":"8px"}},WT={key:2,class:"modal-mask"},GT={class:"modal-wrapper"},KT={class:"modal-container"},YT={style:{"text-align":"center",padding:"20px"}},zT={key:0},QT={key:1},JT={style:{"margin-bottom":"8px"}},qT={style:{"margin-top":"18px",display:"flex",gap:"12px","justify-content":"center"}},ZT={key:3,class:"modal-mask"},XT={class:"modal-wrapper"},eI={class:"modal-container"},tI={style:{"text-align":"center",padding:"20px"}},sI={style:{"margin-bottom":"8px",color:"#dc2626"}},nI={style:{color:"#6b7280","margin-bottom":"20px"}},rI={style:{"margin-top":"18px",display:"flex",gap:"12px","justify-content":"center"}};function iI(t,e,s,n,r,i){const o=J0('else"');return g(),y("div",AT,[a("div",ET,[e[11]||(e[11]=a("label",{class:"label"},"Whitelist Status",-1)),a("div",{class:we(["whitelist-banner",i.statusClass]),role:"status"},[e[10]||(e[10]=a("span",{class:"icon"},[a("svg",{viewBox:"0 0 24 24",class:"i"},[a("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})])],-1)),r.whitelistStatus==="approved"?(g(),y("span",_T,[...e[9]||(e[9]=[a("svg",{viewBox:"0 0 24 24",class:"i"},[a("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"})],-1),ne(" Whitelist Approved ",-1)])])):r.whitelistStatus==="pending"?(g(),y("span",PT,"Whitelist Application Pending")):r.whitelistStatus==="rejected"?(g(),y("span",ST,"Not Qualified for Transaction")):(g(),y("span",kT,"Apply for Whitelist")),r.whitelistStatus==="none"?(g(),y("button",{key:4,class:"link",type:"button",onClick:e[0]||(e[0]=(...l)=>i.applyWhitelist&&i.applyWhitelist(...l)),disabled:r.loading},"Apply Now",8,CT)):r.whitelistStatus==="pending"?(g(),y("button",{key:5,class:"link",type:"button",onClick:e[1]||(e[1]=(...l)=>i.checkWhitelistStatus&&i.checkWhitelistStatus(...l)),disabled:r.loading},"Check Status",8,TT)):r.whitelistStatus==="approved"?(g(),y("button",{key:6,class:"link",type:"button",onClick:e[2]||(e[2]=(...l)=>i.goToProjects&&i.goToProjects(...l))},"Start Trading")):r.whitelistStatus==="rejected"?(g(),y("button",{key:7,class:"link",type:"button",onClick:e[3]||(e[3]=(...l)=>i.reapplyWhitelist&&i.reapplyWhitelist(...l)),disabled:r.loading},"Reapply",8,IT)):V("",!0)],2)]),r.showApplicationModal?(g(),y("div",xT,[a("div",RT,[a("div",DT,[e[12]||(e[12]=a("h2",{style:{"margin-bottom":"8px"}},"Apply for Whitelist",-1)),e[13]||(e[13]=a("p",null,"You are about to apply for the whitelist to start trading assets.",-1)),e[14]||(e[14]=a("p",null,[a("strong",null,"Requirements:")],-1)),e[15]||(e[15]=a("ul",{style:{margin:"8px 0","padding-left":"20px"}},[a("li",null,"KYC verification completed ✅"),a("li",null,"Valid wallet connection"),a("li",null,"Agreement to terms and conditions")],-1)),a("div",NT,[a("button",{class:"btn light",onClick:e[4]||(e[4]=l=>r.showApplicationModal=!1),disabled:r.loading},"Cancel",8,LT),a("button",{class:"btn orange",onClick:e[5]||(e[5]=(...l)=>i.submitApplication&&i.submitApplication(...l)),disabled:r.loading},[r.loading?(g(),y("span",UT,"Applying...")):(g(),y("span",BT,"Apply Now"))],8,OT)])])])])):V("",!0),r.showProcessingModal?(g(),y("div",MT,[a("div",FT,[a("div",VT,[a("div",jT,[e[16]||(e[16]=a("div",{class:"spinner"},null,-1)),a("h2",$T,m(r.processingTitle),1),a("p",null,m(r.processingMessage),1),a("p",HT,m(r.processingSubMessage),1)])])])])):V("",!0),r.showResultModal?(g(),y("div",WT,[a("div",GT,[a("div",KT,[a("div",YT,[a("div",{class:we(["result-icon",r.resultType])},[r.resultType==="success"?(g(),y("span",zT,"✓")):r.resultType==="error"?(g(),y("span",QT,"✗")):V("",!0),Se((g(),y("span",null,[...e[17]||(e[17]=[ne("⚠",-1)])])),[[o]])],2),a("h2",JT,m(r.resultTitle),1),a("p",null,m(r.resultMessage),1),a("div",qT,[r.resultType==="success"?(g(),y("button",{key:0,class:"btn orange",onClick:e[6]||(e[6]=(...l)=>i.goToProjects&&i.goToProjects(...l))},"Start Trading")):V("",!0),a("button",{class:"btn light",onClick:e[7]||(e[7]=(...l)=>i.closeResultModal&&i.closeResultModal(...l))},"Close")])])])])])):V("",!0),r.showValidationErrorModal?(g(),y("div",ZT,[a("div",XT,[a("div",eI,[a("div",tI,[e[18]||(e[18]=a("div",{class:"result-icon error",style:{"background-color":"#fee2e2",color:"#dc2626"}},[a("span",null,"⚠")],-1)),a("h2",sI,m(r.validationErrorTitle),1),a("p",nI,m(r.validationErrorMessage),1),a("div",rI,[a("button",{class:"btn orange",onClick:e[8]||(e[8]=l=>r.showValidationErrorModal=!1)},"确认")])])])])])):V("",!0)])}const oI=Tt(wT,[["render",iI],["__scopeId","data-v-e8aaa622"]]),aI={name:"ProfileView",components:{WhitelistApplication:oI},emits:["navigate","notify"],data(){return{kycStatus:Ll(),form:{twoFA:"off",email:"",walletAction:""},emailCode:"",emailCodeSent:!1,emailVerified:!1,generatedCode:"",_offVis:null,_offStorage:null,_offAfterEach:null,showEmailModal:!1,userInfo:Ct(),whitelistStatus:"none",kycLevel:gr(),apiUserData:null,userLoading:!1,userError:null}},computed:{isVerified(){return this.kycStatus===Vs.VERIFIED},isPending(){return this.kycStatus===Vs.PENDING},userName(){return this.apiUserData?.name?this.apiUserData.name:ba()},userInitial(){return this.apiUserData?.name?this.apiUserData.name.charAt(0).toUpperCase():fE()},userEmail(){if(this.apiUserData?.email)return this.apiUserData.email;const t=og();if(t)return t;const e=localStorage.getItem("remember_email");return e||""},userPhone(){if(this.apiUserData?.phone)return this.apiUserData.phone;const t=Ct();return t.phone?t.phone:""},emailVerificationText(){return this.emailVerified?"Verified":this.emailCodeSent?"Verification Sent":"Not Verified"},emailVerificationIcon(){return this.emailVerified?"✅":this.emailCodeSent?"📧":"❌"},emailVerificationClass(){return this.emailVerified?"email-verified":this.emailCodeSent?"email-pending":"email-unverified"},kycLevelText(){switch(this.kycLevel){case Ye.LEVEL_0:return"Level 0 (Unverified)";case Ye.LEVEL_1:return"Level 1 (Basic)";case Ye.LEVEL_2:return"Level 2 (Advanced)";case Ye.LEVEL_3:return"Level 3 (Premium)";default:return"Unknown"}},kycLevelClass(){switch(this.kycLevel){case Ye.LEVEL_0:return"level-0";case Ye.LEVEL_1:return"level-1";case Ye.LEVEL_2:return"level-2";case Ye.LEVEL_3:return"level-3";default:return"level-unknown"}},whitelistStatusText(){switch(this.whitelistStatus){case"approved":return"Approved";case"pending":return"Pending Review";case"rejected":return"Not Qualified for Transaction";case"none":return"Not Applied";default:return"Unknown"}},whitelistStatusClass(){switch(this.whitelistStatus){case"approved":return"status-approved";case"pending":return"status-pending";case"rejected":return"status-rejected";case"none":return"status-none";default:return"status-unknown"}},tradingPermissionText(){return this.kycLevel>=Ye.LEVEL_2&&this.whitelistStatus==="approved"?"Full Access":this.kycLevel>=Ye.LEVEL_2?"Limited Access":"No Access"},tradingPermissionClass(){return this.kycLevel>=Ye.LEVEL_2&&this.whitelistStatus==="approved"?"permission-full":this.kycLevel>=Ye.LEVEL_2?"permission-limited":"permission-none"},tradingPermissionDescription(){return this.kycLevel>=Ye.LEVEL_2&&this.whitelistStatus==="approved"?"Complete trading access to all RWA products and features":this.kycLevel>=Ye.LEVEL_2?"Limited trading access - whitelist approval required for full access":"Trading access requires KYC verification and whitelist approval"},tradingPermissionRequirements(){const t=[];return this.kycLevel<Ye.LEVEL_2&&t.push("Complete KYC verification (Level 2+)"),this.whitelistStatus!=="approved"&&(this.whitelistStatus==="none"?t.push("Apply for whitelist approval"):this.whitelistStatus==="pending"?t.push("Wait for whitelist approval"):this.whitelistStatus==="rejected"&&t.push("Reapply for whitelist approval")),this.kycLevel>=Ye.LEVEL_2&&this.whitelistStatus==="approved"&&t.push("All requirements met"),t}},watch:{kycStatus:{handler(t,e){console.log("🔄 KYC状态变化:",e,"->",t),t===Vs.VERIFIED&&e!==Vs.VERIFIED&&(console.log("✅ KYC验证成功，自动更新Account Status"),this.kycLevel=gr(),this.kycLevel<Ye.LEVEL_2&&(Aa(Ye.LEVEL_2),this.kycLevel=Ye.LEVEL_2,console.log("🔧 自动设置KYC等级为Level 2")),this.loadStatusInfo())},immediate:!1},kycLevel:{handler(t,e){console.log("🔄 KYC等级变化:",e,"->",t),t>=Ye.LEVEL_2&&this.isVerified&&(console.log("✅ KYC等级达到Level 2，自动更新白名单状态"),this.loadStatusInfo())},immediate:!1}},async mounted(){const t=()=>{this.kycStatus=Ll(),this.kycLevel=gr(),this.loadStatusInfo()},e=()=>{this.userInfo=Ct()},s=()=>{this.loadStatusInfo()};t(),e(),s(),this.initializeUserDisplay(),await this.loadUserFromAPI();const n=()=>{console.log("🔄 ProfileView: 检测到登录状态变化，重新加载用户信息"),this.loadUserFromAPI()};window.addEventListener("auth-changed",n),this._offAuthChange=()=>window.removeEventListener("auth-changed",n);const r=()=>document.visibilityState==="visible"&&(t(),e(),s());document.addEventListener("visibilitychange",r),this._offVis=()=>document.removeEventListener("visibilitychange",r);const i=c=>{c.key==="kycStatus"&&t(),c.key==="kycLevel"&&t(),c.key==="userInfo"&&e(),c.key==="whitelistStatus"&&s()};window.addEventListener("storage",i),this._offStorage=()=>window.removeEventListener("storage",i),this._offAfterEach=this.$router.afterEach(c=>{c.path==="/profile"&&(t(),e(),s())});const o=()=>{e(),this.$forceUpdate()};window.addEventListener(Pf,o),this._offUserInfo=()=>window.removeEventListener(Pf,o);const l=()=>{console.log("🎉 收到KYC验证成功事件，更新Account Status"),t()};window.addEventListener("kyc-verification-success",l),this._offKycSuccess=()=>window.removeEventListener("kyc-verification-success",l)},activated(){this.kycStatus=Ll()},beforeUnmount(){this._offVis&&this._offVis(),this._offStorage&&this._offStorage(),this._offAfterEach&&this._offAfterEach(),this._offUserInfo&&this._offUserInfo(),this._offKycSuccess&&this._offKycSuccess(),this._offAuthChange&&this._offAuthChange()},methods:{initializeUserDisplay(){console.log("🚀 ProfileView: 初始化用户信息显示");const t=Ct(),e=localStorage.getItem("remember_email");(t.name||t.email||e)&&(this.apiUserData={name:t.name||(e?e.split("@")[0]:""),email:t.email||e||"",phone:t.phone||"",firstName:t.firstName||"",lastName:t.lastName||""},console.log("✅ ProfileView: 立即显示本地用户信息:",this.apiUserData))},async loadUserFromAPI(){try{this.userLoading=!0,this.userError=null,console.log("🔄 ProfileView: 开始获取用户信息...");const t=localStorage.getItem("isLoggedIn"),e=localStorage.getItem("token"),s=localStorage.getItem("remember_email");if(console.log("📊 ProfileView: 登录状态检查:",{isLoggedIn:t,hasToken:!!e,rememberEmail:s}),!t||!e){console.log("⚠️ ProfileView: 用户未登录，使用本地存储信息");const l=Ct();if(l.name||l.email){this.apiUserData={name:l.name,email:l.email,phone:l.phone,firstName:l.firstName,lastName:l.lastName},console.log("✅ ProfileView: 使用本地存储用户信息:",this.apiUserData);return}if(s){this.apiUserData={email:s,name:s.split("@")[0]},console.log("✅ ProfileView: 使用记住的邮箱信息:",this.apiUserData);return}this.userError="用户未登录，请先登录";return}const n={"Content-Type":"application/json",Authorization:`Bearer ${e}`};console.log("🔑 ProfileView: 使用token进行API请求");const r=["http://localhost:3000/user/login","http://localhost:3000/user/userinfo","http://localhost:3000/api/user","http://localhost:3000/user"];let i=null,o=null;for(const l of r)try{console.log(`🔍 ProfileView: 尝试API端点: ${l}`);const c=await fetch(l,{method:"GET",headers:n});if(console.log(`📡 ProfileView: ${l} 响应状态:`,c.status),c.ok){const u=await c.json();if(console.log(`✅ ProfileView: ${l} 返回数据:`,u),u.status===0&&u.data?i=u.data:(u.user_email||u.name||u.email)&&(i=u),i){console.log(`✅ ProfileView: 从 ${l} 成功获取用户数据`);break}}else c.status===401?(console.warn(`⚠️ ProfileView: ${l} 认证失败`),o="认证失败，token可能已过期"):(console.warn(`⚠️ ProfileView: ${l} 返回错误:`,c.status),o=`API请求失败: ${c.status} ${c.statusText}`)}catch(c){console.warn(`❌ ProfileView: ${l} 请求失败:`,c.message),o=c.message}if(i){console.log("✅ ProfileView: 成功获取用户数据:",i),this.apiUserData=i;const l={email:i.user_email||i.email||i.userEmail,name:i.user_name||i.name||i.userName,phone:i.user_phone||i.phone||i.userPhone,firstName:i.firstName||i.first_name,lastName:i.lastName||i.last_name,id:i.user_id||i.id||i.userId},c=Object.fromEntries(Object.entries(l).filter(([u,d])=>d));if(Object.keys(c).length>0){const u={...Ct(),...c};mr(u),this.userInfo=u,console.log("✅ ProfileView: 本地用户信息已更新:",u)}}else{console.warn("⚠️ ProfileView: 所有API端点都失败，使用本地存储信息");const l=Ct();l.name||l.email?(this.apiUserData={name:l.name,email:l.email,phone:l.phone},console.log("✅ ProfileView: 使用本地存储作为fallback:",this.apiUserData)):this.userError=o||"无法获取用户信息"}}catch(t){if(console.error("❌ ProfileView: 获取用户信息失败:",t),t.name==="TypeError"&&t.message.includes("fetch")){this.userError="网络连接失败，使用本地存储信息";const e=Ct();(e.name||e.email)&&(this.apiUserData={name:e.name,email:e.email,phone:e.phone},console.log("✅ ProfileView: 网络失败，使用本地存储:",this.apiUserData))}else this.userError=`获取用户信息失败: ${t.message}`}finally{this.userLoading=!1,console.log("🏁 ProfileView: 用户信息加载完成")}},isRequirementMet(t){return t.includes("KYC verification")?this.kycLevel>=Ye.LEVEL_2:t.includes("whitelist approval")?this.whitelistStatus==="approved":t.includes("All requirements met")?this.kycLevel>=Ye.LEVEL_2&&this.whitelistStatus==="approved":!1},async loadStatusInfo(){try{if(console.log("🔄 开始加载状态信息..."),this.kycLevel=gr(),console.log("📊 当前KYC等级:",this.kycLevel),console.log("📊 当前KYC状态:",this.kycStatus),this.isVerified){if(console.log("✅ 用户已通过KYC验证"),this.kycLevel>=Ye.LEVEL_2){this.whitelistStatus="approved",localStorage.setItem("whitelistStatus","approved"),console.log("✅ KYC Level 2用户，白名单状态自动设置为approved"),console.log("📊 更新后的状态 - KYC Level:",this.kycLevel,"Whitelist:",this.whitelistStatus);return}const t=localStorage.getItem("whitelistStatus");t&&(this.whitelistStatus=t,console.log("📊 从本地存储加载白名单状态:",t))}else this.whitelistStatus="none",console.log("❌ 用户未通过KYC验证，设置默认状态");console.log("📊 最终状态 - KYC Level:",this.kycLevel,"Whitelist:",this.whitelistStatus)}catch(t){console.error("Failed to load status info:",t)}},isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)},async sendEmailVerification(){const t=this.userEmail;if(!t||!this.isValidEmail(t)){this.$emit("notify","Please provide a valid email address");return}try{console.log("📧 发送邮箱验证到:",t);const e=await fetch("http://localhost:3000/api/email/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:t})});e.ok?(this.emailCodeSent=!0,this.$emit("notify","Verification email sent successfully"),console.log("✅ 邮箱验证邮件发送成功")):(this.$emit("notify","Failed to send verification email"),console.error("❌ 邮箱验证邮件发送失败:",e.status))}catch(e){console.error("❌ 发送邮箱验证失败:",e),this.$emit("notify","Network error, please try again")}},async sendEmailCode(){if(!this.isValidEmail(this.form.email)){this.$emit("notify","Please enter a valid email.");return}try{const e=await(await fetch(void 0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:this.form.email})})).json();e.status===0?(this.emailCodeSent=!0,this.generatedCode=e.code,this.showEmailModal=!0,this.$emit("notify",e.message||"验证码已发送到您的邮箱")):this.$emit("notify",e.message||"Failed to send email.")}catch{this.$emit("notify","Network error, please try again.")}},async verifyEmailCode(){try{const e=await(await fetch(void 0,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:this.form.email,verification_code:this.form.emailCode})})).json();e.status===0?(this.emailVerified=!0,this.emailCodeSent=!1,this.form.emailCode="",this.$emit("notify",e.message||"Email verified and bound to account.")):this.$emit("notify",e.message||"Incorrect verification code.")}catch{this.$emit("notify","Network error, please try again.")}},verifyKYC(){this.$router.push("/kycService")},cancelKYC(){confirm("Are you sure you want to cancel KYC verification?")&&(wa(Vs.UNVERIFIED),this.kycStatus=Vs.UNVERIFIED,Aa(Ye.LEVEL_0),this.$emit("notify","KYC verification has been cancelled."))},onCancel(){this.$emit("navigate","home")},onSave(){if(!this.isVerified)return this.$emit("notify","Please complete KYC first.");if(this.form.email&&!this.isValidEmail(this.form.email))return this.$emit("notify","Please enter a valid email.");if(this.form.email&&!this.emailVerified)return this.$emit("notify","Please verify your email before saving.");this.$emit("notify","Profile saved (demo)")},logout(){localStorage.removeItem("token"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("remember_email"),window.dispatchEvent(new CustomEvent("auth-changed")),this.$emit("notify","You have logged out."),this.$router.push("/login")},handleWhitelistSuccess(t){console.log("✅ Whitelist application successful:",t),this.$emit("notify",t),this.whitelistStatus="pending",localStorage.setItem("whitelistStatus","pending"),this.loadStatusInfo(),console.log("🔄 Trading Permission updated after whitelist application")},handleWhitelistError(t){console.log("❌ Whitelist application error:",t),this.$emit("notify",t)},handleWhitelistInfo(t){console.log("ℹ️ Whitelist application info:",t),this.$emit("notify",t),this.loadStatusInfo(),console.log("🔄 Trading Permission updated after whitelist info update")}}},lI={class:"profile-page"},cI={class:"topbar container"},uI={class:"breadcrumb","aria-label":"Breadcrumb"},dI={class:"container head"},fI={class:"avatar"},hI={class:"avatar-initial"},pI={class:"title"},mI={class:"user-contact-info"},gI={class:"contact-item"},yI={class:"contact-value"},vI={class:"contact-item"},bI={class:"contact-value"},wI={key:0,class:"contact-item loading-item"},AI={key:1,class:"contact-item error-item"},EI={class:"contact-value"},_I={key:0,class:"modal-mask"},PI={class:"modal-wrapper"},SI={class:"modal-container"},kI={style:{"margin-top":"18px","text-align":"right"}},CI={class:"status-section"},TI={class:"field"},II={key:0},xI={key:1,class:"verified"},RI={class:"field"},DI={class:"permission-text"},NI={class:"requirement-icon"},LI={class:"actions bottom"};function OI(t,e,s,n,r,i){const o=Di("WhitelistApplication");return g(),y("section",lI,[a("header",cI,[a("nav",uI,[a("button",{class:"crumb-back",onClick:e[0]||(e[0]=l=>t.$emit("navigate","home")),"aria-label":"Back to Home"},[...e[10]||(e[10]=[a("svg",{viewBox:"0 0 24 24",class:"i"},[a("path",{d:"M10 19a1 1 0 0 1-.7-.3l-7-7a1 1 0 0 1 0-1.4l7-7a1 1 0 1 1 1.4 1.4L4.41 11H21a1 1 0 1 1 0 2H4.41l6.3 6.3A1 1 0 0 1 10 19z"})],-1)])]),e[11]||(e[11]=a("span",{class:"sep"},"/",-1)),e[12]||(e[12]=a("span",{class:"crumb-current"},"Profile",-1))])]),a("div",dI,[a("div",fI,[a("span",hI,m(i.userInitial),1)]),a("div",null,[a("h1",pI,m(i.userName),1)])]),a("form",{class:"container form",onSubmit:e[9]||(e[9]=ue((...l)=>i.onSave&&i.onSave(...l),["prevent"]))},[a("div",mI,[a("div",null,[e[19]||(e[19]=a("label",{class:"label"},[ne("Personal Information "),a("span",{class:"req"})],-1)),a("div",gI,[e[13]||(e[13]=a("span",{class:"contact-label"},"Email:",-1)),a("span",yI,m(i.userEmail||"Not provided"),1),a("span",{class:we(["email-status",i.emailVerificationClass])},"   "+m(i.emailVerificationText),3),r.emailVerified?V("",!0):(g(),y("button",{key:0,class:"btn-small",type:"button",onClick:e[1]||(e[1]=(...l)=>i.sendEmailVerification&&i.sendEmailVerification(...l))}," Verify Email "))]),a("div",vI,[e[14]||(e[14]=a("span",{class:"contact-label"},"Phone:",-1)),a("span",bI,m(i.userPhone||"Not provided"),1),e[15]||(e[15]=a("button",{class:"btn-small",type:"button"},"Change my phone number",-1))]),e[20]||(e[20]=a("div",{class:"contact-item"},[a("span",{class:"contact-label"},"Password:"),a("button",{class:"btn-small",type:"button"},"Change my password")],-1)),r.userLoading?(g(),y("div",wI,[...e[16]||(e[16]=[a("span",{class:"contact-icon"},"🔄",-1),a("span",{class:"contact-label"},"Status:",-1),a("span",{class:"contact-value"},"Loading user information...",-1)])])):V("",!0),r.userError&&!r.userLoading?(g(),y("div",AI,[e[17]||(e[17]=a("span",{class:"contact-icon"},"⚠️",-1)),e[18]||(e[18]=a("span",{class:"contact-label"},"Status:",-1)),a("span",EI,m(r.userError),1)])):V("",!0)]),r.showEmailModal?(g(),y("div",_I,[a("div",PI,[a("div",SI,[e[21]||(e[21]=Dt('<h2 style="margin-bottom:8px;" data-v-44895082>Check Your Email</h2><p data-v-44895082>Verify your email address to use your account.<br data-v-44895082> We sent an email with a button to verify your email address.<br data-v-44895082> Did you receive the email? If not, check your spam folder or request a new verification email for up to 3 days.<br data-v-44895082> If you do not verify your email address within 3 days, you will need to create a new account.<br data-v-44895082> If you are having trouble, see Account Help.</p><div style="margin-top:12px;display:flex;flex-wrap:wrap;gap:10px;" data-v-44895082><a href="#" style="color:#ea7a2e;text-decoration:underline;" data-v-44895082>Account Help</a><a href="#" style="color:#ea7a2e;text-decoration:underline;" data-v-44895082>Subscriptions</a><a href="#" style="color:#ea7a2e;text-decoration:underline;" data-v-44895082>Unsubscribe</a><a href="#" style="color:#ea7a2e;text-decoration:underline;" data-v-44895082>Privacy / Do Not Sell My Info</a><a href="#" style="color:#ea7a2e;text-decoration:underline;" data-v-44895082>Cookie Preferences</a></div>',3)),a("div",kI,[a("button",{class:"btn orange",onClick:e[2]||(e[2]=l=>r.showEmailModal=!1)},"OK")])])])])):V("",!0)]),a("div",CI,[e[27]||(e[27]=a("h3",{class:"status-title"},"Account Status",-1)),a("div",TI,[e[24]||(e[24]=a("label",{class:"label"},[ne("KYC verification "),a("span",{class:"req"},"*")],-1)),a("div",{class:we(["kyc-banner",i.isVerified?"green":"orange"]),role:"status"},[e[23]||(e[23]=a("span",{class:"icon"},[a("svg",{viewBox:"0 0 24 24",class:"i"},[a("path",{d:"M12 2 2 7l10 5 10-5-10-5Zm0 7L2 4v13l10 5 10-5V4L12 9Zm0 9.5-7-3.5V9l7 3.5V20.5Z"})])],-1)),i.isVerified?(g(),y("span",xI,[e[22]||(e[22]=a("svg",{viewBox:"0 0 24 24",class:"i"},[a("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"})],-1)),ne(" "+m(i.kycLevelText),1)])):(g(),y("span",II,"Verify now")),i.isVerified?(g(),y("button",{key:3,class:"link danger",type:"button",onClick:e[4]||(e[4]=(...l)=>i.cancelKYC&&i.cancelKYC(...l))},"Cancel verification")):(g(),y("button",{key:2,class:"link",type:"button",onClick:e[3]||(e[3]=(...l)=>i.verifyKYC&&i.verifyKYC(...l))},"Start"))],2)]),i.isVerified?(g(),ea(o,{key:0,"is-kyc-verified":i.isVerified,"user-info":r.userInfo,onSuccess:i.handleWhitelistSuccess,onError:i.handleWhitelistError,onInfo:i.handleWhitelistInfo},null,8,["is-kyc-verified","user-info","onSuccess","onError","onInfo"])):V("",!0),a("div",RI,[e[26]||(e[26]=a("label",{class:"label"},[ne("Trading Permission "),a("span",{class:"req"})],-1)),a("div",{class:we(["kyc-banner",i.isVerified?"green":"orange"]),role:"status"},[e[25]||(e[25]=a("span",{class:"icon"},[a("svg",{viewBox:"0 0 24 24",class:"i"},[a("path",{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"})])],-1)),a("span",DI,[(g(!0),y(ye,null,At(i.tradingPermissionRequirements,l=>(g(),y("li",{key:l,class:we({"requirement-met":i.isRequirementMet(l)})},[a("span",NI,m((i.isRequirementMet(l),"")),1),ne(" "+m(l),1)],2))),128))]),a("span",{class:we(["permission-badge",i.tradingPermissionClass])},m(i.tradingPermissionText),3),i.isVerified?(g(),y("button",{key:1,class:"link danger",type:"button",onClick:e[6]||(e[6]=(...l)=>i.cancelKYC&&i.cancelKYC(...l))},"Cancel verification")):(g(),y("button",{key:0,class:"link",type:"button",onClick:e[5]||(e[5]=(...l)=>i.verifyKYC&&i.verifyKYC(...l))},"Start"))],2)])]),a("div",LI,[a("button",{class:"btn light",type:"button",onClick:e[7]||(e[7]=(...l)=>i.onCancel&&i.onCancel(...l))},"Cancel"),e[28]||(e[28]=a("button",{class:"btn orange",type:"submit"},"Save",-1)),a("button",{class:"btn light",type:"button",onClick:e[8]||(e[8]=(...l)=>i.logout&&i.logout(...l)),style:{"margin-left":"auto"}},"Log out")])],32)])}const Dg=Tt(aI,[["render",OI],["__scopeId","data-v-44895082"]]),UI={key:0,class:"modal-mask"},BI={class:"modal-wrapper"},MI={class:"modal-container"},FI={style:{margin:"16px 0"}},VI={style:{display:"block","font-size":"15px",padding:"8px 0",color:"#ffffff",background:"#2a2a4a","border-radius":"8px"}},jI={style:{"text-align":"right"}},$I={key:1,class:"modal-mask"},HI={class:"modal-wrapper"},WI={class:"modal-container"},GI={style:{color:"#ffffff"}},KI={style:{"text-align":"right"}},YI={class:"mm-page"},zI={class:"mm-account-section"},QI={class:"mm-topbar"},JI={class:"mm-account"},qI={class:"mm-account-meta"},ZI={class:"mm-account-title",style:{display:"flex","align-items":"center",gap:"12px"}},XI={key:0,class:"mm-status"},ex={class:"mm-account-line"},tx=["title"],sx={key:1,class:"mm-addr",style:{color:"#b45309"}},nx={key:0,class:"mm-dashboard-section"},rx={class:"mm-hero"},ix={class:"mm-card"},ox={class:"mm-card-title"},ax={class:"mm-card-sub"},lx={class:"mm-balance"},cx={class:"mm-subline"},ux={class:"mm-custom"},dx=["disabled"],fx={key:0,class:"mm-warning"},hx={class:"mm-warning-text"},px={class:"mm-tabs"},mx={key:0,class:"mm-tokenlist",style:{background:"#1d1d36"}},gx={class:"mm-token"},yx={class:"mm-token-left"},vx={class:"mm-token-title"},bx={class:"mm-token-right"},wx={class:"mm-token-sub"},Ax={class:"mm-token-amount"},Ex=["onClick"],_x={class:"mm-token-left"},Px={class:"mm-token-icon"},Sx={class:"mm-token-sub"},kx={class:"mm-token-right"},Cx={class:"mm-token-sub"},Tx={key:1,class:"mm-activity-section"},Ix={class:"mm-activity-header"},xx={class:"mm-activity-actions"},Rx=["disabled"],Dx={key:0},Nx={key:1},Lx={key:0,class:"mm-activity-filters"},Ox={class:"mm-filter-row"},Ux={class:"mm-filter-group"},Bx={class:"mm-filter-group"},Mx=["value"],Fx={key:1,class:"mm-loading"},Vx={key:2,class:"mm-no-activity"},jx={key:3,class:"mm-activity-list"},$x={key:0,class:"mm-filter-results"},Hx={class:"mm-results-count"},Wx={class:"mm-activity-columns"},Gx={class:"mm-activity-left"},Kx={class:"mm-activity-header-item"},Yx={class:"mm-activity-icon"},zx={class:"mm-activity-title"},Qx={class:"mm-activity-time"},Jx={class:"mm-activity-details"},qx={key:0,class:"mm-activity-project"},Zx={class:"mm-activity-value"},Xx={key:1,class:"mm-activity-project-name"},eR={class:"mm-activity-value"},tR={key:2,class:"mm-activity-amount"},sR={class:"mm-activity-value"},nR={key:3,class:"mm-activity-trade-type"},rR={key:4,class:"mm-activity-timestamp"},iR={class:"mm-activity-value"},oR={key:5,class:"mm-activity-wallet"},aR={class:"mm-activity-value"},lR={key:6,class:"mm-activity-network"},cR={class:"mm-activity-value"},uR={key:7,class:"mm-activity-network-id"},dR={class:"mm-activity-value"},fR={key:8,class:"mm-activity-metamask"},hR={key:9,class:"mm-activity-chain"},pR={class:"mm-activity-value"},mR={key:10,class:"mm-activity-error"},gR={class:"mm-activity-value"},yR={key:11,class:"mm-activity-transaction"},vR={class:"mm-activity-transaction-hash"},bR={class:"mm-activity-value"},wR={class:"mm-activity-transaction-status"},AR={class:"mm-activity-transaction-from"},ER={class:"mm-activity-value"},_R={class:"mm-activity-transaction-to"},PR={class:"mm-activity-value"},SR={class:"mm-activity-transaction-nonce"},kR={class:"mm-activity-value"},CR={class:"mm-activity-transaction-token-amount"},TR={class:"mm-activity-value"},IR={class:"mm-activity-transaction-value"},xR={class:"mm-activity-value"},RR={class:"mm-activity-transaction-block"},DR={class:"mm-activity-value"},NR={class:"mm-activity-transaction-fee"},LR={class:"mm-activity-value"},OR={class:"mm-activity-transaction-gas"},UR={class:"mm-activity-value"},BR={key:12,class:"mm-activity-status"},MR={key:13,class:"mm-activity-wallet"},FR={class:"mm-activity-value"},VR={key:14,class:"mm-activity-message"},jR={class:"mm-activity-value"},$R={key:15,class:"mm-activity-message-text"},HR={class:"mm-activity-value"},WR={key:16,class:"mm-activity-etherscan"},GR={class:"mm-activity-etherscan-info"},KR={class:"mm-activity-value"},YR={class:"mm-activity-etherscan-info"},zR={class:"mm-activity-etherscan-info"},QR={class:"mm-activity-value"},JR={class:"mm-activity-etherscan-info"},qR={class:"mm-activity-value"},ZR={class:"mm-activity-etherscan-info"},XR={class:"mm-activity-value"},eD={class:"mm-activity-etherscan-info"},tD={class:"mm-activity-value"},sD={class:"mm-activity-etherscan-info"},nD={class:"mm-activity-value"},rD={class:"mm-activity-etherscan-info"},iD={class:"mm-activity-value"},oD={class:"mm-activity-etherscan-info"},aD={class:"mm-activity-value"},lD={class:"mm-activity-etherscan-info"},cD={class:"mm-activity-value"},uD={key:0,class:"mm-activity-footer"},dD=["href"],fD={key:0,class:"mm-transaction-pagination"},hD={class:"mm-pagination-info"},pD={class:"mm-pagination-text"},mD={class:"mm-pagination-count"},gD={class:"mm-pagination-controls"},yD=["disabled"],vD={class:"mm-pagination-pages"},bD=["onClick"],wD=["disabled"],AD={key:2,class:"mm-warn"},ED={key:3,class:"mm-error"},_D={key:0,class:"mm-toast"},Ml=3,Fl=5,PD={__name:"WalletView",setup(t){fe(!1);const e=fe(!1),s=fe(!1);fe("");const n=fe(""),r=fe(""),{connected:i,address:o,fullAddress:l,chainId:c,networkLabel:u,nativeSymbol:d,nativeBalanceDisplay:f,nativeToAudDisplay:h,tokens:p,warning:P,error:w,activeTab:k,disconnect:T,refreshTokens:N,copyAddress:L,addCustomToken:R,audPrice:G,priceChange24h:W}=jn(),j=fe([l.value]),Q=fe(l.value);fe("");const J=fe([]),re=fe(!1),ce=fe(!1),H=fe({type:"",projectCode:"",startDate:"",endDate:""}),be=fe(1),Ce=fe(1);fe("SepoliaETH"),fe([{value:"SepoliaETH",label:"SepoliaETH",chainId:11155111},{value:"Ethereum",label:"Ethereum",chainId:1}]);const Y=Ae(()=>{let x=J.value;if(H.value.type&&(x=x.filter(C=>C.type===H.value.type)),H.value.projectCode&&(x=x.filter(C=>C.project_code===H.value.projectCode)),H.value.startDate){const C=new Date(H.value.startDate);x=x.filter(D=>new Date(D.timestamp)>=C)}if(H.value.endDate){const C=new Date(H.value.endDate);C.setHours(23,59,59,999),x=x.filter(D=>new Date(D.timestamp)<=C)}return x}),ee=Ae(()=>{const x=new Set;return J.value.forEach(C=>{C.project_code&&x.add(C.project_code)}),Array.from(x).sort()}),ae=Ae(()=>H.value.type!==""||H.value.projectCode!==""||H.value.startDate!==""||H.value.endDate!==""),me=Ae(()=>Y.value.filter(x=>x.type==="buy"||x.type==="sell"||x.type==="wallet_disconnect"||x.type==="metamask_connect"||x.type==="metamask_disconnect"||x.type==="metamask_message"||x.type==="metamask_transaction")),Ie=Ae(()=>Y.value.filter(x=>x.type==="wallet_connect"||x.type==="wallet_status_check"||x.type==="wallet_focus_check"||x.type==="network_change"));Ae(()=>{const x=(be.value-1)*Ml,C=x+Ml;return Ie.value.slice(x,C)});const We=Ae(()=>Math.ceil(Ie.value.length/Ml));Ae(()=>{const x=We.value,C=be.value;if(x<=5)return Array.from({length:x},(Re,ut)=>ut+1);const D=[];if(D.push(1),C<=3)for(let Re=2;Re<=Math.min(3,x-1);Re++)D.push(Re);else if(C>=x-2)for(let Re=Math.max(2,x-2);Re<=x-1;Re++)D.push(Re);else D.push(C-1),D.push(C),D.push(C+1);return x>1&&D.push(x),[...new Set(D)].sort((Re,ut)=>Re-ut)});const je=Ae(()=>Math.ceil(me.value.length/Fl)),$e=Ae(()=>{const x=(Ce.value-1)*Fl,C=x+Fl;return me.value.slice(x,C)});qs(l,x=>{x&&!j.value.includes(x)&&(j.value.push(x),Q.value=x)});function St(){if(n.value){const x=j.value.indexOf(n.value);x!==-1&&(j.value.splice(x,1),Q.value===n.value&&(Q.value="",o.value="",P.value=""),e.value=!1,r.value=`Wallet ${n.value} disconnected.`,s.value=!0)}}let Xe=null,wt=!1,st=null;const O=fe(!1);function te(){try{L()}finally{O.value=!0,setTimeout(()=>{O.value=!1},3e3)}}async function Z(){i.value&&(await le(),await xe(),await N())}async function le(){const x=await Xe.getNetwork();c.value=Number(x.chainId),u.value=x.name&&x.name!=="unknown"?F(x.name):`Chain ${c.value}`,d.value=c.value===1?"ETH":c.value===137?"MATIC":(c.value===42161||c.value===10,"ETH"),B()}async function xe(){nativeBalance.value=await Xe.getBalance(o.value)}function v(){window.ethereum&&(window.ethereum.on("accountsChanged",I),window.ethereum.on("chainChanged",U),Xe&&!wt&&(st=async()=>{try{await xe()}catch{}},Xe.on("block",st),wt=!0))}function _(){window.ethereum&&(window.ethereum.removeListener("accountsChanged",I),window.ethereum.removeListener("chainChanged",U)),Xe&&wt&&st&&(Xe.removeListener("block",st),wt=!1,st=null)}async function I(x){!x||x.length===0?T():(o.value=x[0],Q.value=x[0],Z(),k.value="tokens")}async function U(){await Z()}function F(x){return x&&x[0].toUpperCase()+x.slice(1)}async function B(){try{const x=d.value==="MATIC"?"matic-network":"ethereum",D=await(await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${x}&vs_currencies=aud`)).json();G.value=D?.[x]?.aud||null}catch{G.value=null}}ci(async()=>{if(!window.ethereum){P.value="MetaMask not detected.";return}Xe=new As(window.ethereum,"any");const x=await Xe.send("eth_accounts",[]);x&&x.length>0&&(await Xe.getSigner(),o.value=x[0],i.value=!0,await Z(),v()),await cs(),window.addEventListener("walletActivityUpdated",Ot),us(),Tr(),hi()}),xa(()=>{_(),window.removeEventListener("walletActivityUpdated",Ot)});const se=fe(""),X=fe("");async function z(){await R(se.value.trim(),X.value.trim())&&(se.value="",X.value="",await N())}fe(!1);const K=fe("desc");function ge(x){if(x==null)return 0;if(typeof x=="number")return x;const C=parseFloat(String(x).replace(/,/g,""));return isNaN(C)?0:C}const ie=Ae(()=>{const x=Array.from(p),C=(Re,ut)=>ge(ut.displayBalance)-ge(Re.displayBalance),D=(Re,ut)=>ge(Re.displayBalance)-ge(ut.displayBalance);return x.sort(K.value==="desc"?C:D)});fe("");const ve=Ae(()=>{if(W.value===null||W.value===void 0)return"+0.00%";const x=W.value;return`${x>=0?"+":""}${x.toFixed(2)}%`}),Pe=Ae(()=>W.value===null||W.value===void 0||W.value>=0?"mm-rise":"mm-fall");function Oe(x){return new Date(x).toLocaleString()}function Ge(x){return new Date(x).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function Ue(x){return x?`${x.slice(0,6)}...${x.slice(-4)}`:""}function It(x){return x?(parseInt(x,16)/Math.pow(10,18)).toFixed(6):"0"}function Lt(x){return{buy:"📈",sell:"📉",wallet_connect:"🔗",wallet_disconnect:"❌",network_change:"🌐",metamask_connect:"🦊",metamask_disconnect:"🦊❌",wallet_status_check:"👁️",wallet_focus_check:"🎯",metamask_message:"💬",metamask_transaction:"💰"}[x]||"📋"}function ls(x){return{buy:"BUY TOKEN",sell:"SELL TOKEN",wallet_connect:"WALLET CONNECTED",wallet_disconnect:"WALLET DISCONNECTED",network_change:"NETWORK CHANGED",metamask_connect:"METAMASK CONNECTED",metamask_disconnect:"METAMASK DISCONNECTED",wallet_status_check:"STATUS CHECKED",wallet_focus_check:"FOCUS CHECKED",metamask_message:"METAMASK MESSAGE",metamask_transaction:"METAMASK TRANSACTION"}[x]||x.toUpperCase()}async function qt(x){try{console.log("🔍 正在从Etherscan获取交易详情:",x);const C=`https://api-sepolia.etherscan.io/api?module=proxy&action=eth_getTransactionByHash&txhash=${x}`,Re=await(await fetch(C)).json();if(Re.result){console.log("✅ 成功获取交易详情:",Re.result);const ut=`https://api-sepolia.etherscan.io/api?module=proxy&action=eth_getTransactionReceipt&txhash=${x}`,Ks=await(await fetch(ut)).json();return{success:!0,transaction:Re.result,receipt:Ks.result,hash:x,from:Re.result.from,to:Re.result.to,value:Re.result.value,nonce:Re.result.nonce,gasUsed:Ks.result?Ks.result.gasUsed:null,gasPrice:Re.result.gasPrice,blockNumber:Re.result.blockNumber,blockHash:Re.result.blockHash,status:Ks.result?Ks.result.status:null,transactionFee:Ks.result?parseInt(Ks.result.gasUsed,16)*parseInt(Re.result.gasPrice,16)/Math.pow(10,18):null,etherscanUrl:`https://sepolia.etherscan.io/tx/${x}`}}else return console.warn("⚠️ 交易详情获取失败:",Re.message),{success:!1,error:Re.message||"Failed to fetch transaction details"}}catch(C){return console.error("❌ 获取交易详情时发生错误:",C),{success:!1,error:C.message}}}async function cs(){try{re.value=!0,console.log("🔄 正在加载钱包活动记录...");const x=localStorage.getItem("walletActivity");if(x){const C=JSON.parse(x);console.log("📂 从localStorage加载活动记录:",C.length,"条");const D=[];for(const Re of C){if(Re.transactionHash&&Re.type!=="wallet_connect"&&Re.type!=="wallet_disconnect"){const ut=await qt(Re.transactionHash);ut.success&&(Re.etherscan={hash:ut.hash,from:ut.from,to:ut.to,value:ut.value,nonce:ut.nonce,gasUsed:ut.gasUsed,gasPrice:ut.gasPrice,blockNumber:ut.blockNumber,blockHash:ut.blockHash,status:ut.status,transactionFee:ut.transactionFee,etherscanUrl:ut.etherscanUrl})}D.push(Re)}J.value=D}else{J.value=[{id:Date.now()-36e5,type:"buy",amount:100,project_code:"TYMU",project_name:"St Ives NSW Residential Project",timestamp:Date.now()-36e5,transactionHash:"0xabc123def45678901234567890123456789012345678901234567890123456789012"},{id:Date.now()-18e5,type:"sell",amount:50,project_code:"SQNB",project_name:"SQNB Property Loan",timestamp:Date.now()-18e5,transactionHash:"0xdef456abc12378901234567890123456789012345678901234567890123456789012"},{id:Date.now()-9e5,type:"wallet_connect",message:"Wallet connected to MetaMask",wallet_address:l.value,timestamp:Date.now()-9e5}];for(const C of J.value)if(C.transactionHash){const D=await qt(C.transactionHash);D.success&&(C.etherscan={from:D.from,to:D.to,value:D.value,gasUsed:D.gasUsed,gasPrice:D.gasPrice,blockNumber:D.blockNumber,blockHash:D.blockHash,status:D.status,etherscanUrl:`https://sepolia.etherscan.io/tx/${C.transactionHash}`})}}console.log("✅ 钱包活动记录加载完成:",J.value.length,"条")}catch(x){console.error("❌ 加载钱包活动记录失败:",x),P.value="Failed to load wallet activity"}finally{re.value=!1}}async function Jn(){await cs()}function Ot(x){console.log("📨 收到WalletView活动更新通知:",x.detail),cs()}function us(){console.log("🎧 设置MetaMask活动监听器..."),window.ethereum&&(window.ethereum.on("accountsChanged",x=>{console.log("📱 账户变化检测到:",x),x.length>0?ys({type:"wallet_connect",message:"Wallet account connected",wallet_address:x[0],timestamp:Date.now()}):ys({type:"wallet_disconnect",message:"Wallet account disconnected",wallet_address:l.value,timestamp:Date.now()})}),window.ethereum.on("chainChanged",x=>{console.log("🌐 网络变化检测到:",x);const C=Cr(x);ys({type:"network_change",message:`Network changed to ${C}`,network_id:x,network_name:C,timestamp:Date.now()})}),window.ethereum.on("connect",x=>{console.log("🔗 MetaMask连接检测到:",x),ys({type:"metamask_connect",message:"MetaMask extension connected",chain_id:x.chainId,timestamp:Date.now()})}),window.ethereum.on("disconnect",x=>{console.log("❌ MetaMask断开连接:",x),ys({type:"metamask_disconnect",message:"MetaMask extension disconnected",error:x.message||"Unknown error",timestamp:Date.now()})}),window.ethereum.on("message",x=>{console.log("💬 MetaMask消息:",x),ys({type:"metamask_message",message:"MetaMask message received",message_type:x.type,data:x.data,timestamp:Date.now()})}))}function Cr(x){return{"0x1":"Ethereum Mainnet","0x3":"Ropsten Testnet","0x4":"Rinkeby Testnet","0x5":"Goerli Testnet","0xaa36a7":"Sepolia Testnet","0x89":"Polygon Mainnet","0x13881":"Polygon Mumbai","0x38":"BSC Mainnet","0x61":"BSC Testnet"}[x]||`Unknown Network (${x})`}function ys(x){try{console.log("📝 记录钱包活动:",x),J.value.unshift(x);const C=JSON.parse(localStorage.getItem("walletActivity")||"[]");C.unshift(x),C.length>100&&C.splice(100),localStorage.setItem("walletActivity",JSON.stringify(C)),console.log("✅ 钱包活动记录已保存")}catch(C){console.error("❌ 记录钱包活动失败:",C)}}function Tr(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(console.log("👁️ 页面重新可见，刷新钱包状态和活动记录"),cs(),window.ethereum&&window.ethereum.request({method:"eth_accounts"}).then(x=>{x.length>0&&x[0]!==l.value&&ys({type:"wallet_status_check",message:"Wallet status checked on page visibility",wallet_address:x[0],timestamp:Date.now()})}).catch(x=>{console.error("检查钱包状态失败:",x)}))})}function hi(){window.addEventListener("focus",()=>{console.log("🎯 窗口获得焦点，检查钱包状态和刷新活动记录"),cs(),window.ethereum&&window.ethereum.request({method:"eth_accounts"}).then(x=>{x.length>0&&ys({type:"wallet_focus_check",message:"Wallet status checked on window focus",wallet_address:x[0],timestamp:Date.now()})}).catch(x=>{console.error("检查钱包状态失败:",x)})})}function qn(){ce.value=!ce.value}function wo(){H.value={type:"",projectCode:"",startDate:"",endDate:""}}async function Xa(){k.value="activity",console.log("🔄 切换到Activity tab，刷新活动记录"),await cs()}function Ao(x){x>=1&&x<=je.value&&(Ce.value=x,console.log(`📄 切换到交易活动第 ${x} 页`))}function Eo(){Ce.value<je.value&&(Ce.value++,console.log(`📄 交易活动下一页: ${Ce.value}`))}function Ls(){Ce.value>1&&(Ce.value--,console.log(`📄 交易活动上一页: ${Ce.value}`))}return(x,C)=>(g(),y(ye,null,[e.value?(g(),y("div",UI,[a("div",BI,[a("div",MI,[C[9]||(C[9]=a("h2",{style:{"margin-bottom":"8px",color:"#ffffff"}},"Disconnect Wallet",-1)),C[10]||(C[10]=a("p",{style:{color:"#ffffff"}},"Select the wallet account you want to disconnect:",-1)),a("div",FI,[a("span",VI,m(Q.value),1)]),a("div",jI,[a("button",{class:"mm-btn mm-outline",onClick:C[0]||(C[0]=D=>e.value=!1)},"Cancel"),a("button",{class:"mm-btn mm-outline",style:{"margin-left":"8px"},onClick:St},"Confirm")])])])])):V("",!0),s.value?(g(),y("div",$I,[a("div",HI,[a("div",WI,[C[11]||(C[11]=a("h2",{style:{"margin-bottom":"8px",color:"#ffffff"}},"Wallet Disconnected",-1)),a("p",GI,m(r.value),1),a("div",KI,[a("button",{class:"mm-btn mm-outline",onClick:C[1]||(C[1]=D=>s.value=!1)},"Confirm")])])])])):V("",!0),a("div",YI,[a("section",zI,[a("header",QI,[a("div",JI,[C[14]||(C[14]=a("div",{class:"mm-avatar"},null,-1)),a("div",qI,[a("div",ZI,[C[13]||(C[13]=a("span",null,"Account",-1)),Ke(i)?(g(),y("div",XI,[...C[12]||(C[12]=[a("span",{class:"mm-dot"},null,-1),a("span",{class:"mm-status-text"},"Connected",-1)])])):V("",!0)]),a("div",ex,[Q.value?(g(),y(ye,{key:0},[a("span",{class:"mm-addr",title:Q.value},m(Q.value),9,tx),Ke(i)?(g(),y("button",{key:0,class:"mm-btn mm-outline mm-copy",onClick:te},"Copy")):V("",!0)],64)):(g(),y("span",sx,"please connect your wallet in wallet management"))])])])])]),Ke(i)&&Q.value?(g(),y("section",nx,[a("div",rx,[a("div",ix,[C[15]||(C[15]=a("div",{class:"mm-card-label"},"Current Network",-1)),a("div",ox,m(Ke(u)),1),a("div",ax,"Chain ID: "+m(Ke(c)),1)]),a("div",lx,m(Ke(f))+" "+m(Ke(d)),1),a("div",cx,[a("span",null,"AUD$"+m(Ke(h)||0),1),a("a",{href:"#",onClick:C[2]||(C[2]=ue(D=>x.$router.push("/portfolio"),["prevent"])),class:"mm-link"},"Portfolio ↗")])]),a("div",ux,[C[17]||(C[17]=a("span",{class:"mm-net-left"},"Insert your contract address here:",-1)),a("form",{class:"mm-custom-form",onSubmit:ue(z,["prevent"])},[Se(a("input",{"onUpdate:modelValue":C[3]||(C[3]=D=>se.value=D),class:"mm-input",placeholder:"Paste ERC20 contract address"},null,512),[[Ze,se.value]]),Se(a("input",{"onUpdate:modelValue":C[4]||(C[4]=D=>X.value=D),class:"mm-input",placeholder:"Label (optional)"},null,512),[[Ze,X.value]]),a("button",{class:"mm-btn mm-outline",type:"submit",disabled:!se.value},"Add Token",8,dx),a("button",{class:"mm-btn mm-outline",type:"button",onClick:C[5]||(C[5]=(...D)=>Ke(N)&&Ke(N)(...D))},"Refresh")],32),Ke(P)?(g(),y("div",fx,[C[16]||(C[16]=a("span",{class:"mm-warning-icon"},"⚠️",-1)),a("span",hx,m(Ke(P)),1)])):V("",!0)]),a("nav",px,[a("button",{class:we(["mm-tab",{"is-active":Ke(k)==="tokens"}]),onClick:C[6]||(C[6]=D=>k.value="tokens")},"Tokens",2),a("button",{class:we(["mm-tab",{"is-active":Ke(k)==="activity"}]),onClick:Xa},"Activity",2)]),Ke(k)==="tokens"?(g(),y("div",mx,[a("div",gx,[a("div",yx,[C[18]||(C[18]=a("div",{class:"mm-token-icon mm-eth"},null,-1)),a("div",null,[a("div",vx,m(Ke(u)),1),a("div",{class:we(Pe.value)},m(ve.value),3)])]),a("div",bx,[a("div",wx,m(Ke(f))+" "+m(Ke(d)),1),a("div",Ax,"AUD$"+m(Ke(h)||0),1)])]),(g(!0),y(ye,null,At(ie.value,D=>(g(),y("div",{key:D.address,class:"mm-token",onClick:Re=>x.$router.push({name:"tokenDetail",params:{address:D.address}})},[a("div",_x,[a("div",Px,m((D.symbol||"T").slice(0,1)),1),a("div",null,[a("div",Sx,m(D.name),1),C[19]||(C[19]=a("div",{style:{"font-size":"10px",color:"#FFFFFF"}},"此处添加产品名称",-1)),C[20]||(C[20]=a("div",{style:{"font-size":"10px",color:"#FFFFFF"}},"点击可查看详情",-1))])]),a("div",kx,[a("div",Cx,m(D.displayBalance),1)])],8,Ex))),128))])):V("",!0)])):V("",!0),Ke(k)==="activity"?(g(),y("div",Tx,[a("div",Ix,[C[21]||(C[21]=a("h3",null,"Wallet Activity Log",-1)),a("div",xx,[a("button",{class:we(["mm-btn mm-outline",{active:ce.value}]),onClick:qn}," Filter ",2),a("button",{class:"mm-btn mm-outline",onClick:Jn,disabled:re.value},[re.value?(g(),y("span",Dx,"🔄")):(g(),y("span",Nx,"Refresh"))],8,Rx)])]),ce.value?(g(),y("div",Lx,[a("div",Ox,[a("div",Ux,[C[23]||(C[23]=a("label",{class:"mm-filter-label"},"Type",-1)),Se(a("select",{"onUpdate:modelValue":C[7]||(C[7]=D=>H.value.type=D),class:"mm-filter-select"},[...C[22]||(C[22]=[a("option",{value:""},"All Types",-1),a("option",{value:"buy"},"Buy",-1),a("option",{value:"sell"},"Sell",-1)])],512),[[ps,H.value.type]])]),a("div",Bx,[C[25]||(C[25]=a("label",{class:"mm-filter-label"},"Project Code",-1)),Se(a("select",{"onUpdate:modelValue":C[8]||(C[8]=D=>H.value.projectCode=D),class:"mm-filter-select"},[C[24]||(C[24]=a("option",{value:""},"All Projects",-1)),(g(!0),y(ye,null,At(ee.value,D=>(g(),y("option",{key:D,value:D},m(D),9,Mx))),128))],512),[[ps,H.value.projectCode]])]),a("div",{class:"mm-filter-actions"},[a("button",{class:"mm-btn mm-outline",onClick:wo}," Clear ")])])])):V("",!0),re.value?(g(),y("div",Fx,[...C[26]||(C[26]=[a("div",{class:"mm-spinner"},null,-1),a("span",null,"Loading activity...",-1)])])):J.value.length===0?(g(),y("div",Vx,[...C[27]||(C[27]=[a("div",{class:"mm-no-activity-icon"},null,-1),a("p",null,"No transaction activity found",-1),a("p",{class:"mm-no-activity-sub"},"Your recent transactions will appear here",-1)])])):(g(),y("div",jx,[ce.value?(g(),y("div",$x,[a("span",Hx," Showing "+m(Y.value.length)+" of "+m(J.value.length)+" activities ",1),ae.value?(g(),y("button",{key:0,class:"mm-clear-filters-btn",onClick:wo}," Clear all filters ")):V("",!0)])):V("",!0),a("div",Wx,[a("div",Gx,[C[63]||(C[63]=a("div",{class:"mm-activity-section-header"},[a("h4",{class:"mm-activity-section-title"},"Transaction Activity")],-1)),(g(!0),y(ye,null,At($e.value,D=>(g(),y("div",{key:D.id,class:"mm-activity-item"},[a("div",Kx,[a("div",{class:we(["mm-activity-type",D.type])},[a("span",Yx,m(Lt(D.type)),1),a("span",zx,m(ls(D.type)),1)],2),a("div",Qx,m(Oe(D.timestamp)),1)]),a("div",Jx,[D.type==="buy"||D.type==="sell"?(g(),y("div",qx,[C[28]||(C[28]=a("span",{class:"mm-activity-label"},"Project Code:",-1)),a("span",Zx,m(D.project_code),1)])):V("",!0),D.type==="buy"||D.type==="sell"?(g(),y("div",Xx,[C[29]||(C[29]=a("span",{class:"mm-activity-label"},"Project Name:",-1)),a("span",eR,m(D.project_name),1)])):V("",!0),D.type==="buy"||D.type==="sell"?(g(),y("div",tR,[C[30]||(C[30]=a("span",{class:"mm-activity-label"},"Token Amount:",-1)),a("span",sR,m(D.amount)+" tokens",1)])):V("",!0),D.type==="buy"||D.type==="sell"?(g(),y("div",nR,[C[31]||(C[31]=a("span",{class:"mm-activity-label"},"Trade Type:",-1)),a("span",{class:we(["mm-activity-value",D.type==="buy"?"mm-trade-buy":"mm-trade-sell"])},m(D.type.toUpperCase()),3)])):V("",!0),D.type==="buy"||D.type==="sell"?(g(),y("div",rR,[C[32]||(C[32]=a("span",{class:"mm-activity-label"},"Trade Time:",-1)),a("span",iR,m(Ge(D.timestamp)),1)])):V("",!0),D.type==="wallet_connect"||D.type==="wallet_disconnect"?(g(),y("div",oR,[C[33]||(C[33]=a("span",{class:"mm-activity-label"},"Wallet Address:",-1)),a("span",aR,m(Ue(D.wallet_address)),1)])):V("",!0),D.type==="network_change"?(g(),y("div",lR,[C[34]||(C[34]=a("span",{class:"mm-activity-label"},"Network:",-1)),a("span",cR,m(D.network_name),1)])):V("",!0),D.type==="network_change"?(g(),y("div",uR,[C[35]||(C[35]=a("span",{class:"mm-activity-label"},"Chain ID:",-1)),a("span",dR,m(D.network_id),1)])):V("",!0),D.type==="metamask_connect"||D.type==="metamask_disconnect"?(g(),y("div",fR,[...C[36]||(C[36]=[a("span",{class:"mm-activity-label"},"Extension:",-1),a("span",{class:"mm-activity-value"},"MetaMask",-1)])])):V("",!0),D.type==="metamask_connect"&&D.chain_id?(g(),y("div",hR,[C[37]||(C[37]=a("span",{class:"mm-activity-label"},"Chain ID:",-1)),a("span",pR,m(D.chain_id),1)])):V("",!0),D.type==="metamask_disconnect"&&D.error?(g(),y("div",mR,[C[38]||(C[38]=a("span",{class:"mm-activity-label"},"Error:",-1)),a("span",gR,m(D.error),1)])):V("",!0),D.type==="metamask_transaction"?(g(),y("div",yR,[a("div",vR,[C[39]||(C[39]=a("span",{class:"mm-activity-label"},"Transaction Hash:",-1)),a("span",bR,m(D.etherscan?.hash||D.transactionHash||"N/A"),1)]),a("div",wR,[C[40]||(C[40]=a("span",{class:"mm-activity-label"},"Status:",-1)),a("span",{class:we(["mm-activity-value",{"mm-status-success":D.etherscan?.status==="0x1","mm-status-failed":D.etherscan?.status==="0x0"}])},m(D.etherscan?.status==="0x1"?"Success":D.etherscan?.status==="0x0"?"Failed":"Pending"),3)]),a("div",AR,[C[41]||(C[41]=a("span",{class:"mm-activity-label"},"From:",-1)),a("span",ER,m(Ue(D.etherscan?.from)),1)]),a("div",_R,[C[42]||(C[42]=a("span",{class:"mm-activity-label"},"To:",-1)),a("span",PR,m(Ue(D.etherscan?.to)),1)]),a("div",SR,[C[43]||(C[43]=a("span",{class:"mm-activity-label"},"Nonce:",-1)),a("span",kR,m(D.etherscan?.nonce?parseInt(D.etherscan.nonce,16):"N/A"),1)]),a("div",CR,[C[44]||(C[44]=a("span",{class:"mm-activity-label"},"Token Amount:",-1)),a("span",TR,m(D.amount||"N/A")+" "+m(D.project_code||"tokens"),1)]),a("div",IR,[C[45]||(C[45]=a("span",{class:"mm-activity-label"},"Value:",-1)),a("span",xR,m(It(D.etherscan?.value))+" ETH",1)]),a("div",RR,[C[46]||(C[46]=a("span",{class:"mm-activity-label"},"Block:",-1)),a("span",DR,m(D.etherscan?.blockNumber?parseInt(D.etherscan.blockNumber,16).toLocaleString():"N/A"),1)]),a("div",NR,[C[47]||(C[47]=a("span",{class:"mm-activity-label"},"Transaction Fee:",-1)),a("span",LR,m(D.etherscan?.transactionFee?D.etherscan.transactionFee.toFixed(6):"N/A")+" ETH",1)]),a("div",OR,[C[48]||(C[48]=a("span",{class:"mm-activity-label"},"Gas Price:",-1)),a("span",UR,m(D.etherscan?.gasPrice?parseInt(D.etherscan.gasPrice,16).toLocaleString():"N/A")+" Gwei",1)])])):V("",!0),D.type==="wallet_status_check"||D.type==="wallet_focus_check"?(g(),y("div",BR,[...C[49]||(C[49]=[a("span",{class:"mm-activity-label"},"Status:",-1),a("span",{class:"mm-activity-value"},"Checked",-1)])])):V("",!0),D.type==="wallet_status_check"||D.type==="wallet_focus_check"?(g(),y("div",MR,[C[50]||(C[50]=a("span",{class:"mm-activity-label"},"Wallet:",-1)),a("span",FR,m(Ue(D.wallet_address)),1)])):V("",!0),D.type==="metamask_message"?(g(),y("div",VR,[C[51]||(C[51]=a("span",{class:"mm-activity-label"},"Message Type:",-1)),a("span",jR,m(D.message_type),1)])):V("",!0),D.message?(g(),y("div",$R,[C[52]||(C[52]=a("span",{class:"mm-activity-label"},"Message:",-1)),a("span",HR,m(D.message),1)])):V("",!0),D.etherscan?(g(),y("div",WR,[a("div",GR,[C[53]||(C[53]=a("span",{class:"mm-activity-label"},"Transaction Hash:",-1)),a("span",KR,m(D.etherscan.hash||D.transactionHash||"N/A"),1)]),a("div",YR,[C[54]||(C[54]=a("span",{class:"mm-activity-label"},"Status:",-1)),a("span",{class:we(["mm-activity-value",{"mm-status-success":D.etherscan.status==="0x1","mm-status-failed":D.etherscan.status==="0x0"}])},m(D.etherscan.status==="0x1"?"Success":D.etherscan.status==="0x0"?"Failed":"Pending"),3)]),a("div",zR,[C[55]||(C[55]=a("span",{class:"mm-activity-label"},"From:",-1)),a("span",QR,m(Ue(D.etherscan.from)),1)]),a("div",JR,[C[56]||(C[56]=a("span",{class:"mm-activity-label"},"To:",-1)),a("span",qR,m(Ue(D.etherscan.to)),1)]),a("div",ZR,[C[57]||(C[57]=a("span",{class:"mm-activity-label"},"Nonce:",-1)),a("span",XR,m(D.etherscan.nonce?parseInt(D.etherscan.nonce,16):"N/A"),1)]),a("div",eD,[C[58]||(C[58]=a("span",{class:"mm-activity-label"},"Token Amount:",-1)),a("span",tD,m(D.amount||"N/A")+" "+m(D.project_code||"tokens"),1)]),a("div",sD,[C[59]||(C[59]=a("span",{class:"mm-activity-label"},"Value:",-1)),a("span",nD,m(It(D.etherscan.value))+" ETH",1)]),a("div",rD,[C[60]||(C[60]=a("span",{class:"mm-activity-label"},"Gas Used:",-1)),a("span",iD,m(D.etherscan.gasUsed?parseInt(D.etherscan.gasUsed,16).toLocaleString():"N/A"),1)]),a("div",oD,[C[61]||(C[61]=a("span",{class:"mm-activity-label"},"Block:",-1)),a("span",aD,m(D.etherscan.blockNumber?parseInt(D.etherscan.blockNumber,16).toLocaleString():"N/A"),1)]),a("div",lD,[C[62]||(C[62]=a("span",{class:"mm-activity-label"},"Transaction Fee:",-1)),a("span",cD,m(D.etherscan.transactionFee?D.etherscan.transactionFee.toFixed(6):"N/A")+" ETH",1)])])):V("",!0)]),D.etherscan&&D.etherscan.etherscanUrl?(g(),y("div",uD,[a("a",{href:D.etherscan.etherscanUrl,target:"_blank",class:"mm-etherscan-link"}," 🔗 View on Etherscan ",8,dD)])):V("",!0)]))),128)),je.value>1?(g(),y("div",fD,[a("div",hD,[a("span",pD," Transaction Page "+m(Ce.value)+" of "+m(je.value),1),a("span",mD," ("+m(me.value.length)+" records) ",1)]),a("div",gD,[a("button",{class:"mm-pagination-btn",onClick:Ls,disabled:Ce.value<=1}," ← ",8,yD),a("div",vD,[(g(!0),y(ye,null,At(je.value,D=>(g(),y("button",{key:D,class:we(["mm-pagination-page",{active:D===Ce.value}]),onClick:Re=>Ao(D)},m(D),11,bD))),128))]),a("button",{class:"mm-pagination-btn",onClick:Eo,disabled:Ce.value>=je.value}," → ",8,wD)])])):V("",!0)])])]))])):V("",!0)]),Ke(P)?(g(),y("p",AD,m(Ke(P)),1)):V("",!0),Ke(w)?(g(),y("p",ED,m(Ke(w)),1)):V("",!0),Be(Gy,{name:"fade"},{default:ot(()=>[O.value?(g(),y("div",_D,"Copied")):V("",!0)]),_:1})],64))}},Ng=Tt(PD,[["__scopeId","data-v-082b58bd"]]),SD={name:"KycServicePage",data(){return{step:1,form:{firstName:"",lastName:"",dob:"",email:"",phone:"",country:"",docType:"",docNumber:"",fileFront:null,fileBack:null},cameraEnabled:!1,camError:"",livenessDetecting:!1,livenessStatus:"正在检测...",showWhitelistEligibility:!1,showWhitelistApplication:!1,showWhitelistSuccess:!1,loadingMessage:"Processing...",showCancelConfirm:!1}},computed:{needsBack(){return this.form.docType==="driver"||this.form.docType==="idcard"},readyExtract(){return!!(this.form.firstName&&this.form.lastName&&this.form.dob)}},methods:{goProfile(){this.$router.push("/profile")},prev(){this.step=Math.max(1,this.step-1)},cancelKYC(){this.showCancelConfirm=!0},hideCancelConfirm(){this.showCancelConfirm=!1},confirmCancelKYC(){this.showCancelConfirm=!1,wa(Vs.UNVERIFIED),this.$router.push("/profile")},goDoc(){this.step=3},onFile(t,e){const s=t.target.files?.[0];s&&(e==="front"?this.form.fileFront=s:this.form.fileBack=s)},async extractFromId(){try{const t=(this.form.fileFront?.name||"").toLowerCase();t.includes("john")&&(this.form.firstName="John"),t.includes("doe")&&(this.form.lastName="Doe"),t.match(/1990|90/)&&(this.form.dob="1990-01-01"),this.form.firstName||(this.form.firstName="GivenName"),this.form.lastName||(this.form.lastName="FamilyName"),this.form.dob||(this.form.dob="1990-01-01")}catch{}},complete(){wa(Vs.VERIFIED),this.step=4,this.disableCamera(),setTimeout(()=>{this.showWhitelistEligibility=!0},1500)},async enableCamera(){this.camError="";try{const t=await navigator.mediaDevices.getUserMedia({video:!0});this.cameraEnabled=!0,this.$nextTick(()=>{this.$refs.videoEl&&(this.$refs.videoEl.srcObject=t)}),this.startLivenessDetection()}catch{this.camError="无法访问摄像头，请检查浏览器权限设置。"}},async startLivenessDetection(){this.livenessDetecting=!0,this.livenessStatus="正在检测...",setTimeout(()=>{this.livenessStatus="验证成功，进入下一步",setTimeout(()=>{this.complete()},1e3)},3e3)},cancelLiveness(){this.cameraEnabled=!1,this.livenessDetecting=!1,this.livenessStatus="正在检测...",this.$refs.videoEl&&this.$refs.videoEl.srcObject&&(this.$refs.videoEl.srcObject.getTracks().forEach(e=>e.stop()),this.$refs.videoEl.srcObject=null),this.prev()},disableCamera(){console.log("🔒 KYC验证完成，禁用镜头功能"),this.cameraEnabled=!1,this.livenessDetecting=!1,this.livenessStatus="验证已完成",this.$refs.videoEl&&this.$refs.videoEl.srcObject&&(this.$refs.videoEl.srcObject.getTracks().forEach(e=>{e.stop(),console.log("📹 摄像头流已停止")}),this.$refs.videoEl.srcObject=null),this.camError="",console.log("✅ 镜头功能已完全禁用")},async applyWhitelist(){this.showWhitelistEligibility=!1,this.showWhitelistApplication=!0;try{this.loadingMessage="Connecting to blockchain...",await this.delay(1e3),this.loadingMessage="Submitting whitelist application...",await this.delay(1e3),this.loadingMessage="Processing transaction...",await this.delay(1500);const t=await this.submitWhitelistToContract();if(t.success)this.loadingMessage="Whitelist application successful!",await this.delay(1e3),this.showWhitelistApplication=!1,this.showWhitelistSuccess=!0;else throw new Error(t.error||"Whitelist application failed")}catch(t){console.error("Whitelist application error:",t),this.loadingMessage="Application failed. Please try again.",await this.delay(2e3),this.showWhitelistApplication=!1,this.showWhitelistEligibility=!0}},async submitWhitelistToContract(){try{console.log("Calling whitelist contract...");const t={firstName:this.form.firstName,lastName:this.form.lastName,dob:this.form.dob,country:this.form.country,docType:this.form.docType,docNumber:this.form.docNumber},e=await Rg.applyForKYC(t);if(e.success)return console.log("Whitelist application successful:",e.transactionHash),e;throw new Error(e.error||"Whitelist application failed")}catch(t){return console.error("Contract call failed:",t),{success:!1,error:t.message}}},delay(t){return new Promise(e=>setTimeout(e,t))},goToProjects(){this.showWhitelistSuccess=!1,this.$router.push("/listedprojects")}}},kD={class:"kyc-page container"},CD={class:"topbar"},TD={class:"steps"},ID={key:0,class:"modal"},xD={class:"card"},RD={class:"grid"},DD={class:"actions",style:{"justify-content":"flex-start",gap:"10px"}},ND=["disabled"],LD={class:"grid",style:{"margin-top":"12px"}},OD={class:"actions"},UD=["disabled"],BD={key:1,class:"modal"},MD={class:"card"},FD={class:"camera-block"},VD={key:0,ref:"videoEl",autoplay:"",playsinline:"",class:"cam-preview"},jD={key:2,class:"cam-error"},$D={key:3,class:"liveness-status"},HD={class:"detection-text"},WD={class:"actions"},GD={key:2,class:"modal"},KD={class:"card success"},YD={class:"actions"},zD={key:3,class:"modal"},QD={class:"card"},JD={class:"actions"},qD={key:4,class:"modal"},ZD={class:"card"},XD={class:"loading-text"},e4={key:5,class:"modal"},t4={key:6,class:"modal"},s4={class:"card"},n4={class:"actions"};function r4(t,e,s,n,r,i){return g(),y("section",kD,[a("header",CD,[a("button",{class:"back",onClick:e[0]||(e[0]=(...o)=>i.goProfile&&i.goProfile(...o))},"← Back"),e[21]||(e[21]=a("h1",{class:"title"},"KYC Verification",-1)),a("button",{class:"btn light danger",onClick:e[1]||(e[1]=(...o)=>i.cancelKYC&&i.cancelKYC(...o))},"Cancel Verification")]),a("ol",TD,[a("li",{class:we({active:r.step===1,done:r.step>1})},"1. Upload ID & auto-read",2),a("li",{class:we({active:r.step===3,done:r.step>3})},"2. Liveness",2),a("li",{class:we({active:r.step===4,done:r.step>4})},"3. Complete",2)]),r.step===1?(g(),y("div",ID,[a("div",xD,[e[33]||(e[33]=a("h2",null,"Upload your ID and auto-read info",-1)),a("form",{onSubmit:e[12]||(e[12]=ue((...o)=>i.goDoc&&i.goDoc(...o),["prevent"]))},[a("div",RD,[a("label",null,[e[22]||(e[22]=ne("Upload front image* ",-1)),a("input",{type:"file",accept:"image/*",onChange:e[2]||(e[2]=o=>i.onFile(o,"front")),required:""},null,32)]),a("label",null,[e[23]||(e[23]=ne("Upload back image ",-1)),a("input",{type:"file",accept:"image/*",onChange:e[3]||(e[3]=o=>i.onFile(o,"back"))},null,32)]),a("label",null,[e[25]||(e[25]=ne("Issuing country* ",-1)),Se(a("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.form.country=o),required:""},[...e[24]||(e[24]=[a("option",{value:"",disabled:""},"Select…",-1),a("option",{value:"AU"},"Australia",-1),a("option",{value:"US"},"United States",-1),a("option",{value:"AR"},"Argentina",-1)])],512),[[ps,r.form.country]])]),a("label",null,[e[27]||(e[27]=ne("ID type* ",-1)),Se(a("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.form.docType=o),required:""},[...e[26]||(e[26]=[Dt('<option value="" disabled data-v-73148871>Select…</option><option value="passport" data-v-73148871>Passport</option><option value="driver" data-v-73148871>Driver&#39;s license</option><option value="idcard" data-v-73148871>ID card</option><option value="residence" data-v-73148871>Residence permit</option>',5)])],512),[[ps,r.form.docType]])])]),a("div",DD,[a("button",{type:"button",class:"btn light",onClick:e[6]||(e[6]=(...o)=>i.extractFromId&&i.extractFromId(...o)),disabled:!r.form.fileFront},"Auto-read from ID",8,ND),e[28]||(e[28]=a("small",{class:"hint"},"将使用 OCR/解析服务读取 first name, last name, DOB 等信息。",-1))]),a("div",LD,[a("label",null,[e[29]||(e[29]=ne("First name* ",-1)),Se(a("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>r.form.firstName=o),required:"",readonly:""},null,512),[[Ze,r.form.firstName,void 0,{trim:!0}]])]),a("label",null,[e[30]||(e[30]=ne("Last name* ",-1)),Se(a("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>r.form.lastName=o),required:"",readonly:""},null,512),[[Ze,r.form.lastName,void 0,{trim:!0}]])]),a("label",null,[e[31]||(e[31]=ne("Date of birth* ",-1)),Se(a("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>r.form.dob=o),required:"",readonly:""},null,512),[[Ze,r.form.dob,void 0,{trim:!0}]])]),a("label",null,[e[32]||(e[32]=ne("ID number ",-1)),Se(a("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>r.form.docNumber=o),readonly:""},null,512),[[Ze,r.form.docNumber,void 0,{trim:!0}]])])]),a("div",OD,[a("button",{type:"button",class:"btn light",onClick:e[11]||(e[11]=(...o)=>i.cancelKYC&&i.cancelKYC(...o))},"Cancel"),a("button",{type:"submit",class:"btn orange",disabled:!i.readyExtract},"Continue",8,UD)])],32)])])):V("",!0),r.step===3?(g(),y("div",BD,[a("div",MD,[e[35]||(e[35]=a("h2",null,"Liveness detection",-1)),e[36]||(e[36]=a("p",null,"Center your face in the frame and follow the instruction.",-1)),a("div",FD,[r.cameraEnabled?(g(),y("video",VD,null,512)):(g(),y("button",{key:1,class:"btn orange",onClick:e[13]||(e[13]=(...o)=>i.enableCamera&&i.enableCamera(...o))},"Enable Camera")),r.camError?(g(),y("p",jD,m(r.camError),1)):V("",!0),r.livenessDetecting?(g(),y("div",$D,[e[34]||(e[34]=a("div",{class:"detection-spinner"},null,-1)),a("p",HD,m(r.livenessStatus),1)])):V("",!0)]),e[37]||(e[37]=a("small",{class:"hint"},[ne("接入 Sumsub/Persona/Onfido 时，把此区域替换为他们的组件，并在成功回调里调用 "),a("code",null,"complete()"),ne("。")],-1)),a("div",WD,[a("button",{type:"button",class:"btn light",onClick:e[14]||(e[14]=(...o)=>i.prev&&i.prev(...o))},"Back"),r.cameraEnabled?V("",!0):(g(),y("button",{key:0,class:"btn light danger",onClick:e[15]||(e[15]=(...o)=>i.cancelLiveness&&i.cancelLiveness(...o))},"Cancel"))])])])):V("",!0),r.step===4?(g(),y("div",GD,[a("div",KD,[e[38]||(e[38]=a("div",{class:"bigcheck"},"✓",-1)),e[39]||(e[39]=a("h2",null,"Your profile has been verified",-1)),e[40]||(e[40]=a("p",null,"Please wait for the whitelist application...",-1)),a("div",YD,[a("button",{class:"btn orange",onClick:e[16]||(e[16]=(...o)=>i.goProfile&&i.goProfile(...o))},"Back to Profile")])])])):V("",!0),r.showWhitelistEligibility?(g(),y("div",zD,[a("div",QD,[e[41]||(e[41]=a("div",{class:"success-icon"},"🎉",-1)),e[42]||(e[42]=a("h2",{style:{color:"#16a34a"}},"Congratulations!",-1)),e[43]||(e[43]=a("p",{style:{"font-weight":"bold",color:"#000"}},"Your KYC verification has been completed successfully.",-1)),e[44]||(e[44]=a("p",{style:{"font-weight":"bold",color:"#000"}},"Now you are eligible to apply for the whitelist and start trading!",-1)),a("div",JD,[a("button",{class:"btn light",onClick:e[17]||(e[17]=(...o)=>i.goProfile&&i.goProfile(...o))},"Maybe Later"),a("button",{class:"btn orange",onClick:e[18]||(e[18]=(...o)=>i.applyWhitelist&&i.applyWhitelist(...o))},"Apply for Whitelist")])])])):V("",!0),r.showWhitelistApplication?(g(),y("div",qD,[a("div",ZD,[e[45]||(e[45]=a("div",{class:"loading-icon"},[a("div",{class:"spinner"})],-1)),e[46]||(e[46]=a("h2",null,"Applying for Whitelist...",-1)),e[47]||(e[47]=a("p",null,"Please wait while we process your whitelist application.",-1)),a("div",XD,m(r.loadingMessage),1)])])):V("",!0),r.showWhitelistSuccess?(g(),y("div",e4,[...e[48]||(e[48]=[a("div",{class:"card success"},[a("div",{class:"bigcheck"},"✓"),a("h2",null,"Welcome to the Whitelist!"),a("p",null,"You have successfully joined the whitelist."),a("p",null,[a("strong",null,"Now you can go to the Projects page to subscribe to your preferred assets!")])],-1)])])):V("",!0),r.showCancelConfirm?(g(),y("div",t4,[a("div",s4,[e[49]||(e[49]=a("div",{class:"warning-icon"},"⚠️",-1)),e[50]||(e[50]=a("h2",null,"Cancel KYC Verification",-1)),e[51]||(e[51]=a("p",null,"Canceling KYC will revoke your subscription eligibility.",-1)),e[52]||(e[52]=a("p",null,[a("strong",null,"Are you sure you want to cancel KYC verification?")],-1)),a("div",n4,[a("button",{class:"btn light",onClick:e[19]||(e[19]=(...o)=>i.hideCancelConfirm&&i.hideCancelConfirm(...o))},"Continue KYC"),a("button",{class:"btn danger",onClick:e[20]||(e[20]=(...o)=>i.confirmCancelKYC&&i.confirmCancelKYC(...o))},"Yes, Cancel KYC")])])])):V("",!0)])}const Lg=Tt(SD,[["render",r4],["__scopeId","data-v-73148871"]]),i4="/icons/X-logo.png",o4="/icons/Linkedin-logo.png",a4="/icons/facebook-logo.png",l4="/icons/github-logo.png",c4={name:"AppFooter"},u4={class:"footer"},d4={class:"container footer-top"},f4={class:"footer-links"};function h4(t,e,s,n,r,i){const o=Di("router-link");return g(),y("footer",u4,[a("div",d4,[e[29]||(e[29]=a("div",{class:"footer-brand"},[a("img",{src:ig,alt:"Mortgage RWA Logo",class:"footer-logo"}),a("p",{class:"footer-tagline"},"Design amazing digital experiences that create more happy in the world.")],-1)),a("div",f4,[a("div",null,[e[6]||(e[6]=a("h4",null,"Product",-1)),a("ul",null,[a("li",null,[Be(o,{to:"/overview"},{default:ot(()=>[...e[0]||(e[0]=[ne("Overview",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/features"},{default:ot(()=>[...e[1]||(e[1]=[ne("Features",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/solutions"},{default:ot(()=>[...e[2]||(e[2]=[ne("Solutions ",-1),a("span",{class:"new"},"New",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/tutorials"},{default:ot(()=>[...e[3]||(e[3]=[ne("Tutorials",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/pricing"},{default:ot(()=>[...e[4]||(e[4]=[ne("Pricing",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/releases"},{default:ot(()=>[...e[5]||(e[5]=[ne("Releases",-1)])]),_:1})])])]),a("div",null,[e[13]||(e[13]=a("h4",null,"Company",-1)),a("ul",null,[a("li",null,[Be(o,{to:"/about"},{default:ot(()=>[...e[7]||(e[7]=[ne("About us",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/careers"},{default:ot(()=>[...e[8]||(e[8]=[ne("Careers",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/press"},{default:ot(()=>[...e[9]||(e[9]=[ne("Press",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/news"},{default:ot(()=>[...e[10]||(e[10]=[ne("News",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/media-kit"},{default:ot(()=>[...e[11]||(e[11]=[ne("Media kit",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/contact"},{default:ot(()=>[...e[12]||(e[12]=[ne("Contact",-1)])]),_:1})])])]),a("div",null,[e[20]||(e[20]=a("h4",null,"Resources",-1)),a("ul",null,[a("li",null,[Be(o,{to:"/blog"},{default:ot(()=>[...e[14]||(e[14]=[ne("Blog",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/newsletter"},{default:ot(()=>[...e[15]||(e[15]=[ne("Newsletter",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/events"},{default:ot(()=>[...e[16]||(e[16]=[ne("Events",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/help"},{default:ot(()=>[...e[17]||(e[17]=[ne("Help centre",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/tutorials"},{default:ot(()=>[...e[18]||(e[18]=[ne("Tutorials",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/support"},{default:ot(()=>[...e[19]||(e[19]=[ne("Support",-1)])]),_:1})])])]),e[28]||(e[28]=Dt('<div data-v-b26c06e1><h4 data-v-b26c06e1>Social</h4><ul data-v-b26c06e1><li data-v-b26c06e1><a href="https://twitter.com" target="_blank" data-v-b26c06e1>Twitter</a></li><li data-v-b26c06e1><a href="https://linkedin.com" target="_blank" data-v-b26c06e1>LinkedIn</a></li><li data-v-b26c06e1><a href="https://facebook.com" target="_blank" data-v-b26c06e1>Facebook</a></li><li data-v-b26c06e1><a href="https://github.com" target="_blank" data-v-b26c06e1>GitHub</a></li><li data-v-b26c06e1><a href="https://angel.co" target="_blank" data-v-b26c06e1>AngelList</a></li><li data-v-b26c06e1><a href="https://dribbble.com" target="_blank" data-v-b26c06e1>Dribbble</a></li></ul></div>',1)),a("div",null,[e[27]||(e[27]=a("h4",null,"Legal",-1)),a("ul",null,[a("li",null,[Be(o,{to:"/terms"},{default:ot(()=>[...e[21]||(e[21]=[ne("Terms",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/privacy"},{default:ot(()=>[...e[22]||(e[22]=[ne("Privacy",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/cookies"},{default:ot(()=>[...e[23]||(e[23]=[ne("Cookies",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/licenses"},{default:ot(()=>[...e[24]||(e[24]=[ne("Licenses",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/settings"},{default:ot(()=>[...e[25]||(e[25]=[ne("Settings",-1)])]),_:1})]),a("li",null,[Be(o,{to:"/contact"},{default:ot(()=>[...e[26]||(e[26]=[ne("Contact",-1)])]),_:1})])])])])]),e[30]||(e[30]=Dt('<div class="container footer-bottom" data-v-b26c06e1><p data-v-b26c06e1>© 2025 Mortgage RWA. All rights reserved.</p><div class="social-icons" data-v-b26c06e1><a href="#" data-v-b26c06e1><img src="'+i4+'" alt="X" data-v-b26c06e1></a><a href="#" data-v-b26c06e1><img src="'+o4+'" alt="LinkedIn" data-v-b26c06e1></a><a href="#" data-v-b26c06e1><img src="'+a4+'" alt="Facebook" data-v-b26c06e1></a><a href="#" data-v-b26c06e1><img src="'+l4+'" alt="GitHub" data-v-b26c06e1></a></div></div>',1))])}const p4=Tt(c4,[["render",h4],["__scopeId","data-v-b26c06e1"]]),m4={name:"DetailPage",props:{code:{type:String,default:null}},data(){return{currentProduct:null,loading:!0,error:null,refreshInterval:null,lastRefreshTime:null,showRawData:!1,unsubscribeProducts:null,unsubscribeNewProjects:null}},async mounted(){await this.loadProjectData(),this.setupDatabaseSync(),this.startAutoRefresh()},beforeUnmount(){this.stopAutoRefresh(),this.cleanupDatabaseSync()},watch:{$route(t,e){console.log("🔄 DetailPage: 路由变化",{to:t.params,from:e.params}),t.params.code!==e.params.code&&this.loadProjectData()},code:{handler(t,e){console.log("🔄 DetailPage: Props代码变化",{newCode:t,oldCode:e}),t&&this.loadProjectData()},immediate:!0}},methods:{async loadProjectData(){try{this.loading=!0,this.error=null;const t=this.code||this.$route.params.code||this.$route.query.code;if(!t){this.error="No project code provided";return}console.log("🔄 DetailPage: Loading project data for code:",t);let e=null;if(t&&typeof t=="string"&&t.length>0)try{e=await ms.getProductByCode(t),console.log("📡 DetailPage: API response via code:",e)}catch(s){console.error("❌ DetailPage: Failed to get project by code:",s),this.error="Failed to load project data";return}if(e&&e.status===0){const s=e.data;this.currentProduct={...s,totalOffering:s.total_token||s.totalOffering,subscribed:s.current_subscribed_token||s.subscribed,targetYield:s.target_yield||s.targetYield,ltv:s.LTV||s.ltv,annualInterestRate:s.annual_interest_rate||s.annualInterestRate,loanAmount:s.loan_amount||s.loanAmount,valuation:s.valuation,loanTerm:s.loan_term||s.loanTerm,address:s.property_address||s.address,type:s.property_type||s.type,...s},this.lastRefreshTime=new Date,console.log("✅ DetailPage: Project data loaded successfully:",this.currentProduct)}else this.error=e?.message||"Failed to load project data",console.error("❌ DetailPage: API returned error:",e)}catch(t){this.error="Network error, unable to load project data",console.error("❌ DetailPage: Failed to load project data:",t)}finally{this.loading=!1}},setupDatabaseSync(){const{subscribeProducts:t,subscribeNewProjects:e}=fi();this.unsubscribeProducts=t(s=>{console.log("📡 DetailPage: Received product data update, total:",s.length);const n=this.id||this.$route.params.id;if(n){const r=s.find(i=>i.id===n||i.code===n);r&&(console.log("🔄 DetailPage: Found updated product data, refreshing..."),this.currentProduct={...r,totalOffering:r.total_token||r.totalOffering,subscribed:r.current_subscribed_token||r.subscribed,targetYield:r.target_yield||r.targetYield,ltv:r.LTV||r.ltv,annualInterestRate:r.annual_interest_rate||r.annualInterestRate,loanAmount:r.loan_amount||r.loanAmount,valuation:r.valuation,loanTerm:r.loan_term||r.loanTerm,address:r.property_address||r.address,type:r.property_type||r.type,...r},this.lastRefreshTime=new Date)}}),this.unsubscribeNewProjects=e(s=>{console.log("🆕 DetailPage: New projects detected:",s.length)})},cleanupDatabaseSync(){this.unsubscribeProducts&&(this.unsubscribeProducts(),this.unsubscribeProducts=null),this.unsubscribeNewProjects&&(this.unsubscribeNewProjects(),this.unsubscribeNewProjects=null)},startAutoRefresh(){this.refreshInterval=setInterval(()=>{this.loadProjectData()},3e4)},stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)},handleInvest(){this.currentProduct&&(console.log("💰 DetailPage: Invest button clicked for project:",this.currentProduct.code),this.$router.push(`/trade/${this.currentProduct.code}`))},handleDetail(){this.currentProduct&&console.log("📊 DetailPage: Detail button clicked for project:",this.currentProduct.code)},toggleRawData(){this.showRawData=!this.showRawData},getStatusText(t){return{INCOMING:"Incoming",ACTIVE:"Active",PERFORMING:"Performing",COMPLETED:"Completed",COMPLETE:"Completed",DEFAULT:"Default"}[t]||t},getSubscriptionProgress(){if(!this.currentProduct)return 0;const t=parseFloat(this.currentProduct.totalOffering||this.currentProduct.total_token||0),e=parseFloat(this.currentProduct.subscribed||this.currentProduct.current_subscribed_token||0);if(t===0)return 0;const s=e/t*100;return Math.min(Math.round(s*100)/100,100)},getAvailableAmount(){if(!this.currentProduct)return 0;const t=parseFloat(this.currentProduct.totalOffering||this.currentProduct.total_token||0),e=parseFloat(this.currentProduct.subscribed||this.currentProduct.current_subscribed_token||0);return Math.max(0,t-e)},formatNumber(t){if(!t)return"0";const e=parseFloat(t);return isNaN(e)?t:e.toLocaleString()},formatTime(t){return t?new Date(t).toLocaleString():"N/A"},formatDate(t){return t?new Date(t).toLocaleDateString():"N/A"}}},g4={class:"container"},y4={class:"project-container"},v4={class:"doc-header"},b4={class:"headline"},w4={class:"subline"},A4={key:0,class:"loading-container"},E4={key:1,class:"error-container"},_4={class:"error-message"},P4={key:2,class:"detail-content"},S4={class:"info-card"},k4={class:"card-header"},C4={class:"info-grid"},T4={class:"info-item"},I4={class:"info-value"},x4={class:"info-item"},R4={class:"info-value"},D4={class:"info-item"},N4={class:"info-value"},L4={class:"info-item"},O4={class:"info-value"},U4={class:"info-item"},B4={class:"info-value"},M4={class:"info-item"},F4={class:"info-value"},V4={class:"info-card"},j4={class:"card-header"},$4={class:"investment-actions"},H4={class:"info-grid"},W4={class:"info-item"},G4={class:"info-value"},K4={class:"info-item"},Y4={class:"info-value"},z4={class:"info-item"},Q4={class:"info-value"},J4={class:"info-item"},q4={class:"info-value"},Z4={class:"info-item"},X4={class:"info-value"},e3={class:"info-item"},t3={class:"info-value"},s3={class:"progress-section"},n3={class:"progress-bar"},r3={class:"progress-text"},i3={class:"info-card"},o3={class:"info-grid"},a3={class:"info-item"},l3={class:"info-value"},c3={class:"info-item"},u3={class:"info-value"},d3={class:"info-item"},f3={class:"info-value"},h3={class:"info-item"},p3={class:"info-value"},m3={class:"info-item"},g3={class:"info-value"},y3={class:"info-item"},v3={class:"info-value"},b3={class:"info-card"},w3={class:"info-grid"},A3={class:"info-item full-width"},E3={class:"info-value"},_3={class:"info-item"},P3={class:"info-value"},S3={class:"info-item"},k3={class:"info-value"},C3={class:"info-item"},T3={class:"info-value"},I3={class:"info-card"},x3={class:"card-header"},R3={key:0,class:"raw-data-container"},D3={class:"raw-data"},N3={key:3,class:"no-project"},L3={class:"no-project-content"};function O3(t,e,s,n,r,i){return g(),y("div",g4,[a("div",y4,[a("header",v4,[a("h1",b4,[r.currentProduct?(g(),y(ye,{key:0},[ne(m(r.currentProduct.name)+" - "+m(r.currentProduct.code),1)],64)):(g(),y(ye,{key:1},[ne(" Project Details ")],64))]),a("p",w4,[r.currentProduct?(g(),y(ye,{key:0},[ne(m(r.currentProduct.subtitle),1)],64)):V("",!0)])]),r.loading?(g(),y("div",A4,[...e[5]||(e[5]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Loading project details...",-1)])])):r.error?(g(),y("div",E4,[a("div",_4,[e[6]||(e[6]=a("h3",null,"Load Failed",-1)),a("p",null,m(r.error),1),a("button",{onClick:e[0]||(e[0]=(...o)=>i.loadProjectData&&i.loadProjectData(...o)),class:"btn retry-btn"},"Retry")])])):r.currentProduct?(g(),y("div",P4,[a("section",S4,[a("div",k4,[e[7]||(e[7]=a("h2",null,"Project Information",-1)),a("div",{class:we(["status-badge","status-"+r.currentProduct.status])},m(i.getStatusText(r.currentProduct.status)),3)]),a("div",C4,[a("div",T4,[e[8]||(e[8]=a("div",{class:"info-label"},"Project Code",-1)),a("div",I4,m(r.currentProduct.code),1)]),a("div",x4,[e[9]||(e[9]=a("div",{class:"info-label"},"Project Name",-1)),a("div",R4,m(r.currentProduct.name),1)]),a("div",D4,[e[10]||(e[10]=a("div",{class:"info-label"},"Type",-1)),a("div",N4,m(r.currentProduct.type||r.currentProduct.property_type),1)]),a("div",L4,[e[11]||(e[11]=a("div",{class:"info-label"},"Subtitle",-1)),a("div",O4,m(r.currentProduct.subtitle||"N/A"),1)]),a("div",U4,[e[12]||(e[12]=a("div",{class:"info-label"},"Risk Level",-1)),a("div",B4,m(r.currentProduct.risk||"N/A"),1)]),a("div",M4,[e[13]||(e[13]=a("div",{class:"info-label"},"Target Yield",-1)),a("div",F4,m(r.currentProduct.targetYield||r.currentProduct.target_yield||"N/A")+"% p.a.",1)])])]),a("section",V4,[a("div",j4,[e[16]||(e[16]=a("h2",null,"Investment Information",-1)),a("div",$4,[r.currentProduct.status==="ACTIVE"?(g(),y("button",{key:0,class:"btn primary",onClick:e[1]||(e[1]=(...o)=>i.handleInvest&&i.handleInvest(...o))},[...e[14]||(e[14]=[a("span",{class:"btn-icon"},"💰",-1),ne(" Invest Now ",-1)])])):V("",!0),a("button",{class:"btn secondary",onClick:e[2]||(e[2]=(...o)=>i.handleDetail&&i.handleDetail(...o))},[...e[15]||(e[15]=[a("span",{class:"btn-icon"},"📊",-1),ne(" View Details ",-1)])])])]),a("div",H4,[a("div",W4,[e[17]||(e[17]=a("div",{class:"info-label"},"Total Offering",-1)),a("div",G4,"AUD$"+m(i.formatNumber(r.currentProduct.totalOffering||r.currentProduct.total_token)),1)]),a("div",K4,[e[18]||(e[18]=a("div",{class:"info-label"},"Subscribed",-1)),a("div",Y4,"AUD$"+m(i.formatNumber(r.currentProduct.subscribed||r.currentProduct.current_subscribed_token)),1)]),a("div",z4,[e[19]||(e[19]=a("div",{class:"info-label"},"Total Subscription Tokens",-1)),a("div",Q4,m(i.formatNumber(r.currentProduct.totalSubscriptionTokens||r.currentProduct.total_token)),1)]),a("div",J4,[e[20]||(e[20]=a("div",{class:"info-label"},"Subscribed Tokens",-1)),a("div",q4,m(i.formatNumber(r.currentProduct.subscribedTokens||r.currentProduct.current_subscribed_token)),1)]),a("div",Z4,[e[21]||(e[21]=a("div",{class:"info-label"},"Subscription Progress",-1)),a("div",X4,m(i.getSubscriptionProgress())+"%",1)]),a("div",e3,[e[22]||(e[22]=a("div",{class:"info-label"},"Available for Investment",-1)),a("div",t3,"AUD$"+m(i.formatNumber(i.getAvailableAmount())),1)])]),a("div",s3,[a("div",n3,[a("div",{class:"progress-fill",style:Rt({width:i.getSubscriptionProgress()+"%"})},null,4)]),a("div",r3,m(i.getSubscriptionProgress())+"% Subscribed",1)])]),a("section",i3,[e[29]||(e[29]=a("div",{class:"card-header"},[a("h2",null,"Loan Information")],-1)),a("div",o3,[a("div",a3,[e[23]||(e[23]=a("div",{class:"info-label"},"Loan Amount",-1)),a("div",l3,"AUD$"+m(i.formatNumber(r.currentProduct.loanAmount||r.currentProduct.loan_amount)),1)]),a("div",c3,[e[24]||(e[24]=a("div",{class:"info-label"},"LTV (Loan-to-Value)",-1)),a("div",u3,m(r.currentProduct.ltv||r.currentProduct.LTV||"N/A")+"%",1)]),a("div",d3,[e[25]||(e[25]=a("div",{class:"info-label"},"Annual Interest Rate",-1)),a("div",f3,m(r.currentProduct.annualInterestRate||r.currentProduct.annual_interest_rate||"N/A")+"%",1)]),a("div",h3,[e[26]||(e[26]=a("div",{class:"info-label"},"Loan Term",-1)),a("div",p3,m(r.currentProduct.loanTerm||r.currentProduct.loan_term||"N/A")+" months",1)]),a("div",m3,[e[27]||(e[27]=a("div",{class:"info-label"},"Valuation",-1)),a("div",g3,"AUD$"+m(i.formatNumber(r.currentProduct.valuation)),1)]),a("div",y3,[e[28]||(e[28]=a("div",{class:"info-label"},"Property Address",-1)),a("div",v3,m(r.currentProduct.address||r.currentProduct.property_address||"N/A"),1)])])]),a("section",b3,[e[34]||(e[34]=a("div",{class:"card-header"},[a("h2",null,"Project Details")],-1)),a("div",w3,[a("div",A3,[e[30]||(e[30]=a("div",{class:"info-label"},"Summary",-1)),a("div",E3,m(r.currentProduct.summary||"No summary available"),1)]),a("div",_3,[e[31]||(e[31]=a("div",{class:"info-label"},"Created Date",-1)),a("div",P3,m(i.formatDate(r.currentProduct.created_at||r.currentProduct.createdAt)),1)]),a("div",S3,[e[32]||(e[32]=a("div",{class:"info-label"},"Updated Date",-1)),a("div",k3,m(i.formatDate(r.currentProduct.updated_at||r.currentProduct.updatedAt)),1)]),a("div",C3,[e[33]||(e[33]=a("div",{class:"info-label"},"Last Refresh",-1)),a("div",T3,m(i.formatTime(r.lastRefreshTime)),1)])])]),a("section",I3,[a("div",x3,[e[35]||(e[35]=a("h2",null,"Raw Database Data",-1)),a("button",{class:"btn secondary",onClick:e[3]||(e[3]=(...o)=>i.toggleRawData&&i.toggleRawData(...o))},m(r.showRawData?"Hide":"Show")+" Raw Data ",1)]),r.showRawData?(g(),y("div",R3,[a("pre",D3,m(JSON.stringify(r.currentProduct,null,2)),1)])):V("",!0)])])):(g(),y("div",N3,[a("div",L3,[e[36]||(e[36]=a("h3",null,"Project Not Found",-1)),e[37]||(e[37]=a("p",null,"The requested project could not be found.",-1)),a("button",{class:"btn primary",onClick:e[4]||(e[4]=o=>t.$router.push("/listedprojects"))}," Back to Projects ")])]))])])}const Og=Tt(m4,[["render",O3],["__scopeId","data-v-517369cc"]]),U3={name:"App",components:{AppHeader:lE,AppFooter:p4,HomeView:pg,ListedProjectsView:kc,LoginView:Ig,SignupView:xg,ProfileView:Dg,WalletView:Ng,PortfolioView:Tg,kycService:Lg,DetailPage:Og},data(){return{user:null}},computed:{isAuthPage(){const t=this.$route.path;return t==="/login"||t==="/signup"},isIntroPage(){return this.$route.path==="/intro"}},methods:{alertMsg(t){alert(t)},handleSearch(t){const e=(t||"").toLowerCase().trim();e&&(e.includes("project")?this.$router.push({name:"projects"}):e.includes("login")?this.$router.push({name:"login"}):e.includes("signup")||e.includes("register")?this.$router.push({name:"signup"}):alert("No matching page found."))}}},B3={id:"app"},M3={class:"page-wrap"};function F3(t,e,s,n,r,i){const o=Di("AppHeader"),l=Di("router-view"),c=Di("AppFooter");return g(),y("div",B3,[i.isIntroPage?V("",!0):(g(),ea(o,{key:0,onSearch:i.handleSearch},null,8,["onSearch"])),a("main",M3,[Be(l)]),!i.isAuthPage&&!i.isIntroPage?(g(),ea(c,{key:1})):V("",!0)])}const V3=Tt(U3,[["render",F3]]),j3={name:"ProjectsView",props:{code:{type:String,default:null}},data(){return{filters:{q:"",type:"",status:"",minYield:0,maxYield:20},products:[],currentProduct:null,loading:!0,error:null,refreshInterval:null,lastRefreshTime:null,isDetailView:!1}},async mounted(){this.isDetailView=!!this.code,this.isDetailView?await this.loadSingleProduct():await this.loadProducts(),this.setupDatabaseSync()},beforeUnmount(){this.cleanupDatabaseSync()},watch:{$route(t,e){console.log("🔄 ToBeListedView: 路由变化",{to:t.params,from:e.params}),t.params.code!==e.params.code&&(this.isDetailView=!!t.params.code,this.isDetailView?this.loadSingleProduct():this.loadProducts())},code:{handler(t,e){console.log("🔄 ToBeListedView: Props代码变化",{newCode:t,oldCode:e}),this.isDetailView=!!t,this.isDetailView?this.loadSingleProduct():this.loadProducts()},immediate:!0}},methods:{async loadSingleProduct(){try{this.loading=!0,this.error=null,console.log("🔄 ProjectsView: 从数据库加载单个产品数据...",this.code);const t=await ms.getProductByCode(this.code);if(t.status===0){const e=t.data,s={...e,totalOffering:e.total_token,subscribed:e.current_subscribed_token,targetYield:e.target_yield,ltv:e.LTV,annualInterestRate:e.annual_interest_rate,loanAmount:e.loan_amount,valuation:e.valuation,image:e.image||this.getProductImage(e.code),totalOfferingRaw:e.total_token||0,subscribedRaw:e.current_subscribed_token||0};this.currentProduct={code:s.code,name:s.name,image:s.image,subtitle:s.subtitle,type:s.type,risk:s.risk,targetYield:s.targetYield,status:s.status,summary:s.summary,totalOffering:s.totalOffering,subscribed:s.subscribed,totalSubscriptionTokens:s.totalSubscriptionTokens,subscribedTokens:s.subscribedTokens,metrics:{currentElaraPrice:this.calculateTokenPrice(s),collateralPropertyValue:s.valuation||"TBA",rentalIncome:this.calculateRentalIncome(s),targetLoanYield:`${s.targetYield}% p.a.`},loanAmount:s.loanAmount,annualInterestRate:s.annualInterestRate,loanTerm:s.loanTerm,ltv:s.ltv,drawdownDate:s.drawdownDate,earlyRepayment:s.earlyRepayment,repaymentArrangement:s.repaymentArrangement,issuer:s.issuer,pwShareholders:s.pwShareholders,lender:s.lender,borrower:s.borrower,guarantor:s.guarantor,disbursementMethod:s.disbursementMethod,interest:s.interest,earlyRepaymentDetails:s.earlyRepaymentDetails,maturityDate:s.maturityDate,propertyAddress:s.propertyAddress,valuation:s.valuation,securityRank:s.securityRank,defaultInterestRate:s.defaultInterestRate,defaultTriggers:s.defaultTriggers,defaultProcess:s.defaultProcess,issuerToken:s.issuerToken,loanToken:s.loanToken,valuationReport:s.valuationReport,mortgageDeed:s.mortgageDeed},this.lastRefreshTime=new Date,console.log("✅ ProjectsView: 单个产品数据加载成功:",this.currentProduct)}else this.error=t.message||"获取产品数据失败",console.error("❌ ProjectsView: API返回错误:",t)}catch(t){this.error="网络错误，无法获取产品数据",console.error("❌ ProjectsView: 获取单个产品数据失败:",t)}finally{this.loading=!1}},async loadProducts(){try{this.loading=!0,this.error=null,console.log("🔄 从数据库加载产品数据...");const t=await ms.getAllProducts();t.status===0?(this.products=(t.data||[]).map(e=>{const s={id:e.id,code:e.code,name:e.name,status:e.status,totalOffering:e.total_offering_token?`AUD$${e.total_offering_token.toLocaleString()}`:"AUD$0",subscribed:e.subscribe_token?`AUD$${e.subscribe_token.toLocaleString()}`:"AUD$0",totalOfferingRaw:e.total_offering_token||0,subscribedRaw:e.subscribe_token||0,property_location:e.propertyLocation,property_state:e.propertyState,property_type:e.propertyType,property_value:e.propertyValue,property_summary:e.propertySummary,loan_type:e.loanType,loan_product:e.loanProduct,loan_amount:e.loanAmount,loan_purpose:e.loanPurpose,loan_term_months:e.loanTermMonths,lvr:e.lvr,interest_rate:e.interestRate,default_rate:e.defaultRate,commencement_date:e.commencementDate,expiry_date:e.expiryDate,expected_recovery_date:e.expectedRecoveryDate,subtitle:`${e.loanProduct} - ${e.propertyType}`,loanAmount:e.loanAmount?`AUD$${e.loanAmount.toLocaleString()}`:"AUD$0",loanTerm:`${e.loanTermMonths} months`,targetYield:e.interestRate,image:e.image||this.getProductImage(e.code)};return s.metrics={currentElaraPrice:this.calculateTokenPrice(s),collateralPropertyValue:e.propertyValue?`AUD$${e.propertyValue.toLocaleString()}`:"TBA",rentalIncome:this.calculateRentalIncome(s),targetLoanYield:`${e.interestRate}% p.a.`},s}),this.lastRefreshTime=new Date,console.log("✅ 产品数据加载成功，共",this.products.length,"个项目")):(this.error=t.message||"获取产品数据失败",console.error("❌ API返回错误:",t))}catch(t){this.error="网络错误，无法获取产品数据",console.error("❌ 加载产品数据失败:",t)}finally{this.loading=!1}},async refreshProducts(){console.log("🔄 手动刷新产品数据..."),this.isDetailView?await this.loadSingleProduct():await this.loadProducts()},setupDatabaseSync(){const{subscribeProducts:t,subscribeNewProjects:e,getLastRefreshTime:s}=fi();this.unsubscribeProducts=t(r=>{console.log("📡 ProjectsView: 收到产品数据更新，共",r.length,"个项目"),this.products=r.map(i=>({...i,totalOffering:i.total_token,subscribed:i.current_subscribed_token,targetYield:i.target_yield,ltv:i.LTV,annualInterestRate:i.annual_interest_rate,totalOfferingRaw:i.total_token||0,subscribedRaw:i.current_subscribed_token||0,loanAmount:i.loan_amount,valuation:i.valuation,image:i.image||this.getProductImage(i.code)})),this.lastRefreshTime=new Date}),this.unsubscribeNewProjects=e(r=>{console.log("🆕 ProjectsView: 发现",r.length,"个新项目"),this.showNewProjectsNotification(r)});const n=s();n&&(this.lastRefreshTime=n)},cleanupDatabaseSync(){this.unsubscribeProducts&&this.unsubscribeProducts(),this.unsubscribeNewProjects&&this.unsubscribeNewProjects()},showNewProjectsNotification(t){if(t.length>0){const e=t.map(s=>s.name).join(", ");console.log("🆕 发现新项目:",e)}},startAutoRefresh(){this.refreshInterval=setInterval(()=>{console.log("🔄 自动刷新产品数据..."),this.loadProducts()},3e4)},stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null,console.log("⏹️ 停止自动刷新"))},formatCurrency(t){if(!t)return null;const e=parseFloat(t);return isNaN(e)?t:`AUD$${e.toLocaleString()}`},resetFilters(){this.filters={q:"",type:"",risk:"",status:"",minYield:0,maxYield:20}},onFilterChange(){console.log("筛选器变化:",this.filters),this.$forceUpdate()},openDetail(t){const e=this.products.find(s=>s.code===t);try{sessionStorage.setItem("lastProduct",JSON.stringify(e))}catch{}this.$router.push({name:"detail",params:{code:t}})},openTrade(t){const e=this.products.find(s=>s.code===t);try{sessionStorage.setItem("lastProduct",JSON.stringify(e))}catch{}this.$router.push({name:"tradeProject",params:{code:t}})},getProgressPercentage(t){if(!t)return 0;const e=t.totalOfferingRaw||0,s=t.subscribedRaw||0;if(e===0)return 0;const n=s/e*100;return Math.min(Math.round(n),100)},getStatusText(t){return{INCOMING:"Incoming",ACTIVE:"Active",PERFORMING:"Performing",DEFAULT:"Default",COMPLETED:"Completed"}[t]||"Unknown"},joinWaitlist(t){this.addToWatchlist(t)},registerInterest(t){this.addToWatchlist(t)},addToWatchlist(t){try{let e=[];const s=localStorage.getItem("projectWatchlist");if(s&&(e=JSON.parse(s)),e.includes(t)){alert("This Project is already in your watchlist!");return}e.push(t),localStorage.setItem("projectWatchlist",JSON.stringify(e));const n=this.products.find(r=>r.code===t);alert(`Added ${n.name} to your watchlist!`),console.log("Added to watchlist:",t)}catch(e){console.error("❌ Projects: Failed to add to watchlist:",e),alert("Failed to add to watchlist, please try again")}},formatTime(t){if(!t)return"";const s=new Date-t,n=Math.floor(s/6e4);if(n<1)return"Just now";if(n<60)return`${n} minutes ago`;const r=Math.floor(n/60);return r<24?`${r} hours ago`:`${Math.floor(r/24)} days ago`},getProductImage(t){return{RWA001:"/pics/TYMU.png",RWA002:"/pics/SQNB.png",RWA003:"/pics/LZYT.png",YYD:"/pics/YYD.png",COMP:"/pics/TYMU.png"}[t]||"/pics/TYMU.png"},calculateTokenPrice(t){return`AUD$${(1*((t.targetYield||6)/6)).toFixed(2)}`},calculateRentalIncome(t){if(!t.valuation)return"TBA";const e=t.valuation.replace(/[AUD$,]/g,""),s=parseFloat(e),n=(t.targetYield||6)/12/100;return`AUD$${(s*n).toLocaleString("en-AU",{maximumFractionDigits:0})} / month`},getSubscriptionProgress(t){if(!t)return 0;const e=t.totalOfferingRaw||0,s=t.subscribedRaw||0;if(e===0)return 0;const n=s/e*100;return Math.round(n*100)/100},formatNumber(t){if(!t)return"0";const e=parseFloat(t);return isNaN(e)?t:e.toLocaleString()}},computed:{filteredProducts(){const t=this.filters.q.trim().toLowerCase();return this.products.filter(e=>{if(e.status!=="INCOMING")return!1;const s=!t||e.code.toLowerCase().includes(t)||(e.name||"").toLowerCase().includes(t)||(e.subtitle||"").toLowerCase().includes(t),n=!this.filters.type||e.property_type===this.filters.type,r=!this.filters.status||e.status===this.filters.status,i=parseFloat(e.targetYield)||0,o=i>=this.filters.minYield&&i<=this.filters.maxYield;return s&&n&&r&&o}).sort((e,s)=>e.code.localeCompare(s.code))},hasActiveFilters(){return this.filters.q.trim()!==""||this.filters.type!==""||this.filters.status!==""||this.filters.minYield>0||this.filters.maxYield<20},projectData(){const t=this.project;if(t)return console.log("TradeProjectView: Retrieve project data from database:",t),{code:t.code,name:t.name,image:t.image||this.getProductImage(t.code),subtitle:t.subtitle,type:t.type,risk:t.risk,targetYield:t.targetYield,status:t.status,summary:t.summary,totalOffering:t.totalOffering,subscribed:t.subscribed,totalSubscriptionTokens:t.totalSubscriptionTokens,subscribedTokens:t.subscribedTokens,metrics:{currentElaraPrice:this.calculateTokenPrice(t),collateralPropertyValue:t.valuation||"TBA",rentalIncome:this.calculateRentalIncome(t),targetLoanYield:`${t.targetYield}% p.a.`},loanAmount:t.loanAmount,annualInterestRate:t.annualInterestRate,loanTerm:t.loanTerm,ltv:t.ltv,drawdownDate:t.drawdownDate,earlyRepayment:t.earlyRepayment,repaymentArrangement:t.repaymentArrangement,issuer:t.issuer,pwShareholders:t.pwShareholders,lender:t.lender,borrower:t.borrower,guarantor:t.guarantor,disbursementMethod:t.disbursementMethod,interest:t.interest,earlyRepaymentDetails:t.earlyRepaymentDetails,maturityDate:t.maturityDate,propertyAddress:t.propertyAddress,valuation:t.valuation,securityRank:t.securityRank,defaultInterestRate:t.defaultInterestRate,defaultTriggers:t.defaultTriggers,defaultProcess:t.defaultProcess,issuerToken:t.issuerToken,loanToken:t.loanToken,valuationReport:t.valuationReport,mortgageDeed:t.mortgageDeed}}}},$3={class:"container"},H3={class:"project-container"},W3={class:"doc-header"},G3={class:"headline"},K3={class:"subline"},Y3={key:0,class:"filters",style:{display:"flex",gap:"10px","flex-wrap":"wrap","align-items":"center",margin:"8px 0 6px"}},z3={class:"yield-range-filter"},Q3={class:"yield-range-container"},J3={class:"yield-range-slider"},q3=["max"],Z3=["min"],X3={class:"yield-range-display"},e6={key:1,class:"filter-stats",style:{margin:"8px 0",color:"var(--muted)","font-size":"14px",display:"flex","justify-content":"space-between","align-items":"center","flex-wrap":"wrap",gap:"8px"}},t6={key:0,style:{"margin-left":"12px"}},s6={style:{display:"flex","align-items":"center",gap:"12px"}},n6={key:0,style:{"font-size":"12px",color:"#6b7280"}},r6=["disabled"],i6={key:2,class:"loading-container"},o6={key:3,class:"error-container"},a6={class:"error-message"},l6={key:4,class:"doc-list"},c6={class:"doc-card","aria-labelledby":"'title-' + currentProduct.code"},u6={class:"main-content"},d6={class:"left-content"},f6={class:"title-section"},h6={class:"title-header"},p6=["id"],m6={class:"doc-code"},g6={class:"doc-name"},y6={class:"doc-subtitle"},v6={class:"project-basic-info"},b6={class:"info-item"},w6={class:"info-value"},A6={class:"progress-actions-row"},E6={class:"progress-container"},_6={class:"progress-bar"},P6={class:"progress-text"},S6={class:"doc-actions"},k6={key:5,class:"doc-list"},C6={class:"pf-project-header"},T6=["src","alt"],I6={class:"pf-project-info"},x6=["id"],R6={class:"pf-project-metrics"},D6={class:"pf-project-metric"},N6={class:"pf-metric-value"},L6={class:"pf-project-metric"},O6={class:"pf-metric-value",style:{color:"#16a34a"}},U6={class:"pf-project-metric"},B6={class:"pf-metric-value"},M6={class:"pf-investment-progress"},F6={class:"pf-progress-metrics"},V6={class:"pf-progress-metric"},j6={class:"pf-progress-value"},$6={class:"pf-progress-metric"},H6={class:"pf-progress-value"},W6={class:"pf-progress-bar-container"},G6={class:"pf-progress-bar"},K6={class:"pf-progress-text"},Y6={class:"pf-project-actions"},z6=["onClick"],Q6=["onClick"],J6=["onClick"],q6=["onClick"],Z6=["onClick"],X6=["onClick"],eN=["onClick"],tN=["onClick"],sN=["onClick"];function nN(t,e,s,n,r,i){return g(),y("div",$3,[a("div",H3,[a("header",W3,[a("h1",G3,[r.isDetailView&&r.currentProduct?(g(),y(ye,{key:0},[ne(m(r.currentProduct.name)+" - "+m(r.currentProduct.code),1)],64)):(g(),y(ye,{key:1},[ne(" To Be Listed ")],64))]),a("p",K3,[r.isDetailView&&r.currentProduct?(g(),y(ye,{key:0},[ne(m(r.currentProduct.subtitle),1)],64)):V("",!0)])]),r.isDetailView?V("",!0):(g(),y("div",Y3,[Se(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.filters.q=o),class:"input",placeholder:"Search code/name/subtitle",style:{"max-width":"240px",height:"38px"}},null,512),[[Ze,r.filters.q]]),Se(a("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.filters.type=o),class:"input",style:{"max-width":"160px",height:"38px"}},[...e[20]||(e[20]=[Dt('<option value="" data-v-64f3f82a>All Types</option><option value="Single House" data-v-64f3f82a>Single House</option><option value="Commercial Building" data-v-64f3f82a>Commercial Building</option><option value="Unit Development" data-v-64f3f82a>Unit Development</option><option value="Residential Land" data-v-64f3f82a>Residential Land</option><option value="Mixed Use" data-v-64f3f82a>Mixed Use</option><option value="Retail" data-v-64f3f82a>Retail</option><option value="Office" data-v-64f3f82a>Office</option><option value="Industrial" data-v-64f3f82a>Industrial</option><option value="Student Accommodation" data-v-64f3f82a>Student Accommodation</option>',10)])],512),[[ps,r.filters.type]]),Se(a("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.filters.status=o),class:"input",style:{"max-width":"160px",height:"38px"}},[...e[21]||(e[21]=[Dt('<option value="" data-v-64f3f82a>All Status</option><option value="INCOMING" data-v-64f3f82a>Incoming</option><option value="PERFORMING" data-v-64f3f82a>Performing</option><option value="COMPLETED" data-v-64f3f82a>Completed</option><option value="COMPLETE" data-v-64f3f82a>Completed</option><option value="DEFAULT" data-v-64f3f82a>Default</option>',6)])],512),[[ps,r.filters.status]]),a("div",z3,[e[22]||(e[22]=a("label",{class:"yield-range-label"},"EST. YIELD (IRR) Range:",-1)),a("div",Q3,[a("div",J3,[Se(a("input",{type:"range","onUpdate:modelValue":e[3]||(e[3]=o=>r.filters.minYield=o),min:0,max:r.filters.maxYield-.5,step:.5,onInput:e[4]||(e[4]=(...o)=>i.onFilterChange&&i.onFilterChange(...o)),class:"yield-slider yield-slider-min"},null,40,q3),[[Ze,r.filters.minYield,void 0,{number:!0}]]),Se(a("input",{type:"range","onUpdate:modelValue":e[5]||(e[5]=o=>r.filters.maxYield=o),min:r.filters.minYield+.5,max:20,step:.5,onInput:e[6]||(e[6]=(...o)=>i.onFilterChange&&i.onFilterChange(...o)),class:"yield-slider yield-slider-max"},null,40,Z3),[[Ze,r.filters.maxYield,void 0,{number:!0}]])]),a("div",X3,m(r.filters.minYield)+"% - "+m(r.filters.maxYield)+"% ",1)])]),a("button",{class:"btn",onClick:e[7]||(e[7]=(...o)=>i.resetFilters&&i.resetFilters(...o))},"Reset")])),r.isDetailView?V("",!0):(g(),y("div",e6,[a("div",null,[ne(" Showing "+m(i.filteredProducts.length)+" of "+m(r.products.length)+" projects ",1),i.hasActiveFilters?(g(),y("span",t6,[a("button",{onClick:e[8]||(e[8]=(...o)=>i.resetFilters&&i.resetFilters(...o)),style:{background:"none",border:"none",color:"#3b82f6","text-decoration":"underline",cursor:"pointer"}}," Clear filters ")])):V("",!0)]),a("div",s6,[r.lastRefreshTime?(g(),y("span",n6," Last Updated: "+m(i.formatTime(r.lastRefreshTime)),1)):V("",!0),a("button",{onClick:e[9]||(e[9]=(...o)=>i.refreshProducts&&i.refreshProducts(...o)),disabled:r.loading,class:"refresh-btn",style:Rt([{background:"#374151",border:"1px solid #4b5563",color:"#ffffff",padding:"6px 12px","border-radius":"6px","font-size":"12px",cursor:"pointer",transition:"all 0.2s ease"},{opacity:r.loading?.6:1,cursor:r.loading?"not-allowed":"pointer"}])},m(r.loading?"Refreshing...":"Refresh Data"),13,r6)])])),r.loading?(g(),y("div",i6,[...e[23]||(e[23]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Loading product data...",-1)])])):r.error?(g(),y("div",o6,[a("div",a6,[e[24]||(e[24]=a("h3",null,"Load Failed",-1)),a("button",{onClick:e[10]||(e[10]=(...o)=>i.loadProducts&&i.loadProducts(...o)),class:"btn retry-btn"},"Retry")])])):r.isDetailView&&r.currentProduct?(g(),y("section",l6,[a("article",c6,[a("div",u6,[a("div",d6,[a("section",f6,[a("div",h6,[a("h2",{id:"title-"+r.currentProduct.code},[a("span",m6,m(r.currentProduct.code),1),a("span",g6,m(r.currentProduct.name),1)],8,p6),a("div",{class:we(["status-badge","status-"+r.currentProduct.status])},m(i.getStatusText(r.currentProduct.status)),3)]),a("p",y6,m(r.currentProduct.subtitle),1),a("div",v6,[a("div",b6,[e[25]||(e[25]=a("span",{class:"info-label"},"Type:",-1)),a("span",w6,m(r.currentProduct.type),1)])])]),e[26]||(e[26]=a("hr",{class:"sep"},null,-1))])]),a("div",A6,[a("div",E6,[a("div",_6,[a("div",{class:"progress-fill",style:Rt({width:i.getProgressPercentage(r.currentProduct)+"%"})},null,4),a("div",{class:"progress-empty",style:Rt({width:100-i.getProgressPercentage(r.currentProduct)+"%"})},null,4)]),a("span",P6,m(i.getProgressPercentage(r.currentProduct))+"%",1)]),a("div",S6,[r.currentProduct.status==="ACTIVE"?(g(),y(ye,{key:0},[a("a",{href:"#",class:"btn small orange",onClick:e[11]||(e[11]=ue(o=>i.openTrade(r.currentProduct.code),["prevent"]))},"Buy"),a("a",{href:"#",class:"btn small",onClick:e[12]||(e[12]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"Detail")],64)):r.currentProduct.status==="INCOMING"?(g(),y(ye,{key:1},[a("a",{href:"#",class:"btn small",onClick:e[13]||(e[13]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"Preview"),a("a",{href:"#",class:"btn small",onClick:e[14]||(e[14]=ue(o=>i.joinWaitlist(r.currentProduct.code),["prevent"]))},"Join Waitlist")],64)):r.currentProduct.status==="PERFORMING"?(g(),y("a",{key:2,href:"#",class:"btn small",onClick:e[15]||(e[15]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):r.currentProduct.status==="COMPLETED"?(g(),y("a",{key:3,href:"#",class:"btn small",onClick:e[16]||(e[16]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):r.currentProduct.status==="COMPLETE"?(g(),y("a",{key:4,href:"#",class:"btn small",onClick:e[17]||(e[17]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):r.currentProduct.status==="DEFAULT"?(g(),y("a",{key:5,href:"#",class:"btn small",onClick:e[18]||(e[18]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):(g(),y("a",{key:6,href:"#",class:"btn small",onClick:e[19]||(e[19]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"Learn More"))])])])])):(g(),y("section",k6,[(g(!0),y(ye,null,At(i.filteredProducts,o=>(g(),y("article",{key:o.code,class:"pf-project-card","aria-labelledby":"'title-' + p.code"},[a("div",C6,[a("img",{src:o.image,class:"pf-project-image",alt:o.code},null,8,T6),a("div",I6,[a("h4",{id:"title-"+o.code},m(o.code)+" • "+m(o.name),9,x6),a("p",null,m(o.subtitle),1)]),a("div",{class:we(["status-badge","status-"+o.status])},m(i.getStatusText(o.status)),3)]),a("div",R6,[a("div",D6,[e[27]||(e[27]=a("span",{class:"pf-metric-label"},"LOAN SIZE",-1)),a("span",N6,m(o.loanAmount),1)]),a("div",L6,[e[28]||(e[28]=a("span",{class:"pf-metric-label"},"EST. YIELD (IRR)",-1)),a("span",O6,m(o.metrics.targetLoanYield),1)]),a("div",U6,[e[29]||(e[29]=a("span",{class:"pf-metric-label"},"TERM",-1)),a("span",B6,m(o.loanTerm),1)])]),a("div",M6,[a("div",F6,[a("div",V6,[e[30]||(e[30]=a("span",{class:"pf-progress-label"},"SUBSCRIBED",-1)),a("span",j6,m(i.formatNumber(o.subscribed||0)),1)]),a("div",$6,[e[31]||(e[31]=a("span",{class:"pf-progress-label"},"TOTAL OFFERING",-1)),a("span",H6,m(i.formatNumber(o.totalOffering||0)),1)])]),a("div",W6,[a("div",G6,[a("div",{class:"pf-progress-fill",style:Rt({width:i.getSubscriptionProgress(o)+"%"})},null,4)]),a("div",K6,m(i.getSubscriptionProgress(o))+"% Subscribed",1)])]),a("div",Y6,[o.status==="ACTIVE"?(g(),y(ye,{key:0},[a("button",{class:"pf-project-btn pf-project-btn-secondary",onClick:l=>i.openTrade(o.code)},"BUY",8,z6),a("button",{class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,Q6)],64)):o.status==="INCOMING"?(g(),y(ye,{key:1},[a("button",{class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,J6),a("button",{class:"pf-project-btn",onClick:l=>i.joinWaitlist(o.code)},"ADD TO WATCHLIST",8,q6)],64)):o.status==="PERFORMING"?(g(),y("button",{key:2,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,Z6)):o.status==="COMPLETED"?(g(),y("button",{key:3,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,X6)):o.status==="COMPLETE"?(g(),y("button",{key:4,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,eN)):o.status==="DEFAULT"?(g(),y("button",{key:5,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,tN)):(g(),y("button",{key:6,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,sN))])]))),128))]))])])}const Wf=Tt(j3,[["render",nN],["__scopeId","data-v-64f3f82a"]]),rN={name:"AdminProjectsView",props:{code:{type:String,default:null}},data(){return{filters:{q:"",type:"",status:"",minYield:0,maxYield:20},products:[],currentProduct:null,loading:!0,error:null,refreshInterval:null,lastRefreshTime:null,isDetailView:!1}},async mounted(){this.isDetailView=!!this.code,this.isDetailView?await this.loadSingleProduct():await this.loadProducts(),this.setupDatabaseSync()},beforeUnmount(){this.cleanupDatabaseSync()},watch:{$route(t,e){t.params.code!==e.params.code&&(this.code=t.params.code,this.isDetailView=!!this.code,this.isDetailView?this.loadSingleProduct():this.loadProducts())},code:{handler(t){this.isDetailView=!!t,this.isDetailView?this.loadSingleProduct():this.loadProducts()},immediate:!0}},methods:{async loadSingleProduct(){try{this.loading=!0,this.error=null,console.log("🔄 ProjectsView: 从数据库加载单个产品数据...",this.code);const t=await ms.getProductByCode(this.code);if(t.status===0){const e=t.data,s={...e,totalOffering:e.total_token,subscribed:e.current_subscribed_token,targetYield:e.target_yield,ltv:e.LTV,annualInterestRate:e.annual_interest_rate,loanAmount:e.loan_amount,valuation:e.valuation,image:e.image||this.getProductImage(e.code),totalOfferingRaw:e.total_token||0,subscribedRaw:e.current_subscribed_token||0};this.currentProduct={code:s.code,name:s.name,image:s.image,subtitle:s.subtitle,type:s.type,risk:s.risk,targetYield:s.targetYield,status:s.status,summary:s.summary,totalOffering:s.totalOffering,subscribed:s.subscribed,totalSubscriptionTokens:s.totalSubscriptionTokens,subscribedTokens:s.subscribedTokens,metrics:{currentElaraPrice:this.calculateTokenPrice(s),collateralPropertyValue:s.valuation||"TBA",rentalIncome:this.calculateRentalIncome(s),targetLoanYield:`${s.targetYield}% p.a.`},loanAmount:s.loanAmount,annualInterestRate:s.annualInterestRate,loanTerm:s.loanTerm,ltv:s.ltv,drawdownDate:s.drawdownDate,earlyRepayment:s.earlyRepayment,repaymentArrangement:s.repaymentArrangement,issuer:s.issuer,pwShareholders:s.pwShareholders,lender:s.lender,borrower:s.borrower,guarantor:s.guarantor,disbursementMethod:s.disbursementMethod,interest:s.interest,earlyRepaymentDetails:s.earlyRepaymentDetails,maturityDate:s.maturityDate,propertyAddress:s.propertyAddress,valuation:s.valuation,securityRank:s.securityRank,defaultInterestRate:s.defaultInterestRate,defaultTriggers:s.defaultTriggers,defaultProcess:s.defaultProcess,issuerToken:s.issuerToken,loanToken:s.loanToken,valuationReport:s.valuationReport,mortgageDeed:s.mortgageDeed},this.lastRefreshTime=new Date,console.log("✅ ProjectsView: 单个产品数据加载成功:",this.currentProduct)}else this.error=t.message||"获取产品数据失败",console.error("❌ ProjectsView: API返回错误:",t)}catch(t){this.error="网络错误，无法获取产品数据",console.error("❌ ProjectsView: 获取单个产品数据失败:",t)}finally{this.loading=!1}},async loadProducts(){try{this.loading=!0,this.error=null,console.log("🔄 从数据库加载产品数据...");const t=await ms.getAllProducts();t.status===0?(this.products=(t.data||[]).map(e=>{const s={id:e.id,code:e.code,name:e.name,status:e.status,totalOffering:e.total_offering_token?`AUD$${e.total_offering_token.toLocaleString()}`:"AUD$0",subscribed:e.subscribe_token?`AUD$${e.subscribe_token.toLocaleString()}`:"AUD$0",totalOfferingRaw:e.total_offering_token||0,subscribedRaw:e.subscribe_token||0,property_location:e.propertyLocation,property_state:e.propertyState,property_type:e.propertyType,property_value:e.propertyValue,property_summary:e.propertySummary,loan_type:e.loanType,loan_product:e.loanProduct,loan_amount:e.loanAmount,loan_purpose:e.loanPurpose,loan_term_months:e.loanTermMonths,lvr:e.lvr,interest_rate:e.interestRate,default_rate:e.defaultRate,commencement_date:e.commencementDate,expiry_date:e.expiryDate,expected_recovery_date:e.expectedRecoveryDate,subtitle:`${e.loanProduct} - ${e.propertyType}`,loanAmount:e.loanAmount?`AUD$${e.loanAmount.toLocaleString()}`:"AUD$0",loanTerm:`${e.loanTermMonths} months`,targetYield:e.interestRate,image:e.image||this.getProductImage(e.code)};return s.metrics={currentElaraPrice:this.calculateTokenPrice(s),collateralPropertyValue:e.propertyValue?`AUD$${e.propertyValue.toLocaleString()}`:"TBA",rentalIncome:this.calculateRentalIncome(s),targetLoanYield:`${e.interestRate}% p.a.`},s}),this.lastRefreshTime=new Date,console.log("✅ 产品数据加载成功，共",this.products.length,"个项目")):(this.error=t.message||"获取产品数据失败",console.error("❌ API返回错误:",t))}catch(t){this.error="网络错误，无法获取产品数据",console.error("❌ 加载产品数据失败:",t)}finally{this.loading=!1}},async refreshProducts(){console.log("🔄 手动刷新产品数据..."),this.isDetailView?await this.loadSingleProduct():await this.loadProducts()},setupDatabaseSync(){const{subscribeProducts:t,subscribeNewProjects:e,getLastRefreshTime:s}=fi();this.unsubscribeProducts=t(r=>{console.log("📡 ProjectsView: 收到产品数据更新，共",r.length,"个项目"),this.products=r.map(i=>({...i,totalOffering:i.total_token,subscribed:i.current_subscribed_token,targetYield:i.target_yield,ltv:i.LTV,annualInterestRate:i.annual_interest_rate,totalOfferingRaw:i.total_token||0,subscribedRaw:i.current_subscribed_token||0,loanAmount:i.loan_amount,valuation:i.valuation,image:i.image||this.getProductImage(i.code)})),this.lastRefreshTime=new Date}),this.unsubscribeNewProjects=e(r=>{console.log("🆕 ProjectsView: 发现",r.length,"个新项目"),this.showNewProjectsNotification(r)});const n=s();n&&(this.lastRefreshTime=n)},cleanupDatabaseSync(){this.unsubscribeProducts&&this.unsubscribeProducts(),this.unsubscribeNewProjects&&this.unsubscribeNewProjects()},showNewProjectsNotification(t){if(t.length>0){const e=t.map(s=>s.name).join(", ");console.log("🆕 发现新项目:",e)}},startAutoRefresh(){this.refreshInterval=setInterval(()=>{console.log("🔄 自动刷新产品数据..."),this.loadProducts()},3e4)},stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null,console.log("⏹️ 停止自动刷新"))},formatCurrency(t){if(!t)return null;const e=parseFloat(t);return isNaN(e)?t:`AUD$${e.toLocaleString()}`},resetFilters(){this.filters={q:"",type:"",risk:"",status:"",minYield:0,maxYield:20}},onFilterChange(){console.log("筛选器变化:",this.filters),this.$forceUpdate()},openDetail(t){const e=this.products.find(s=>s.code===t);try{sessionStorage.setItem("lastProduct",JSON.stringify(e))}catch{}this.$router.push({name:"detail",params:{code:t}})},openTrade(t){const e=this.products.find(s=>s.code===t);try{sessionStorage.setItem("lastProduct",JSON.stringify(e))}catch{}this.$router.push({name:"tradeProject",params:{code:t}})},getProgressPercentage(t){if(!t)return 0;const e=t.totalOfferingRaw||0,s=t.subscribedRaw||0;if(e===0)return 0;const n=s/e*100;return Math.min(Math.round(n),100)},getStatusText(t){return{INCOMING:"Incoming",ACTIVE:"Active",PERFORMING:"Performing",DEFAULT:"Default",COMPLETED:"Completed"}[t]||"Unknown"},joinWaitlist(t){this.addToWatchlist(t)},registerInterest(t){this.addToWatchlist(t)},addToWatchlist(t){try{let e=[];const s=localStorage.getItem("projectWatchlist");if(s&&(e=JSON.parse(s)),e.includes(t)){alert("This Project is already in your watchlist!");return}e.push(t),localStorage.setItem("projectWatchlist",JSON.stringify(e));const n=this.products.find(r=>r.code===t);alert(`Added ${n.name} to your watchlist!`),console.log("Added to watchlist:",t)}catch(e){console.error("❌ Projects: Failed to add to watchlist:",e),alert("Failed to add to watchlist, please try again")}},formatTime(t){if(!t)return"";const s=new Date-t,n=Math.floor(s/6e4);if(n<1)return"Just now";if(n<60)return`${n} minutes ago`;const r=Math.floor(n/60);return r<24?`${r} hours ago`:`${Math.floor(r/24)} days ago`},getProductImage(t){return{RWA001:"/pics/TYMU.png",RWA002:"/pics/SQNB.png",RWA003:"/pics/LZYT.png",YYD:"/pics/YYD.png",COMP:"/pics/TYMU.png"}[t]||"/pics/TYMU.png"},calculateTokenPrice(t){return`AUD$${(1*((t.targetYield||6)/6)).toFixed(2)}`},calculateRentalIncome(t){if(!t.valuation)return"TBA";const e=t.valuation.replace(/[AUD$,]/g,""),s=parseFloat(e),n=(t.targetYield||6)/12/100;return`AUD$${(s*n).toLocaleString("en-AU",{maximumFractionDigits:0})} / month`},getSubscriptionProgress(t){if(!t)return 0;const e=t.totalOfferingRaw||0,s=t.subscribedRaw||0;if(e===0)return 0;const n=s/e*100;return Math.round(n*100)/100},formatNumber(t){if(!t)return"0";const e=parseFloat(t);return isNaN(e)?t:e.toLocaleString()}},computed:{filteredProducts(){const t=this.filters.q.trim().toLowerCase();return this.products.filter(e=>{if(e.status==="ACTIVE"||e.status==="INCOMING")return!1;const s=!t||e.code.toLowerCase().includes(t)||(e.name||"").toLowerCase().includes(t)||(e.subtitle||"").toLowerCase().includes(t),n=!this.filters.type||e.property_type===this.filters.type,r=!this.filters.status||e.status===this.filters.status,i=parseFloat(e.targetYield)||0,o=i>=this.filters.minYield&&i<=this.filters.maxYield;return s&&n&&r&&o}).sort((e,s)=>e.code.localeCompare(s.code))},hasActiveFilters(){return this.filters.q.trim()!==""||this.filters.type!==""||this.filters.status!==""||this.filters.minYield>0||this.filters.maxYield<20},projectData(){const t=this.project;if(t)return console.log("TradeProjectView: Retrieve project data from database:",t),{code:t.code,name:t.name,image:t.image||this.getProductImage(t.code),subtitle:t.subtitle,type:t.type,risk:t.risk,targetYield:t.targetYield,status:t.status,summary:t.summary,totalOffering:t.totalOffering,subscribed:t.subscribed,totalSubscriptionTokens:t.totalSubscriptionTokens,subscribedTokens:t.subscribedTokens,metrics:{currentElaraPrice:this.calculateTokenPrice(t),collateralPropertyValue:t.valuation||"TBA",rentalIncome:this.calculateRentalIncome(t),targetLoanYield:`${t.targetYield}% p.a.`},loanAmount:t.loanAmount,annualInterestRate:t.annualInterestRate,loanTerm:t.loanTerm,ltv:t.ltv,drawdownDate:t.drawdownDate,earlyRepayment:t.earlyRepayment,repaymentArrangement:t.repaymentArrangement,issuer:t.issuer,pwShareholders:t.pwShareholders,lender:t.lender,borrower:t.borrower,guarantor:t.guarantor,disbursementMethod:t.disbursementMethod,interest:t.interest,earlyRepaymentDetails:t.earlyRepaymentDetails,maturityDate:t.maturityDate,propertyAddress:t.propertyAddress,valuation:t.valuation,securityRank:t.securityRank,defaultInterestRate:t.defaultInterestRate,defaultTriggers:t.defaultTriggers,defaultProcess:t.defaultProcess,issuerToken:t.issuerToken,loanToken:t.loanToken,valuationReport:t.valuationReport,mortgageDeed:t.mortgageDeed}}}},iN={class:"container"},oN={class:"project-container"},aN={class:"doc-header"},lN={class:"headline"},cN={class:"subline"},uN={key:0,class:"filters",style:{display:"flex",gap:"10px","flex-wrap":"wrap","align-items":"center",margin:"8px 0 6px"}},dN={class:"yield-range-filter"},fN={class:"yield-range-container"},hN={class:"yield-range-slider"},pN=["max"],mN=["min"],gN={class:"yield-range-display"},yN={key:1,class:"filter-stats",style:{margin:"8px 0",color:"var(--muted)","font-size":"14px",display:"flex","justify-content":"space-between","align-items":"center","flex-wrap":"wrap",gap:"8px"}},vN={key:0,style:{"margin-left":"12px"}},bN={style:{display:"flex","align-items":"center",gap:"12px"}},wN={key:0,style:{"font-size":"12px",color:"#6b7280"}},AN=["disabled"],EN={key:2,class:"loading-container"},_N={key:3,class:"error-container"},PN={class:"error-message"},SN={key:4,class:"doc-list"},kN={class:"doc-card","aria-labelledby":"'title-' + currentProduct.code"},CN={class:"main-content"},TN={class:"left-content"},IN={class:"title-section"},xN={class:"title-header"},RN=["id"],DN={class:"doc-code"},NN={class:"doc-name"},LN={class:"doc-subtitle"},ON={class:"project-basic-info"},UN={class:"info-item"},BN={class:"info-value"},MN={class:"progress-actions-row"},FN={class:"progress-container"},VN={class:"progress-bar"},jN={class:"progress-text"},$N={class:"doc-actions"},HN={key:5,class:"doc-list"},WN={class:"pf-project-header"},GN=["src","alt"],KN={class:"pf-project-info"},YN=["id"],zN={class:"pf-project-metrics"},QN={class:"pf-project-metric"},JN={class:"pf-metric-value"},qN={class:"pf-project-metric"},ZN={class:"pf-metric-value",style:{color:"#16a34a"}},XN={class:"pf-project-metric"},eL={class:"pf-metric-value"},tL={class:"pf-investment-progress"},sL={class:"pf-progress-metrics"},nL={class:"pf-progress-metric"},rL={class:"pf-progress-value"},iL={class:"pf-progress-metric"},oL={class:"pf-progress-value"},aL={class:"pf-progress-bar-container"},lL={class:"pf-progress-bar"},cL={class:"pf-progress-text"},uL={class:"pf-project-actions"},dL=["onClick"],fL=["onClick"],hL=["onClick"],pL=["onClick"],mL=["onClick"],gL=["onClick"],yL=["onClick"],vL=["onClick"],bL=["onClick"];function wL(t,e,s,n,r,i){return g(),y("div",iN,[a("div",oN,[a("header",aN,[a("h1",lN,[r.isDetailView&&r.currentProduct?(g(),y(ye,{key:0},[ne(m(r.currentProduct.name)+" - "+m(r.currentProduct.code),1)],64)):(g(),y(ye,{key:1},[ne(" Admin Projects ")],64))]),a("p",cN,[r.isDetailView&&r.currentProduct?(g(),y(ye,{key:0},[ne(m(r.currentProduct.subtitle),1)],64)):V("",!0)])]),r.isDetailView?V("",!0):(g(),y("div",uN,[Se(a("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.filters.q=o),class:"input",placeholder:"Search code/name/subtitle",style:{"max-width":"240px",height:"38px"}},null,512),[[Ze,r.filters.q]]),Se(a("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.filters.type=o),class:"input",style:{"max-width":"160px",height:"38px"}},[...e[20]||(e[20]=[Dt('<option value="" data-v-f62d9aa2>All Types</option><option value="Single House" data-v-f62d9aa2>Single House</option><option value="Commercial Building" data-v-f62d9aa2>Commercial Building</option><option value="Unit Development" data-v-f62d9aa2>Unit Development</option><option value="Residential Land" data-v-f62d9aa2>Residential Land</option><option value="Mixed Use" data-v-f62d9aa2>Mixed Use</option><option value="Retail" data-v-f62d9aa2>Retail</option><option value="Office" data-v-f62d9aa2>Office</option><option value="Industrial" data-v-f62d9aa2>Industrial</option><option value="Student Accommodation" data-v-f62d9aa2>Student Accommodation</option>',10)])],512),[[ps,r.filters.type]]),Se(a("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.filters.status=o),class:"input",style:{"max-width":"160px",height:"38px"}},[...e[21]||(e[21]=[Dt('<option value="" data-v-f62d9aa2>All Status</option><option value="INCOMING" data-v-f62d9aa2>Incoming</option><option value="ACTIVE" data-v-f62d9aa2>Active</option><option value="PERFORMING" data-v-f62d9aa2>Performing</option><option value="COMPLETED" data-v-f62d9aa2>Completed</option><option value="COMPLETE" data-v-f62d9aa2>Completed</option><option value="DEFAULT" data-v-f62d9aa2>Default</option>',7)])],512),[[ps,r.filters.status]]),a("div",dN,[e[22]||(e[22]=a("label",{class:"yield-range-label"},"EST. YIELD (IRR) Range:",-1)),a("div",fN,[a("div",hN,[Se(a("input",{type:"range","onUpdate:modelValue":e[3]||(e[3]=o=>r.filters.minYield=o),min:0,max:r.filters.maxYield-.5,step:.5,onInput:e[4]||(e[4]=(...o)=>i.onFilterChange&&i.onFilterChange(...o)),class:"yield-slider yield-slider-min"},null,40,pN),[[Ze,r.filters.minYield,void 0,{number:!0}]]),Se(a("input",{type:"range","onUpdate:modelValue":e[5]||(e[5]=o=>r.filters.maxYield=o),min:r.filters.minYield+.5,max:20,step:.5,onInput:e[6]||(e[6]=(...o)=>i.onFilterChange&&i.onFilterChange(...o)),class:"yield-slider yield-slider-max"},null,40,mN),[[Ze,r.filters.maxYield,void 0,{number:!0}]])]),a("div",gN,m(r.filters.minYield)+"% - "+m(r.filters.maxYield)+"% ",1)])]),a("button",{class:"btn",onClick:e[7]||(e[7]=(...o)=>i.resetFilters&&i.resetFilters(...o))},"Reset")])),r.isDetailView?V("",!0):(g(),y("div",yN,[a("div",null,[ne(" Showing "+m(i.filteredProducts.length)+" of "+m(r.products.length)+" projects ",1),i.hasActiveFilters?(g(),y("span",vN,[a("button",{onClick:e[8]||(e[8]=(...o)=>i.resetFilters&&i.resetFilters(...o)),style:{background:"none",border:"none",color:"#3b82f6","text-decoration":"underline",cursor:"pointer"}}," Clear filters ")])):V("",!0)]),a("div",bN,[r.lastRefreshTime?(g(),y("span",wN," Last Updated: "+m(i.formatTime(r.lastRefreshTime)),1)):V("",!0),a("button",{onClick:e[9]||(e[9]=(...o)=>i.refreshProducts&&i.refreshProducts(...o)),disabled:r.loading,class:"refresh-btn",style:Rt([{background:"#374151",border:"1px solid #4b5563",color:"#ffffff",padding:"6px 12px","border-radius":"6px","font-size":"12px",cursor:"pointer",transition:"all 0.2s ease"},{opacity:r.loading?.6:1,cursor:r.loading?"not-allowed":"pointer"}])},m(r.loading?"Refreshing...":"Refresh Data"),13,AN)])])),r.loading?(g(),y("div",EN,[...e[23]||(e[23]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Loading product data...",-1)])])):r.error?(g(),y("div",_N,[a("div",PN,[e[24]||(e[24]=a("h3",null,"Load Failed",-1)),a("button",{onClick:e[10]||(e[10]=(...o)=>i.loadProducts&&i.loadProducts(...o)),class:"btn retry-btn"},"Retry")])])):r.isDetailView&&r.currentProduct?(g(),y("section",SN,[a("article",kN,[a("div",CN,[a("div",TN,[a("section",IN,[a("div",xN,[a("h2",{id:"title-"+r.currentProduct.code},[a("span",DN,m(r.currentProduct.code),1),a("span",NN,m(r.currentProduct.name),1)],8,RN),a("div",{class:we(["status-badge","status-"+r.currentProduct.status])},m(i.getStatusText(r.currentProduct.status)),3)]),a("p",LN,m(r.currentProduct.subtitle),1),a("div",ON,[a("div",UN,[e[25]||(e[25]=a("span",{class:"info-label"},"Type:",-1)),a("span",BN,m(r.currentProduct.type),1)])])]),e[26]||(e[26]=a("hr",{class:"sep"},null,-1))])]),a("div",MN,[a("div",FN,[a("div",VN,[a("div",{class:"progress-fill",style:Rt({width:i.getProgressPercentage(r.currentProduct)+"%"})},null,4),a("div",{class:"progress-empty",style:Rt({width:100-i.getProgressPercentage(r.currentProduct)+"%"})},null,4)]),a("span",jN,m(i.getProgressPercentage(r.currentProduct))+"%",1)]),a("div",$N,[r.currentProduct.status==="ACTIVE"?(g(),y(ye,{key:0},[a("a",{href:"#",class:"btn small orange",onClick:e[11]||(e[11]=ue(o=>i.openTrade(r.currentProduct.code),["prevent"]))},"Buy"),a("a",{href:"#",class:"btn small",onClick:e[12]||(e[12]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"Detail")],64)):r.currentProduct.status==="INCOMING"?(g(),y(ye,{key:1},[a("a",{href:"#",class:"btn small",onClick:e[13]||(e[13]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"Preview"),a("a",{href:"#",class:"btn small",onClick:e[14]||(e[14]=ue(o=>i.joinWaitlist(r.currentProduct.code),["prevent"]))},"Join Waitlist")],64)):r.currentProduct.status==="PERFORMING"?(g(),y("a",{key:2,href:"#",class:"btn small",onClick:e[15]||(e[15]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):r.currentProduct.status==="COMPLETED"?(g(),y("a",{key:3,href:"#",class:"btn small",onClick:e[16]||(e[16]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):r.currentProduct.status==="COMPLETE"?(g(),y("a",{key:4,href:"#",class:"btn small",onClick:e[17]||(e[17]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):r.currentProduct.status==="DEFAULT"?(g(),y("a",{key:5,href:"#",class:"btn small",onClick:e[18]||(e[18]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"View Details")):(g(),y("a",{key:6,href:"#",class:"btn small",onClick:e[19]||(e[19]=ue(o=>i.openDetail(r.currentProduct.code),["prevent"]))},"Learn More"))])])])])):(g(),y("section",HN,[(g(!0),y(ye,null,At(i.filteredProducts,o=>(g(),y("article",{key:o.code,class:"pf-project-card","aria-labelledby":"'title-' + p.code"},[a("div",WN,[a("img",{src:o.image,class:"pf-project-image",alt:o.code},null,8,GN),a("div",KN,[a("h4",{id:"title-"+o.code},m(o.code)+" • "+m(o.name),9,YN),a("p",null,m(o.subtitle),1)]),a("div",{class:we(["status-badge","status-"+o.status])},m(i.getStatusText(o.status)),3)]),a("div",zN,[a("div",QN,[e[27]||(e[27]=a("span",{class:"pf-metric-label"},"LOAN SIZE",-1)),a("span",JN,m(o.loanAmount),1)]),a("div",qN,[e[28]||(e[28]=a("span",{class:"pf-metric-label"},"EST. YIELD (IRR)",-1)),a("span",ZN,m(o.metrics.targetLoanYield),1)]),a("div",XN,[e[29]||(e[29]=a("span",{class:"pf-metric-label"},"TERM",-1)),a("span",eL,m(o.loanTerm),1)])]),a("div",tL,[a("div",sL,[a("div",nL,[e[30]||(e[30]=a("span",{class:"pf-progress-label"},"SUBSCRIBED",-1)),a("span",rL,m(i.formatNumber(o.subscribed||0)),1)]),a("div",iL,[e[31]||(e[31]=a("span",{class:"pf-progress-label"},"TOTAL OFFERING",-1)),a("span",oL,m(i.formatNumber(o.totalOffering||0)),1)])]),a("div",aL,[a("div",lL,[a("div",{class:"pf-progress-fill",style:Rt({width:i.getSubscriptionProgress(o)+"%"})},null,4)]),a("div",cL,m(i.getSubscriptionProgress(o))+"% Subscribed",1)])]),a("div",uL,[o.status==="ACTIVE"?(g(),y(ye,{key:0},[a("button",{class:"pf-project-btn pf-project-btn-secondary",onClick:l=>i.openTrade(o.code)},"BUY",8,dL),a("button",{class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,fL)],64)):o.status==="INCOMING"?(g(),y(ye,{key:1},[a("button",{class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,hL),a("button",{class:"pf-project-btn",onClick:l=>i.joinWaitlist(o.code)},"ADD TO WATCHLIST",8,pL)],64)):o.status==="PERFORMING"?(g(),y("button",{key:2,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,mL)):o.status==="COMPLETED"?(g(),y("button",{key:3,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,gL)):o.status==="COMPLETE"?(g(),y("button",{key:4,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,yL)):o.status==="DEFAULT"?(g(),y("button",{key:5,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,vL)):(g(),y("button",{key:6,class:"pf-project-btn",onClick:l=>i.openDetail(o.code)},"DETAILS",8,bL))])]))),128))]))])])}const AL=Tt(rN,[["render",wL],["__scopeId","data-v-f62d9aa2"]]),EL={name:"ContactUsView",data(){return{form:{name:"",email:"",phone:"",subject:"",message:""},errors:{},isSubmitting:!1,submitSuccess:!1}},methods:{async submitForm(){if(this.errors={},!!this.validateForm()){this.isSubmitting=!0;try{await this.sendContactForm(),this.submitSuccess=!0,this.form={name:"",email:"",phone:"",subject:"",message:""},setTimeout(()=>{this.submitSuccess=!1},5e3)}catch(t){console.error("Failed to submit form:",t),alert("Failed to send message. Please try again or contact us directly.")}finally{this.isSubmitting=!1}}},validateForm(){let t=!0;this.form.name.trim()?this.form.name.trim().length<2&&(this.errors.name="Name must be at least 2 characters",t=!1):(this.errors.name="Name is required",t=!1);const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.form.email.trim()?e.test(this.form.email)||(this.errors.email="Please enter a valid email address",t=!1):(this.errors.email="Email is required",t=!1),this.form.subject||(this.errors.subject="Please select a subject",t=!1),this.form.message.trim()?this.form.message.trim().length<10?(this.errors.message="Message must be at least 10 characters",t=!1):this.form.message.length>1e3&&(this.errors.message="Message must be less than 1000 characters",t=!1):(this.errors.message="Message is required",t=!1),t},async sendContactForm(){return new Promise((t,e)=>{setTimeout(()=>{console.log("Contact form submitted:",this.form),t()},2e3)})}}},_L={class:"container"},PL={class:"contact-page"},SL={class:"contact-content"},kL={class:"contact-grid"},CL={class:"contact-form"},TL={class:"form-fields"},IL={class:"form-row"},xL={class:"form-group"},RL={key:0,class:"error-message"},DL={class:"form-group"},NL={key:0,class:"error-message"},LL={class:"form-row"},OL={class:"form-group"},UL={class:"form-group"},BL={key:0,class:"error-message"},ML={class:"form-group"},FL={key:0,class:"error-message"},VL={class:"character-count"},jL={class:"form-submit"},$L=["disabled"],HL={key:0,class:"loading-spinner"},WL={key:0,class:"success-message"};function GL(t,e,s,n,r,i){return g(),y("div",_L,[a("div",PL,[e[18]||(e[18]=a("header",{class:"page-header"},[a("h1",{class:"headline"},"Contact Us"),a("p",{class:"subline"},"We are here to help you with your RWA investment journey")],-1)),a("div",SL,[a("div",kL,[e[16]||(e[16]=Dt('<div class="contact-info" data-v-62f09c1d><h2 data-v-62f09c1d>Get in Touch</h2><p class="info-description" data-v-62f09c1d>Choose your preferred way to reach us</p><div class="contact-methods" data-v-62f09c1d><div class="contact-method" data-v-62f09c1d><div class="method-icon" data-v-62f09c1d>📧</div><div class="method-details" data-v-62f09c1d><h4 data-v-62f09c1d>Email Support</h4><p data-v-62f09c1d>support@mortgagerwa.com</p><p data-v-62f09c1d>business@mortgagerwa.com</p><span class="response-time" data-v-62f09c1d>Response within 24 hours</span></div></div><div class="contact-method" data-v-62f09c1d><div class="method-icon" data-v-62f09c1d>📞</div><div class="method-details" data-v-62f09c1d><h4 data-v-62f09c1d>Phone Support</h4><p data-v-62f09c1d>+61 2 1234 5678</p><p data-v-62f09c1d>Monday to Friday 9:00-18:00 (AEST)</p><span class="response-time" data-v-62f09c1d>Immediate assistance</span></div></div><div class="contact-method" data-v-62f09c1d><div class="method-icon" data-v-62f09c1d>📍</div><div class="method-details" data-v-62f09c1d><h4 data-v-62f09c1d>Office Address</h4><p data-v-62f09c1d>Level 15, 123 George Street</p><p data-v-62f09c1d>Sydney NSW 2000, Australia</p><span class="response-time" data-v-62f09c1d>Visit by appointment</span></div></div><div class="contact-method" data-v-62f09c1d><div class="method-icon" data-v-62f09c1d>💬</div><div class="method-details" data-v-62f09c1d><h4 data-v-62f09c1d>Live Chat</h4><p data-v-62f09c1d>24/7 Online Support</p><p data-v-62f09c1d>Average Response Time &lt; 5 minutes</p><span class="response-time" data-v-62f09c1d>Real-time support</span></div></div></div><div class="social-section" data-v-62f09c1d><h3 data-v-62f09c1d>Follow Us</h3><p data-v-62f09c1d>Stay updated with our latest news and updates</p><div class="social-links" data-v-62f09c1d><a href="#" class="social-link" title="Twitter" data-v-62f09c1d><span class="social-icon" data-v-62f09c1d>🐦</span><span class="social-label" data-v-62f09c1d>Twitter</span></a><a href="#" class="social-link" title="LinkedIn" data-v-62f09c1d><span class="social-icon" data-v-62f09c1d>💼</span><span class="social-label" data-v-62f09c1d>LinkedIn</span></a><a href="#" class="social-link" title="Facebook" data-v-62f09c1d><span class="social-icon" data-v-62f09c1d>📘</span><span class="social-label" data-v-62f09c1d>Facebook</span></a><a href="#" class="social-link" title="GitHub" data-v-62f09c1d><span class="social-icon" data-v-62f09c1d>🐙</span><span class="social-label" data-v-62f09c1d>GitHub</span></a></div></div></div>',1)),a("div",CL,[e[14]||(e[14]=a("h2",null,"Send us a Message",-1)),e[15]||(e[15]=a("p",{class:"form-description"},"Fill out the form below and we'll get back to you as soon as possible",-1)),a("form",{onSubmit:e[5]||(e[5]=ue((...o)=>i.submitForm&&i.submitForm(...o),["prevent"])),class:"form-container"},[a("div",TL,[a("div",IL,[a("div",xL,[e[6]||(e[6]=a("label",{for:"name"},"Full Name *",-1)),Se(a("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>r.form.name=o),required:"",placeholder:"Enter your full name",class:we({error:r.errors.name})},null,2),[[Ze,r.form.name]]),r.errors.name?(g(),y("span",RL,m(r.errors.name),1)):V("",!0)]),a("div",DL,[e[7]||(e[7]=a("label",{for:"email"},"Email Address *",-1)),Se(a("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>r.form.email=o),required:"",placeholder:"Enter your email address",class:we({error:r.errors.email})},null,2),[[Ze,r.form.email]]),r.errors.email?(g(),y("span",NL,m(r.errors.email),1)):V("",!0)])]),a("div",LL,[a("div",OL,[e[8]||(e[8]=a("label",{for:"phone"},"Phone Number",-1)),Se(a("input",{type:"tel",id:"phone","onUpdate:modelValue":e[2]||(e[2]=o=>r.form.phone=o),placeholder:"Enter your phone number"},null,512),[[Ze,r.form.phone]])]),a("div",UL,[e[10]||(e[10]=a("label",{for:"subject"},"Subject *",-1)),Se(a("select",{id:"subject","onUpdate:modelValue":e[3]||(e[3]=o=>r.form.subject=o),required:"",class:we({error:r.errors.subject})},[...e[9]||(e[9]=[Dt('<option value="" data-v-62f09c1d>Please select a subject</option><option value="investor" data-v-62f09c1d>I am an Investor / Interested in Investing</option><option value="asset_holder" data-v-62f09c1d>I am an Asset Holder / Property Owner</option><option value="general" data-v-62f09c1d>General Consultation</option><option value="technical" data-v-62f09c1d>Technical Support</option><option value="business" data-v-62f09c1d>Business Partnership</option><option value="media" data-v-62f09c1d>Media Inquiry</option><option value="other" data-v-62f09c1d>Other</option>',8)])],2),[[ps,r.form.subject]]),r.errors.subject?(g(),y("span",BL,m(r.errors.subject),1)):V("",!0)])]),a("div",ML,[e[11]||(e[11]=a("label",{for:"message"},"Message *",-1)),Se(a("textarea",{id:"message","onUpdate:modelValue":e[4]||(e[4]=o=>r.form.message=o),rows:"6",required:"",placeholder:"Please describe your inquiry in detail...",class:we({error:r.errors.message})},null,2),[[Ze,r.form.message]]),r.errors.message?(g(),y("span",FL,m(r.errors.message),1)):V("",!0),a("div",VL,m(r.form.message.length)+"/1000",1)])]),a("div",jL,[a("button",{type:"submit",class:"btn primary",disabled:r.isSubmitting},[r.isSubmitting?(g(),y("span",HL)):V("",!0),ne(" "+m(r.isSubmitting?"Sending Message...":"Send Message"),1)],8,$L),e[12]||(e[12]=a("p",{class:"form-note"},[ne(" By submitting this form, you agree to our "),a("a",{href:"/terms",target:"_blank"},"Terms of Service"),ne(" and "),a("a",{href:"/privacy",target:"_blank"},"Privacy Policy")],-1))])],32),r.submitSuccess?(g(),y("div",WL,[...e[13]||(e[13]=[a("div",{class:"success-icon"},"✅",-1),a("h3",null,"Message Sent Successfully!",-1),a("p",null,"Thank you for contacting us. We'll get back to you within 24 hours.",-1)])])):V("",!0)])]),e[17]||(e[17]=Dt('<div class="faq-section" data-v-62f09c1d><h2 data-v-62f09c1d>Frequently Asked Questions</h2><div class="faq-grid" data-v-62f09c1d><div class="faq-item" data-v-62f09c1d><h4 data-v-62f09c1d>How do I start investing?</h4><p data-v-62f09c1d>Simply connect your wallet, complete KYC verification, and browse our available projects. You can start with as little as $100 AUD.</p></div><div class="faq-item" data-v-62f09c1d><h4 data-v-62f09c1d>What are the investment returns?</h4><p data-v-62f09c1d>Our RWA projects typically offer 8-15% annual returns with monthly interest payments. Returns vary by project risk and duration.</p></div><div class="faq-item" data-v-62f09c1d><h4 data-v-62f09c1d>Is my investment secure?</h4><p data-v-62f09c1d>Yes, all investments are backed by real estate assets and protected by smart contracts. We also provide comprehensive insurance coverage.</p></div><div class="faq-item" data-v-62f09c1d><h4 data-v-62f09c1d>How do I withdraw my funds?</h4><p data-v-62f09c1d>You can withdraw your funds at any time through our platform. Withdrawals are processed within 1-3 business days.</p></div></div></div>',1))])])])}const KL=Tt(EL,[["render",GL],["__scopeId","data-v-62f09c1d"]]),YL={name:"TradeProjectView",props:{code:{type:String,required:!1,default:null}},data(){return{tradeType:"buy",tradeAmount:"",loading:!1,error:null,showSuccessModal:!1,showLoadingModal:!1,loadingStatus:"",successData:{tradeType:"",amount:0,transactionHash:"",blockNumber:0},projectData:null,projectLoading:!0,projectError:null}},computed:{projectCode(){const t=this.code||this.$route.params.code||this.$route.query.code;return console.log("🔍 TradeProjectView: 获取项目代码:",t),t||"RWA001"},connected(){const{connected:t}=jn();return t.value},address(){const{address:t}=jn();return t.value},shortAddress(){const{shortAddress:t}=jn();return t.value},networkLabel(){const{networkLabel:t}=jn();return t.value},canExecuteTrade(){return this.connected&&this.tradeAmount&&parseFloat(this.tradeAmount)>0&&!this.loading}},async mounted(){console.log("🚀 TradeProjectView: 组件挂载，开始初始化..."),await this.loadProjectData(),console.log("✅ TradeProjectView: 组件初始化完成")},watch:{$route(t,e){t.params.code!==e.params.code&&(console.log("🔄 TradeProjectView: 路由参数变化，重新加载数据"),this.loadProjectData())},code:{handler(t){t&&(console.log("🔄 TradeProjectView: Props代码变化，重新加载数据:",t),this.loadProjectData())},immediate:!0}},methods:{async loadProjectData(){try{this.projectLoading=!0,this.projectError=null,console.log("🔄 TradeProjectView: 从数据库加载项目数据...",this.projectCode);const t=await ms.getProductByCode(this.projectCode);if(t.status===0){const e=t.data;console.log("✅ TradeProjectView: 从数据库获取项目数据:",e),this.projectData={id:e.id,code:e.project_code||e.code,name:e.project_name||e.name,subtitle:e.project_summary||e.subtitle,type:e.property_type||e.type,status:e.loan_status||e.status,image:e.image||this.getProductImage(e.project_code||e.code),totalOffering:e.total_offering_token?`AUD$${e.total_offering_token.toLocaleString()}`:"AUD$0",subscribed:e.subscribe_token?`AUD$${e.subscribe_token.toLocaleString()}`:"AUD$0",subscriptionProgress:this.calculateSubscriptionProgress(e),loanAmount:e.loan_amount?`AUD$${e.loan_amount.toLocaleString()}`:"AUD$0",loanTerm:e.loan_term_months?`${e.loan_term_months} months`:"12 months",interestRate:e.interest_rate||e.target_yield||"6.0",propertyType:e.property_type,propertyLocation:e.property_location,propertyValue:e.property_value?`AUD$${e.property_value.toLocaleString()}`:"TBA",metrics:{targetLoanYield:`${e.interest_rate||e.target_yield||"6.0"}% p.a.`,collateralPropertyValue:e.property_value?`AUD$${e.property_value.toLocaleString()}`:"TBA",loanToValue:e.lvr?`${e.lvr}%`:"N/A",defaultRate:e.default_rate?`${e.default_rate}%`:"N/A"},totalOfferingRaw:e.total_offering_token||0,subscribedRaw:e.subscribe_token||0,loanAmountRaw:e.loan_amount||0,propertyValueRaw:e.property_value||0,interest_rate:e.interest_rate,loan_term_months:e.loan_term_months,lvr:e.lvr,default_rate:e.default_rate},console.log("✅ TradeProjectView: 项目数据映射完成:",this.projectData)}else this.projectError=t.message||"获取项目数据失败",console.error("❌ TradeProjectView: API返回错误:",t)}catch(t){this.projectError="网络错误，无法获取项目数据",console.error("❌ TradeProjectView: 获取项目数据失败:",t)}finally{this.projectLoading=!1}},calculateSubscriptionProgress(t){const e=t.total_offering_token||0,s=t.subscribe_token||0;return e===0?"0%":`${(s/e*100).toFixed(2)}%`},getProductImage(t){return{RWA001:"/pics/TYMU.png",RWA002:"/pics/SQNB.png",RWA003:"/pics/LZYT.png",YYD:"/pics/YYD.png",COMP:"/pics/TYMU.png"}[t]||"/pics/TYMU.png"},calculateTotalAmount(){if(!this.tradeAmount||!this.projectData)return"0.00";const t=parseFloat(this.tradeAmount);return isNaN(t)?"0.00":(t*1).toFixed(2)},async executeTrade(){if(this.canExecuteTrade)try{this.loading=!0,this.showLoadingModal=!0,this.loadingStatus="Preparing transaction...",await new Promise(t=>setTimeout(t,2e3)),this.successData={tradeType:this.tradeType,amount:this.tradeAmount,transactionHash:"0x"+Math.random().toString(16).substr(2,64),blockNumber:Math.floor(Math.random()*1e6)+1e6},this.showLoadingModal=!1,this.showSuccessModal=!0,console.log("✅ TradeProjectView: 交易执行成功:",this.successData)}catch(t){this.showLoadingModal=!1,this.error="交易执行失败",console.error("❌ TradeProjectView: 交易执行失败:",t)}finally{this.loading=!1}},closeSuccessModal(){this.showSuccessModal=!1},viewPortfolio(){this.$router.push("/portfolio")},copyHash(){navigator.clipboard.writeText(this.successData.transactionHash)},formatHash(t){return t?`${t.substr(0,6)}...${t.substr(-4)}`:""}}},zL={class:"trade-page"},QL={key:0,class:"modal-overlay"},JL={class:"loading-container"},qL={class:"loading-content"},ZL={class:"loading-status"},XL={class:"success-container"},e5={class:"success-content"},t5={class:"success-details"},s5={class:"detail-card"},n5={class:"detail-grid"},r5={class:"detail-item"},i5={class:"detail-value"},o5={class:"detail-item"},a5={class:"detail-value"},l5={class:"detail-card"},c5={class:"detail-grid"},u5={class:"detail-item"},d5={class:"detail-item"},f5={class:"detail-value"},h5={class:"success-actions"},p5={class:"topbar container"},m5={class:"breadcrumb","aria-label":"Breadcrumb"},g5={class:"crumb-current"},y5={class:"container main-content"},v5={key:0,class:"loading-container"},b5={key:1,class:"error-container"},w5={key:2,class:"project-info-card"},A5={class:"project-header"},E5=["src","alt"],_5={class:"project-details"},P5={class:"project-title"},S5={class:"project-subtitle"},k5={class:"project-meta"},C5={class:"meta-item"},T5={class:"meta-item"},I5={class:"meta-item"},x5={class:"project-metrics"},R5={class:"metric-item"},D5={class:"metric-value"},N5={class:"metric-item"},L5={class:"metric-value",style:{color:"#16a34a"}},O5={class:"metric-item"},U5={class:"metric-value"},B5={class:"metric-item"},M5={class:"metric-value"},F5={class:"metric-item"},V5={class:"metric-value"},j5={class:"metric-item"},$5={class:"metric-value",style:{color:"#3b82f6"}},H5={class:"metric-item"},W5={class:"metric-value"},G5={class:"metric-item"},K5={class:"metric-value"},Y5={class:"metric-item"},z5={class:"metric-value"},Q5={class:"trade-form-card"},J5={class:"form-header"},q5={class:"form-title"},Z5={class:"wallet-status-inline"},X5={class:"wallet-status-item"},eO={key:0,class:"wallet-status-item"},tO={class:"status-value"},sO={key:1,class:"wallet-status-item"},nO={class:"status-value"},rO={class:"trade-form"},iO={class:"form-group"},oO={class:"trade-type-selector"},aO={class:"form-group"},lO={class:"form-group"},cO={class:"amount-display"},uO={class:"amount-value"},dO={class:"form-actions"},fO=["disabled"];function hO(t,e,s,n,r,i){return g(),y("div",zL,[r.showLoadingModal?(g(),y("div",QL,[a("div",{class:"modal-content loading-modal",onClick:e[0]||(e[0]=ue(()=>{},["stop"]))},[a("div",JL,[e[15]||(e[15]=a("div",{class:"loading-icon"},[a("div",{class:"spinner"})],-1)),a("div",qL,[e[13]||(e[13]=a("h2",{class:"loading-title"},"Processing...",-1)),e[14]||(e[14]=a("p",{class:"loading-description"},"We are processing your transaction request, please wait...",-1)),a("div",ZL,[e[12]||(e[12]=a("div",{class:"status-indicator"},null,-1)),a("span",null,m(r.loadingStatus),1)])])])])])):V("",!0),r.showSuccessModal?(g(),y("div",{key:1,class:"modal-overlay",onClick:e[5]||(e[5]=(...o)=>i.closeSuccessModal&&i.closeSuccessModal(...o))},[a("div",{class:"modal-content success-modal",onClick:e[4]||(e[4]=ue(()=>{},["stop"]))},[a("div",XL,[e[24]||(e[24]=a("div",{class:"success-icon"},[a("div",{class:"checkmark"},[a("div",{class:"checkmark-stem"}),a("div",{class:"checkmark-kick"})])],-1)),a("div",e5,[e[22]||(e[22]=a("h2",{class:"success-title"},"Transaction Successful!",-1)),e[23]||(e[23]=a("p",{class:"success-description"},"Your transaction has been completed successfully",-1)),a("div",t5,[a("div",s5,[e[18]||(e[18]=a("div",{class:"detail-header"},[a("span",{class:"detail-label"},"Transaction Details")],-1)),a("div",n5,[a("div",r5,[e[16]||(e[16]=a("span",{class:"detail-key"},"Type:",-1)),a("span",i5,m(r.successData.tradeType==="buy"?"Buy":"Sell"),1)]),a("div",o5,[e[17]||(e[17]=a("span",{class:"detail-key"},"Amount:",-1)),a("span",a5,m(r.successData.amount)+" Tokens",1)])])]),a("div",l5,[e[21]||(e[21]=a("div",{class:"detail-header"},[a("span",{class:"detail-label"},"Blockchain Info")],-1)),a("div",c5,[a("div",u5,[e[19]||(e[19]=a("span",{class:"detail-key"},"Hash:",-1)),a("span",{class:"detail-value hash-value",onClick:e[1]||(e[1]=(...o)=>i.copyHash&&i.copyHash(...o))},m(i.formatHash(r.successData.transactionHash)),1)]),a("div",d5,[e[20]||(e[20]=a("span",{class:"detail-key"},"Block:",-1)),a("span",f5,m(r.successData.blockNumber),1)])])])])]),a("div",h5,[a("button",{class:"btn secondary",onClick:e[2]||(e[2]=(...o)=>i.closeSuccessModal&&i.closeSuccessModal(...o))},"Close"),a("button",{class:"btn primary",onClick:e[3]||(e[3]=(...o)=>i.viewPortfolio&&i.viewPortfolio(...o))},"View Portfolio")])])])])):V("",!0),a("header",p5,[a("nav",m5,[a("button",{class:"crumb-back",onClick:e[6]||(e[6]=o=>t.$router.back()),"aria-label":"Back"},[...e[25]||(e[25]=[a("svg",{viewBox:"0 0 24 24",class:"i"},[a("path",{d:"M10 19a1 1 0 0 1-.7-.3l-7-7a1 1 0 0 1 0-1.4l7-7a1 1 0 1 1 1.4 1.4L4.41 11H21a1 1 0 1 1 0 2H4.41l6.3 6.3A1 1 0 0 1 10 19z"})],-1)])]),e[26]||(e[26]=a("span",{class:"sep"},"/",-1)),e[27]||(e[27]=a("span",{class:"crumb"},"Projects",-1)),e[28]||(e[28]=a("span",{class:"sep"},"/",-1)),a("span",g5,"Trade "+m(i.projectCode),1)])]),a("div",y5,[r.projectLoading?(g(),y("div",v5,[...e[29]||(e[29]=[a("div",{class:"loading-spinner"},null,-1),a("h2",null,"Loading Project Data...",-1),a("p",null,"Please wait while we load the project information.",-1)])])):r.projectError?(g(),y("div",b5,[e[30]||(e[30]=a("div",{class:"error-icon"},"⚠️",-1)),e[31]||(e[31]=a("h2",null,"Failed to Load Project",-1)),a("p",null,m(r.projectError),1),a("button",{class:"btn primary",onClick:e[7]||(e[7]=(...o)=>i.loadProjectData&&i.loadProjectData(...o))},"Retry")])):r.projectData?(g(),y("div",w5,[a("div",A5,[a("img",{src:r.projectData.image,alt:i.projectCode,class:"project-image"},null,8,E5),a("div",_5,[a("h1",P5,m(r.projectData.code)+" • "+m(r.projectData.name),1),a("p",S5,m(r.projectData.subtitle),1),a("div",k5,[a("span",C5,m(r.projectData.type),1),a("span",T5,m(r.projectData.region),1),a("span",I5,m(r.projectData.loanProduct||"Loan Product"),1)])])]),a("div",x5,[a("div",R5,[e[32]||(e[32]=a("span",{class:"metric-label"},"LOAN SIZE",-1)),a("span",D5,m(r.projectData.loanAmount||"AUD$0"),1)]),a("div",N5,[e[33]||(e[33]=a("span",{class:"metric-label"},"EST. YIELD (IRR)",-1)),a("span",L5,m(r.projectData.metrics?.targetLoanYield||"N/A"),1)]),a("div",O5,[e[34]||(e[34]=a("span",{class:"metric-label"},"TERM",-1)),a("span",U5,m(r.projectData.loanTerm||"12 months"),1)]),a("div",B5,[e[35]||(e[35]=a("span",{class:"metric-label"},"PROPERTY VALUE",-1)),a("span",M5,m(r.projectData.metrics?.collateralPropertyValue||"N/A"),1)]),a("div",F5,[e[36]||(e[36]=a("span",{class:"metric-label"},"LTV",-1)),a("span",V5,m(r.projectData.metrics?.loanToValue||"N/A"),1)]),a("div",j5,[e[37]||(e[37]=a("span",{class:"metric-label"},"SUBSCRIPTION PROGRESS",-1)),a("span",$5,m(r.projectData.subscriptionProgress||"0%"),1)]),a("div",H5,[e[38]||(e[38]=a("span",{class:"metric-label"},"TOTAL OFFERING",-1)),a("span",W5,m(r.projectData.totalOffering||"AUD$0"),1)]),a("div",G5,[e[39]||(e[39]=a("span",{class:"metric-label"},"SUBSCRIBED",-1)),a("span",K5,m(r.projectData.subscribed||"AUD$0"),1)]),a("div",Y5,[e[40]||(e[40]=a("span",{class:"metric-label"},"DEFAULT RATE",-1)),a("span",z5,m(r.projectData.metrics?.defaultRate||"N/A"),1)])])])):V("",!0),a("div",Q5,[a("div",J5,[a("h2",q5,"认购 "+m(r.projectData?.code),1),a("div",Z5,[a("div",X5,[e[41]||(e[41]=a("span",{class:"status-label"},"钱包:",-1)),a("span",{class:we(["status-value",i.connected?"connected":"disconnected"])},m(i.connected?"Connected":"Disconnected"),3)]),i.connected?(g(),y("div",eO,[e[42]||(e[42]=a("span",{class:"status-label"},"地址:",-1)),a("span",tO,m(i.shortAddress),1)])):V("",!0),i.connected?(g(),y("div",sO,[e[43]||(e[43]=a("span",{class:"status-label"},"网络:",-1)),a("span",nO,m(i.networkLabel),1)])):V("",!0)])]),a("div",rO,[a("div",iO,[e[44]||(e[44]=a("label",{class:"form-label"},"交易类型",-1)),a("div",oO,[a("button",{class:we(["trade-type-btn",{active:r.tradeType==="buy"}]),onClick:e[8]||(e[8]=o=>r.tradeType="buy")}," Buy ",2),a("button",{class:we(["trade-type-btn",{active:r.tradeType==="sell"}]),onClick:e[9]||(e[9]=o=>r.tradeType="sell")}," Sell ",2)])]),a("div",aO,[e[45]||(e[45]=a("label",{class:"form-label"},"数量 (Tokens)",-1)),Se(a("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>r.tradeAmount=o),type:"number",class:"form-input",placeholder:"输入交易数量",min:"0",step:"0.01"},null,512),[[Ze,r.tradeAmount]])]),a("div",lO,[e[47]||(e[47]=a("label",{class:"form-label"},"总金额",-1)),a("div",cO,[a("span",uO,m(i.calculateTotalAmount()),1),e[46]||(e[46]=a("span",{class:"amount-currency"},"AUD",-1))])]),a("div",dO,[a("button",{class:"btn primary trade-btn",onClick:e[11]||(e[11]=(...o)=>i.executeTrade&&i.executeTrade(...o)),disabled:!i.canExecuteTrade},m(r.tradeType==="buy"?"Buy Tokens":"Sell Tokens"),9,fO)])])])])])}const pO=Tt(YL,[["render",hO],["__scopeId","data-v-701212c7"]]),mO={name:"TokenDetailView",props:{address:{type:String,required:!0}},setup(t){const{chainId:e,networkLabel:s}=jn(),n=fe(""),r=fe(""),i=fe(null),o=fe(!1),l=new As(window.ethereum,"any"),c=["function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)"];ci(async()=>{try{const P=new Wt(t.address,c,l);i.value=await P.decimals(),n.value=await P.symbol(),r.value=await P.name()}catch{}try{const P=sessionStorage.getItem(`customTokens:${e.value}`),w=P?JSON.parse(P):[],k=Array.isArray(w)?w.find(T=>(T.address||"").toLowerCase()===t.address.toLowerCase()):null;k&&k.addedAt&&(h.value=new Date(k.addedAt).toLocaleString(),p.value=k.source||"ImportFromUs")}catch{}});function u(){const P=Number(e.value),w=P===1?"https://etherscan.io":P===11155111?"https://sepolia.etherscan.io":"",k=w?`${w}/token/${t.address}`:`https://etherscan.io/token/${t.address}`;window.open(k,"_blank")}function d(){try{const P=`hiddenTokens:${e.value}`,w=sessionStorage.getItem(P),k=w?JSON.parse(w):[],T=new Set((Array.isArray(k)?k:[]).map(N=>String(N).toLowerCase()));T.add(t.address.toLowerCase()),sessionStorage.setItem(P,JSON.stringify(Array.from(T))),alert("Hidden successfully"),window.history.back()}catch{alert("Hide failed")}}function f(){try{const P=`customTokens:${e.value}`,w=sessionStorage.getItem(P),k=w?JSON.parse(w):[],T=Array.isArray(k)?k.filter(N=>(N.address||"").toLowerCase()!==t.address.toLowerCase()):[];sessionStorage.setItem(P,JSON.stringify(T)),alert("Deleted from custom tokens"),window.history.back()}catch{alert("Delete failed")}}const h=fe(""),p=fe("");return{networkLabel:s,address:t.address,symbol:n,name:r,decimals:i,importDate:h,importSource:p,menuOpen:o,openInExplorer:u,hideToken:d,deleteToken:f}}},gO={class:"container"},yO={class:"td-top"},vO={class:"td-actions"},bO={key:0,class:"td-menu"},wO={class:"td-grid"},AO={class:"card"},EO={class:"kv"},_O={class:"v"},PO={class:"kv"},SO={class:"v addr"},kO={class:"kv"},CO={class:"v"},TO={class:"kv"},IO={class:"v"},xO={class:"kv"},RO={class:"v"};function DO(t,e,s,n,r,i){return g(),y("section",gO,[a("header",yO,[e[4]||(e[4]=a("h1",{class:"headline"},"Token details",-1)),a("div",vO,[a("button",{class:"btn",onClick:e[0]||(e[0]=o=>n.menuOpen=!n.menuOpen)},"⋮"),n.menuOpen?(g(),y("div",bO,[a("button",{class:"td-item",onClick:e[1]||(e[1]=(...o)=>n.openInExplorer&&n.openInExplorer(...o))},"View Asset in explorer"),a("button",{class:"td-item",onClick:e[2]||(e[2]=(...o)=>n.hideToken&&n.hideToken(...o))},"Hide "+m(n.symbol),1),a("button",{class:"td-item danger",onClick:e[3]||(e[3]=(...o)=>n.deleteToken&&n.deleteToken(...o))},"Delete from my wallet")])):V("",!0)])]),a("div",wO,[a("article",AO,[e[10]||(e[10]=a("h3",null,"Overview",-1)),a("div",EO,[e[5]||(e[5]=a("span",{class:"k"},"Network name",-1)),a("span",_O,m(n.networkLabel),1)]),a("div",PO,[e[6]||(e[6]=a("span",{class:"k"},"Contract address",-1)),a("span",SO,m(n.address),1)]),a("div",kO,[e[7]||(e[7]=a("span",{class:"k"},"Token decimal",-1)),a("span",CO,m(n.decimals??"-"),1)]),e[11]||(e[11]=a("div",{class:"kv"},[a("span",{class:"k"},"Spending caps"),a("span",{class:"v"},"—")],-1)),a("div",TO,[e[8]||(e[8]=a("span",{class:"k"},"Token import date",-1)),a("span",IO,m(n.importDate||"-"),1)]),a("div",xO,[e[9]||(e[9]=a("span",{class:"k"},"Token import source",-1)),a("span",RO,m(n.importSource||"metamask"),1)])]),e[12]||(e[12]=a("article",{class:"card"},[a("h3",null,"Your activity"),a("p",{class:"muted"},"Activity list placeholder.")],-1))])])}const NO=Tt(mO,[["render",DO],["__scopeId","data-v-28606b53"]]),LO={name:"OverviewView"},OO={class:"container"};function UO(t,e,s,n,r,i){return g(),y("div",OO,[...e[0]||(e[0]=[Dt('<div class="page-header" data-v-1a3591db><h1 data-v-1a3591db>Product Overview</h1><p class="page-subtitle" data-v-1a3591db>Know our real estate tokenization investment platform</p></div><div class="overview-content" data-v-1a3591db><div class="feature-grid" data-v-1a3591db><div class="feature-card" data-v-1a3591db><div class="feature-icon" data-v-1a3591db>🏠</div><h3 data-v-1a3591db>Real Estate Tokenization</h3><p data-v-1a3591db>Convert traditional real estate investments into tradable digital tokens, reducing investment门槛, and improving liquidity.</p></div><div class="feature-card" data-v-1a3591db><div class="feature-icon" data-v-1a3591db>💰</div><h3 data-v-1a3591db>Stable Income</h3><p data-v-1a3591db>Based on high-quality real estate mortgage loans, providing stable rental income and capital appreciation potential.</p></div><div class="feature-card" data-v-1a3591db><div class="feature-icon" data-v-1a3591db>🔒</div><h3 data-v-1a3591db>Secure and Transparent</h3><p data-v-1a3591db>Based on blockchain technology, all transaction records are transparent and smart contracts are automatically executed.</p></div><div class="feature-card" data-v-1a3591db><div class="feature-icon" data-v-1a3591db>📊</div><h3 data-v-1a3591db>Real-Time Data</h3><p data-v-1a3591db>Provide real-time market data, project information and investment performance, helping you make wise decisions.</p></div></div><div class="stats-section" data-v-1a3591db><h2 data-v-1a3591db>Platform Data</h2><div class="stats-grid" data-v-1a3591db><div class="stat-item" data-v-1a3591db><div class="stat-number" data-v-1a3591db>$50M+</div><div class="stat-label" data-v-1a3591db>Managed Assets</div></div><div class="stat-item" data-v-1a3591db><div class="stat-number" data-v-1a3591db>1,200+</div><div class="stat-label" data-v-1a3591db>Active Investors</div></div><div class="stat-item" data-v-1a3591db><div class="stat-number" data-v-1a3591db>25+</div><div class="stat-label" data-v-1a3591db>Investment Projects</div></div><div class="stat-item" data-v-1a3591db><div class="stat-number" data-v-1a3591db>6.5%</div><div class="stat-label" data-v-1a3591db>Average Annual Return</div></div></div></div></div>',2)])])}const BO=Tt(LO,[["render",UO],["__scopeId","data-v-1a3591db"]]),MO={name:"AboutUsView"},FO={class:"container"};function VO(t,e,s,n,r,i){return g(),y("div",FO,[...e[0]||(e[0]=[Dt('<div class="page-header" data-v-26dedfb2><h1 data-v-26dedfb2>About Us</h1><p class="page-subtitle" data-v-26dedfb2>Innovative technology company dedicated to revolutionizing real estate investment</p></div><div class="about-content" data-v-26dedfb2><div class="background-vision-section" data-v-26dedfb2><h2 data-v-26dedfb2>Background</h2><div class="vision-text" data-v-26dedfb2><p class="vision-intro" data-v-26dedfb2><strong data-v-26dedfb2>RWAT dealmaker</strong> (stand for Real World Assets Tokenization deal maker) is the creator of the real world assets tokenization project, meaning that this platform is committed to protecting the investment safety of RWAT investors, organizing legally compliant, low-risk, high-return and high-quality asset. For example, residential mortgage loans with a mortgage rate of less than 70% and a rate of approximately 9% in Australia. This platform aims to promote the transaction between investors and asset holders. </p><p class="vision-intro" data-v-26dedfb2> The underlying assets displayed on this platform are protected by the laws of the country where they are located, and the funds can freely enter and exit that country. If investors require, the project transaction structure can be isolated and entrusted by a third-party institution to hold the underlying assets and funds. </p><p class="vision-intro" data-v-26dedfb2> In addition to facilitating transactions between investors and RWAT underlying asset holders, this platform can also integrate the cooperation of all institutions in the RWA tokenization chain, including professional RWA tokenization technology service companies and licensed issuers and exchanges of RWAT in various countries, to achieve the successful issuance of RWA tokenization legally, efficiently, at low cost, and publicly or privately. </p></div></div><div class="mission-section" data-v-26dedfb2><div class="mission-text" data-v-26dedfb2><h2 data-v-26dedfb2>Our Mission</h2><p data-v-26dedfb2>We are committed to revolutionizing traditional real estate investment through blockchain technology, allowing everyone to participate in high-quality real estate investment, and share the growth红利 of the real estate market.</p><p data-v-26dedfb2>Through tokenization technology, we will break down traditional real estate investment that requires a large amount of capital into small, tradable units, allowing ordinary investors to enjoy stable returns from real estate investment.</p></div><div class="mission-image" data-v-26dedfb2><div class="image-placeholder" data-v-26dedfb2>🏢</div></div></div><div class="values-section" data-v-26dedfb2><h2 data-v-26dedfb2>Core Values</h2><div class="values-grid" data-v-26dedfb2><div class="value-card" data-v-26dedfb2><div class="value-icon" data-v-26dedfb2>🔒</div><h3 data-v-26dedfb2>Security First</h3><p data-v-26dedfb2>Use the most advanced encryption technology and multiple security measures to ensure the security of user assets and transactions.</p></div><div class="value-card" data-v-26dedfb2><div class="value-icon" data-v-26dedfb2>🌐</div><h3 data-v-26dedfb2>Transparent and Open</h3><p data-v-26dedfb2>All transaction records are stored on the chain, project information is completely transparent, allowing investors to invest clearly and clearly.</p></div><div class="value-card" data-v-26dedfb2><div class="value-icon" data-v-26dedfb2>🚀</div><h3 data-v-26dedfb2>Continuous Innovation</h3><p data-v-26dedfb2>Continuously explore new technologies, optimize user experience, and provide better services for investors.</p></div><div class="value-card" data-v-26dedfb2><div class="value-icon" data-v-26dedfb2>🤝</div><h3 data-v-26dedfb2>User-Centered</h3><p data-v-26dedfb2>Provide professional,贴心 services, helping users achieve wealth增值。</p></div></div></div><div class="team-section" data-v-26dedfb2><h2 data-v-26dedfb2>Core Team</h2><div class="team-grid" data-v-26dedfb2><div class="team-member" data-v-26dedfb2><div class="member-avatar" data-v-26dedfb2>👨‍💼</div><h4 data-v-26dedfb2>张明</h4><p class="member-title" data-v-26dedfb2></p><p class="member-bio" data-v-26dedfb2>拥有15年金融科技经验，曾在多家知名金融机构担任高管职务。</p></div><div class="team-member" data-v-26dedfb2><div class="member-avatar" data-v-26dedfb2>👩‍💻</div><h4 data-v-26dedfb2>李华</h4><p class="member-title" data-v-26dedfb2>CFO</p><p class="member-bio" data-v-26dedfb2>区块链技术专家，在分布式系统和智能合约开发方面有丰富经验。</p></div><div class="team-member" data-v-26dedfb2><div class="member-avatar" data-v-26dedfb2>👨‍💼</div><h4 data-v-26dedfb2>王强</h4><p class="member-title" data-v-26dedfb2>CMO</p><p class="member-bio" data-v-26dedfb2>房地产行业资深专家，对市场趋势和投资机会有深刻洞察。</p></div></div></div><div class="stats-section" data-v-26dedfb2><h2 data-v-26dedfb2>Company Data</h2><div class="stats-grid" data-v-26dedfb2><div class="stat-item" data-v-26dedfb2><div class="stat-number" data-v-26dedfb2>2023</div><div class="stat-label" data-v-26dedfb2>Year of Establishment</div></div><div class="stat-item" data-v-26dedfb2><div class="stat-number" data-v-26dedfb2>50+</div><div class="stat-label" data-v-26dedfb2>Team Members</div></div><div class="stat-item" data-v-26dedfb2><div class="stat-number" data-v-26dedfb2>$50M+</div><div class="stat-label" data-v-26dedfb2>Managed Assets</div></div><div class="stat-item" data-v-26dedfb2><div class="stat-number" data-v-26dedfb2>1,200+</div><div class="stat-label" data-v-26dedfb2>Active Users</div></div></div></div></div>',2)])])}const jO=Tt(MO,[["render",VO],["__scopeId","data-v-26dedfb2"]]),$O=nS({history:DP(),routes:[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:pg},{path:"/wallet",name:"wallet",component:Ng},{path:"/portfolio",name:"portfolio",component:Tg},{path:"/listedprojects",name:"listedprojects",component:kc},{path:"/listedprojects/:code",name:"listedProjectDetail",component:kc,props:!0},{path:"/to-be-listed",name:"toBeListed",component:Wf},{path:"/to-be-listed/:code",name:"toBeListedDetail",component:Wf,props:!0},{path:"/admin-projects",name:"adminProjects",component:AL},{path:"/contact",name:"contact",component:KL},{path:"/detail/:code?",name:"detail",component:Og,props:!0},{path:"/token/:address",name:"tokenDetail",component:NO,props:!0},{path:"/profile",name:"profile",component:Dg},{path:"/login",name:"login",component:Ig},{path:"/signup",name:"signup",component:xg},{path:"/trade/:code",name:"tradeProject",component:pO,props:!0},{path:"/kycService",component:Lg},{path:"/overview",name:"overview",component:BO},{path:"/about",name:"about",component:jO}]});gv(V3).use($O).mount("#app");
