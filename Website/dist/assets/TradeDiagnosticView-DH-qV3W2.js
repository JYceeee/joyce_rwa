import{_ as ss,u as ts,r as v,C as R,c as b,o as es,b as p,d as _,e as s,n as u,t as a,f as F,j as k,g as as,h as ns,F as H,i as O,k as A}from"./index-O3xP0FB3.js";const ls={class:"trade-diagnostic"},os={class:"diagnostic-overview"},is={class:"status-grid"},cs={class:"status-icon"},us={class:"status-text"},rs={class:"status-icon"},ds={class:"status-text"},vs={class:"status-icon"},gs={class:"status-text"},ms={class:"status-icon"},fs={class:"status-text"},bs={class:"diagnostic-details"},ps={class:"diagnostic-section"},_s={class:"info-grid"},hs={class:"info-item"},ks={class:"info-item"},ws={class:"info-item"},ys={class:"info-item"},Cs={class:"action-buttons"},Ts=["disabled"],Ss={class:"diagnostic-section"},xs={class:"info-grid"},Ds={class:"info-item"},Es={class:"info-item"},Is={class:"info-item"},Rs={class:"info-item"},As={class:"diagnostic-section"},Ns={class:"info-grid"},$s={class:"info-item"},Bs={class:"info-item"},Ls={class:"info-item"},Fs={class:"diagnostic-section"},Hs={class:"test-form"},Os={class:"form-group"},Us={class:"action-buttons"},Vs=["disabled"],js=["disabled"],Ms={key:0,class:"diagnostic-section"},Ws={class:"error-logs"},Ks={class:"error-time"},Ys={class:"error-message"},zs={key:1,class:"diagnostic-section"},Gs={class:"suggestions"},qs={class:"suggestion-text"},Js={__name:"TradeDiagnosticView",setup(Ps){const{connected:i,address:N,chainId:r,networkLabel:$,nativeBalance:B,connect:U,refreshTokens:V}=ts(),g=v(1),d=v([]),l=v([]),m=v(R.TRADE_CONTRACT_ADDRESS),w=v(R.KYC_REGISTRY_ADDRESS),o=v(R.NETWORK),y=v("0"),j=v("0"),S=b(()=>i.value?{class:"success",icon:"âœ…",message:"é’±åŒ…å·²è¿æ¥"}:{class:"error",icon:"âŒ",message:"é’±åŒ…æœªè¿æ¥"}),x=b(()=>m.value&&m.value!=="0x..."?{class:"success",icon:"âœ…",message:"åˆçº¦å·²é…ç½®"}:{class:"error",icon:"âŒ",message:"åˆçº¦æœªé…ç½®"}),D=b(()=>r.value===o.value.chainId?{class:"success",icon:"âœ…",message:"ç½‘ç»œåŒ¹é…"}:r.value?{class:"warning",icon:"âš ï¸",message:"ç½‘ç»œä¸åŒ¹é…"}:{class:"error",icon:"âŒ",message:"ç½‘ç»œæœªè¿æ¥"}),E=b(()=>{const e=parseFloat(y.value);return e>.01?{class:"success",icon:"âœ…",message:"ä½™é¢å……è¶³"}:e>0?{class:"warning",icon:"âš ï¸",message:"ä½™é¢ä¸è¶³"}:{class:"error",icon:"âŒ",message:"æ— ä½™é¢"}}),h=b(()=>m.value&&m.value!=="0x..."&&w.value&&w.value!=="0x..."),C=b(()=>parseFloat(y.value)>.01),L=b(()=>i.value&&h.value&&r.value===o.value.chainId&&g.value>0),M=async()=>{try{await U(),await T()}catch(e){n("è¿æ¥é’±åŒ…å¤±è´¥: "+e.message)}},T=async()=>{try{i.value&&B.value&&(y.value=(Number(B.value)/1e18).toFixed(4)),await V(),I()}catch(e){n("åˆ·æ–°é’±åŒ…çŠ¶æ€å¤±è´¥: "+e.message)}},W=()=>{window.open("/test/config","_blank")},K=async()=>{try{await A.initialize(),n("åˆçº¦è¿æ¥æµ‹è¯•: æˆåŠŸ")}catch(e){n("åˆçº¦è¿æ¥æµ‹è¯•å¤±è´¥: "+e.message)}},Y=async()=>{await T()},z=()=>{const t={11155111:"https://sepoliafaucet.com/",5:"https://goerlifaucet.com/",80001:"https://faucet.polygon.technology/"}[o.value.chainId];t?(window.open(t,"_blank"),n(`å·²æ‰“å¼€æµ‹è¯•ç½‘æ°´é¾™å¤´: ${t}`)):n("å½“å‰ç½‘ç»œä¸æ”¯æŒæµ‹è¯•ç½‘æ°´é¾™å¤´")},G=async()=>{try{n(`å¼€å§‹æµ‹è¯•ä¹°å…¥ ${g.value} ä¸ªä»£å¸...`);const e=await A.buyTokens(g.value);e.success?n(`æµ‹è¯•ä¹°å…¥æˆåŠŸ: ${e.transactionHash}`):n(`æµ‹è¯•ä¹°å…¥å¤±è´¥: ${e.error}`)}catch(e){n("æµ‹è¯•ä¹°å…¥å¼‚å¸¸: "+e.message)}},q=async()=>{try{n(`å¼€å§‹æµ‹è¯•å–å‡º ${g.value} ä¸ªä»£å¸...`);const e=await A.sellTokens(g.value);e.success?n(`æµ‹è¯•å–å‡ºæˆåŠŸ: ${e.transactionHash}`):n(`æµ‹è¯•å–å‡ºå¤±è´¥: ${e.error}`)}catch(e){n("æµ‹è¯•å–å‡ºå¼‚å¸¸: "+e.message)}},J=async()=>{n("å¼€å§‹è¿è¡Œå®Œæ•´è¯Šæ–­..."),i.value||n("é—®é¢˜: é’±åŒ…æœªè¿æ¥"),h.value||n("é—®é¢˜: åˆçº¦åœ°å€æœªé…ç½®"),r.value!==o.value.chainId&&n(`é—®é¢˜: ç½‘ç»œä¸åŒ¹é… (å½“å‰: ${r.value}, ç›®æ ‡: ${o.value.chainId})`),C.value||n("é—®é¢˜: ETHä½™é¢ä¸è¶³"),n("å®Œæ•´è¯Šæ–­å®Œæˆ"),I()},I=()=>{l.value=[],i.value||l.value.push("è¯·å…ˆè¿æ¥MetaMaské’±åŒ…"),h.value||l.value.push("è¯·é…ç½®æ™ºèƒ½åˆçº¦åœ°å€ (/test/config)"),r.value!==o.value.chainId&&l.value.push(`è¯·åˆ‡æ¢åˆ° ${o.value.name} ç½‘ç»œ`),C.value||l.value.push("è¯·ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ETHä½™é¢"),l.value.length===0&&l.value.push("æ‰€æœ‰æ£€æŸ¥éƒ½é€šè¿‡ï¼Œäº¤æ˜“åŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œ")},n=e=>{d.value.unshift({timestamp:Date.now(),message:e}),d.value.length>20&&(d.value=d.value.slice(0,20))},P=()=>{d.value=[]},Q=()=>{const e={timestamp:new Date().toISOString(),wallet:{connected:i.value,address:N.value,chainId:r.value,network:$.value,balance:y.value},contract:{tradeAddress:m.value,kycAddress:w.value,targetNetwork:o.value,configValid:h.value},errors:d.value,suggestions:l.value},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),c=URL.createObjectURL(t),f=document.createElement("a");f.href=c,f.download=`trade-diagnostic-${Date.now()}.json`,f.click(),URL.revokeObjectURL(c)},X=()=>{confirm("ç¡®å®šè¦é‡ç½®æ‰€æœ‰è®¾ç½®å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰é…ç½®å’Œæ—¥å¿—ã€‚")&&(localStorage.clear(),location.reload())},Z=e=>new Date(e).toLocaleTimeString();return es(()=>{T(),I()}),(e,t)=>(_(),p("div",ls,[t[27]||(t[27]=s("h1",null,"ğŸ” äº¤æ˜“åŠŸèƒ½è¯Šæ–­",-1)),s("div",os,[t[5]||(t[5]=s("h2",null,"ğŸ“Š è¯Šæ–­æ¦‚è§ˆ",-1)),s("div",is,[s("div",{class:u(["status-item",S.value.class])},[s("div",cs,a(S.value.icon),1),s("div",us,[t[1]||(t[1]=s("h3",null,"é’±åŒ…è¿æ¥",-1)),s("p",null,a(S.value.message),1)])],2),s("div",{class:u(["status-item",x.value.class])},[s("div",rs,a(x.value.icon),1),s("div",ds,[t[2]||(t[2]=s("h3",null,"åˆçº¦é…ç½®",-1)),s("p",null,a(x.value.message),1)])],2),s("div",{class:u(["status-item",D.value.class])},[s("div",vs,a(D.value.icon),1),s("div",gs,[t[3]||(t[3]=s("h3",null,"ç½‘ç»œè¿æ¥",-1)),s("p",null,a(D.value.message),1)])],2),s("div",{class:u(["status-item",E.value.class])},[s("div",ms,a(E.value.icon),1),s("div",fs,[t[4]||(t[4]=s("h3",null,"è´¦æˆ·ä½™é¢",-1)),s("p",null,a(E.value.message),1)])],2)])]),s("div",bs,[t[25]||(t[25]=s("h2",null,"ğŸ”§ è¯¦ç»†è¯Šæ–­",-1)),s("div",ps,[t[10]||(t[10]=s("h3",null,"ğŸ’° é’±åŒ…çŠ¶æ€",-1)),s("div",_s,[s("div",hs,[t[6]||(t[6]=s("label",null,"è¿æ¥çŠ¶æ€:",-1)),s("span",{class:u(k(i)?"success":"error")},a(k(i)?"å·²è¿æ¥":"æœªè¿æ¥"),3)]),s("div",ks,[t[7]||(t[7]=s("label",null,"é’±åŒ…åœ°å€:",-1)),s("span",null,a(k(N)||"æœªè¿æ¥"),1)]),s("div",ws,[t[8]||(t[8]=s("label",null,"ç½‘ç»œID:",-1)),s("span",null,a(k(r)||"æœªçŸ¥"),1)]),s("div",ys,[t[9]||(t[9]=s("label",null,"ç½‘ç»œåç§°:",-1)),s("span",null,a(k($)||"æœªçŸ¥"),1)])]),s("div",Cs,[s("button",{onClick:M,disabled:k(i),class:"btn primary"}," è¿æ¥é’±åŒ… ",8,Ts),s("button",{onClick:T,class:"btn secondary"}," åˆ·æ–°çŠ¶æ€ ")])]),s("div",Ss,[t[15]||(t[15]=s("h3",null,"ğŸ“‹ åˆçº¦é…ç½®",-1)),s("div",xs,[s("div",Ds,[t[11]||(t[11]=s("label",null,"äº¤æ˜“åˆçº¦åœ°å€:",-1)),s("span",{class:u(m.value?"success":"error")},a(m.value||"æœªé…ç½®"),3)]),s("div",Es,[t[12]||(t[12]=s("label",null,"KYCåˆçº¦åœ°å€:",-1)),s("span",{class:u(w.value?"success":"error")},a(w.value||"æœªé…ç½®"),3)]),s("div",Is,[t[13]||(t[13]=s("label",null,"ç›®æ ‡ç½‘ç»œ:",-1)),s("span",null,a(o.value.name)+" ("+a(o.value.chainId)+")",1)]),s("div",Rs,[t[14]||(t[14]=s("label",null,"é…ç½®çŠ¶æ€:",-1)),s("span",{class:u(h.value?"success":"error")},a(h.value?"é…ç½®å®Œæ•´":"é…ç½®ä¸å®Œæ•´"),3)])]),s("div",{class:"action-buttons"},[s("button",{onClick:W,class:"btn primary"}," é…ç½®åˆçº¦åœ°å€ "),s("button",{onClick:K,class:"btn secondary"}," æµ‹è¯•åˆçº¦è¿æ¥ ")])]),s("div",As,[t[19]||(t[19]=s("h3",null,"ğŸ’³ è´¦æˆ·ä½™é¢",-1)),s("div",Ns,[s("div",$s,[t[16]||(t[16]=s("label",null,"ETHä½™é¢:",-1)),s("span",null,a(y.value||"0")+" ETH",1)]),s("div",Bs,[t[17]||(t[17]=s("label",null,"ä»£å¸ä½™é¢:",-1)),s("span",null,a(j.value||"0")+" ä»£å¸",1)]),s("div",Ls,[t[18]||(t[18]=s("label",null,"ä½™é¢çŠ¶æ€:",-1)),s("span",{class:u(C.value?"success":"warning")},a(C.value?"ä½™é¢å……è¶³":"ä½™é¢ä¸è¶³"),3)])]),s("div",{class:"action-buttons"},[s("button",{onClick:Y,class:"btn secondary"}," åˆ·æ–°ä½™é¢ "),s("button",{onClick:z,class:"btn warning"}," è·å–æµ‹è¯•ETH ")])]),s("div",Fs,[t[21]||(t[21]=s("h3",null,"ğŸ§ª äº¤æ˜“æµ‹è¯•",-1)),s("div",Hs,[s("div",Os,[t[20]||(t[20]=s("label",null,"æµ‹è¯•äº¤æ˜“æ•°é‡:",-1)),as(s("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>g.value=c),type:"number",placeholder:"è¾“å…¥æµ‹è¯•æ•°é‡"},null,512),[[ns,g.value]])]),s("div",Us,[s("button",{onClick:G,disabled:!L.value,class:"btn primary"}," æµ‹è¯•ä¹°å…¥ ",8,Vs),s("button",{onClick:q,disabled:!L.value,class:"btn secondary"}," æµ‹è¯•å–å‡º ",8,js)])])]),d.value.length>0?(_(),p("div",Ms,[t[22]||(t[22]=s("h3",null,"âŒ é”™è¯¯æ—¥å¿—",-1)),s("div",Ws,[(_(!0),p(H,null,O(d.value,(c,f)=>(_(),p("div",{key:f,class:"error-log"},[s("div",Ks,a(Z(c.timestamp)),1),s("div",Ys,a(c.message),1)]))),128))]),s("button",{onClick:P,class:"btn secondary"}," æ¸…é™¤æ—¥å¿— ")])):F("",!0),l.value.length>0?(_(),p("div",zs,[t[24]||(t[24]=s("h3",null,"ğŸ’¡ ä¿®å¤å»ºè®®",-1)),s("div",Gs,[(_(!0),p(H,null,O(l.value,(c,f)=>(_(),p("div",{key:f,class:"suggestion"},[t[23]||(t[23]=s("div",{class:"suggestion-icon"},"ğŸ’¡",-1)),s("div",qs,a(c),1)]))),128))])])):F("",!0)]),s("div",{class:"quick-actions"},[t[26]||(t[26]=s("h2",null,"âš¡ å¿«é€Ÿæ“ä½œ",-1)),s("div",{class:"action-buttons"},[s("button",{onClick:J,class:"btn primary"}," è¿è¡Œå®Œæ•´è¯Šæ–­ "),s("button",{onClick:Q,class:"btn secondary"}," å¯¼å‡ºè¯Šæ–­æŠ¥å‘Š "),s("button",{onClick:X,class:"btn warning"}," é‡ç½®æ‰€æœ‰è®¾ç½® ")])])]))}},Xs=ss(Js,[["__scopeId","data-v-5789df3c"]]);export{Xs as default};
